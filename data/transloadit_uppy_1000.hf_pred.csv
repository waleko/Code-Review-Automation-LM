,code,target,prediction
0,"@@ -0,0 +1,10 @@
+const createSuperFocus = require('./createSuperFocus')
+
+describe('createSuperFocus', () => {
+  // superFocus.cancel() is used in dashboard
+  it('should return a function that can be cancelled', () => {","Confused, sorry, but where is `superFocus.cancel()` defined?",I think we can remove this file
1,"@@ -0,0 +1,104 @@
+---
+type: docs
+order: 10
+title: ""Robodog""
+menu: ""Introduction""
+module: ""@uppy/robodog""
+permalink: docs/robodog/
+---
+
+[Transloadit][transloadit] is a service that helps you handle file uploads, resize, crop and watermark your images, make GIFs, transcode your videos, extract thumbnails, generate audio waveforms, and so much more. In short, [Transloadit][transloadit] is the Swiss Army Knife for your files.
+
+Robodog is an Uppy-based library that helps you talk to the Transloadit API. It includes a modal UI file picker with support for imports from third-party services, integration with HTML forms, and more. Because it's based on Uppy, you can add any existing Uppy plugin to add more functionality.
+
+## Install
+
+Robodog can be downloaded from npm:
+
+```shell
+npm install --save @uppy/robodog
+```
+
+Then, with a bundler such as [webpack][webpack] or [Browserify][browserify], do:
+
+```js
+const transloadit = require('@uppy/robodog')
+```
+
+If you are not using a bundler, you can also import the Robodog using an HTML script tag.
+
+```html
+<link rel=""stylesheet"" href=""https://transloadit.edgly.net/releases/robodog/v1.0.0/dist/style.min.css"">
+<script src=""https://transloadit.edgly.net/releases/robodog/v1.0.0/dist/transloadit.min.js""></script>
+```
+
+## Methods
+
+Robodog has several methods for different use cases.
+
+If you want to have a modal UI that users can use to select files from their local device or from third party sources like Instagram, use the [File Picker API](#File-Picker). This can be used for one-off uploads _outside_ an HTML form, like profile avatars or images to embed in a blog post.
+
+If you already have an HTML form, you can use the [Form API](#Form) to add Transloadit's encoding capabilities to it. Files will be uploaded to Transloadit, and the form will submit JSON information about the files and encoding results. You can also optionally show upload progress using Uppy's Status Bar UI, or even use the advanced Dashboard UI so users can import files from third party sources as well.
+
+Finally, you can use the [Programmatic Upload API](#Programmatic-Uploads) with your custom UI implementation.
+
+And if any of these methods are not flexible enough, you can always replace them with a custom Uppy setup using the [Transloadit Plugin](/docs/transloadit) instead!
+
+## File Picker
+
+Show a modal UI that allows users to pick files from their device and from the web. It uploads files to Transloadit for processing.
+
+```js
+const resultPromise = transloadit.pick('body', {
+  params: {",This was changed so that `target` is now part of the `opts` object?,I think this should be `[Transl
2,"@@ -0,0 +1,104 @@
+---
+type: docs
+order: 10
+title: ""Robodog""
+menu: ""Introduction""
+module: ""@uppy/robodog""
+permalink: docs/robodog/
+---
+
+[Transloadit][transloadit] is a service that helps you handle file uploads, resize, crop and watermark your images, make GIFs, transcode your videos, extract thumbnails, generate audio waveforms, and so much more. In short, [Transloadit][transloadit] is the Swiss Army Knife for your files.
+
+Robodog is an Uppy-based library that helps you talk to the Transloadit API. It includes a modal UI file picker with support for imports from third-party services, integration with HTML forms, and more. Because it's based on Uppy, you can add any existing Uppy plugin to add more functionality.
+
+## Install
+
+Robodog can be downloaded from npm:
+
+```shell
+npm install --save @uppy/robodog
+```
+
+Then, with a bundler such as [webpack][webpack] or [Browserify][browserify], do:
+
+```js
+const transloadit = require('@uppy/robodog')
+```
+
+If you are not using a bundler, you can also import the Robodog using an HTML script tag.
+
+```html
+<link rel=""stylesheet"" href=""https://transloadit.edgly.net/releases/robodog/v1.0.0/dist/style.min.css"">
+<script src=""https://transloadit.edgly.net/releases/robodog/v1.0.0/dist/transloadit.min.js""></script>
+```
+
+## Methods
+
+Robodog has several methods for different use cases.
+
+If you want to have a modal UI that users can use to select files from their local device or from third party sources like Instagram, use the [File Picker API](#File-Picker). This can be used for one-off uploads _outside_ an HTML form, like profile avatars or images to embed in a blog post.
+
+If you already have an HTML form, you can use the [Form API](#Form) to add Transloadit's encoding capabilities to it. Files will be uploaded to Transloadit, and the form will submit JSON information about the files and encoding results. You can also optionally show upload progress using Uppy's Status Bar UI, or even use the advanced Dashboard UI so users can import files from third party sources as well.
+
+Finally, you can use the [Programmatic Upload API](#Programmatic-Uploads) with your custom UI implementation.
+
+And if any of these methods are not flexible enough, you can always replace them with a custom Uppy setup using the [Transloadit Plugin](/docs/transloadit) instead!
+
+## File Picker
+
+Show a modal UI that allows users to pick files from their device and from the web. It uploads files to Transloadit for processing.
+
+```js
+const resultPromise = transloadit.pick('body', {
+  params: {
+    auth: { key: '' },
+    template_id: ''
+  }
+})
+```
+
+**ADD IMAGE OR GIF HERE**
+
+<a class=""MoreButton"" href=""/docs/robodog/picker"">View Documentation</a>
+
+## Form
+
+Add resumable uploads and Transloadit's processing to your existing HTML upload forms. Selected files will be uploaded to Transloadit, and the Assembly information will be submitted to your form endpoint.
+
+```html
+<form id=""myForm"" method=""POST"" action=""/upload"">
+  <input type=""file"" multiple>
+  <!-- Will be inserted by `transloadit.form()`: -->
+  <!-- <input type=""hidden"" name=""transloadit"" value=""{...json...}""> -->
+  <button type=""submit"">Upload</button>
+</form>
+<script>
+transloadit.form('form#myForm', {
+  params: {
+    auth: { key: '' },
+    template_id: ''
+  }
+})
+</script>
+```
+
+<a class=""MoreButton"" href=""/docs/robodog/form"">View Documentation</a>
+
+## Programmatic Uploads
+
+Upload files straight to Transloadit from your own custom UI. Give us an array of files, and we'll give you an array of results!
+
+```js
+const resultPromise = transloadit.upload(files, {
+  params: {
+    auth: { key: '' },
+    template_id: ''
+  }
+})",Nitpick: maybe adding `.then()` with `console.log` would be helpful too?,I think this should be `[Transl
3,"@@ -0,0 +1,104 @@
+@import './FilePreviewAndLink/index.scss';
+@import './FileProgress/index.scss';
+@import './FileInfo/index.scss';
+@import './Buttons/index.scss';
+
+.uppy-DashboardItem {
+  // @media only mobile
+  .uppy-Dashboard:not(.uppy-size--md) & {
+    display: flex;
+    align-items: center;
+    border-bottom: 1px solid $gray-200;
+    padding: 10px;
+    padding-right: 0;
+  }
+  // @media bigger than .md
+  $rl-margin: 15px;
+  .uppy-size--md & {
+    // For the Remove button
+    position: relative;
+
+    display: block;
+    float: left;
+    margin: 5px $rl-margin;
+    width: calc(33.333% - #{$rl-margin} - #{$rl-margin});
+    height: 215px;
+  }
+  .uppy-size--lg & {
+    margin: 5px $rl-margin;
+    width: calc(25% - #{$rl-margin} - #{$rl-margin});
+    height: 190px;
+  }
+  .uppy-size--xl & {
+    width: calc(20% - #{$rl-margin} - #{$rl-margin});
+    height: 210px;
+  }
+
+  > .uppy-DashboardItem-preview {
+    // for the FileProgress.js icons
+    position: relative;
+
+    // @media only mobile
+    .uppy-Dashboard:not(.uppy-size--md) & {
+      flex-shrink: 0;
+      flex-grow: 0;
+      width: 50px;
+      height: 50px;
+    }
+    // @media bigger than .md
+    .uppy-size--md & {
+      width: 100%;
+      height: 140px;
+    }
+    .uppy-size--lg & {
+      height: 120px;
+    }
+    .uppy-size--xl & {
+      height: 140px;
+    }
+  }
+
+  > .uppy-DashboardItem-fileInfoAndButtons {
+    flex-grow: 1;
+    padding-right: 8px;
+    padding-left: 12px;
+
+    display: flex;
+    align-items: center;
+    justify-content: space-between;
+
+    .uppy-size--md & {
+      align-items: flex-start;
+      width: 100%;
+      padding: 0;
+      padding-top: 9px;
+    }
+
+    > .uppy-DashboardItem-fileInfo {
+      flex-grow: 1;
+      flex-shrink: 1;
+    }
+
+    > .uppy-DashboardItem-actionWrapper {
+      flex-grow: 0;
+      flex-shrink: 0;
+    }
+  }
+}
+
+// Css that depends on status of the file (could be logic in js instead?)","Yeah, a lot of this stuff with pause/resume/done icons could be logic in JS, I think, for some reason I went with CSS initially and then it pilled on.",I'm not sure if this is the bes
4,"@@ -0,0 +1,108 @@
+const Plugin = require('uppy/lib/core/Plugin')
+const { Provider } = require('uppy/lib/server')
+const { ProviderView } = require('uppy/lib/views')
+const { h } = require('preact')
+
+module.exports = class MyCustomProvider extends Plugin {
+  constructor (uppy, opts) {
+    super(uppy, opts)
+    this.type = 'acquirer'
+    this.id = this.opts.id || 'MyCustomProvider'
+    this.title = 'MyCustomProvider'
+    this.icon = () => (
+      <img src=""https://uppy.io/images/logos/uppy-dog-head-arrow.svg"" />
+    )
+
+    // writing out the key explicitly for readability the key used to store
+    // the provider instance must be equal to this.id.
+    this[this.id] = new Provider(uppy, {","this is unrelated but would it make sense to pass in the plugin and the Provider instance separately to provider Views? then we don't need the `this[this.id]` dance, people could just put it somewhere they like and then do `new ProviderViews(this, provider)`",I don't think you need the `h` 
5,"@@ -0,0 +1,108 @@
+const Plugin = require('uppy/lib/core/Plugin')
+const { Provider } = require('uppy/lib/server')
+const { ProviderView } = require('uppy/lib/views')
+const { h } = require('preact')
+
+module.exports = class MyCustomProvider extends Plugin {
+  constructor (uppy, opts) {
+    super(uppy, opts)
+    this.type = 'acquirer'
+    this.id = this.opts.id || 'MyCustomProvider'
+    this.title = 'MyCustomProvider'
+    this.icon = () => (
+      <img src=""https://uppy.io/images/logos/uppy-dog-head-arrow.svg"" />
+    )
+
+    // writing out the key explicitly for readability the key used to store
+    // the provider instance must be equal to this.id.
+    this[this.id] = new Provider(uppy, {
+      host: this.opts.host,
+      provider: 'custom'
+    })
+
+    this.files = []
+    this.onAuth = this.onAuth.bind(this)
+    this.render = this.render.bind(this)
+
+    // merge default options with the ones set by user
+    this.opts = Object.assign({}, {}, opts)",Two `{}`s :),I don't think you need the `.bi
6,"@@ -0,0 +1,108 @@
+const Plugin = require('uppy/lib/core/Plugin')
+const { Provider } = require('uppy/lib/server')
+const { ProviderView } = require('uppy/lib/views')
+const { h } = require('preact')
+
+module.exports = class MyCustomProvider extends Plugin {
+  constructor (uppy, opts) {
+    super(uppy, opts)
+    this.type = 'acquirer'
+    this.id = this.opts.id || 'MyCustomProvider'
+    this.title = 'MyCustomProvider'
+    this.icon = () => (
+      <img src=""https://uppy.io/images/logos/uppy-dog-head-arrow.svg"" />
+    )
+
+    // writing out the key explicitly for readability the key used to store
+    // the provider instance must be equal to this.id.
+    this[this.id] = new Provider(uppy, {
+      host: this.opts.host,
+      provider: 'custom'
+    })
+
+    this.files = []
+    this.onAuth = this.onAuth.bind(this)
+    this.render = this.render.bind(this)
+
+    // merge default options with the ones set by user
+    this.opts = Object.assign({}, {}, opts)
+  }
+
+  install () {
+    this.view = new ProviderView(this)
+    // Set default state for Dropbox
+    this.setPluginState({
+      authenticated: false,
+      files: [],
+      folders: [],
+      directories: [],
+      activeRow: -1,
+      filterInput: '',
+      isSearchVisible: false
+    })",> Set default state for Dropbox,Why do we need this?
7,"@@ -0,0 +1,108 @@
+const request = require('request')
+// @ts-ignore
+const atob = require('atob')
+const logger = require('../logger')
+const oAuthState = require('../helpers/oauth-state')
+const tokenService = require('../helpers/jwt')
+
+exports.getCredentialsOverrideMiddleware = (providers, companionOptions) => {
+  return (req, res, next) => {
+    const { authProvider, override } = req.params
+    const [providerName] = Object.keys(providers).filter((name) => providers[name].authProvider === authProvider)
+    if (!providerName) {
+      return next()
+    }
+
+    if (!companionOptions.providerOptions[providerName].credentialsURL) {
+      return next()
+    }
+
+    const dynamic = (req.session.grant || {}).dynamic || {}
+    // only use state via session object if user isn't making intial ""connect"" request.
+    // override param indicates subsequent requests from the oauth flow
+    const state = override ? dynamic.state : req.query.state
+    if (!state) {
+      return next()
+    }
+
+    const preAuthToken = oAuthState.getFromState(state, 'preAuthToken', companionOptions.secret)
+    if (!preAuthToken) {
+      return next()
+    }
+
+    const { err, payload } = tokenService.verifyEncryptedToken(preAuthToken, companionOptions.preAuthSecret)
+    if (err || !payload) {
+      return next()
+    }
+
+    module.exports.fetchProviderKeys(providerName, companionOptions, payload).then((credentials) => {
+      res.locals.grant = {
+        dynamic: {
+          key: credentials.key,
+          secret: credentials.secret
+        }
+      }
+
+      if (credentials.redirect_uri) {
+        res.locals.grant.dynamic.redirect_uri = credentials.redirect_uri
+      }
+    }).finally(() => next())
+  }
+}
+
+module.exports.getCredentialsResolver = (providerName, companionOptions, req) => {
+  const credentialsResolver = () => {
+    const encodedCredentialsParams = req.header('uppy-credentials-params')
+    let credentialRequestParams = null
+    if (encodedCredentialsParams) {
+      try {
+        credentialRequestParams = JSON.parse(atob(encodedCredentialsParams)).params
+      } catch (error) {
+        logger.error(error, 'credentilas.resolve.fail', req.id)","```suggestion
        logger.error(error, 'credentials.resolve.fail', req.id)
```
typo",I'm not sure if this is the rig
8,"@@ -0,0 +1,108 @@
+const request = require('request')
+// @ts-ignore
+const atob = require('atob')
+const logger = require('../logger')
+const oAuthState = require('../helpers/oauth-state')
+const tokenService = require('../helpers/jwt')
+
+exports.getCredentialsOverrideMiddleware = (providers, companionOptions) => {
+  return (req, res, next) => {
+    const { authProvider, override } = req.params
+    const [providerName] = Object.keys(providers).filter((name) => providers[name].authProvider === authProvider)
+    if (!providerName) {
+      return next()
+    }
+
+    if (!companionOptions.providerOptions[providerName].credentialsURL) {
+      return next()
+    }
+
+    const dynamic = (req.session.grant || {}).dynamic || {}
+    // only use state via session object if user isn't making intial ""connect"" request.
+    // override param indicates subsequent requests from the oauth flow
+    const state = override ? dynamic.state : req.query.state
+    if (!state) {
+      return next()
+    }
+
+    const preAuthToken = oAuthState.getFromState(state, 'preAuthToken', companionOptions.secret)
+    if (!preAuthToken) {
+      return next()
+    }
+
+    const { err, payload } = tokenService.verifyEncryptedToken(preAuthToken, companionOptions.preAuthSecret)
+    if (err || !payload) {
+      return next()
+    }
+
+    module.exports.fetchProviderKeys(providerName, companionOptions, payload).then((credentials) => {
+      res.locals.grant = {
+        dynamic: {
+          key: credentials.key,
+          secret: credentials.secret
+        }
+      }
+
+      if (credentials.redirect_uri) {
+        res.locals.grant.dynamic.redirect_uri = credentials.redirect_uri
+      }
+    }).finally(() => next())
+  }
+}
+
+module.exports.getCredentialsResolver = (providerName, companionOptions, req) => {
+  const credentialsResolver = () => {
+    const encodedCredentialsParams = req.header('uppy-credentials-params')
+    let credentialRequestParams = null
+    if (encodedCredentialsParams) {
+      try {
+        credentialRequestParams = JSON.parse(atob(encodedCredentialsParams)).params
+      } catch (error) {
+        logger.error(error, 'credentilas.resolve.fail', req.id)
+      }
+    }
+
+    return module.exports.fetchProviderKeys(providerName, companionOptions, credentialRequestParams)
+  }
+
+  return credentialsResolver
+}
+
+module.exports.fetchProviderKeys = (providerName, companionOptions, credentialRequestParams) => {
+  let providerConfig = companionOptions.providerOptions[providerName]
+  if (!providerConfig) {
+    providerConfig = (companionOptions.customProviders[providerName] || {}).config
+  }
+
+  if (providerConfig && providerConfig.credentialsURL && credentialRequestParams) {
+    return fetchKeys(providerConfig.credentialsURL, providerName, credentialRequestParams)
+  } else {
+    return Promise.resolve(providerConfig)
+  }
+}
+
+const fetchKeys = (url, providerName, credentialRequestParams) => {
+  return new Promise((resolve, reject) => {
+    const options = {
+      body: {
+        provider: providerName,
+        params: credentialRequestParams
+      },
+      json: true
+    }
+    request.post(url, options, (err, resp, body) => {
+      if (err) {
+        logger.error(err, 'credentials.fetch.fail')
+        return reject(err)
+      }
+
+      if (resp.statusCode !== 200 || !body.credentials) {
+        const err = new Error(`recevied status: ${resp.statusCode} with no credentials`)","```suggestion
        const err = new Error(`received status: ${resp.statusCode} with no credentials`)
```
typo",I'm not sure if this is the rig
9,"@@ -0,0 +1,11 @@
+#!/usr/bin/env bash
+sh ../env.sh
+
+export UPPYSERVER_DATADIR=""./packages/@uppy/companion/output""",We may want to put the data directory in the repo root instead so we can never accidentally publish it.,I think this should be `./packa
10,"@@ -0,0 +1,11 @@
+#!/usr/bin/env bash
+sh ../env.sh
+
+export UPPYSERVER_DATADIR=""./packages/@uppy/companion/output""
+export UPPYSERVER_DOMAIN=""localhost:3020""
+export UPPYSERVER_PROTOCOL=""http""
+export UPPYSERVER_PORT=3020
+export UPPY_ENDPOINTS=""""
+export UPPYSERVER_SECRET=""development""
+
+nodemon --exec node ./packages/@uppy/companion/src/standalone/start-server.js","nodemon watches everything in the working directory by default, so this will restart each time any Uppy client file is built or updated too. (try doing `npm start` in the repo root.) Using `--watch packages/@uppy/companion` would help there",Why is this needed?
11,"@@ -0,0 +1,111 @@
+const Plugin = require('../Plugin')
+const Tus10Plugin = require('../Tus10')
+const Client = require('./Client')
+
+module.exports = class Transloadit extends Plugin {
+  constructor (core, opts) {
+    super(core, opts)
+    this.type = 'uploader'
+    this.id = 'Transloadit'
+    this.title = 'Transloadit'
+
+    const defaultOptions = {
+      templateId: null,
+      resume: true,
+      allowPause: true
+    }
+
+    this.opts = Object.assign({}, defaultOptions, opts)
+
+    if (!this.opts.key) {
+      throw new Error('Transloadit: The `key` option is required. ' +
+        'You can find your Transloadit API key at https://transloadit.com/accounts/credentials.')
+    }
+    if (!this.opts.templateId) {
+      throw new Error('Transloadit: The `templateId` option is required. ' +
+        'You can find your template\'s ID at https://transloadit.com/templates.')
+    }
+
+    this.client = new Client({
+      key: this.opts.key
+    })
+  }
+
+  createAssembly () {
+    this.core.log('Transloadit: create assembly')
+
+    return this.client.createAssembly({
+      templateId: this.opts.templateId,
+      expectedFiles: Object.keys(this.core.state.files).length
+    }).then((assembly) => {
+      this.updateState({ assembly })
+
+      function attachAssemblyMetadata (file, assembly) {
+        const meta = Object.assign({}, file.meta, {
+          assembly_url: assembly.assembly_url,
+          filename: file.name,
+          fieldname: 'file'
+        })",<strike>The Tus plugin uses the `meta` property of files as an `Upload-Meta` header. (should add a code comment here explaining that)</strike> done,I think this should be `this.co
12,"@@ -0,0 +1,114 @@
+const qs = require('qs')
+const moment = require('moment')
+
+const MIMETYPES = {
+  MP4: 'video/mp4',
+  M4A: 'audio/mp4',
+  CHAT: 'text/plain',
+  TRANSCRIPT: 'text/vtt',
+  CC: 'text/vtt',
+  TIMELINE: 'application/json'
+}
+const ICONS = {
+  MP4: 'video',
+  M4A: 'audio',
+  CHAT: 'text',
+  TRANSCRIPT: 'text',",[these are the icons supported by uppy](https://github.com/transloadit/uppy/blob/master/packages/%40uppy/provider-views/src/Item/components/ItemIcon.js#L32-L39). So maybe change _text_ and _audio_ to _file_?,Why is this needed?
13,"@@ -0,0 +1,114 @@
+const qs = require('qs')
+const moment = require('moment')
+
+const MIMETYPES = {
+  MP4: 'video/mp4',
+  M4A: 'audio/mp4',
+  CHAT: 'text/plain',
+  TRANSCRIPT: 'text/vtt',
+  CC: 'text/vtt',
+  TIMELINE: 'application/json'
+}
+const ICONS = {
+  MP4: 'video',
+  M4A: 'audio',
+  CHAT: 'text',
+  TRANSCRIPT: 'text',
+  CC: 'text',
+  FOLDER: 'folder'
+}
+
+exports.getDateName = (start, end) => {
+  return `${start.format('YYYY-MM-DD')} - ${end.format('YYYY-MM-DD')}`
+}
+
+exports.getDateFolderId = (start, end) => {
+  return `dates=${start.format('YYYY-MM-DD')}_${end.format('YYYY-MM-DD')}`",I guess we can leave the `dates=` part out right? We don't seem to need it for anything do we?,Why not use `moment` here?
14,"@@ -0,0 +1,114 @@
+const qs = require('qs')
+const moment = require('moment')
+
+const MIMETYPES = {
+  MP4: 'video/mp4',
+  M4A: 'audio/mp4',
+  CHAT: 'text/plain',
+  TRANSCRIPT: 'text/vtt',
+  CC: 'text/vtt',
+  TIMELINE: 'application/json'
+}
+const ICONS = {
+  MP4: 'video',
+  M4A: 'audio',
+  CHAT: 'text',
+  TRANSCRIPT: 'text',
+  CC: 'text',
+  FOLDER: 'folder'
+}
+
+exports.getDateName = (start, end) => {
+  return `${start.format('YYYY-MM-DD')} - ${end.format('YYYY-MM-DD')}`
+}
+
+exports.getDateFolderId = (start, end) => {
+  return `dates=${start.format('YYYY-MM-DD')}_${end.format('YYYY-MM-DD')}`
+}
+
+exports.getDateFolderRequestPath = (start, end) => {
+  return `?from=${start.format('YYYY-MM-DD')}&to=${end.format('YYYY-MM-DD')}`
+}
+
+exports.getDateFolderModified = (end) => {
+  return end.format('YYYY-MM-DD')
+}
+
+exports.getDateQuery = (start) => {
+  return `?${qs.stringify({ cursor: start.subtract(1, 'days').format('YYYY-MM-DD') })}`","I guess this can be rewritten as this right?

```suggestion
  return `?cursor=${start.subtract(1, 'days').format('YYYY-MM-DD')}`
```",Why not use `moment` here?
15,"@@ -0,0 +1,114 @@
+const qs = require('qs')
+const moment = require('moment')
+
+const MIMETYPES = {
+  MP4: 'video/mp4',
+  M4A: 'audio/mp4',
+  CHAT: 'text/plain',
+  TRANSCRIPT: 'text/vtt',
+  CC: 'text/vtt',
+  TIMELINE: 'application/json'
+}
+const ICONS = {
+  MP4: 'video',
+  M4A: 'audio',
+  CHAT: 'text',
+  TRANSCRIPT: 'text',
+  CC: 'text',
+  FOLDER: 'folder'
+}
+
+exports.getDateName = (start, end) => {
+  return `${start.format('YYYY-MM-DD')} - ${end.format('YYYY-MM-DD')}`
+}
+
+exports.getDateFolderId = (start, end) => {
+  return `dates=${start.format('YYYY-MM-DD')}_${end.format('YYYY-MM-DD')}`
+}
+
+exports.getDateFolderRequestPath = (start, end) => {
+  return `?from=${start.format('YYYY-MM-DD')}&to=${end.format('YYYY-MM-DD')}`
+}
+
+exports.getDateFolderModified = (end) => {
+  return end.format('YYYY-MM-DD')
+}
+
+exports.getDateQuery = (start) => {
+  return `?${qs.stringify({ cursor: start.subtract(1, 'days').format('YYYY-MM-DD') })}`
+}
+
+exports.getQuery = (results) => {",maybe we should rename this to `getNextPagePath` since that's really it does?,Why not use `moment` here?
16,"@@ -0,0 +1,114 @@
+const qs = require('qs')
+const moment = require('moment')
+
+const MIMETYPES = {
+  MP4: 'video/mp4',
+  M4A: 'audio/mp4',
+  CHAT: 'text/plain',
+  TRANSCRIPT: 'text/vtt',
+  CC: 'text/vtt',
+  TIMELINE: 'application/json'
+}
+const ICONS = {
+  MP4: 'video',
+  M4A: 'audio',
+  CHAT: 'text',
+  TRANSCRIPT: 'text',
+  CC: 'text',
+  FOLDER: 'folder'
+}
+
+exports.getDateName = (start, end) => {
+  return `${start.format('YYYY-MM-DD')} - ${end.format('YYYY-MM-DD')}`
+}
+
+exports.getDateFolderId = (start, end) => {
+  return `dates=${start.format('YYYY-MM-DD')}_${end.format('YYYY-MM-DD')}`
+}
+
+exports.getDateFolderRequestPath = (start, end) => {
+  return `?from=${start.format('YYYY-MM-DD')}&to=${end.format('YYYY-MM-DD')}`
+}
+
+exports.getDateFolderModified = (end) => {
+  return end.format('YYYY-MM-DD')
+}
+
+exports.getDateQuery = (start) => {
+  return `?${qs.stringify({ cursor: start.subtract(1, 'days').format('YYYY-MM-DD') })}`
+}
+
+exports.getQuery = (results) => {
+  if (results.next_page_token) {
+    return `?${qs.stringify({
+      cursor: results.next_page_token || '',",I guess we don't need the fallback value since we already have the `if (...)` check above?,Why not use `moment` here?
17,"@@ -0,0 +1,114 @@
+const qs = require('qs')
+const moment = require('moment')
+
+const MIMETYPES = {
+  MP4: 'video/mp4',
+  M4A: 'audio/mp4',
+  CHAT: 'text/plain',
+  TRANSCRIPT: 'text/vtt',
+  CC: 'text/vtt',
+  TIMELINE: 'application/json'
+}
+const ICONS = {
+  MP4: 'video',
+  M4A: 'audio',
+  CHAT: 'text',
+  TRANSCRIPT: 'text',
+  CC: 'text',
+  FOLDER: 'folder'
+}
+
+exports.getDateName = (start, end) => {
+  return `${start.format('YYYY-MM-DD')} - ${end.format('YYYY-MM-DD')}`
+}
+
+exports.getDateFolderId = (start, end) => {
+  return `dates=${start.format('YYYY-MM-DD')}_${end.format('YYYY-MM-DD')}`
+}
+
+exports.getDateFolderRequestPath = (start, end) => {
+  return `?from=${start.format('YYYY-MM-DD')}&to=${end.format('YYYY-MM-DD')}`
+}
+
+exports.getDateFolderModified = (end) => {
+  return end.format('YYYY-MM-DD')
+}
+
+exports.getDateQuery = (start) => {
+  return `?${qs.stringify({ cursor: start.subtract(1, 'days').format('YYYY-MM-DD') })}`
+}
+
+exports.getQuery = (results) => {
+  if (results.next_page_token) {
+    return `?${qs.stringify({
+      cursor: results.next_page_token || '',
+      from: results.from,
+      to: results.to
+    })}`
+  }
+  return null
+}
+// we rely on the file_type attribute to differentiate a recording file from other items
+exports.getIsFolder = (item) => {
+  return !item.file_type
+}
+
+exports.getItemName = (item) => {
+  const start = moment(item.start_time || item.recording_start)
+    .clone()
+    .format('YYYY-MM-DD, kk:mm')
+
+  if (item.file_type) {
+    const itemType = item.recording_type ? ` - ${item.recording_type.split('_').join(' ')}` : ''
+    return `${start}${itemType} (${item.file_type.toLowerCase()})`
+  }
+
+  return `${item.topic} (${start})`
+}
+
+exports.getIcon = (item) => {
+  if (item.file_type) {
+    return null",I think we can use the `ICONS` constant for other file types as well no?,I don't think you need the
18,"@@ -0,0 +1,114 @@
+const qs = require('qs')
+const moment = require('moment')
+
+const MIMETYPES = {
+  MP4: 'video/mp4',
+  M4A: 'audio/mp4',
+  CHAT: 'text/plain',
+  TRANSCRIPT: 'text/vtt',
+  CC: 'text/vtt',
+  TIMELINE: 'application/json'
+}
+const ICONS = {
+  MP4: 'video',
+  M4A: 'audio',
+  CHAT: 'text',
+  TRANSCRIPT: 'text',
+  CC: 'text',
+  FOLDER: 'folder'
+}
+
+exports.getDateName = (start, end) => {
+  return `${start.format('YYYY-MM-DD')} - ${end.format('YYYY-MM-DD')}`
+}
+
+exports.getDateFolderId = (start, end) => {
+  return `dates=${start.format('YYYY-MM-DD')}_${end.format('YYYY-MM-DD')}`
+}
+
+exports.getDateFolderRequestPath = (start, end) => {
+  return `?from=${start.format('YYYY-MM-DD')}&to=${end.format('YYYY-MM-DD')}`
+}
+
+exports.getDateFolderModified = (end) => {
+  return end.format('YYYY-MM-DD')
+}
+
+exports.getDateQuery = (start) => {
+  return `?${qs.stringify({ cursor: start.subtract(1, 'days').format('YYYY-MM-DD') })}`
+}
+
+exports.getQuery = (results) => {
+  if (results.next_page_token) {
+    return `?${qs.stringify({
+      cursor: results.next_page_token || '',
+      from: results.from,
+      to: results.to
+    })}`
+  }
+  return null
+}
+// we rely on the file_type attribute to differentiate a recording file from other items
+exports.getIsFolder = (item) => {
+  return !item.file_type
+}
+
+exports.getItemName = (item) => {
+  const start = moment(item.start_time || item.recording_start)
+    .clone()
+    .format('YYYY-MM-DD, kk:mm')
+
+  if (item.file_type) {
+    const itemType = item.recording_type ? ` - ${item.recording_type.split('_').join(' ')}` : ''
+    return `${start}${itemType} (${item.file_type.toLowerCase()})`
+  }
+
+  return `${item.topic} (${start})`
+}
+
+exports.getIcon = (item) => {
+  if (item.file_type) {
+    return null
+  }
+  return ICONS.FOLDER
+}
+
+exports.getMimeType = (item) => {
+  if (item.file_type) {
+    return MIMETYPES[item.file_type]
+  }
+  return null
+}
+
+exports.getId = (item) => {
+  let id = `${encodeURIComponent(item.id)}`
+  if (item.file_type) {
+    id = `${item.meeting_id}?recordingId=${id}`","are we using this query anywhere? if not, maybe we should instead do something like: `${item.meeting_id}__${id}`",I don't think you need the
19,"@@ -0,0 +1,114 @@
+const qs = require('qs')
+const moment = require('moment')
+
+const MIMETYPES = {
+  MP4: 'video/mp4',
+  M4A: 'audio/mp4',
+  CHAT: 'text/plain',
+  TRANSCRIPT: 'text/vtt',
+  CC: 'text/vtt',
+  TIMELINE: 'application/json'
+}
+const ICONS = {
+  MP4: 'video',
+  M4A: 'audio',
+  CHAT: 'text',
+  TRANSCRIPT: 'text',
+  CC: 'text',
+  FOLDER: 'folder'
+}
+
+exports.getDateName = (start, end) => {
+  return `${start.format('YYYY-MM-DD')} - ${end.format('YYYY-MM-DD')}`
+}
+
+exports.getDateFolderId = (start, end) => {
+  return `dates=${start.format('YYYY-MM-DD')}_${end.format('YYYY-MM-DD')}`
+}
+
+exports.getDateFolderRequestPath = (start, end) => {
+  return `?from=${start.format('YYYY-MM-DD')}&to=${end.format('YYYY-MM-DD')}`
+}
+
+exports.getDateFolderModified = (end) => {
+  return end.format('YYYY-MM-DD')
+}
+
+exports.getDateQuery = (start) => {
+  return `?${qs.stringify({ cursor: start.subtract(1, 'days').format('YYYY-MM-DD') })}`
+}
+
+exports.getQuery = (results) => {
+  if (results.next_page_token) {
+    return `?${qs.stringify({
+      cursor: results.next_page_token || '',
+      from: results.from,
+      to: results.to
+    })}`
+  }
+  return null
+}
+// we rely on the file_type attribute to differentiate a recording file from other items
+exports.getIsFolder = (item) => {
+  return !item.file_type
+}
+
+exports.getItemName = (item) => {
+  const start = moment(item.start_time || item.recording_start)
+    .clone()
+    .format('YYYY-MM-DD, kk:mm')
+
+  if (item.file_type) {
+    const itemType = item.recording_type ? ` - ${item.recording_type.split('_').join(' ')}` : ''
+    return `${start}${itemType} (${item.file_type.toLowerCase()})`
+  }
+
+  return `${item.topic} (${start})`
+}
+
+exports.getIcon = (item) => {
+  if (item.file_type) {
+    return null
+  }
+  return ICONS.FOLDER
+}
+
+exports.getMimeType = (item) => {
+  if (item.file_type) {
+    return MIMETYPES[item.file_type]
+  }
+  return null
+}
+
+exports.getId = (item) => {
+  let id = `${encodeURIComponent(item.id)}`
+  if (item.file_type) {
+    id = `${item.meeting_id}?recordingId=${id}`
+  }
+  return id
+}
+
+exports.getRequestPath = (item) => {
+  if (item.file_type && item.file_type === 'TIMELINE') {
+    return `${encodeURIComponent(item.meeting_id)}?recordingId=TIMELINE`
+  } else if (item.file_type) {
+    return `${encodeURIComponent(item.meeting_id)}?recordingId=${encodeURIComponent(item.id)}`
+  }
+  return `${encodeURIComponent(item.id)}`
+}
+
+exports.getStartDate = (item) => {
+  return item.start_time",should this function return `recording_start` (or `recording_end`) in the case of recordings?,I don't think you need the
20,"@@ -0,0 +1,114 @@
+const qs = require('qs')
+const moment = require('moment')
+
+const MIMETYPES = {
+  MP4: 'video/mp4',
+  M4A: 'audio/mp4',
+  CHAT: 'text/plain',
+  TRANSCRIPT: 'text/vtt',
+  CC: 'text/vtt',
+  TIMELINE: 'application/json'
+}
+const ICONS = {
+  MP4: 'video',
+  M4A: 'audio',
+  CHAT: 'text',
+  TRANSCRIPT: 'text',
+  CC: 'text',
+  FOLDER: 'folder'
+}
+
+exports.getDateName = (start, end) => {
+  return `${start.format('YYYY-MM-DD')} - ${end.format('YYYY-MM-DD')}`
+}
+
+exports.getDateFolderId = (start, end) => {
+  return `dates=${start.format('YYYY-MM-DD')}_${end.format('YYYY-MM-DD')}`
+}
+
+exports.getDateFolderRequestPath = (start, end) => {
+  return `?from=${start.format('YYYY-MM-DD')}&to=${end.format('YYYY-MM-DD')}`
+}
+
+exports.getDateFolderModified = (end) => {
+  return end.format('YYYY-MM-DD')
+}
+
+exports.getDateQuery = (start) => {
+  return `?${qs.stringify({ cursor: start.subtract(1, 'days').format('YYYY-MM-DD') })}`
+}
+
+exports.getQuery = (results) => {
+  if (results.next_page_token) {
+    return `?${qs.stringify({
+      cursor: results.next_page_token || '',
+      from: results.from,
+      to: results.to
+    })}`
+  }
+  return null
+}
+// we rely on the file_type attribute to differentiate a recording file from other items
+exports.getIsFolder = (item) => {
+  return !item.file_type
+}
+
+exports.getItemName = (item) => {
+  const start = moment(item.start_time || item.recording_start)
+    .clone()
+    .format('YYYY-MM-DD, kk:mm')
+
+  if (item.file_type) {
+    const itemType = item.recording_type ? ` - ${item.recording_type.split('_').join(' ')}` : ''
+    return `${start}${itemType} (${item.file_type.toLowerCase()})`
+  }
+
+  return `${item.topic} (${start})`
+}
+
+exports.getIcon = (item) => {
+  if (item.file_type) {
+    return null
+  }
+  return ICONS.FOLDER
+}
+
+exports.getMimeType = (item) => {
+  if (item.file_type) {
+    return MIMETYPES[item.file_type]
+  }
+  return null
+}
+
+exports.getId = (item) => {
+  let id = `${encodeURIComponent(item.id)}`
+  if (item.file_type) {
+    id = `${item.meeting_id}?recordingId=${id}`
+  }
+  return id
+}
+
+exports.getRequestPath = (item) => {
+  if (item.file_type && item.file_type === 'TIMELINE') {
+    return `${encodeURIComponent(item.meeting_id)}?recordingId=TIMELINE`
+  } else if (item.file_type) {
+    return `${encodeURIComponent(item.meeting_id)}?recordingId=${encodeURIComponent(item.id)}`
+  }
+  return `${encodeURIComponent(item.id)}`
+}
+
+exports.getStartDate = (item) => {
+  return item.start_time
+}
+
+exports.getSize = (item) => {
+  return item.file_size
+}
+
+exports.getCustomFields = (item) => {
+  return {
+    recordTrueId: item.id,
+    requestDownloadUrl: item.download_url,
+    recordingDate: item.recording_start
+  }",seems like we don't need this anymore right?,I don't think you need the
21,"@@ -0,0 +1,116 @@
+const request = require('request')
+const BASE_URL = 'https://zoom.us/v2'
+
+/**
+ * an example of a custom provider module. It implements @uppy/companion's Provider interface
+ */
+class ZoomProvider {
+  constructor (options) {
+    this.authProvider = ZoomProvider.authProvider
+  }
+
+  static get authProvider () {
+    return 'zoom'
+  }
+
+  // /users/{userId}/recordings
+  list ({ token, query }, done) {
+    const path = '/users/me/recordings'
+    const options = {
+      url: `${BASE_URL}${path}`,
+      method: 'GET',
+      json: true,
+      headers: {
+        Authorization: `Bearer ${token}`
+      }
+    }
+
+    request(options, (err, resp, body) => {
+      if (err) {
+        console.log(err)
+        done(err)
+        return
+      }
+      done(null, this._adaptData(body))
+    })
+  }
+
+  download ({ id, token }, onData) {
+    const downloadUrl = id","I assumed this gets invoked when files get downloaded from source / uploaded to the destination. What's the best way to test this locally? I""m guessing i would need to attach a file destination or processing plugin and confirm this works independently, is this correct?  

Likewise, I wasn't sure what the best way to pass additional data back to the UI and back to the download function heres was. The download URL gets returns as part of the `list` request, so I just assigned it to the ID parameter since it appeared that this was getting passed around automatically. ",Can we remove this console
22,"@@ -0,0 +1,116 @@
+const request = require('request')
+const BASE_URL = 'https://zoom.us/v2'
+
+/**
+ * an example of a custom provider module. It implements @uppy/companion's Provider interface
+ */
+class ZoomProvider {
+  constructor (options) {
+    this.authProvider = ZoomProvider.authProvider
+  }
+
+  static get authProvider () {
+    return 'zoom'
+  }
+
+  // /users/{userId}/recordings
+  list ({ token, query }, done) {
+    const path = '/users/me/recordings'
+    const options = {
+      url: `${BASE_URL}${path}`,
+      method: 'GET',
+      json: true,
+      headers: {
+        Authorization: `Bearer ${token}`
+      }
+    }
+
+    request(options, (err, resp, body) => {
+      if (err) {
+        console.log(err)
+        done(err)
+        return
+      }
+      done(null, this._adaptData(body))
+    })
+  }
+
+  download ({ id, token }, onData) {
+    const downloadUrl = id
+    const options = {
+      url: downloadUrl,
+      method: 'GET',
+      json: true,
+      headers: {
+        Authorization: `Bearer ${token}`
+      }
+    }
+
+    request(options, (err, resp, body) => {
+      if (err) {
+        console.log(err)
+        return
+      }
+      // how can I test this?
+      const url = body.links.download
+      request.get(url)
+        .on('data', (chunk) => onData(null, chunk))
+        .on('end', () => onData(null, null))
+        .on('error', (err) => console.log(err))
+    })
+  }
+
+  _adaptData (res) {
+    const nextPagePath = res && res.nextPagePath ? `/users/me/recordings&next_page_token=${res.nextPagePath}` : ''
+
+    const data = {
+      username: null,
+      items: [],
+      nextPagePath
+    }
+
+    if (res.meetings) {
+      res.meetings.forEach(meeting => {
+        meeting.recording_files.filter(record => record.file_type === 'MP4').forEach((record, index) => {
+          data.items.push({
+            isFolder: undefined,
+            icon: '',
+            name: `${meeting.topic}_${record.recording_start}${index > 0 ? `_pt_${index + 1}` : ''}`,
+            mimeType: 'video/mp4',
+            id: record.download_path,
+            thumbnail: '',
+            requestPath: record.download_url,
+            modifiedDate: record.recording_start,
+            size: record.file_size,
+            custom: {
+              recordTrueId: record.id
+            }
+          })
+        })
+      })
+    }
+    return data
+  }
+
+  logout ({ token }, done) {",I noticed that the token expiry between uppy didn't seem to match token expiry on the custom provider side (ie the token expires with Zoom before the Uppy token expires). Is there a configuration somewhere that I should be setting this with Uppy?,I don't think this is need
23,"@@ -0,0 +1,12 @@
+const { h } = require('preact')
+const formatSeconds = require('./formatSeconds')
+
+module.exports = function RecordingLength ({ recordingLengthSeconds }) {
+  const formattedRecordingLengthSeconds = formatSeconds(recordingLengthSeconds)
+
+  return (
+    <div class=""uppy-Webcam-recordingLength"" title={formattedRecordingLengthSeconds} aria-label={formattedRecordingLengthSeconds}>","Ideally `aria-label` should say `Recording length 1:25`. We’d need a `Recording length: {number}` string added to Webcam’s `i18n`, please see: https://github.com/transloadit/uppy/blob/895498815718cf3ef4245593e176f0ccc6503fc3/packages/%40uppy/core/src/index.js#L53 and https://github.com/transloadit/uppy/blob/895498815718cf3ef4245593e176f0ccc6503fc3/packages/%40uppy/core/src/index.js#L830

Title should probably just say “Recording length”, since the number is visually available. We could also omit the `title` altogether, because if we keep it, we’ll have to add 2 `i18n` strings — one with the number, other without the number.",Can we use `h` instead of 
24,"@@ -0,0 +1,123 @@
+const request = require('request')
+// const { data } = require('autoprefixer')
+const BASE_URL = 'https://zoom.us/v2'
+
+/**
+ * an example of a custom provider module. It implements @uppy/companion's Provider interface
+ */
+class ZoomProvider {
+  constructor (options) {
+    this.authProvider = ZoomProvider.authProvider
+  }
+
+  static get authProvider () {
+    return 'zoom'
+  }
+
+  // /users/{userId}/recordings
+  list ({ token, query }, done) {
+    const path = '/users/me/recordings'",I'm noticing that zoom defaults to only returning content from the last day unless there's a longer date range specified (up to 1 month). Do any of the other providers have similar restrictions / how is this handled? Is there also a limit with Uppy on the number of items we can return / display? Zoom sets this at 300 but that seems like a lot? ,Can we remove this?
25,"@@ -0,0 +1,128 @@
+import Plugin from '../Plugin'
+import 'whatwg-fetch'
+import html from '../../core/html'
+
+import Provider from '../../uppy-base/src/plugins/Provider'
+
+import View from '../../generic-provider-views/index'
+import icons from './icons'
+
+export default class Dropbox extends Plugin {
+  constructor (core, opts) {
+    super(core, opts)
+    this.type = 'acquirer'
+    this.id = 'Dropbox'
+    this.title = 'Dropbox'
+    this.stateId = 'dropbox'
+    this.icon = html`
+      <svg class=""UppyIcon UppyModalTab-icon"" viewBox=""0 0 225.000000 225.000000"">
+        <g transform=""translate(0.000000,225.000000) scale(0.100000,-0.100000)"" fill=""#000000"" stroke=""none"">
+        <path d=""M633 1646 c-112 -72 -203 -134 -203 -137 0 -3 61 -54 135 -113 74 -59 135 -111 135 -116 0 -5 -61 -57
+        -135 -116 -74 -59 -135 -110 -135 -113 1 -7 391 -261 403 -262 5 -1 72 52 149 116 l141 118 -54 33 c-30 18 -123 75
+        -206 126 -84 51 -153 95 -153 98 0 3 69 47 153 98 83 51 176 108 206 126 l53 33 -123 103 c-68 57 -133 111 -144
+        121 -19 16 -27 12 -222 -115z""/>
+        <path d=""M1271 1657 l-143 -120 53 -33 c30 -18 123 -75 206 -126 84 -51 153 -95 153 -98 0 -3 -69 -47 -153 -98 -83
+        -51 -176 -108 -206 -126 l-54 -33 139 -116 c77 -64 142 -117 145 -119 8 -3 408 254 409 263 0 3 -61 54 -135 113 -74
+        59 -135 111 -135 116 0 5 61 57 135 116 74 59 135 110 135 113 0 3 -51 39 -113 78 -61 40 -153 99 -202 132 l-91 58
+        -143 -120z""/>
+        <path d=""M981 849 c-159 -132 -141 -127 -228 -67 l-43 29 0 -44 0 -45 207 -123 c114 -68 210 -123 213 -122 4 1 98 57
+        209 123 l201 121 0 45 0 45 -61 -41 c-52 -36 -62 -40 -77 -28 -9 7 -69 56 -132 108 -63 52 -122 100 -130 107
+        -13 10 -40 -9 -159 -108z""/>
+        </g>
+      </svg>`
+
+    this[this.id] = new Provider({",`this[this.id]` confuses me a little. will it get turned into `this.Dropbox` in this case?,I think this should be `th
26,"@@ -0,0 +1,128 @@
+import Plugin from '../Plugin'
+import 'whatwg-fetch'
+import html from '../../core/html'
+
+import Provider from '../../uppy-base/src/plugins/Provider'
+
+import View from '../../generic-provider-views/index'
+import icons from './icons'
+
+export default class Dropbox extends Plugin {
+  constructor (core, opts) {
+    super(core, opts)
+    this.type = 'acquirer'
+    this.id = 'Dropbox'
+    this.title = 'Dropbox'
+    this.stateId = 'dropbox'
+    this.icon = html`
+      <svg class=""UppyIcon UppyModalTab-icon"" viewBox=""0 0 225.000000 225.000000"">
+        <g transform=""translate(0.000000,225.000000) scale(0.100000,-0.100000)"" fill=""#000000"" stroke=""none"">
+        <path d=""M633 1646 c-112 -72 -203 -134 -203 -137 0 -3 61 -54 135 -113 74 -59 135 -111 135 -116 0 -5 -61 -57
+        -135 -116 -74 -59 -135 -110 -135 -113 1 -7 391 -261 403 -262 5 -1 72 52 149 116 l141 118 -54 33 c-30 18 -123 75
+        -206 126 -84 51 -153 95 -153 98 0 3 69 47 153 98 83 51 176 108 206 126 l53 33 -123 103 c-68 57 -133 111 -144
+        121 -19 16 -27 12 -222 -115z""/>
+        <path d=""M1271 1657 l-143 -120 53 -33 c30 -18 123 -75 206 -126 84 -51 153 -95 153 -98 0 -3 -69 -47 -153 -98 -83
+        -51 -176 -108 -206 -126 l-54 -33 139 -116 c77 -64 142 -117 145 -119 8 -3 408 254 409 263 0 3 -61 54 -135 113 -74
+        59 -135 111 -135 116 0 5 61 57 135 116 74 59 135 110 135 113 0 3 -51 39 -113 78 -61 40 -153 99 -202 132 l-91 58
+        -143 -120z""/>
+        <path d=""M981 849 c-159 -132 -141 -127 -228 -67 l-43 29 0 -44 0 -45 207 -123 c114 -68 210 -123 213 -122 4 1 98 57
+        209 123 l201 121 0 45 0 45 -61 -41 c-52 -36 -62 -40 -77 -28 -9 7 -69 56 -132 108 -63 52 -122 100 -130 107
+        -13 10 -40 -9 -159 -108z""/>
+        </g>
+      </svg>`
+
+    this[this.id] = new Provider({
+      host: this.opts.host,
+      provider: 'dropbox'
+    })
+
+    this.files = []
+
+    // Visual
+    this.render = this.render.bind(this)
+
+    // set default options
+    const defaultOptions = {}
+
+    // merge default options with the ones set by user
+    this.opts = Object.assign({}, defaultOptions, opts)
+  }
+
+  install () {
+    this.view = new View(this)
+    // Set default state
+    this.core.setState({
+      [this.stateId]: {","`[this.stateId]` same thing here, hard to understand from the first look, but it might be just me",I think this should be `th
27,"@@ -0,0 +1,129 @@
+const http = require('http')
+const https = require('https')
+const dns = require('dns')
+const ipAddress = require('ip-address')
+
+function isIPAddress (address) {
+  const addressAsV6 = new ipAddress.Address6(address)
+  const addressAsV4 = new ipAddress.Address4(address)
+  return addressAsV6.isValid() || addressAsV4.isValid()
+}
+
+/**
+ * Determine if a IP address provided is a private one.
+ * Return TRUE if it's the case, FALSE otherwise.
+ * Excerpt from:
+ * https://cheatsheetseries.owasp.org/cheatsheets/Server_Side_Request_Forgery_Prevention_Cheat_Sheet.html#case-2---application-can-send-requests-to-any-external-ip-address-or-domain-name
+ *
+ * @param {string} ipAddress the ip address to validate
+ * @returns {boolean}
+ */
+function isPrivateIP (ipAddress) {
+  let isPrivate = false
+  // Build the list of IP prefix for V4 and V6 addresses
+  const ipPrefix = []
+  // Add prefix for loopback addresses
+  ipPrefix.push('127.')
+  ipPrefix.push('0.')
+  // Add IP V4 prefix for private addresses
+  // See https://en.wikipedia.org/wiki/Private_network
+  ipPrefix.push('10.')","I don't believe this to be correct, i think there are actual WAN addresses that start with 10 and the 10. range should be more discriminatory",I think this should be `is
28,"@@ -0,0 +1,13 @@
+class NetworkError extends Error {
+  constructor (error = null, xhr = null) {","I understand why `xhr = null`, but I think adding `error = null` implies that this method should work even if we don't pass the `error` argument. Should we remove it?",
29,"@@ -0,0 +1,13 @@
+class NetworkError extends Error {
+  constructor (error = null, xhr = null) {
+    super(error.message)","is there a reason we are not setting  `""This looks like a network error ...""` as the primary message instead? And append the source error? Something like this:

```js
super(`This looks like a network error, the endpoint might be blocked by an ISP or a firewall. Source error [${error}]`)
```

That way, we won't have to worry about the punctuation and the concatenation done below `error.message + '. This looks ...'` which can be error prone for some error messages that already contain a period '.', or for cases where `error` is `null`.",
30,"@@ -0,0 +1,13 @@
+class NetworkError extends Error {
+  constructor (error = null, xhr = null) {
+    super(error.message)
+
+    this.isNetworkError = true
+    this.originalRequest = xhr","Do we need the `xhr` argument & setting `.originalRequest` here?
`xhr` is never passed, `.originalRequest` is never used & we assign `error.request = xhr` in most places anyway.",Why do we need this?
31,"@@ -0,0 +1,133 @@
+const Plugin = require('../../core/Plugin')
+const { h } = require('preact')
+const Provider = require('../Provider')
+// const Utils = require('../../core/Utils')
+require('whatwg-fetch')
+
+/**
+ * Link
+ *
+ */
+module.exports = class Link extends Plugin {
+  constructor (uppy, opts) {
+    super(uppy, opts)
+    this.id = this.opts.id || 'Url'
+    this.title = 'Link'
+    this.type = 'acquirer'","I think we should consider not hardcoding these plugin types.

We could have `core.types = {ACQUIRER: 'acquirer', ...}`

then in our plugin we do:
`this.type = core.types.ACQUIRER`

it might be easier to maintain that way. Especially with custom plugins created outside this project.

what do you think?",Can we remove this?
32,"@@ -0,0 +1,133 @@
+const Plugin = require('../../core/Plugin')
+const { h } = require('preact')
+const Provider = require('../Provider')
+// const Utils = require('../../core/Utils')
+require('whatwg-fetch')
+
+/**
+ * Link
+ *
+ */
+module.exports = class Link extends Plugin {
+  constructor (uppy, opts) {
+    super(uppy, opts)
+    this.id = this.opts.id || 'Url'
+    this.title = 'Link'
+    this.type = 'acquirer'
+    this.icon = () => <svg aria-hidden=""true"" class=""UppyIcon UppyModalTab-icon"" width=""64"" height=""64"" viewBox=""0 0 64 64"">
+      <circle cx=""32"" cy=""32"" r=""31"" />
+      <g fill-rule=""nonzero"" fill=""#FFF"">
+        <path d=""M25.774 47.357a4.077 4.077 0 0 1-5.76 0L16.9 44.24a4.076 4.076 0 0 1 0-5.758l5.12-5.12-1.817-1.818-5.12 5.122a6.651 6.651 0 0 0 0 9.392l3.113 3.116a6.626 6.626 0 0 0 4.699 1.943c1.7 0 3.401-.649 4.697-1.943l10.241-10.243a6.591 6.591 0 0 0 1.947-4.696 6.599 6.599 0 0 0-1.947-4.696l-3.116-3.114-1.817 1.817 3.116 3.114a4.045 4.045 0 0 1 1.194 2.88 4.045 4.045 0 0 1-1.194 2.878L25.774 47.357z"" />
+        <path d=""M46.216 14.926a6.597 6.597 0 0 0-4.696-1.946h-.001a6.599 6.599 0 0 0-4.696 1.945L26.582 25.167a6.595 6.595 0 0 0-1.947 4.697 6.599 6.599 0 0 0 1.946 4.698l3.114 3.114 1.818-1.816-3.114-3.114a4.05 4.05 0 0 1-1.194-2.882c0-1.086.424-2.108 1.194-2.878L38.64 16.744a4.042 4.042 0 0 1 2.88-1.194c1.089 0 2.11.425 2.88 1.194l3.114 3.114a4.076 4.076 0 0 1 0 5.758l-5.12 5.12 1.818 1.817 5.12-5.122a6.649 6.649 0 0 0 0-9.393l-3.113-3.114-.003.002z"" />
+      </g>
+    </svg>
+
+    // set default options
+    const defaultOptions = {}
+
+    this.opts = Object.assign({}, defaultOptions, opts)
+
+    this.hostname = this.opts.host
+
+    // Bind all event handlers for referencability
+    ;['getMeta', 'handleClick'].forEach(method => {
+      this[method] = this[method].bind(this)
+    })
+
+    this[this.id] = new Provider(uppy, {","yeah, I'm at crossroads with this one. Here are a few thoughts I have:

1. I think we should consider removing [plugins/Provider](https://github.com/transloadit/uppy/tree/master/src/plugins/Provider) from the plugins folder, because it is not a plugin. And it's the only defaulter there. Maybe we should move it to core? Or somewhere else?

2. Even if we do move [plugins/Provider](https://github.com/transloadit/uppy/tree/master/src/plugins/Provider) to a separate folder, I think its use doesn't apply to the `URL` plugin. I don't consider the URL a Provider because, for GoogleDrive, Dropbox, etc, we have a definite source (aka Provider) they connect to (e.g drive.google.com for GoogleDrive). So the expected behavior can be managed for each Provider.

But for URLs, it would be connecting to different sources (depending on the URL provided), from which we can expect different behaviors (e.g some may require authorization headers etc). So it might be tricky to squeeze that into a Provider. Instead maybe we should have URL stand as a separate plugin and not considered it a Provider type.

3. That said, I think we need a separate module that manages communication with uppy-server. So instead of just [plugins/Provider](https://github.com/transloadit/uppy/tree/master/src/plugins/Provider) which does it right now. We can have a folder structure like this:

```
 ServerBridge(or a better name)
      --- Provider
      --- ApiCalls (or whatever)
```

where plugins like google drive can go on to use `Provider`, while plugins like URL, S3 can just use ApiCalls directly. And then going back to suggestion **1.** we could move `ServerBridge` to `Core` or make it standalone.

What do you think? I hope I made sense 😄 ",Can we remove this?
33,"@@ -0,0 +1,133 @@
+const Plugin = require('../../core/Plugin')
+const { h } = require('preact')
+const Provider = require('../Provider')
+// const Utils = require('../../core/Utils')
+require('whatwg-fetch')
+
+/**
+ * Link
+ *
+ */
+module.exports = class Link extends Plugin {
+  constructor (uppy, opts) {
+    super(uppy, opts)
+    this.id = this.opts.id || 'Url'
+    this.title = 'Link'
+    this.type = 'acquirer'
+    this.icon = () => <svg aria-hidden=""true"" class=""UppyIcon UppyModalTab-icon"" width=""64"" height=""64"" viewBox=""0 0 64 64"">
+      <circle cx=""32"" cy=""32"" r=""31"" />
+      <g fill-rule=""nonzero"" fill=""#FFF"">
+        <path d=""M25.774 47.357a4.077 4.077 0 0 1-5.76 0L16.9 44.24a4.076 4.076 0 0 1 0-5.758l5.12-5.12-1.817-1.818-5.12 5.122a6.651 6.651 0 0 0 0 9.392l3.113 3.116a6.626 6.626 0 0 0 4.699 1.943c1.7 0 3.401-.649 4.697-1.943l10.241-10.243a6.591 6.591 0 0 0 1.947-4.696 6.599 6.599 0 0 0-1.947-4.696l-3.116-3.114-1.817 1.817 3.116 3.114a4.045 4.045 0 0 1 1.194 2.88 4.045 4.045 0 0 1-1.194 2.878L25.774 47.357z"" />
+        <path d=""M46.216 14.926a6.597 6.597 0 0 0-4.696-1.946h-.001a6.599 6.599 0 0 0-4.696 1.945L26.582 25.167a6.595 6.595 0 0 0-1.947 4.697 6.599 6.599 0 0 0 1.946 4.698l3.114 3.114 1.818-1.816-3.114-3.114a4.05 4.05 0 0 1-1.194-2.882c0-1.086.424-2.108 1.194-2.878L38.64 16.744a4.042 4.042 0 0 1 2.88-1.194c1.089 0 2.11.425 2.88 1.194l3.114 3.114a4.076 4.076 0 0 1 0 5.758l-5.12 5.12 1.818 1.817 5.12-5.122a6.649 6.649 0 0 0 0-9.393l-3.113-3.114-.003.002z"" />
+      </g>
+    </svg>
+
+    // set default options
+    const defaultOptions = {}
+
+    this.opts = Object.assign({}, defaultOptions, opts)
+
+    this.hostname = this.opts.host
+
+    // Bind all event handlers for referencability
+    ;['getMeta', 'handleClick'].forEach(method => {
+      this[method] = this[method].bind(this)
+    })
+
+    this[this.id] = new Provider(uppy, {
+      host: this.opts.host,
+      provider: 'url',
+      authProvider: 'url'
+    })
+  }
+
+  getMeta (url) {
+    return fetch(`${this.hostname}/url/meta`, {","based on my suggestion **2.** and **3.** above, we can have this `fetch` done in `ApiCalls`",Can we remove this?
34,"@@ -0,0 +1,133 @@
+const Plugin = require('../../core/Plugin')
+const { h } = require('preact')
+const Provider = require('../Provider')
+// const Utils = require('../../core/Utils')
+require('whatwg-fetch')
+
+/**
+ * Link
+ *
+ */
+module.exports = class Link extends Plugin {
+  constructor (uppy, opts) {
+    super(uppy, opts)
+    this.id = this.opts.id || 'Url'
+    this.title = 'Link'
+    this.type = 'acquirer'
+    this.icon = () => <svg aria-hidden=""true"" class=""UppyIcon UppyModalTab-icon"" width=""64"" height=""64"" viewBox=""0 0 64 64"">
+      <circle cx=""32"" cy=""32"" r=""31"" />
+      <g fill-rule=""nonzero"" fill=""#FFF"">
+        <path d=""M25.774 47.357a4.077 4.077 0 0 1-5.76 0L16.9 44.24a4.076 4.076 0 0 1 0-5.758l5.12-5.12-1.817-1.818-5.12 5.122a6.651 6.651 0 0 0 0 9.392l3.113 3.116a6.626 6.626 0 0 0 4.699 1.943c1.7 0 3.401-.649 4.697-1.943l10.241-10.243a6.591 6.591 0 0 0 1.947-4.696 6.599 6.599 0 0 0-1.947-4.696l-3.116-3.114-1.817 1.817 3.116 3.114a4.045 4.045 0 0 1 1.194 2.88 4.045 4.045 0 0 1-1.194 2.878L25.774 47.357z"" />
+        <path d=""M46.216 14.926a6.597 6.597 0 0 0-4.696-1.946h-.001a6.599 6.599 0 0 0-4.696 1.945L26.582 25.167a6.595 6.595 0 0 0-1.947 4.697 6.599 6.599 0 0 0 1.946 4.698l3.114 3.114 1.818-1.816-3.114-3.114a4.05 4.05 0 0 1-1.194-2.882c0-1.086.424-2.108 1.194-2.878L38.64 16.744a4.042 4.042 0 0 1 2.88-1.194c1.089 0 2.11.425 2.88 1.194l3.114 3.114a4.076 4.076 0 0 1 0 5.758l-5.12 5.12 1.818 1.817 5.12-5.122a6.649 6.649 0 0 0 0-9.393l-3.113-3.114-.003.002z"" />
+      </g>
+    </svg>
+
+    // set default options
+    const defaultOptions = {}
+
+    this.opts = Object.assign({}, defaultOptions, opts)
+
+    this.hostname = this.opts.host
+
+    // Bind all event handlers for referencability
+    ;['getMeta', 'handleClick'].forEach(method => {
+      this[method] = this[method].bind(this)
+    })
+
+    this[this.id] = new Provider(uppy, {
+      host: this.opts.host,
+      provider: 'url',
+      authProvider: 'url'
+    })
+  }
+
+  getMeta (url) {
+    return fetch(`${this.hostname}/url/meta`, {
+      method: 'post',
+      credentials: 'include',
+      headers: {
+        'Accept': 'application/json',
+        'Content-Type': 'application/json'
+      },
+      body: JSON.stringify({
+        url: url
+      })
+    })
+    .then(this[this.id].onReceiveResponse)
+    .then((res) => res.json())
+  }
+
+  getFileNameFromUrl (url) {
+    return url.substring(url.lastIndexOf('/') + 1)
+  }
+
+  addFile (url) {
+    this.getMeta(url).then((meta) => {
+      const tagFile = {
+        source: this.id,
+        name: this.getFileNameFromUrl(url),
+        type: meta.type,
+        data: {
+          size: meta.size
+        },
+        isRemote: true,
+        body: {
+          url: url
+        },
+        remote: {
+          host: this.opts.host,
+          url: `${this.hostname}/url/get`,
+          body: {
+            fileId: url,
+            url: url
+          }
+        }
+      }
+
+      this.uppy.log('[Url] Adding remote file')
+      this.uppy.addFile(tagFile)
+        .then(() => {
+          const dashboard = this.uppy.getPlugin('Dashboard')
+          if (dashboard) dashboard.hideAllPanels()
+        })
+    })
+  }
+
+  handleClick () {
+    this.addFile(this.input.value)
+  }
+
+  render (state) {
+    return <div class=""uppy-Url"">
+      <input","I think if this view is not re-usable by any other plugin, then we can leave this as is, and no need to fuse this with [Provider/view](https://github.com/transloadit/uppy/tree/master/src/plugins/Provider/view).",Can we remove this?
35,"@@ -0,0 +1,133 @@
+const { Plugin } = require('@uppy/core')
+const getDroppedFiles = require('@uppy/utils/lib/getDroppedFiles')
+const toArray = require('@uppy/utils/lib/toArray')
+
+/**
+ * Drop Target plugin
+ *
+ */
+module.exports = class DropTarget extends Plugin {
+  static VERSION = require('../package.json').version
+
+  constructor (uppy, opts) {
+    super(uppy, opts)
+    this.type = 'acquirer'
+    this.id = this.opts.id || 'DropTarget'
+    this.title = 'Drop Target'
+
+    // Default options
+    const defaultOpts = {
+      target: null,
+    }
+
+    // Merge default options with the ones set by user
+    this.opts = { ...defaultOpts, ...opts }
+    this.removeDragOverClassTimeout = null
+  }
+
+  addFiles = (files) => {
+    const descriptors = files.map((file) => ({
+      source: this.id,
+      name: file.name,
+      type: file.type,
+      data: file,
+      meta: {
+        // path of the file relative to the ancestor directory the user selected.
+        // e.g. 'docs/Old Prague/airbnb.pdf'
+        relativePath: file.relativePath || null,
+      },
+    }))
+
+    try {
+      this.uppy.addFiles(descriptors)
+    } catch (err) {
+      this.uppy.log(err)
+    }
+  }
+
+  handleDrop = (event) => {
+    event.preventDefault()
+    event.stopPropagation()
+    clearTimeout(this.removeDragOverClassTimeout)
+
+    // 2. Remove dragover class",The numbering is a little funny in the comments here in `handleDrop()` (has only 2. and 3.) and below in `handleDragOver` (has only 1.).,This should be `thi
36,"@@ -0,0 +1,135 @@
+const Plugin = require('../Plugin')
+const Client = require('./Client')
+const StatusSocket = require('./Socket')
+
+module.exports = class Transloadit extends Plugin {
+  constructor (core, opts) {
+    super(core, opts)
+    this.type = 'uploader'
+    this.id = 'Transloadit'
+    this.title = 'Transloadit'
+
+    const defaultOptions = {
+      templateId: null,
+      wait: false
+    }
+
+    this.opts = Object.assign({}, defaultOptions, opts)
+
+    this.prepareUpload = this.prepareUpload.bind(this)
+    this.afterUpload = this.afterUpload.bind(this)
+
+    if (!this.opts.key) {
+      throw new Error('Transloadit: The `key` option is required. ' +
+        'You can find your Transloadit API key at https://transloadit.com/accounts/credentials.')
+    }
+    if (!this.opts.templateId) {
+      throw new Error('Transloadit: The `templateId` option is required. ' +
+        'You can find your template\'s ID at https://transloadit.com/templates.')
+    }
+
+    this.client = new Client({
+      key: this.opts.key
+    })
+  }
+
+  createAssembly () {
+    this.core.log('Transloadit: create assembly')
+
+    return this.client.createAssembly({
+      templateId: this.opts.templateId,
+      expectedFiles: Object.keys(this.core.state.files).length
+    }).then((assembly) => {
+      this.updateState({ assembly })
+
+      function attachAssemblyMetadata (file, assembly) {
+        const meta = Object.assign({}, file.meta, {
+          assembly_url: assembly.assembly_url,
+          filename: file.name,
+          fieldname: 'file'
+        })
+        // Add assembly-specific Tus endpoint.
+        const tus = Object.assign({}, file.tus, {
+          endpoint: assembly.tus_url
+        })
+        return Object.assign(
+          {},
+          file,
+          { meta, tus }
+        )
+      }
+
+      const filesObj = this.core.state.files
+      const files = {}
+      Object.keys(filesObj).forEach((id) => {
+        files[id] = attachAssemblyMetadata(filesObj[id], assembly)
+      })
+
+      this.core.setState({ files })
+
+      if (this.opts.wait) {
+        return this.beginWaiting()
+      }
+    }).catch((err) => {
+      this.core.emit('informer', '⚠️ Transloadit: Could not create assembly', 'error', 0)
+
+      // Reject the promise.
+      throw err
+    })
+  }
+
+  beginWaiting () {
+    this.socket = new StatusSocket(
+      this.state.assembly.websocket_url,
+      this.state.assembly
+    )
+
+    this.assemblyReady = new Promise((resolve, reject) => {
+      this.socket.on('finished', resolve)
+      this.socket.on('error', reject)
+    })
+
+    return new Promise((resolve, reject) => {
+      this.socket.on('connect', resolve)
+      this.socket.on('error', reject)
+    })
+  }
+
+  prepareUpload () {
+    this.core.emit('informer', '🔄 Preparing upload...', 'info', 0)
+    return this.createAssembly().then(() => {
+      this.core.emit('informer:hide')
+    })
+  }
+
+  afterUpload () {
+    this.core.emit('informer', '🔄 Encoding...', 'info', 0)","Right now when the Encoding step starts, you see the progress bar turn green ""100% uploaded"" just before the ""Encoding"" message pops up. This step can also give progress events (one `assembly_result_finished` for each uploaded file), maybe we can integrate the pre- and postprocess steps in the dashboard progress bar to make this a bit nicer.",This should be `thi
37,"@@ -0,0 +1,136 @@
+/**
+ * Adapted from preact-virtual-list: https://github.com/developit/preact-virtual-list
+ *
+ * © 2016 Jason Miller
+ *
+ * Permission is hereby granted, free of charge, to any person obtaining a copy
+ * of this software and associated documentation files (the ""Software""), to deal
+ * in the Software without restriction, including without limitation the rights
+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
+ * copies of the Software, and to permit persons to whom the Software is
+ * furnished to do so, subject to the following conditions:
+ *
+ * The above copyright notice and this permission notice shall be included in all
+ * copies or substantial portions of the Software.
+ *
+ * THE SOFTWARE IS PROVIDED ""AS IS"", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
+ * SOFTWARE.
+ *
+ * Adaptations:
+ * - Added role=presentation to helper elements
+ * - Tweaked styles for Uppy's Dashboard use case
+ */
+
+const { h, Component } = require('preact')
+
+const STYLE_INNER = {
+  position: 'relative',
+  // Disabled for our use case: the wrapper elements around FileList already deal with overflow,
+  // and this additional property would hide things that we want to show.
+  //
+  // overflow: 'hidden',
+  width: '100%',
+  minHeight: '100%'
+}
+
+const STYLE_CONTENT = {
+  position: 'absolute',
+  top: 0,
+  left: 0,
+  // Because the `top` value gets set to some offset, this `height` being 100% would make the scrollbar
+  // stretch far beyond the content. For our use case, the content div actually can get its height from
+  // the elements inside it, so we don't need to specify a `height` property at all.
+  //
+  // height: '100%',
+  width: '100%',
+  overflow: 'visible'
+}
+
+class VirtualList extends Component {
+  constructor (props) {
+    super(props)
+    this.state = {
+      offset: 0,
+      height: 0
+    }
+  }
+
+  resize = () => {
+    if (this.state.height !== this.base.offsetHeight) {
+      this.setState({
+        height: this.base.offsetHeight
+      })
+    }
+  }
+
+  handleScroll = () => {
+    this.setState({
+      offset: this.base.scrollTop
+    })
+    if (this.props.sync) {
+      this.forceUpdate()
+    }
+  }
+
+  componentDidUpdate () {
+    this.resize()
+  }
+
+  componentDidMount () {
+    this.resize()
+    addEventListener('resize', this.resize)
+  }
+
+  componentWillUnmount () {
+    removeEventListener('resize', this.resize)
+  }
+
+  render ({
+    data,
+    rowHeight,
+    renderRow,
+    overscanCount = 10,
+    sync,
+    ...props
+  }) {
+    const { offset, height } = this.state
+    // first visible row index
+    let start = Math.floor(offset / rowHeight)
+
+    // actual number of visible rows (without overscan)
+    let visibleRowCount = Math.floor(height / rowHeight)
+
+    // Overscan: render blocks of rows modulo an overscan row count
+    // This dramatically reduces DOM writes during scrolling
+    if (overscanCount) {
+      start = Math.max(0, start - (start % overscanCount))
+      visibleRowCount += overscanCount
+    }
+
+    // last visible + overscan row index
+    const end = start + 1 + visibleRowCount
+
+    // data slice currently in viewport plus overscan items
+    const selection = data.slice(start, end)
+
+    const styleInner = { ...STYLE_INNER, height: data.length * rowHeight }
+    const styleContent = { ...STYLE_CONTENT, top: start * rowHeight }
+
+    return (
+      <div onScroll={this.handleScroll} {...props}>
+        <div role=""presentation"" style={styleInner}>
+          <div role=""presentation"" style={styleContent}>","Divs already have no semantics, I believe we don't need to strip them of their semantics with `role=""presentation""`?
Also - since we inlined VirtualList (good idea), let's change `<div role=""listitem"">` back to `<li>`?",Can we remove this?
38,"@@ -0,0 +1,137 @@
+---
+type: docs
+order: 4
+title: ""Custom Stores""
+permalink: docs/stores/
+---
+
+By default, Uppy stores its internal state in an object.
+If your app uses a state management library such as [Redux](https://redux.js.org), it can be useful to have Uppy store its state there instead—that way, you could write custom uploader UI components in the same way as the other components in the application.
+
+Uppy comes with two state management solutions (stores):
+
+ - `DefaultStore`, a simple object-based store.
+ - `ReduxStore`, a store that uses a key in a Redux store.
+
+## Using Stores
+
+To use a store, pass an instance to the [`store` option](/docs/uppy#store-defaultstore) in the Uppy constructor:
+
+```js
+const defaultStore = require('uppy/lib/store/DefaultStore')
+
+const uppy = Uppy({
+  store: defaultStore()
+})
+```
+
+### `DefaultStore`
+
+Uppy uses the `DefaultStore`…by default! You do not need to do anything to use it.
+It does not take any options.
+
+### `ReduxStore`
+
+The `ReduxStore` stores Uppy state on a key in an existing Redux store.
+The `ReduxStore` dispatches `uppy/STATE_UPDATE` actions to update state.
+When the state in Redux changes, it notifies Uppy.
+This way, you get most of the benefits of Redux, including support for the Redux Devtools and time traveling!
+
+To use the `ReduxStore`, add its reducer to the `uppy` key:
+
+```js
+const ReduxStore = require('uppy/lib/store/ReduxStore')
+const reducer = combineReducers({
+  ...reducers,
+  uppy: ReduxStore.reducer
+})
+```
+
+Then pass a Redux store instance to the Uppy constructor:
+
+```js
+const { createStore } = require('redux')
+const ReduxStore = require('uppy/lib/store/ReduxStore')
+
+const store = createStore(reducer)
+const uppy = Uppy({
+  store: ReduxStore({
+    store: store // That's a lot of stores!
+  })","Yes, but it’s Christmas time and we’ve just passed Black Friday.",Shouldn't this be `
39,"@@ -0,0 +1,14 @@
+const webkitGetAsEntryApi = require('./utils/webkitGetAsEntryApi')
+const getFilesAndDirectoriesApi = require('./utils/getFilesAndDirectoriesApi')
+const fallbackApi = require('./utils/fallbackApi')
+
+module.exports = function getDroppedFiles (dataTransfer, callback) {
+  if (dataTransfer.items[0] && 'webkitGetAsEntry' in dataTransfer.items[0]) {
+    webkitGetAsEntryApi(dataTransfer, callback)
+  } else if ('getFilesAndDirectories' in dataTransfer) {
+    // Doesn't actually work in firefox, maybe in previous versions. webkitGetAsEntryApi() works.
+    getFilesAndDirectoriesApi(dataTransfer, callback)
+  } else {
+    fallbackApi(dataTransfer, callback)
+  }
+}","I think we should move those util functions that work with drag-drop to @uppy/utils, so they can be shared (maybe later) with drag-drop plugin? Otherwise it will continue to depend on drag-drop module.",I don't think this 
40,"@@ -0,0 +1,141 @@
+const Plugin = require('../Plugin')
+const StatusBar = require('./StatusBar')
+const { getSpeed } = require('../../core/Utils')
+const { getBytesRemaining } = require('../../core/Utils')
+const { prettyETA } = require('../../core/Utils')
+const prettyBytes = require('prettier-bytes')
+
+/**
+ * A status bar.
+ */
+module.exports = class StatusBarUI extends Plugin {
+  constructor (core, opts) {
+    super(core, opts)
+    this.id = 'StatusBarUI'
+    this.title = 'StatusBar UI'
+    this.type = 'progressindicator'
+
+    // set default options
+    const defaultOptions = {
+      target: 'body',
+      showProgressDetails: false
+    }
+
+    // merge default options with the ones set by user
+    this.opts = Object.assign({}, defaultOptions, opts)
+
+    this.pauseAll = this.pauseAll.bind(this)
+    this.resumeAll = this.resumeAll.bind(this)
+    this.cancelAll = this.cancelAll.bind(this)
+    this.render = this.render.bind(this)
+    this.install = this.install.bind(this)
+  }
+
+  cancelAll () {
+    this.core.bus.emit('core:cancel-all')
+  }
+
+  pauseAll () {
+    this.core.bus.emit('core:pause-all')
+  }
+
+  resumeAll () {
+    this.core.bus.emit('core:resume-all')
+  }
+
+  getTotalSpeed (files) {
+    let totalSpeed = 0
+    files.forEach((file) => {
+      totalSpeed = totalSpeed + getSpeed(file.progress)
+    })
+    return totalSpeed
+  }
+
+  getTotalETA (files) {
+    const totalSpeed = this.getTotalSpeed(files)
+    if (totalSpeed === 0) {
+      return 0
+    }
+
+    const totalBytesRemaining = files.reduce((total, file) => {
+      return total + getBytesRemaining(file.progress)
+    }, 0)
+
+    return Math.round(totalBytesRemaining / totalSpeed * 10) / 10
+  }
+
+  render (state) {
+    const files = state.files
+
+    const uploadStartedFiles = Object.keys(files).filter((file) => {
+      return files[file].progress.uploadStarted
+    })
+    const completeFiles = Object.keys(files).filter((file) => {
+      return files[file].progress.uploadComplete
+    })
+    const inProgressFiles = Object.keys(files).filter((file) => {
+      return !files[file].progress.uploadComplete &&
+             files[file].progress.uploadStarted &&
+             !files[file].isPaused
+    })
+    const processingFiles = Object.keys(files).filter((file) => {
+      return files[file].progress.preprocess || files[file].progress.postprocess
+    })
+
+    let inProgressFilesArray = []
+    inProgressFiles.forEach((file) => {
+      inProgressFilesArray.push(files[file])
+    })
+
+    const totalSpeed = prettyBytes(this.getTotalSpeed(inProgressFilesArray))
+    const totalETA = prettyETA(this.getTotalETA(inProgressFilesArray))
+
+    // total size and uploaded size
+    let totalSize = 0
+    let totalUploadedSize = 0
+    inProgressFilesArray.forEach((file) => {
+      totalSize = totalSize + (file.progress.bytesTotal || 0)
+      totalUploadedSize = totalUploadedSize + (file.progress.bytesUploaded || 0)
+    })
+    totalSize = prettyBytes(totalSize)
+    totalUploadedSize = prettyBytes(totalUploadedSize)
+
+    const isAllComplete = state.totalProgress === 100 &&
+      completeFiles.length === Object.keys(files).length &&
+      processingFiles.length === 0
+    const isAllPaused = inProgressFiles.length === 0 && !isAllComplete && uploadStartedFiles.length > 0
+    const isUploadStarted = uploadStartedFiles.length > 0
+
+    const resumableUploads = this.core.getState().capabilities.resumableUploads || false
+
+    return StatusBar({
+      error: state.error,
+      totalProgress: state.totalProgress,
+      totalSize: totalSize,
+      totalUploadedSize: totalUploadedSize,
+      uploadStartedFiles: uploadStartedFiles,
+      isAllComplete: isAllComplete,
+      isAllPaused: isAllPaused,
+      isUploadStarted: isUploadStarted,
+      pauseAll: this.pauseAll,
+      resumeAll: this.resumeAll,
+      cancelAll: this.cancelAll,
+      complete: completeFiles.length,
+      inProgress: uploadStartedFiles.length,
+      totalSpeed: totalSpeed,
+      totalETA: totalETA,
+      files: state.files,
+      resumableUploads: resumableUploads
+    })",Everything here is basically a copy-paste job of all the necessary props from the Dashboard.,Why do we need this
41,"@@ -0,0 +1,151 @@
+---
+title: ""Vue Integration""
+type: docs
+module: ""@uppy/vue""
+permalink: docs/vue/
+order: 0
+category: ""Vue""
+---
+
+Uppy provides [Vue][] components for the included UI plugins.
+
+## Installation
+
+All Vue components are provided through the `@uppy/vue` package
+
+Install from NPM:
+
+```sh
+npm install @uppy/vue
+```
+## CSS
+
+Make sure to also include the necessary CSS files for each Uppy Vue component you are using.
+
+## Usage
+
+The components can be used with [Vue][] and frameworks that use it, like [Nuxt][].
+
+Instead of adding a UI plugin to an Uppy instance with `.use()`, the Uppy instance can be passed into components as an `uppy` prop. 
+
+Note: At the moment, this example is not functional due to an unresolved issue with using other plugins with the Dashboard",Still the case? 🤔 ,I think it would be
42,"@@ -0,0 +1,151 @@
+---
+title: ""Vue Integration""
+type: docs
+module: ""@uppy/vue""
+permalink: docs/vue/
+order: 0
+category: ""Vue""
+---
+
+Uppy provides [Vue][] components for the included UI plugins.
+
+## Installation
+
+All Vue components are provided through the `@uppy/vue` package
+
+Install from NPM:
+
+```sh
+npm install @uppy/vue
+```
+## CSS
+
+Make sure to also include the necessary CSS files for each Uppy Vue component you are using.
+
+## Usage
+
+The components can be used with [Vue][] and frameworks that use it, like [Nuxt][].
+
+Instead of adding a UI plugin to an Uppy instance with `.use()`, the Uppy instance can be passed into components as an `uppy` prop. 
+
+Note: At the moment, this example is not functional due to an unresolved issue with using other plugins with the Dashboard
+
+```vue
+<template>
+  <div id=""app"">
+    <Dashboard :uppy=""uppy"" :plugins=""['Webcam']""/>
+  </div>
+</template>
+
+<script>
+import { Dashboard } from '@uppy/vue'
+
+import '@uppy/core/dist/style.css'
+import '@uppy/dashboard/dist/style.css'
+
+import Uppy from '@uppy/core'
+import Webcam from '@uppy/webcam'
+
+export default {
+  name: 'App',
+  components: {
+    Dashboard
+  },
+  computed: {
+    uppy: () => new Uppy().use(Webcam)",Is it guaranteed that this computed property will only be called once? Or else is there some kind of beforeMount() style method that folks could use to create the instance? It's critical that the same instance is used for the entire lifetime of the component.,Shouldn't this be `
43,"@@ -0,0 +1,152 @@
+const el_GR = {}
+
+el_GR.strings = {
+  addMore: 'Προσθέστε περισσότερα',
+  addMoreFiles: 'Προσθέστε περισσότερα αρχεία',
+  addingMoreFiles: 'Προσθήκη αρχείων',
+  allowAccessDescription: 'Για να βγάλετε φωτογραφίες ή βίντεο με την κάμερά σας, παρακαλούμε επιτρέψτε την πρόσβαση στην κάμερά σας για αυτόν τον ιστότοπο.',
+  allowAccessTitle: 'Παρακαλούμε επιτρέψτε την πρόσβαση στην κάμερά σας',
+  authenticateWith: 'Σύνδεση με %{pluginName}',
+  authenticateWithTitle: 'Παρακαλούμε συνδεθείτε με %{pluginName} για να επιλέξετε αρχεία',
+  back: 'Πίσω',
+  browse: 'Περιήγηση',
+  cancel: 'Άκυρο',
+  cancelUpload: 'Ακύρωση μεταφόρτωσης',
+  chooseFiles: 'Επιλέξτε αρχεία',
+  closeModal: 'Κλείσιμο παραθύρου',
+  companionAuthError: 'Απαιτείται εξουσιοδότηση',
+  companionError: 'Η σύνδεση με το Companion απέτυχε',
+  complete: 'Ολοκληρώθηκε',
+  connectedToInternet: 'Συνδεθήκατε στο Internet',
+  copyLink: 'Αντιγραφή συνδέσμου',
+  copyLinkToClipboardFallback: 'Αντιγραφή του παρακάτω συνδέσμου',
+  copyLinkToClipboardSuccess: 'Ο σύνδεσμος αντιγράφηκε',
+  creatingAssembly: 'Προετοιμασία μεταφόρτωσης...',
+  creatingAssemblyFailed: 'Transloadit: Σφάλμα κατά την προετοιμασία',
+  dashboardTitle: 'Μεταφόρτωση αρχείων',
+  dashboardWindowTitle: 'Παράθυρο μεταφόρτωσης αρχείων (Πατήστε escape για να κλείσει)',
+  dataUploadedOfTotal: '%{complete} από %{total}',
+  done: 'Τέλος',
+  dropHereOr: 'Ρίξτε τα αρχεία εδώ ή %{browse}',
+  dropHint: 'Ρίξτε τα αρχεία σας εδώ',
+  dropPaste: 'Ρίξτε τα αρχεία εδώ, κάντε επικόλληση ή %{browse}',
+  dropPasteImport: 'Ρίξτε αρχεία εδώ, κάντε επικόλληση, %{browse} ή εισαγωγή από',
+  edit: 'Επεξεργασία',
+  editFile: 'Επεξεργασία αρχείου',
+  editing: 'Γίνεται επεξεργασία %{file}',
+  emptyFolderAdded: 'Δεν προστέθηκαν αρχεία από τον άδειο φάκελο',
+  encoding: 'Γίνεται κωδικοποίηση...',
+  enterCorrectUrl: 'Λανθασμένο URL: Παρακαλούμε βεβαιωθείτε ότι εισάγετε έναν άμεσο σύνδεσμο προς κάποιο αρχείο',
+  enterUrlToImport: 'Εισάγετε URL για να γίνει εισαγωγή του αρχείου',
+  exceedsSize: 'Το αρχείο υπερβαίνει το μέγιστο επιτρεπτό όριο που είναι',
+  failedToFetch: 'Δεν ήταν δυνατή η λήψη από το URL, παρακαλούμε βεβαιωθείτε ότι είναι σωστό',
+  failedToUpload: 'Δεν ήταν δυνατή η μεταφόρτωση %{file}',
+  fileSource: 'Πηγή αρχείου: %{name}',
+  filesUploadedOfTotal: {
+    '0': '%{complete} από %{smart_count} αρχεία ανέβηκαν',
+    '1': '%{complete} από %{smart_count} αρχείο ανέβηκε',
+    '2': '%{complete} από %{smart_count} αρχεία ανέβηκαν'
+  },
+  filter: 'Φιλτράρισμα',
+  finishEditingFile: 'Ολοκλήρωση επεξεργασίας αρχείου',
+  folderAdded: {
+    '0': 'Προστέθηκαν %{smart_count} αρχεία από %{folder}',
+    '1': 'Προστέθηκε %{smart_count} αρχείο από %{folder}',
+    '2': 'Προστέθηκαν %{smart_count} αρχεία από %{folder}'
+  },
+  import: 'Εισαγωγή',
+  importFrom: 'Εισαγωγή από %{name}',
+  link: 'Σύνδεσμος',
+  loading: 'Φορτώνει...',
+  logOut: 'Αποσύνδεση',
+  myDevice: 'Η συσκευή μου',
+  noFilesFound: 'Δεν υπάρχουν αρχεία ή φάκελοι εδώ',
+  noInternetConnection: 'Δεν υπάρχει σύνδεση στο Internet',
+  openFolderNamed: 'Άνοιγμα φακέλου %{name}',
+  pause: 'Παύση',
+  pauseUpload: 'Παύση μεταφόρτωσης',
+  paused: 'Έγινε παύση',
+  poweredBy: 'Με τη δύναμη τού',
+  preparingUpload: 'Προετοιμασία μεταφόρτωσης...',
+  processingXFiles: {
+    '0': 'Προετοιμασία %{smart_count} αρχείων',
+    '1': 'Προετοιμασία %{smart_count} αρχείου',
+    '2': 'Προετοιμασία %{smart_count} αρχείων'
+  },
+  removeFile: 'Αφαίρεση αρχείου',
+  resetFilter: 'Επαναφορά φίλτρου',
+  resume: 'Συνέχεια',
+  resumeUpload: 'Συνέχεια μεταφόρτωσης',
+  retry: 'Προσπάθεια ξανά',
+  retryUpload: 'Προσπάθεια μεταφόρτωσης ξανά',
+  saveChanges: 'Αποθήκευση αλλαγών',
+  selectAllFilesFromFolderNamed: 'Επιλογή όλων των αρχείων από τον φάκελο %{name}',
+  selectFileNamed: 'Επιλογή αρχείου %{name}',
+  selectX: {
+    '0': 'Επιλογή %{smart_count}',
+    '1': 'Επιλογή %{smart_count}',
+    '2': 'Επιλογή %{smart_count}'
+  },
+  smile: 'Χαμογελάστε!',
+  startRecording: 'Ξεκίνημα εγγραφής βίντεο',
+  stopRecording: 'Σταμάτημα εγγραφής βίντεο',
+  takePicture: 'Βγάλτε μια φωτογραφία',
+  timedOut: 'Η μεταφόρτωση σταμάτησε για %{seconds} δευτερόλεπτα, γίνεται ακύρωση.',
+  unselectAllFilesFromFolderNamed: 'Αποεπιλογή όλων των αρχείων από τον φάκελο %{name}',
+  unselectFileNamed: 'Αποεπιλογή αρχείου %{name}',
+  upload: 'Μεταφόρτωση',
+  uploadComplete: 'Μεταφόρτωση ολοκληρώθηκε',
+  uploadFailed: 'Μεταφόρτωση απέτυχε',
+  uploadPaused: 'Μεταφόρτωση σε παύση',
+  uploadXFiles: {
+    '0': 'Μεταφόρτωση %{smart_count} αρχείων',
+    '1': 'Μεταφόρτωση %{smart_count} αρχείου',
+    '2': 'Μεταφόρτωση %{smart_count} αρχείων'
+  },
+  uploadXNewFiles: {
+    '0': 'Μεταφόρτωση +%{smart_count} αρχείων',
+    '1': 'Μεταφόρτωση +%{smart_count} αρχείου',
+    '2': 'Μεταφόρτωση +%{smart_count} αρχείων'
+  },
+  uploading: 'Γίνεται μεταφόρτωση',
+  uploadingXFiles: {
+    '0': 'Μεταφορτώνονται %{smart_count} αρχεία',
+    '1': 'Μεταφορτώνεται %{smart_count} αρχείο',
+    '2': 'Μεταφορτώνονται %{smart_count} αρχεία'
+  },
+  xFilesSelected: {
+    '0': '%{smart_count} επιλεγμένα αρχεία',
+    '1': '%{smart_count} επιλεγμένο αρχείο',
+    '2': '%{smart_count} επιλεγμένα αρχεία'
+  },
+  xMoreFilesAdded: {
+    '0': '%{smart_count} ακόμα αρχεία προστέθηκαν',
+    '1': '%{smart_count} ακόμα αρχείο προστέθηκε',
+    '2': '%{smart_count} ακόμα αρχεία προστέθηκαν'
+  },
+  xTimeLeft: '%{time} απομένουν',
+  youCanOnlyUploadFileTypes: 'Μπορείτε να ανεβάσετε μόνο: %{types}',
+  youCanOnlyUploadX: {
+    '0': 'Μπορείτε να ανεβάσετε μόνο %{smart_count} αρχεία',
+    '1': 'Μπορείτε να ανεβάσετε μόνο %{smart_count} αρχείο',
+    '2': 'Μπορείτε να ανεβάσετε μόνο %{smart_count} αρχεία'
+  },
+  youHaveToAtLeastSelectX: {
+    '0': 'Πρέπει να επιλέξετε τουλάχιστον %{smart_count} αρχεία',
+    '1': 'Πρέπει να επιλέξετε τουλάχιστον %{smart_count} αρχείο',
+    '2': 'Πρέπει να επιλέξετε τουλάχιστον %{smart_count} αρχεία'
+  }
+};","```suggestion
}
```",Why do we need this
44,"@@ -0,0 +1,152 @@
+const fi_FI = {}
+
+fi_FI.strings = {
+  addMore: 'Lisää',
+  addMoreFiles: 'Lisää tiedostoja',
+  addingMoreFiles: 'Lisätään tiedostoja',
+  allowAccessDescription: 'Jotta voit ottaa kuvia tai videota kamerallasi, sinun tulee antaa tälle sivustolle oikeus käyttää kameraasi.',
+  allowAccessTitle: 'Salli kameran käyttö, kiitos',
+  authenticateWith: 'Mene %{pluginName}',
+  authenticateWithTitle: '%{pluginName} vaadittu tunnistautumiseen, jotta voit valita tiedostoja',
+  back: 'Takaisin',
+  browse: 'selaa',
+  cancel: 'Peruuta',
+  cancelUpload: 'Peruuta lähetys',
+  chooseFiles: 'Valitse tiedostot',
+  closeModal: 'Sulje ikkuna',
+  companionAuthError: 'Käyttöoikeus vaadittu',
+  companionError: 'Yhdistäminen Companioniin epäonnistui',
+  complete: 'Valmis',
+  connectedToInternet: 'Yhdistetty Internettiin',
+  copyLink: 'Kopioi linkki',
+  copyLinkToClipboardFallback: 'Kopioi alla oleva linkki',
+  copyLinkToClipboardSuccess: 'Linkki kopioitu leikepöydälle',
+  creatingAssembly: 'Valmistellaan lähetystä...',
+  creatingAssemblyFailed: 'Transloadit: Assemblyn luonti epäonnistui',
+  dashboardTitle: 'Tiedoston Lataaja',
+  dashboardWindowTitle: 'Tiedoston latausikkuna (Paina Esc sulkeaksesi)',
+  dataUploadedOfTotal: '%{complete} / %{total}',
+  done: 'Valmis',
+  dropHereOr: 'Pudota tiedostot tähän tai %{browse}',
+  dropHint: 'Pudota tiedostot tähän',
+  dropPaste: 'Pudota tiedostot tähän, liitä tai %{browse}',
+  dropPasteImport: 'Pudota tiedostot tähän, liitä, %{browse} tai tuo',
+  edit: 'Muokkaa',
+  editFile: 'Muokkaa tiedostoa',
+  editing: 'Muokataan %{file}',
+  emptyFolderAdded: 'Ei lisätty tiedostoja tyhjästä kansiosta',
+  encoding: 'Koodataan...',
+  enterCorrectUrl: 'Epäkelpo osoita: Varmista, että osoite osoittaa suoraan tiedostoon',
+  enterUrlToImport: 'Anna osoite tuodaksesi tiedoston',
+  exceedsSize: 'Tiedoston koko ylittää sallitun maksimin',
+  failedToFetch: 'Companion ei voinut ladata tiedostoa osoitteesta, onko osoite varmasti oikea?',
+  failedToUpload: 'Ei voitu lähettää tiedostoa %{file}',
+  fileSource: 'Tiedoston lähde: %{name}',
+  filesUploadedOfTotal: {
+    '0': '%{complete} / %{smart_count} tiedostosta lähetetty',
+    '1': '%{complete} / %{smart_count} tiedostoa lähetetty',
+    '2': '%{complete} / %{smart_count} tiedostoa lähetetty'
+  },
+  filter: 'Suodata',
+  finishEditingFile: 'Lopeta tiedoston muokkaus',
+  folderAdded: {
+    '0': 'Lisätty %{smart_count} tiedosto kansiosta %{folder}',
+    '1': 'Lisätty %{smart_count} tiedostoa kansiosta %{folder}',
+    '2': 'Lisätty %{smart_count} tiedostoa kansiosta %{folder}'
+  },
+  import: 'Tuo',
+  importFrom: 'Tuo kohteesta %{name}',
+  link: 'Linkki',
+  loading: 'Ladataan...',
+  logOut: 'Kirjaudu ulos',
+  myDevice: 'Minun laite',
+  noFilesFound: 'Sinulla ei ole tiedostoja tai kansioita täällä',","Fine to use “sinulla” vs “teillä” here, doesn’t sound rude?",I don't think this 
45,"@@ -0,0 +1,153 @@
+---
+title: ""Uppy 1.3: Accessibility and performance, new languages""
+date: 2019-08-01
+author: arturi
+image: """"
+published: false
+---
+
+Hi there! We are back after some silence and cooldown following the [Uppy 1.0 release](https://uppy.io/blog/2019/04/1.0/) in the end of April. It was pretty well received by the commnunity and press: we hit front page of Hacker News, [Product Hunt](https://www.producthunt.com/posts/uppy-1-0/) and [Reddit](https://www.reddit.com/r/javascript/comments/bhkx5k/uppy_10_your_best_friend_in_file_uploading/), went trending and gained over 20,000 stargazers on GitHub, got mentioned by [Smashing Magazine](https://mobile.twitter.com/smashingmag/status/1097870169043546112), [JavaScript Daily](https://twitter.com/JavaScriptDaily/status/1122935583603556352) and [JavaScript Weekly](https://javascriptweekly.com/issues/434). Crazy ride! We’d like to thank all our contributors and users for their continued support.
+
+It was not all self-reflection and celebrations in Uppy Remote Headquaters™ past `1.0`. We took a few vacations, and then got back to work, releasing Uppy `1.1`, `1.2` and `1.3`, addressing a lot of issues raised by the community and the team.
+
+This post highlights the most important and exciting changes from those releases.
+
+<!--more-->
+
+## Accessibility
+
+Our new team member, Evgenia, has been on a roll improving accessiblity in Uppy, together with Artur and Alex. Evgenia has come up with something called “superfocus”, that makes sure focus stays on the most relevant button or field in the current view. The `@uppy/provider-views` layouts have been refactored so that checkboxes and labels are accessible. Focus styles have also been improved.
+
+<video alt=""Demo video showing Uppy focus management in action"" muted autoplay loop>
+  <source src=""/images/blog/1.3/uppy-focus-demo.webm"" type=""video/webm"">
+  <source src=""/images/blog/1.3/uppy-focus-demo.mp4"" type=""video/mp4"">
+</video>
+
+Other notable accessiblity fixes and improvements:
+
+* An “Add more” caption near the + button has been added to the desktop version of Uppy
+* “Copy link” & “Edit” links have been replaced with icons
+* All svgs are now not focusable in IE11
+* Pasting works while we’re focused on buttons
+* Focus is not lost when state is updated in filter in provider-views or when editing file meta
+* Selected checkboxes now persist when moving between folders
+
+⚠️ `@uppy/provider-views` translation strings have been moved from Dashboard to Core, this eliminates a dependency of provider-views upon Dashboard [#1712](https://github.com/transloadit/uppy/pull/1712).
+
+See [#1507](https://github.com/transloadit/uppy/pull/1507), [#1574](https://github.com/transloadit/uppy/pull/1574) and [#1656](https://github.com/transloadit/uppy/pull/1656) for more details.
+
+## Dashboard Performance Improvements
+
+Renée attacked performance problems in the Dashboard when adding many hundreds of files. Previously, we naively rerendered the entire file list when _any_ file had a change. Now, only the changed file rerenders:
+
+Before:
+
+![slow](https://user-images.githubusercontent.com/1006268/59605307-ce67f580-910e-11e9-992a-6e0c3c2a7570.gif)
+
+After:
+
+![fast](https://user-images.githubusercontent.com/1006268/59605354-e3dd1f80-910e-11e9-9cb3-1b7339650959.gif)
+
+See [#1671](https://github.com/transloadit/uppy/pull/1671) for more details. As you can see, there are still some laggy interactions—expect more improvements in future releases!
+
+## Logger
+
+We’ve added an option to supply a `logger` object with `debug`, `warn` and `error` methods, so you can use a custom logging solution with Uppy. Check out [the docs](https://uppy.io/docs/uppy/#logger) for more info.
+
+In the future, past 2.0, `logger: Uppy.debugLogger` option is going to replace `debug: true`, the latter is kept for backwards compatibility for now.
+
+⚠️ This already switches to `console.debug` from `console.log` by default, you might need to change settings in your browser’s dev tools to see Uppy logs!
+
+Versions of each Uppy plugin and Core are now also logged for easier debugging.
+
+See [#1661](https://github.com/transloadit/uppy/pull/1661) and [#1640](https://github.com/transloadit/uppy/pull/1640) for more details.
+
+## Thumbnails Rotated Correctly
+
+Before this change, when you added a file to Uppy from a mobile device, you’d sometimes see the preview image sideways. This was because we didn’t account for EXIF rotation metadata when generating thumbnails with `@uppy/thumbnail-generator`. But now, thanks to [@Botz](https://github.com/Botz), we do! See [#1532](https://github.com/transloadit/uppy/pull/1661).
+
+## Progress Improvements
+
+* The Status Bar now shows the correct total size of the upload when some files have already finished, instead of jumping down [#1685](https://github.com/transloadit/uppy/pull/1685).
+* Fixed an issue where progress could jump to bizarrely high values (like 1038%) while uploading files that don’t have a known size (like from Instagram) [#1610](https://github.com/transloadit/uppy/pull/1610).
+* We’ve moved from `prettier-bytes` package into `@uppy/utils`, and divide by `1024` instead of `1000` to justify `KB` vs `kB` [#1732](https://github.com/transloadit/uppy/pull/1732).
+
+## Drag and Drop
+
+* Drag and drop has been refactored internally in both the Dashboard and DragDrop plugins. This means a more robust and cross-browser implementation, with a fancy “drop files here” screen when you drag over the Dashboard.
+* The `@uppy/drag-drop` plugin now renders an entirely clickable DnD area.
+
+![](/images/blog/1.3/drag-drop-focus.png)
+
+See [#1440](https://github.com/transloadit/uppy/pull/1440), [#1565](https://github.com/transloadit/uppy/pull/1565) and [#1633](https://github.com/transloadit/uppy/pull/1633) for more details.
+
+## Uploaders
+
+* xhr-upload: We now send along global metadata when `bundle: true` option is set [#1677](https://github.com/transloadit/uppy/pull/1677).
+* xhr-upload: Type and name are set from file.meta [#1616](https://github.com/transloadit/uppy/pull/1616).
+* aws-s3-multipart: Added metadata support for S3 MultiPart [#1698](https://github.com/transloadit/uppy/pull/1698).
+* aws-s3: Allows overriding of getResponseData() [#1647](https://github.com/transloadit/uppy/pull/1647).
+* aws-s3: Prevents unnecessary delete multiparts request for completed files[#1650](https://github.com/transloadit/uppy/pull/1650).
+* aws-s3: Do not extract keys from empty `fields` [#1569](https://github.com/transloadit/uppy/pull/1569)
+* tus: `metaFields` option has been added to the tus plugin [#1644](https://github.com/transloadit/uppy/pull/1644).
+
+## Localization
+
+Thanks to our amazing contributors, Uppy now speaks: Arabic, Chinese, Dutch, English, Finnish, French, German, Hungarian, Italian, Japanese, Persian, Portuguese, Russian, Serbian, Spanish an Turkish!
+
+More translations are rolling in every month, please [contribute your language](http://localhost:4000/docs/locales/#Contributing-a-new-language).
+
+We’ve also added docs for locales — how to use from NPM and CDN, auto-generated list of languages that are supported already and an invitation to add more [#1553](https://github.com/transloadit/uppy/pull/1553).
+
+Finally, we've fixed an issue that could occur when adding files with names in non-latin alphabets. When adding a file to Uppy, it gets an ID based on several characteristics, like its size and file name. Previously, our ID generation would ignore any non-alphanumeric characters in the file name, which could cause the IDs for different files to clash. Now, those characters are worked into the ID, so that multiple similar files with different non-alphanumeric names can be added. See [#1722](https://github.com/transloadit/uppy/pull/1722).
+
+## Robodog
+
+Robodog is an Uppy-based library that helps you talk to the Transloadit API. Since 1.0, most of the updates have been bugfixes:
+
+- `Robodog.dashboard()` and `Robodog.form()` now pass their options to the `@uppy/dashboard` plugin as advertised.
+- `Robodog.form()` now supports the [`triggerUploadOnSubmit`](/docs/robodog/form/#Separating-Uploads-from-Form-Submission) option from `@uppy/form`.
+- `Robodog.form()` now supports localization of the ""Choose files"" button it adds in the default configuration.
+
+## Build
+
+* Renée split our test runs into multiple jobs on Travis CI, so unit tests, end-to-end tests and other jobs all run in parallel. This lets us identify issues with failing builds quicker, and also slashes total build times by half! 🚀  [#1709](https://github.com/transloadit/uppy/pull/1709)
+* Webdriverio, which we use for end-to-end testing, has been updated to v5. This improves a bunch of things, and adds a lot of `await`s to our tests [#1675](https://github.com/transloadit/uppy/pull/1675).
+* Build dependencies have been upgraded: Babel to v7, Eslint to v5, Jest to v24, Typescript to v3, Postcss to v7 [#1549](https://github.com/transloadit/uppy/pull/1686).
+* Fix tags for docker build #1579
+* New `uploadcdn` and sync version scripts #1586 #1600
+
+## Website and Docs
+
+* Added Community projects — a page with Uppy plugins and integrations developed by the community [#1620](https://github.com/transloadit/uppy/pull/1620). [Add yours](https://github.com/transloadit/uppy/blob/master/website/src/docs/community-projects.md)!
+* Custom plugin [example](http://localhost:4000/docs/writing-plugins/#Example-of-a-custom-plugin) — now you have a reference to look at when writing your own plugin for Uppy [#1623](https://github.com/transloadit/uppy/pull/1623).
+* Added signature authentication to Transloadit example [#1705](https://github.com/transloadit/uppy/pull/1705).
+* Documented Companion’s Auth and Token mechanism (#1540
+* Updated AWS S3 Multipart documentation wrt CORS settings #1539
+
+## Companion
+
+Of course, we didn’t forget `@uppy/companion`, it’s getting more robust with every release:
+
+* ⚠️ We are now sending `uppy-versions` header to Companion, please see [how to avoid errors if you are using Companion but NOT as standalone](https://github.com/transloadit/uppy/pull/1612#issuecomment-515117137) [#1612](https://github.com/transloadit/uppy/pull/1686).
+* Companion now returns mimetypes for Dropbox files (#1599 / @ifedapoolarewaju)
+* Added colors to logs (#1648 / @ifedapoolarewaju)
+* Changed cloud in gcloud-deploy (#1729 / @kiloreux)","should we exclude this one? I think it can be in the changelog but since it is only related to deploying companion.uppy.io, I think it's meaning might be found confusing to users reading the blog post.",I'm not sure if thi
46,"@@ -0,0 +1,158 @@
+const Plugin = require('../Plugin')
+const Utils = require('../../core/Utils')
+const ServiceWorkerStore = require('./ServiceWorkerStore')
+const IndexedDBStore = require('./IndexedDBStore')
+
+/**
+ * Persistent State
+ *
+ * Helps debug Uppy: loads saved state from localStorage, so when you restart the page,
+ * your state is right where you left off. If something goes wrong, clear uppyState
+ * in your localStorage, using the devTools
+ *
+ */
+module.exports = class RestoreFiles extends Plugin {
+  constructor (core, opts) {
+    super(core, opts)
+    this.type = 'debugger'
+    this.id = 'RestoreFiles'
+    this.title = 'Restore Files'
+
+    // set default options
+    const defaultOptions = {
+      serviceWorker: false
+    }
+
+    // merge default options with the ones set by user
+    this.opts = Object.assign({}, defaultOptions, opts)
+
+    // const Store = this.opts.serviceWorker ? ServiceWorkerStore : IndexedDBStore
+    this.ServiceWorkerStore = this.opts.serviceWorker ? new ServiceWorkerStore(core) : false
+    this.IndexedDBStore = new IndexedDBStore(core)
+
+    this.saveFilesStateToLocalStorage = this.saveFilesStateToLocalStorage.bind(this)
+    this.loadFilesStateFromLocalStorage = this.loadFilesStateFromLocalStorage.bind(this)
+    this.loadFileBlobsFromServiceWorker = this.loadFileBlobsFromServiceWorker.bind(this)
+    this.loadFileBlobsFromIndexedDB = this.loadFileBlobsFromIndexedDB.bind(this)
+    this.onBlobsLoaded = this.onBlobsLoaded.bind(this)
+  }
+
+  loadFilesStateFromLocalStorage () {
+    const savedState = localStorage.getItem('uppyState')
+
+    if (savedState) {
+      this.core.log('Recovered some state from Local Storage')
+      this.core.setState(JSON.parse(savedState))
+    }
+  }
+
+  saveFilesStateToLocalStorage () {
+    const files = JSON.stringify({
+      currentUploads: this.core.state.currentUploads,
+      files: this.core.state.files
+    })
+    localStorage.setItem('uppyState', files)
+  }
+
+  loadFileBlobsFromServiceWorker () {
+    this.ServiceWorkerStore.list().then((blobs) => {
+      console.log(blobs)
+      const numberOfFilesRecovered = Object.keys(blobs).length
+      const numberOfFilesTryingToRecover = Object.keys(this.core.state.files).length
+      if (numberOfFilesRecovered === numberOfFilesTryingToRecover) {
+        this.core.log(`Successfully recovered ${numberOfFilesRecovered} blobs from Service Worker!`)
+        this.core.emit('informer', `Successfully recovered ${numberOfFilesRecovered} files`, 'success', 3000)
+        this.onBlobsLoaded(blobs)
+      } else {
+        this.core.log('Failed to recover blobs from Service Worker, trying IndexedDB now...')
+        this.loadFileBlobsFromIndexedDB()
+      }
+    })
+  }
+
+  loadFileBlobsFromIndexedDB () {
+    this.IndexedDBStore.list().then((blobs) => {
+      const numberOfFilesRecovered = Object.keys(blobs).length
+      if (numberOfFilesRecovered > 0) {
+        this.core.log(`Successfully recovered ${numberOfFilesRecovered} blobs from Indexed DB!`)
+        this.core.emit('informer', `Successfully recovered ${numberOfFilesRecovered} files`, 'success', 3000)
+        return this.onBlobsLoaded(blobs)
+      }
+      this.core.log('Couldn’t recover anything from IndexedDB :(')
+    })
+  }
+
+  onBlobsLoaded (blobs) {
+    window.myblobs = blobs",Should get rid of this before merge ;),This should be `thi
47,"@@ -0,0 +1,159 @@
+.uppy-DashboardItem-progress {
+  display: none;
+  position: absolute;
+  top: 50%;
+  left: 50%;
+  transform: translate(-50%, -50%);
+  z-index: $zIndex-3;
+  color: $white;
+  text-align: center;
+  width: 120px;
+  transition: all .35 ease;
+
+  > .uppy-DashboardItem-progressIndicator {
+    display: inline-block;
+    width: 38px;
+    height: 38px;
+    opacity: 0.9;
+    cursor: pointer;
+    &:focus{
+      outline: none;
+      svg.UppyIcon-progressCircle circle.bg,
+      svg.retry{
+        fill: lighten($blue, 20%);
+      }
+    }
+  }
+}
+
+svg.UppyIcon-progressCircle {
+  width: 100%;
+  height: 100%;
+  circle.bg {
+    stroke: rgba($white, 0.4);
+    opacity: 0;
+  }
+  circle.progress {
+    stroke: $white;
+    transition: stroke-dashoffset .5s ease-out;
+    opacity: 0;
+  }
+  polygon.play {
+    stroke: $white;
+    fill: $white;
+    opacity: 0;
+    transition: all 0.2s;
+    display: none;
+  }
+  polygon.cancel {
+    fill: $white;
+    opacity: 0;
+    transition: all 0.2s;
+  }
+  g.pause {
+    stroke: $white;
+    fill: $white;
+    opacity: 0;
+    transition: all 0.2s;
+    display: none;
+  }
+  polygon.check {","I personally think `polygon`, `circle` are implementation detail and unnecessarily specific. Tomorrow we might change the SVG icon, and `g` group is not needed.",I think this should
48,"@@ -0,0 +1,159 @@
+.uppy-DashboardItem-progress {
+  display: none;
+  position: absolute;
+  top: 50%;
+  left: 50%;
+  transform: translate(-50%, -50%);
+  z-index: $zIndex-3;
+  color: $white;
+  text-align: center;
+  width: 120px;
+  transition: all .35 ease;
+
+  > .uppy-DashboardItem-progressIndicator {
+    display: inline-block;
+    width: 38px;
+    height: 38px;
+    opacity: 0.9;
+    cursor: pointer;
+    &:focus{
+      outline: none;
+      svg.UppyIcon-progressCircle circle.bg,
+      svg.retry{
+        fill: lighten($blue, 20%);
+      }
+    }
+  }
+}
+
+svg.UppyIcon-progressCircle {
+  width: 100%;
+  height: 100%;
+  circle.bg {
+    stroke: rgba($white, 0.4);
+    opacity: 0;
+  }
+  circle.progress {
+    stroke: $white;
+    transition: stroke-dashoffset .5s ease-out;
+    opacity: 0;
+  }
+  polygon.play {
+    stroke: $white;
+    fill: $white;
+    opacity: 0;
+    transition: all 0.2s;
+    display: none;
+  }
+  polygon.cancel {
+    fill: $white;
+    opacity: 0;
+    transition: all 0.2s;
+  }
+  g.pause {
+    stroke: $white;
+    fill: $white;
+    opacity: 0;
+    transition: all 0.2s;
+    display: none;
+  }
+  polygon.check {
+    opacity: 0;
+    fill: $white;
+    transition: all 0.2s;
+  }
+}
+svg.UppyIcon.retry {
+  fill: $white;
+}
+
+
+// Svg styles that depend upon the state of the file.
+.uppy-DashboardItem.is-complete .uppy-DashboardItem-progress {
+  transform: initial;
+  top: -9px;
+  right: -8px;
+  left: initial;
+  width: auto;
+}
+.uppy-DashboardItem.is-inprogress .uppy-DashboardItem-progress,
+.uppy-DashboardItem.is-complete .uppy-DashboardItem-progress,
+.uppy-DashboardItem.is-error .uppy-DashboardItem-progress {
+  display: block;
+}
+
+.uppy-DashboardItem.is-error .uppy-DashboardItem-progressIndicator {
+  width: 18px;
+  height: 18px;
+
+  .uppy-size--md & {
+    width: 28px;
+    height: 28px;
+  }
+}
+
+.uppy-DashboardItem.is-complete .uppy-DashboardItem-progressIndicator {
+  width: 18px;
+  height: 18px;
+  opacity: 1;
+
+  .uppy-size--md & {
+    width: 22px;
+    height: 22px;
+  }
+}
+
+.uppy-DashboardItem.is-paused svg.UppyIcon-progressCircle {
+  g.pause {
+    opacity: 0;
+  }
+  polygon.play {
+    opacity: 1;
+  }
+}
+
+.uppy-DashboardItem.is-noIndividualCancellation {
+  .uppy-DashboardItem-progressIndicator {
+    cursor: default;
+  }
+
+  polygon.cancel {
+    display: none;
+  }
+}
+
+.uppy-DashboardItem.is-processing .uppy-DashboardItem-progress {
+  opacity: 0;
+}
+
+.uppy-DashboardItem.is-complete {
+  .uppy-DashboardItem-progressIndicator {
+    cursor: default;
+  }
+
+  .progress {",this one is then not tied to the element?,I think this should be `opacity: 0`
49,"@@ -0,0 +1,159 @@
+const request = require('request')
+// @ts-ignore
+const purest = require('purest')({ request })
+const logger = require('../../logger')
+const adapter = require('./adapter')
+const DRIVE_FILE_FIELDS = 'kind,id,name,mimeType,ownedByMe,permissions(role,emailAddress),size,modifiedTime,iconLink,thumbnailLink,teamDriveId'
+const DRIVE_FILES_FIELDS = `kind,nextPageToken,incompleteSearch,files(${DRIVE_FILE_FIELDS})`
+const TEAM_DRIVE_FIELDS = 'teamDrives(kind,id,name,backgroundImageLink)'
+
+/**
+ * @class
+ * @implements {Provider}
+ */
+class Drive {
+  constructor (options) {
+    this.authProvider = options.provider = Drive.authProvider
+    options.alias = 'drive'
+    options.version = 'v3'
+
+    this.client = purest(options)
+  }
+
+  static get authProvider () {
+    return 'google'
+  }
+
+  list (options, done) {
+    const directory = options.directory || 'root'
+    const query = options.query || {}
+    const teamDrive = query.teamDrive
+    let listDone = false
+    let teamDrivesDone = false
+    let teamDrives
+    let listResponse
+    let reqErr
+    const finishReq = () => {
+      if (reqErr) {
+        done(reqErr)
+      } else if (listResponse.statusCode !== 200) {
+        done(new Error(`request to ${this.authProvider} returned ${listResponse.statusCode}`))
+      } else {
+        done(null, this.adaptData(listResponse.body, teamDrives ? teamDrives.body : null, options.uppy))
+      }
+    }
+
+    if (directory === 'root') {
+      // fetch a list of all Team Drives which the user can access.
+      this.client
+        .query()
+        .get('teamdrives')
+        .where({ fields: TEAM_DRIVE_FIELDS })
+        .auth(options.token)
+        .request((err, resp) => {
+          if (err) {
+            logger.error(err, 'provider.drive.teamDrive.error')
+          }
+          teamDrivesDone = true
+          teamDrives = resp
+          if (listDone) {
+            finishReq()
+          }
+        })
+    }
+
+    let where = {
+      fields: DRIVE_FILES_FIELDS,
+      q: `'${directory}' in parents and trashed=false`
+    }
+    if (teamDrive) {
+      // Team Drives require several extra parameters in order to work.
+      where.supportsTeamDrives = true
+      where.includeTeamDriveItems = true
+      where.teamDriveId = directory
+      where.corpora = 'teamDrive'
+    }
+
+    this.client
+      .query()
+      .get('files')
+      .where(where)
+      .auth(options.token)
+      .request((err, resp) => {
+        listDone = true
+        listResponse = resp
+        reqErr = err
+        if (teamDrivesDone || directory !== 'root') {
+          finishReq()
+        }
+      })
+  }
+
+  stats ({ id, token }, done) {
+    return this.client
+      .query()
+      .get(`files/${id}`)
+      .where({ fields: DRIVE_FILE_FIELDS, supportsTeamDrives: true })
+      .auth(token)
+      .request(done)
+  }
+
+  download ({ id, token }, onData) {
+    return this.client
+      .query()
+      .get(`files/${id}`)
+      .where({ alt: 'media', supportsTeamDrives: true })
+      .auth(token)
+      .request()
+      .on('data', onData)
+      .on('end', () => onData(null))
+      .on('error', (err) => {
+        logger.error(err, 'provider.drive.download.error')
+      })
+  }
+
+  thumbnail ({id, token}, done) {
+    return this.stats({id, token}, (err, resp, body) => {
+      if (err) {
+        logger.error(err, 'provider.drive.thumbnail.error')
+        return done(null)
+      }
+      done(body.thumbnailLink ? request(body.thumbnailLink) : null)
+    })
+  }
+
+  size ({id, token}, done) {
+    return this.stats({ id, token }, (err, resp, body) => {
+      if (err) {
+        logger.error(err, 'provider.drive.size.error')
+        return done(null)
+      }
+      done(parseInt(body.size))
+    })
+  }
+
+  adaptData (res, teamDrivesResp, uppy) {
+    const data = { username: adapter.getUsername(res), items: [] }
+    const items = adapter.getItemSubList(res)
+    const teamDrives = teamDrivesResp ? teamDrivesResp.teamDrives || [] : []
+    items.concat(teamDrives).forEach((item) => {
+      data.items.push({
+        isFolder: adapter.isFolder(item),
+        icon: adapter.getItemIcon(item),
+        name: adapter.getItemName(item),
+        mimeType: adapter.getMimeType(item),
+        id: adapter.getItemId(item),
+        thumbnail: uppy.buildURL(adapter.getItemThumbnailUrl(item), true),
+        requestPath: adapter.getItemRequestPath(item),
+        modifiedDate: adapter.getItemModifiedDate(item),
+        raw: item",It looks like `raw` is only used for team drive detection. Could we also do that on the server side instead and add an `isTeamDrive` property to GDrive items? So we don't send unnecessary data to the client.,I don't think this is needed.
50,"@@ -0,0 +1,165 @@
+const sk_SK = {}
+
+sk_SK.strings = {
+  addBulkFilesFailed: {
+    '0': 'Súbor %{smart_count} sa nepodarilo pridať z dôvodu vnútornej chyby',
+    '1': 'Nepodarilo sa pridať %{smart_count} súbory z dôvodu vnútorných chýb',
+    '2': 'Nepodarilo sa pridať %{smart_count} súborov z dôvodu vnútorných chýb'
+  },
+  addMore: 'Pridať ďalšie',
+  addMoreFiles: 'Pridať ďalšie súbory',
+  addingMoreFiles: 'Pridávajú sa ďalšie súbory',
+  allowAccessDescription: 'Pokiaľ chcete urobiť fotografiu alebo nahrať video vaším zariadením, povoľte prosím prístup ku kamere.',
+  allowAccessTitle: 'Povoľte prístup ku kamere',
+  authenticateWith: 'Pripojiť k %{pluginName}',
+  authenticateWithTitle: 'Prosím príhláste sa k %{pluginName} pre výber súborov',
+  back: 'Späť',
+  browse: 'prechádzať',
+  cancel: 'Zrušiť',
+  cancelUpload: 'Zrušiť nahrávanie',
+  chooseFiles: 'Vyberte súbory',
+  closeModal: 'Zavrieť okno',
+  companionError: 'Spojenie s modulom Companion sa nepodarilo',
+  companionUnauthorizeHint: 'Pokiaľ nechcete povoliť prístup k účtu %{provider}, prosím prejdite na túto adresu %{url}',
+  complete: 'Hotovo',
+  connectedToInternet: 'Pripojené k internetu',
+  copyLink: 'Kopírovať odkaz',
+  copyLinkToClipboardFallback: 'Skopírujte odkaz nižšie',
+  copyLinkToClipboardSuccess: 'Odkaz bol skopírovaný do schránky',
+  creatingAssembly: 'Pripravuje sa nahrávanie...',
+  creatingAssemblyFailed: 'Transloadit: Nepodarilo sa vytvoriť Assembly',
+  dashboardTitle: 'Nahrať súbory',
+  dashboardWindowTitle: 'Okno na nahrávanie súborov. (Stlačením ESC ho zavriete)',
+  dataUploadedOfTotal: '%{complete} z %{total}',
+  done: 'Dokončené',
+  dropHereOr: 'Presuňte sem súbory alebo %{browse}',
+  dropHint: 'Presuňte sem súbory',
+  dropPaste: 'Presuňte sem súbory alebo %{browse}',
+  dropPasteImport: 'Presuňte sem súbory, vložte ich, %{browse} alebo ich importujte:',
+  editFile: 'Upraviť súbor',
+  editing: 'Úprava %{file}',
+  emptyFolderAdded: 'Neboli pridané žiadne súbory, pretože adresár je prázdny.',
+  encoding: 'Konvertovanie...',
+  enterCorrectUrl: 'Nesprávna adresa URL: Uistite sa, že zadávate priamy odkaz na súbor',
+  enterUrlToImport: 'Ak chcete importovať súbor, zadajte adresu URL',
+  exceedsSize: 'Tento súbor presahuje maximálnu povolenú veľkosť súboru',
+  exceedsSize2: '%{backwardsCompat} %{size}',
+  failedToFetch: 'Nepodarilo sa načítať túto webovú adresu. Skontrolujte, či je správna',
+  failedToUpload: 'Nepodarilo sa nahrať súbor %{file}',
+  fileSource: 'Zdroj súboru: %{name}',
+  filesUploadedOfTotal: {
+    '0': '%{complete} z %{smart_count} nahraných súborov',
+    '1': '%{complete} z %{smart_count} nahraných súborov'
+  },
+  filter: 'Filtrovať',
+  finishEditingFile: 'Dokončiť úpravu súborov',
+  folderAdded: {
+    '0': 'Pridaný %{smart_count} súbor zo zložky %{folder}',
+    '1': 'Pridané %{smart_count} súbory zo zložky %{folder}',
+    '2': 'Pridaných %{smart_count} súborov zo zložky %{folder}'
+  },
+  generatingThumbnails: 'Vytváram miniatury...',
+  import: 'Importovať',
+  importFrom: 'Import z %{name}',
+  loading: 'Nahrávanie...',
+  logOut: 'Odhlásiť',
+  micDisabled: 'Užívateľ odmietol prístup k mikrofónu',
+  myDevice: 'Moje zariadenie',
+  noDuplicates: 'Nemôžete pridať duplikátny súbor \'%{fileName}\', ktorý už existuje',
+  noFilesFound: 'Nemáte pridané žiadne súbory ani zložky',
+  noInternetConnection: 'Žiadne internetové pripojenie',
+  noNewAlreadyUploading: 'Počas nahrávania nemôžete pridať ďalšie súbory',
+  openFolderNamed: 'Otvoriť zložku %{name}',
+  pause: 'Pozastaviť',
+  pauseUpload: 'Pozastaviť nahrávanie',
+  paused: 'Pozastavené',
+  poweredBy: 'Vytvorení pomocou',
+  poweredBy2: '%{backwardsCompat} %{uppy}',
+  processingXFiles: {
+    '0': 'Spracovanie %{smart_count} súboru',
+    '1': 'Spracovanie %{smart_count} súborov',","```suggestion
    '1': 'Spracovanie %{smart_count} súborov'
```",I don't think this is a good name f
51,"@@ -0,0 +1,17 @@
+# Number of days of inactivity before an issue becomes stale
+daysUntilStale: 365
+# Number of days of inactivity before a stale issue is closed
+daysUntilClose: 7","I think since we have such a high amount of days for stale issues right now, we could give folks a little more time to alert us:
```suggestion
daysUntilClose: 14
```",I think this should be `daysUntilIn
52,"@@ -0,0 +1,170 @@
+const request = require('request')
+
+const B2_API_VERSION = 2
+const B2_API_URL = `https://api.backblazeb2.com/b2api/v${B2_API_VERSION}/`
+
+module.exports = class B2Client {","is there a reason we are not using this [backblaze npm module](https://www.npmjs.com/package/backblaze-b2) instead? It seems to be actively maintained, and has almost the same API as what is implemented here.",This should be `const B2_API_URL = 
53,"@@ -0,0 +1,170 @@
+const request = require('request')
+
+const B2_API_VERSION = 2
+const B2_API_URL = `https://api.backblazeb2.com/b2api/v${B2_API_VERSION}/`
+
+module.exports = class B2Client {
+  constructor (options) {
+    this.applicationKeyId = options.credentials.applicationKeyId
+    this.applicationKey = options.credentials.applicationKey
+
+    this.retries = 3 // TODO
+
+    // This will be populated after a successful authorization
+    this.auth = {}
+  }
+
+  getURL (method) {
+    if (!this.auth.apiUrl) {
+      throw new Error('getURL() called before successful authorize()')
+    }
+    return this.auth.apiUrl + `/b2api/v${B2_API_VERSION}/${method}`
+  }
+
+  /**
+   * Request new authorization token from Backblaze.
+   */
+  authorize () {
+    return this._authorizing || (this._authorizing = new Promise((resolve, reject) => {","I think this pattern is a bit confusing—could we use one of these instead?
```js
if (this._authorizing) return this._authorizing
this._authorizing = new Promise(...)
return this._authorizing
```
or
```js
if (!this._authorizing) {
  this._authorizing = new Promise(...)
}
return this._authorizing
```",This should be a `const`.
54,"@@ -0,0 +1,171 @@
+// Attributes in the format of htmlAtrribute: reactAttribute
+const possibleStandardNames = {",It looks like only the react-style names (the values in this object) are actually needed. Could we use an array instead?,const possibleStandardNames = {
55,"@@ -0,0 +1,176 @@
+const Provider = require('../Provider')
+
+const request = require('request')
+const purest = require('purest')({ request })
+const logger = require('../../logger')
+const adapter = require('./adapter')
+const { ProviderApiError, ProviderAuthError } = require('../error')
+
+// const BOX_FILE_FIELDS = 'id,name,size,type'",I guess we can delete this?,Can we remove this file?
56,"@@ -0,0 +1,176 @@
+const Provider = require('../Provider')
+
+const request = require('request')
+const purest = require('purest')({ request })
+const logger = require('../../logger')
+const adapter = require('./adapter')
+const { ProviderApiError, ProviderAuthError } = require('../error')
+
+// const BOX_FILE_FIELDS = 'id,name,size,type'
+const BOX_FILES_FIELDS = 'id,modified_at,name,permissions,size,type'
+const BOX_THUMBNAIL_SIZE = 256
+
+/**
+ * Adapter for API https://developer.box.com/reference/
+ */
+class Box extends Provider {
+  constructor (options) {
+    super(options)
+    this.authProvider = options.provider = Box.authProvider
+    this.client = purest(options)
+    // needed for the thumbnails fetched via companion
+    this.needsCookieAuth = true
+  }
+
+  static get authProvider () {
+    return 'box'
+  }
+
+  _userInfo ({ token }, done) {
+    this.client
+      .get('users/me')
+      .auth(token)
+      .request(done)
+  }
+
+  /**
+   * Lists files and folders from Box API
+   *
+   * @param {object} options
+   * @param {function} done
+   */
+  list ({ directory, token, companion }, done) {
+    const rootFolderID = '0'
+    const path = `folders/${directory || rootFolderID}/items`
+
+    this.client
+      .get(path)
+      .qs({ fields: BOX_FILES_FIELDS })
+      .auth(token)
+      .request((err, resp, body) => {
+        if (err || resp.statusCode !== 200) {
+          err = this._error(err, resp)
+          logger.error(err, 'provider.box.list.error')
+          return done(err)
+        } else {
+          this._userInfo({ token }, (err, infoResp) => {
+            if (err || infoResp.statusCode !== 200) {
+              err = this._error(err, infoResp)
+              logger.error(err, 'provider.token.user.error')
+              return done(err)
+            }
+            done(null, this.adaptData(body, companion))
+          })
+        }
+      })
+  }
+
+  download ({ id, token }, onData) {
+    return this.client
+      .get(`files/${id}/content`)
+      .auth(token)
+      .request()
+      .on('response', (resp) => {
+        if (resp.statusCode !== 200) {
+          onData(this._error(null, resp))
+        } else {
+          resp.on('data', (chunk) => onData(null, chunk))
+        }
+      })
+      .on('end', () => onData(null, null))
+      .on('error', (err) => {
+        logger.error(err, 'provider.box.download.error')
+        onData(err)
+      })
+  }
+
+  thumbnail ({ id, token }, done) {
+    return this.client
+      .get(`files/${id}/thumbnail.png`)
+      .qs({ max_height: BOX_THUMBNAIL_SIZE, max_width: BOX_THUMBNAIL_SIZE })
+      .auth(token)
+      .request()
+      .on('response', (resp) => {
+        if (![200, 202].includes(resp.statusCode)) {","it seems according to [the documentation](https://developer.box.com/reference/get-files-id-thumbnail-id/#param-202-undefined), 202 means that the thumbnail will not be returned, but URL to a placeholder image will be available in the `Location` header.

Should we be handling this case somehow? Or am I missing something here?",Can we remove this line?
57,"@@ -0,0 +1,176 @@
+const Provider = require('../Provider')
+
+const request = require('request')
+const purest = require('purest')({ request })
+const logger = require('../../logger')
+const adapter = require('./adapter')
+const { ProviderApiError, ProviderAuthError } = require('../error')
+
+// const BOX_FILE_FIELDS = 'id,name,size,type'
+const BOX_FILES_FIELDS = 'id,modified_at,name,permissions,size,type'
+const BOX_THUMBNAIL_SIZE = 256
+
+/**
+ * Adapter for API https://developer.box.com/reference/
+ */
+class Box extends Provider {
+  constructor (options) {
+    super(options)
+    this.authProvider = options.provider = Box.authProvider
+    this.client = purest(options)
+    // needed for the thumbnails fetched via companion
+    this.needsCookieAuth = true
+  }
+
+  static get authProvider () {
+    return 'box'
+  }
+
+  _userInfo ({ token }, done) {
+    this.client
+      .get('users/me')
+      .auth(token)
+      .request(done)
+  }
+
+  /**
+   * Lists files and folders from Box API
+   *
+   * @param {object} options
+   * @param {function} done
+   */
+  list ({ directory, token, companion }, done) {
+    const rootFolderID = '0'
+    const path = `folders/${directory || rootFolderID}/items`
+
+    this.client
+      .get(path)
+      .qs({ fields: BOX_FILES_FIELDS })
+      .auth(token)
+      .request((err, resp, body) => {
+        if (err || resp.statusCode !== 200) {
+          err = this._error(err, resp)
+          logger.error(err, 'provider.box.list.error')
+          return done(err)
+        } else {
+          this._userInfo({ token }, (err, infoResp) => {
+            if (err || infoResp.statusCode !== 200) {
+              err = this._error(err, infoResp)
+              logger.error(err, 'provider.token.user.error')
+              return done(err)
+            }
+            done(null, this.adaptData(body, companion))
+          })
+        }
+      })
+  }
+
+  download ({ id, token }, onData) {
+    return this.client
+      .get(`files/${id}/content`)
+      .auth(token)
+      .request()
+      .on('response', (resp) => {
+        if (resp.statusCode !== 200) {
+          onData(this._error(null, resp))
+        } else {
+          resp.on('data', (chunk) => onData(null, chunk))
+        }
+      })
+      .on('end', () => onData(null, null))
+      .on('error', (err) => {
+        logger.error(err, 'provider.box.download.error')
+        onData(err)
+      })
+  }
+
+  thumbnail ({ id, token }, done) {
+    return this.client
+      .get(`files/${id}/thumbnail.png`)
+      .qs({ max_height: BOX_THUMBNAIL_SIZE, max_width: BOX_THUMBNAIL_SIZE })
+      .auth(token)
+      .request()
+      .on('response', (resp) => {
+        if (![200, 202].includes(resp.statusCode)) {
+          const err = this._error(null, resp)
+          logger.error(err, 'provider.box.thumbnail.error')
+          return done(err)
+        }
+        done(null, resp)
+      })
+      .on('error', (err) => {
+        logger.error(err, 'provider.box.thumbnail.error')
+      })
+  }
+
+  size ({ id, token }, done) {
+    return this.client
+      .get(`files/${id}`)
+      .auth(token)
+      .request((err, resp, body) => {
+        if (err || resp.statusCode !== 200) {
+          err = this._error(err, resp)
+          logger.error(err, 'provider.box.size.error')
+          return done(err)
+        }
+        done(null, parseInt(body.size))
+      })
+  }
+
+  logout ({ companion, token }, done) {
+    const { key, secret } = companion.options.providerOptions.box
+
+    return this.client
+      .post('https://api.box.com/oauth2/revoke')
+      .options({
+        formData: {
+          client_id: key,
+          client_secret: secret,
+          token
+        }
+      })
+      .auth(token)
+      .request((err, resp) => {
+        if (err || resp.statusCode !== 200) {
+          logger.error(err, 'provider.box.logout.error')
+          done(this._error(err, resp))
+          return
+        }
+        done(null, { revoked: true })
+      })
+  }
+
+  adaptData (res, companion) {
+    const data = { username: adapter.getUsername(res), items: [] }
+    const items = adapter.getItemSubList(res)
+    items.forEach((item) => {
+      data.items.push({
+        isFolder: adapter.isFolder(item),
+        icon: adapter.getItemIcon(item),
+        name: adapter.getItemName(item),
+        mimeType: adapter.getMimeType(item),
+        id: adapter.getItemId(item),
+        thumbnail: companion.buildURL(adapter.getItemThumbnailUrl(item), true),
+        requestPath: adapter.getItemRequestPath(item),
+        modifiedDate: adapter.getItemModifiedDate(item),
+        size: adapter.getItemSize(item)
+      })
+    })
+
+    data.nextPagePath = adapter.getNextPagePath(res)
+
+    return data
+  }
+
+  _error (err, resp) {
+    if (resp) {
+      const fallbackMessage = `request to ${this.authProvider} returned ${resp.statusCode}`
+      const errMsg = (resp.body || {}).error_summary ? resp.body.error_summary : fallbackMessage",it seems we left out the error handling here. It's meant to try to check for the message of an [error response](https://developer.box.com/guides/api-calls/permissions-and-errors/common-errors/#client-error),Can we remove this line?
58,"@@ -0,0 +1,18 @@
+const Plugin = require('../../core/Plugin')
+
+module.exports = class ProgressBar extends Plugin {
+  constructor (uppy, opts) {
+    super(uppy, opts)
+
+    this.id = opts.id
+    this.type = 'progressindicator'
+  }
+
+  install () {
+    this.opts.onInstall()
+  }
+
+  uninstall () {
+    this.opts.onUninstall()
+  }
+}",I’m a bit confused. We have an actual `ProgressBar` Uppy React wrapper component that we are testing. Why do we need a mock for it?,`uppy` is not used
59,"@@ -0,0 +1,18 @@
+const ProviderViews = require('@uppy/provider-views')
+
+module.exports = class DriveProviderViews extends ProviderViews {
+  constructor (plugin, opts) {
+    super(plugin, opts)
+    this.originalToggleCheckbox = this.toggleCheckbox
+    this.toggleCheckbox = this.toggleDriveCheckbox.bind(this)
+  }
+  toggleDriveCheckbox (e, file) {","Is there a reason not to name this `toggleCheckbox` and then do `super.toggleCheckbox(e, file)` below? I don't _think_ the .bind() stuff should interfere but i may be wrong…",`toggleDriveCheckbox` -> `toggleDri
60,"@@ -0,0 +1,183 @@
+const B2 = require('backblaze-b2')
+const ms = require('ms')
+const B2Stream = require('./b2stream')
+
+function createBucketCache (client, cacheDuration = ms('30m')) {
+  const cache = Object.create(null)
+  return (bucketName) => {
+    const match = cache[bucketName]
+    if (match && match.expiration < Date.now()) {
+      return match.result
+    } else {
+      cache[bucketName] = {
+        result: client.getBucket({ bucketName }),
+        expiration: Date.now() + cacheDuration
+      }
+      return cache[bucketName].result
+    }
+  }
+}
+
+function createEndpointPool (client, bucketName) {
+  const pools = {
+    default: []
+  }
+
+  const acquire = (fileId = undefined) => {
+    if (fileId) { // specific fileId indicates large file / multipart
+      const pool = (pools[fileId] = pools[fileId] || [])
+      if (pool.length) {
+        return Promise.resolve(pool.shift())
+      } else {
+        return client.getUploadPartUrl({ fileId })
+          .then(({ data }) => data)
+      }
+    } else {
+      const pool = pools.default
+      if (pool.length) {
+        return Promise.resolve(pool.shift())
+      } else {
+        return client.getCachedBucket(bucketName)
+          .then(({ bucketId }) => client.getUploadUrl({ bucketId }))
+          .then(({ data }) => data)
+      }
+    }
+  }
+
+  const release = (endpoint) => {
+    // fileId indicates large file / multipart
+    const { fileId } = endpoint
+    if (fileId) {
+      const pool = (pools[fileId] = pools[fileId] || [])","I think on some lazy days, this line can be easily confusing. I'd rather we just do `pools[fileId] = pools[fileId] || []`, and `pools[fileId].push(endpoint)` on the next line",I'm not sure if this is the best wa
61,"@@ -0,0 +1,183 @@
+const B2 = require('backblaze-b2')
+const ms = require('ms')
+const B2Stream = require('./b2stream')
+
+function createBucketCache (client, cacheDuration = ms('30m')) {
+  const cache = Object.create(null)
+  return (bucketName) => {
+    const match = cache[bucketName]
+    if (match && match.expiration < Date.now()) {
+      return match.result
+    } else {
+      cache[bucketName] = {
+        result: client.getBucket({ bucketName }),
+        expiration: Date.now() + cacheDuration
+      }
+      return cache[bucketName].result
+    }
+  }
+}
+
+function createEndpointPool (client, bucketName) {
+  const pools = {
+    default: []
+  }
+
+  const acquire = (fileId = undefined) => {
+    if (fileId) { // specific fileId indicates large file / multipart
+      const pool = (pools[fileId] = pools[fileId] || [])
+      if (pool.length) {
+        return Promise.resolve(pool.shift())
+      } else {
+        return client.getUploadPartUrl({ fileId })
+          .then(({ data }) => data)
+      }
+    } else {
+      const pool = pools.default
+      if (pool.length) {
+        return Promise.resolve(pool.shift())
+      } else {
+        return client.getCachedBucket(bucketName)
+          .then(({ bucketId }) => client.getUploadUrl({ bucketId }))
+          .then(({ data }) => data)
+      }
+    }
+  }
+
+  const release = (endpoint) => {
+    // fileId indicates large file / multipart
+    const { fileId } = endpoint
+    if (fileId) {
+      const pool = (pools[fileId] = pools[fileId] || [])
+      pool.push(endpoint)
+    } else {
+      pools.default.push(endpoint)
+    }
+  }
+
+  const finish = (fileId) => {
+    delete pools[fileId]
+  }
+
+  return {
+    acquire,
+    release,
+    finish
+  }
+}
+
+module.exports = class B2Client {
+  constructor (options) {
+    this.b2 = new B2({
+      applicationKeyId: options.keyId,
+      applicationKey: options.key,
+      axios: options.axios || {},
+      retry: options.retry
+    })
+
+    this._bucketCache = createBucketCache(this)
+
+    // This will be populated after each successful authorization.
+    this.lastAuthResponseData = {}
+  }
+
+  preauth (failedToken) {
+    if (this._auth) {
+      if (failedToken) {
+        return this._auth.then(auth => {
+          // ONLY if the current promise resolves to the
+          // token which we know to be invalid, delete
+          // the _auth promise and recreate it be re-calling
+          // preauth()
+          if (auth.authorizationToken === failedToken) {
+            delete this._auth
+          }
+          return this.preauth()
+        })
+      }
+    } else {
+      this._auth = this.b2.authorize()
+        .then(auth => {
+          this.lastAuthResponseData = auth.data
+          return auth.data
+        }).catch(err => {
+          console.log('Error attempting to authorize with B2:' + err)
+          delete this._auth
+          return this.preauth()","is this call potentially endless? If so, I think we should limit it to n tries. Possibly 3?",I think this should be `Object.crea
62,"@@ -0,0 +1,183 @@
+const B2 = require('backblaze-b2')
+const ms = require('ms')
+const B2Stream = require('./b2stream')
+
+function createBucketCache (client, cacheDuration = ms('30m')) {
+  const cache = Object.create(null)
+  return (bucketName) => {
+    const match = cache[bucketName]
+    if (match && match.expiration < Date.now()) {
+      return match.result
+    } else {
+      cache[bucketName] = {
+        result: client.getBucket({ bucketName }),
+        expiration: Date.now() + cacheDuration
+      }
+      return cache[bucketName].result
+    }
+  }
+}
+
+function createEndpointPool (client, bucketName) {
+  const pools = {
+    default: []
+  }
+
+  const acquire = (fileId = undefined) => {
+    if (fileId) { // specific fileId indicates large file / multipart
+      const pool = (pools[fileId] = pools[fileId] || [])
+      if (pool.length) {
+        return Promise.resolve(pool.shift())
+      } else {
+        return client.getUploadPartUrl({ fileId })
+          .then(({ data }) => data)
+      }
+    } else {
+      const pool = pools.default
+      if (pool.length) {
+        return Promise.resolve(pool.shift())
+      } else {
+        return client.getCachedBucket(bucketName)
+          .then(({ bucketId }) => client.getUploadUrl({ bucketId }))
+          .then(({ data }) => data)
+      }
+    }
+  }
+
+  const release = (endpoint) => {
+    // fileId indicates large file / multipart
+    const { fileId } = endpoint
+    if (fileId) {
+      const pool = (pools[fileId] = pools[fileId] || [])
+      pool.push(endpoint)
+    } else {
+      pools.default.push(endpoint)
+    }
+  }
+
+  const finish = (fileId) => {
+    delete pools[fileId]
+  }
+
+  return {
+    acquire,
+    release,
+    finish
+  }
+}
+
+module.exports = class B2Client {
+  constructor (options) {
+    this.b2 = new B2({
+      applicationKeyId: options.keyId,
+      applicationKey: options.key,
+      axios: options.axios || {},
+      retry: options.retry
+    })
+
+    this._bucketCache = createBucketCache(this)
+
+    // This will be populated after each successful authorization.
+    this.lastAuthResponseData = {}
+  }
+
+  preauth (failedToken) {
+    if (this._auth) {
+      if (failedToken) {
+        return this._auth.then(auth => {
+          // ONLY if the current promise resolves to the
+          // token which we know to be invalid, delete
+          // the _auth promise and recreate it be re-calling
+          // preauth()
+          if (auth.authorizationToken === failedToken) {
+            delete this._auth
+          }
+          return this.preauth()
+        })
+      }
+    } else {
+      this._auth = this.b2.authorize()
+        .then(auth => {
+          this.lastAuthResponseData = auth.data
+          return auth.data
+        }).catch(err => {
+          console.log('Error attempting to authorize with B2:' + err)
+          delete this._auth
+          return this.preauth()
+        })
+    }
+    return this._auth
+  }
+
+  request (actualRequest, invalidToken) {
+    return this.preauth(invalidToken)
+      .then(auth => actualRequest()
+        .catch(err => {
+          if (err.response && err.response.status === 401) {
+            // Retry and pass the invalid token forward.
+            return this.request(actualRequest, auth.authorizationToken)","if this call is also potentially endless, I'll vote that we limit to an `n` number of times.",I think this should be `Object.crea
63,"@@ -0,0 +1,186 @@
+const router = require('express').Router
+// const ms = require('ms')",leftover?,
64,"@@ -0,0 +1,196 @@
+const router = require('express').Router
+const ms = require('ms')
+
+module.exports = function b2 (config) {
+  if (typeof config.getPath !== 'function') {
+    throw new TypeError('b2: the `getPath` option must be a function')
+  }
+
+  const getCachedBucketID = (() => {
+    const cache = Object.create({})",is there any reason for not just using a literal like so: `const cache = {}`?,Why do we need this function?
65,"@@ -0,0 +1,196 @@
+const router = require('express').Router
+const ms = require('ms')
+
+module.exports = function b2 (config) {
+  if (typeof config.getPath !== 'function') {
+    throw new TypeError('b2: the `getPath` option must be a function')
+  }
+
+  const getCachedBucketID = (() => {
+    const cache = Object.create({})
+    return (client, bucketName) => {
+      const match = cache[bucketName]
+      if (match && match.expiration < Date.now()) {
+        return match.result
+      } else {
+        return (cache[bucketName] = {
+          result: client.getBucketId({ bucketName }),
+          expiration: Date.now() + (config.cacheBucketIdDurationMS || ms('30m'))
+        }).result","I think this would be easier to understand by splitting it into two lines:
```js
cache[bucketName] = { /* etc */ }
return cache[bucketName].result
```",I'm not sure if this is the b
66,"@@ -0,0 +1,196 @@
+const router = require('express').Router
+const ms = require('ms')
+
+module.exports = function b2 (config) {
+  if (typeof config.getPath !== 'function') {
+    throw new TypeError('b2: the `getPath` option must be a function')
+  }
+
+  const getCachedBucketID = (() => {
+    const cache = Object.create({})
+    return (client, bucketName) => {
+      const match = cache[bucketName]
+      if (match && match.expiration < Date.now()) {
+        return match.result
+      } else {
+        return (cache[bucketName] = {
+          result: client.getBucketId({ bucketName }),
+          expiration: Date.now() + (config.cacheBucketIdDurationMS || ms('30m'))
+        }).result
+      }
+    }
+  })()
+
+  /**
+   * Initiate a B2 large file upload.
+   *
+   * Expected JSON body:
+   *  - filename - The name of the file, given to the `config.getPath`
+   *    option to determine the object's final path in the B2 bucket.
+   *  - type - The MIME type of the file
+   *
+   * Response JSON:
+   *  - fileId - The unique B2 fileId which will be used again to initiate
+   *    the actual file transfer.
+   */
+  function createMultipartUpload (req, res, next) {
+    const client = req.uppy.b2Client
+    const fileName = config.getPath(req, req.body.filename)
+    const { type } = req.body
+
+    if (typeof fileName !== 'string') {
+      return res.status(500).json({ error: 'b2: filename returned from `getPath` must be a string' })",should this be a `400` instead?,I'm not sure if this is the b
67,"@@ -0,0 +1,196 @@
+const router = require('express').Router
+const ms = require('ms')
+
+module.exports = function b2 (config) {
+  if (typeof config.getPath !== 'function') {
+    throw new TypeError('b2: the `getPath` option must be a function')
+  }
+
+  const getCachedBucketID = (() => {
+    const cache = Object.create({})
+    return (client, bucketName) => {
+      const match = cache[bucketName]
+      if (match && match.expiration < Date.now()) {
+        return match.result
+      } else {
+        return (cache[bucketName] = {
+          result: client.getBucketId({ bucketName }),
+          expiration: Date.now() + (config.cacheBucketIdDurationMS || ms('30m'))
+        }).result
+      }
+    }
+  })()
+
+  /**
+   * Initiate a B2 large file upload.
+   *
+   * Expected JSON body:
+   *  - filename - The name of the file, given to the `config.getPath`
+   *    option to determine the object's final path in the B2 bucket.
+   *  - type - The MIME type of the file
+   *
+   * Response JSON:
+   *  - fileId - The unique B2 fileId which will be used again to initiate
+   *    the actual file transfer.
+   */
+  function createMultipartUpload (req, res, next) {
+    const client = req.uppy.b2Client
+    const fileName = config.getPath(req, req.body.filename)
+    const { type } = req.body
+
+    if (typeof fileName !== 'string') {
+      return res.status(500).json({ error: 'b2: filename returned from `getPath` must be a string' })
+    }
+    if (typeof type !== 'string') {
+      return res.status(400).json({ error: 'b2: content type must be a string' })
+    }
+
+    return getCachedBucketID(client, config.bucket)
+      .then(bucketId =>
+        client.startLargeFile({
+          bucketId,
+          fileName,
+          contentType: type
+        }))
+      .then(largeFileResponse => ({
+        fileId: largeFileResponse.fileId
+      }))
+      .then((data) => {
+        res.json(data)
+      })
+      .catch(err => next(err))
+  }
+
+  /**
+   * Obtain an authorization token and destination URL to
+   * post upload data to.
+   *
+   * Expected JSON body:
+   *  - fileId - The B2 fileId we would like to obtain an
+   *    upload destination for.
+   *
+   * Response JSON:
+   *  - fileId - The unique fileId of file being uploaded
+   *    (should be same as passed-in fileId)
+   *  - uploadUrl - The Backblaze URL which we'll send file
+   *    parts to
+   *  - authorizationToken - Auth token for uploading to the
+   *    aforementioned uploadUrl.
+   */
+  function getEndpoint (req, res, next) {
+    const client = req.uppy.b2Client
+    const { fileId } = req.params
+
+    if (typeof fileId !== 'string') {",this check is probably redundant because all `params` are expected to be strings,This should be a `400` status
68,"@@ -0,0 +1,196 @@
+const router = require('express').Router
+const ms = require('ms')
+
+module.exports = function b2 (config) {
+  if (typeof config.getPath !== 'function') {
+    throw new TypeError('b2: the `getPath` option must be a function')
+  }
+
+  const getCachedBucketID = (() => {
+    const cache = Object.create({})
+    return (client, bucketName) => {
+      const match = cache[bucketName]
+      if (match && match.expiration < Date.now()) {
+        return match.result
+      } else {
+        return (cache[bucketName] = {
+          result: client.getBucketId({ bucketName }),
+          expiration: Date.now() + (config.cacheBucketIdDurationMS || ms('30m'))
+        }).result
+      }
+    }
+  })()
+
+  /**
+   * Initiate a B2 large file upload.
+   *
+   * Expected JSON body:
+   *  - filename - The name of the file, given to the `config.getPath`
+   *    option to determine the object's final path in the B2 bucket.
+   *  - type - The MIME type of the file
+   *
+   * Response JSON:
+   *  - fileId - The unique B2 fileId which will be used again to initiate
+   *    the actual file transfer.
+   */
+  function createMultipartUpload (req, res, next) {
+    const client = req.uppy.b2Client
+    const fileName = config.getPath(req, req.body.filename)
+    const { type } = req.body
+
+    if (typeof fileName !== 'string') {
+      return res.status(500).json({ error: 'b2: filename returned from `getPath` must be a string' })
+    }
+    if (typeof type !== 'string') {
+      return res.status(400).json({ error: 'b2: content type must be a string' })
+    }
+
+    return getCachedBucketID(client, config.bucket)
+      .then(bucketId =>
+        client.startLargeFile({
+          bucketId,
+          fileName,
+          contentType: type
+        }))
+      .then(largeFileResponse => ({
+        fileId: largeFileResponse.fileId
+      }))
+      .then((data) => {
+        res.json(data)
+      })
+      .catch(err => next(err))
+  }
+
+  /**
+   * Obtain an authorization token and destination URL to
+   * post upload data to.
+   *
+   * Expected JSON body:
+   *  - fileId - The B2 fileId we would like to obtain an
+   *    upload destination for.
+   *
+   * Response JSON:
+   *  - fileId - The unique fileId of file being uploaded
+   *    (should be same as passed-in fileId)
+   *  - uploadUrl - The Backblaze URL which we'll send file
+   *    parts to
+   *  - authorizationToken - Auth token for uploading to the
+   *    aforementioned uploadUrl.
+   */
+  function getEndpoint (req, res, next) {
+    const client = req.uppy.b2Client
+    const { fileId } = req.params
+
+    if (typeof fileId !== 'string') {
+      return res.status(400).json({ error: 'b2: fileId type must be a string' })
+    }
+
+    client.getUploadPartURL({ fileId })
+      .then(data => res.json(data))
+      .catch(err => next(err))
+  }
+
+  function getEndpointSmall (req, res, next) {
+    const client = req.uppy.b2Client
+
+    return getCachedBucketID(client, config.bucket)
+      .then(bucketId =>
+        client.getUploadURL({
+          bucketId
+        }).then(data =>
+          res.json(data)
+        ).catch(err => next(err))
+      )
+  }
+
+  function getUploadedParts (req, res, next) {
+    const client = req.uppy.b2Client
+    const { fileId } = req.params
+
+    if (typeof fileId !== 'string') {",this check is probably redundant because all params are expected to be strings,This should be a `400` status
69,"@@ -0,0 +1,196 @@
+const router = require('express').Router
+const ms = require('ms')
+
+module.exports = function b2 (config) {
+  if (typeof config.getPath !== 'function') {
+    throw new TypeError('b2: the `getPath` option must be a function')
+  }
+
+  const getCachedBucketID = (() => {
+    const cache = Object.create({})
+    return (client, bucketName) => {
+      const match = cache[bucketName]
+      if (match && match.expiration < Date.now()) {
+        return match.result
+      } else {
+        return (cache[bucketName] = {
+          result: client.getBucketId({ bucketName }),
+          expiration: Date.now() + (config.cacheBucketIdDurationMS || ms('30m'))
+        }).result
+      }
+    }
+  })()
+
+  /**
+   * Initiate a B2 large file upload.
+   *
+   * Expected JSON body:
+   *  - filename - The name of the file, given to the `config.getPath`
+   *    option to determine the object's final path in the B2 bucket.
+   *  - type - The MIME type of the file
+   *
+   * Response JSON:
+   *  - fileId - The unique B2 fileId which will be used again to initiate
+   *    the actual file transfer.
+   */
+  function createMultipartUpload (req, res, next) {
+    const client = req.uppy.b2Client
+    const fileName = config.getPath(req, req.body.filename)
+    const { type } = req.body
+
+    if (typeof fileName !== 'string') {
+      return res.status(500).json({ error: 'b2: filename returned from `getPath` must be a string' })
+    }
+    if (typeof type !== 'string') {
+      return res.status(400).json({ error: 'b2: content type must be a string' })
+    }
+
+    return getCachedBucketID(client, config.bucket)
+      .then(bucketId =>
+        client.startLargeFile({
+          bucketId,
+          fileName,
+          contentType: type
+        }))
+      .then(largeFileResponse => ({
+        fileId: largeFileResponse.fileId
+      }))
+      .then((data) => {
+        res.json(data)
+      })
+      .catch(err => next(err))
+  }
+
+  /**
+   * Obtain an authorization token and destination URL to
+   * post upload data to.
+   *
+   * Expected JSON body:
+   *  - fileId - The B2 fileId we would like to obtain an
+   *    upload destination for.
+   *
+   * Response JSON:
+   *  - fileId - The unique fileId of file being uploaded
+   *    (should be same as passed-in fileId)
+   *  - uploadUrl - The Backblaze URL which we'll send file
+   *    parts to
+   *  - authorizationToken - Auth token for uploading to the
+   *    aforementioned uploadUrl.
+   */
+  function getEndpoint (req, res, next) {
+    const client = req.uppy.b2Client
+    const { fileId } = req.params
+
+    if (typeof fileId !== 'string') {
+      return res.status(400).json({ error: 'b2: fileId type must be a string' })
+    }
+
+    client.getUploadPartURL({ fileId })
+      .then(data => res.json(data))
+      .catch(err => next(err))
+  }
+
+  function getEndpointSmall (req, res, next) {
+    const client = req.uppy.b2Client
+
+    return getCachedBucketID(client, config.bucket)
+      .then(bucketId =>
+        client.getUploadURL({
+          bucketId
+        }).then(data =>
+          res.json(data)
+        ).catch(err => next(err))
+      )
+  }
+
+  function getUploadedParts (req, res, next) {
+    const client = req.uppy.b2Client
+    const { fileId } = req.params
+
+    if (typeof fileId !== 'string') {
+      return res.status(400).json({ error: 'b2: fileId type must be a string' })
+    }
+
+    const fetchParts = (prevParts = [], nextPartNumber) => {
+      const params = {
+        fileId,
+        maxPartCount: 1000
+      }
+      if (nextPartNumber) {
+        params.nextPartNumber = nextPartNumber
+      }
+      return client.listParts(params)
+        .then(response => {
+          const parts = [
+            ...prevParts,
+            ...(response.parts.map(part => ({",are we certain that `response.parts` will always be present? Should we be doing some sort of validation before accessing the data?,This should be a `400` status
70,"@@ -0,0 +1,196 @@
+const router = require('express').Router
+const ms = require('ms')
+
+module.exports = function b2 (config) {
+  if (typeof config.getPath !== 'function') {
+    throw new TypeError('b2: the `getPath` option must be a function')
+  }
+
+  const getCachedBucketID = (() => {
+    const cache = Object.create({})
+    return (client, bucketName) => {
+      const match = cache[bucketName]
+      if (match && match.expiration < Date.now()) {
+        return match.result
+      } else {
+        return (cache[bucketName] = {
+          result: client.getBucketId({ bucketName }),
+          expiration: Date.now() + (config.cacheBucketIdDurationMS || ms('30m'))
+        }).result
+      }
+    }
+  })()
+
+  /**
+   * Initiate a B2 large file upload.
+   *
+   * Expected JSON body:
+   *  - filename - The name of the file, given to the `config.getPath`
+   *    option to determine the object's final path in the B2 bucket.
+   *  - type - The MIME type of the file
+   *
+   * Response JSON:
+   *  - fileId - The unique B2 fileId which will be used again to initiate
+   *    the actual file transfer.
+   */
+  function createMultipartUpload (req, res, next) {
+    const client = req.uppy.b2Client
+    const fileName = config.getPath(req, req.body.filename)
+    const { type } = req.body
+
+    if (typeof fileName !== 'string') {
+      return res.status(500).json({ error: 'b2: filename returned from `getPath` must be a string' })
+    }
+    if (typeof type !== 'string') {
+      return res.status(400).json({ error: 'b2: content type must be a string' })
+    }
+
+    return getCachedBucketID(client, config.bucket)
+      .then(bucketId =>
+        client.startLargeFile({
+          bucketId,
+          fileName,
+          contentType: type
+        }))
+      .then(largeFileResponse => ({
+        fileId: largeFileResponse.fileId
+      }))
+      .then((data) => {
+        res.json(data)
+      })
+      .catch(err => next(err))
+  }
+
+  /**
+   * Obtain an authorization token and destination URL to
+   * post upload data to.
+   *
+   * Expected JSON body:
+   *  - fileId - The B2 fileId we would like to obtain an
+   *    upload destination for.
+   *
+   * Response JSON:
+   *  - fileId - The unique fileId of file being uploaded
+   *    (should be same as passed-in fileId)
+   *  - uploadUrl - The Backblaze URL which we'll send file
+   *    parts to
+   *  - authorizationToken - Auth token for uploading to the
+   *    aforementioned uploadUrl.
+   */
+  function getEndpoint (req, res, next) {
+    const client = req.uppy.b2Client
+    const { fileId } = req.params
+
+    if (typeof fileId !== 'string') {
+      return res.status(400).json({ error: 'b2: fileId type must be a string' })
+    }
+
+    client.getUploadPartURL({ fileId })
+      .then(data => res.json(data))
+      .catch(err => next(err))
+  }
+
+  function getEndpointSmall (req, res, next) {
+    const client = req.uppy.b2Client
+
+    return getCachedBucketID(client, config.bucket)
+      .then(bucketId =>
+        client.getUploadURL({
+          bucketId
+        }).then(data =>
+          res.json(data)
+        ).catch(err => next(err))
+      )
+  }
+
+  function getUploadedParts (req, res, next) {
+    const client = req.uppy.b2Client
+    const { fileId } = req.params
+
+    if (typeof fileId !== 'string') {
+      return res.status(400).json({ error: 'b2: fileId type must be a string' })
+    }
+
+    const fetchParts = (prevParts = [], nextPartNumber) => {
+      const params = {
+        fileId,
+        maxPartCount: 1000
+      }
+      if (nextPartNumber) {
+        params.nextPartNumber = nextPartNumber
+      }
+      return client.listParts(params)
+        .then(response => {
+          const parts = [
+            ...prevParts,
+            ...(response.parts.map(part => ({
+              PartNumber: part.partNumber,
+              Size: part.contentLength
+            }))
+            )
+          ]
+
+          if (response.nextPartNumber) {
+            return fetchParts(parts, response.nextPartNumber)
+          } else {
+            return Promise.resolve(parts)
+          }
+        })
+    }
+
+    fetchParts()
+      .then(parts => res.json({ parts }))
+      .catch(err => next(err))
+  }
+
+  /**
+   * Finish off a multipart upload.
+   *
+   * Expected JSON body:
+   *  - fileId - The unique fileId of the file being uploaded
+   *  - partSha1Array - An array containing the hex digests of
+   *    each of the uploaded parts (in order). This is used on
+   *    the receiving end to verify the integrity of the upload.
+   *
+   * Response JSON:
+   *  see https://www.backblaze.com/b2/docs/b2_finish_large_file.html
+   */
+  function completeMultipartUpload (req, res, next) {
+    const client = req.uppy.b2Client
+    const { partSha1Array } = req.body
+    const { fileId } = req.params
+
+    if (typeof fileId !== 'string') {","again, this check is redundant",This should be a `400` status
71,"@@ -0,0 +1,196 @@
+const router = require('express').Router
+const ms = require('ms')
+
+module.exports = function b2 (config) {
+  if (typeof config.getPath !== 'function') {
+    throw new TypeError('b2: the `getPath` option must be a function')
+  }
+
+  const getCachedBucketID = (() => {
+    const cache = Object.create({})
+    return (client, bucketName) => {
+      const match = cache[bucketName]
+      if (match && match.expiration < Date.now()) {
+        return match.result
+      } else {
+        return (cache[bucketName] = {
+          result: client.getBucketId({ bucketName }),
+          expiration: Date.now() + (config.cacheBucketIdDurationMS || ms('30m'))
+        }).result
+      }
+    }
+  })()
+
+  /**
+   * Initiate a B2 large file upload.
+   *
+   * Expected JSON body:
+   *  - filename - The name of the file, given to the `config.getPath`
+   *    option to determine the object's final path in the B2 bucket.
+   *  - type - The MIME type of the file
+   *
+   * Response JSON:
+   *  - fileId - The unique B2 fileId which will be used again to initiate
+   *    the actual file transfer.
+   */
+  function createMultipartUpload (req, res, next) {
+    const client = req.uppy.b2Client
+    const fileName = config.getPath(req, req.body.filename)
+    const { type } = req.body
+
+    if (typeof fileName !== 'string') {
+      return res.status(500).json({ error: 'b2: filename returned from `getPath` must be a string' })
+    }
+    if (typeof type !== 'string') {
+      return res.status(400).json({ error: 'b2: content type must be a string' })
+    }
+
+    return getCachedBucketID(client, config.bucket)
+      .then(bucketId =>
+        client.startLargeFile({
+          bucketId,
+          fileName,
+          contentType: type
+        }))
+      .then(largeFileResponse => ({
+        fileId: largeFileResponse.fileId
+      }))
+      .then((data) => {
+        res.json(data)
+      })
+      .catch(err => next(err))
+  }
+
+  /**
+   * Obtain an authorization token and destination URL to
+   * post upload data to.
+   *
+   * Expected JSON body:
+   *  - fileId - The B2 fileId we would like to obtain an
+   *    upload destination for.
+   *
+   * Response JSON:
+   *  - fileId - The unique fileId of file being uploaded
+   *    (should be same as passed-in fileId)
+   *  - uploadUrl - The Backblaze URL which we'll send file
+   *    parts to
+   *  - authorizationToken - Auth token for uploading to the
+   *    aforementioned uploadUrl.
+   */
+  function getEndpoint (req, res, next) {
+    const client = req.uppy.b2Client
+    const { fileId } = req.params
+
+    if (typeof fileId !== 'string') {
+      return res.status(400).json({ error: 'b2: fileId type must be a string' })
+    }
+
+    client.getUploadPartURL({ fileId })
+      .then(data => res.json(data))
+      .catch(err => next(err))
+  }
+
+  function getEndpointSmall (req, res, next) {
+    const client = req.uppy.b2Client
+
+    return getCachedBucketID(client, config.bucket)
+      .then(bucketId =>
+        client.getUploadURL({
+          bucketId
+        }).then(data =>
+          res.json(data)
+        ).catch(err => next(err))
+      )
+  }
+
+  function getUploadedParts (req, res, next) {
+    const client = req.uppy.b2Client
+    const { fileId } = req.params
+
+    if (typeof fileId !== 'string') {
+      return res.status(400).json({ error: 'b2: fileId type must be a string' })
+    }
+
+    const fetchParts = (prevParts = [], nextPartNumber) => {
+      const params = {
+        fileId,
+        maxPartCount: 1000
+      }
+      if (nextPartNumber) {
+        params.nextPartNumber = nextPartNumber
+      }
+      return client.listParts(params)
+        .then(response => {
+          const parts = [
+            ...prevParts,
+            ...(response.parts.map(part => ({
+              PartNumber: part.partNumber,
+              Size: part.contentLength
+            }))
+            )
+          ]
+
+          if (response.nextPartNumber) {
+            return fetchParts(parts, response.nextPartNumber)
+          } else {
+            return Promise.resolve(parts)
+          }
+        })
+    }
+
+    fetchParts()
+      .then(parts => res.json({ parts }))
+      .catch(err => next(err))
+  }
+
+  /**
+   * Finish off a multipart upload.
+   *
+   * Expected JSON body:
+   *  - fileId - The unique fileId of the file being uploaded
+   *  - partSha1Array - An array containing the hex digests of
+   *    each of the uploaded parts (in order). This is used on
+   *    the receiving end to verify the integrity of the upload.
+   *
+   * Response JSON:
+   *  see https://www.backblaze.com/b2/docs/b2_finish_large_file.html
+   */
+  function completeMultipartUpload (req, res, next) {
+    const client = req.uppy.b2Client
+    const { partSha1Array } = req.body
+    const { fileId } = req.params
+
+    if (typeof fileId !== 'string') {
+      return res.status(400).json({ error: 'b2: fileId type must be a string' })
+    }
+
+    if (typeof partSha1Array === 'undefined' || typeof partSha1Array.length !== 'number') {
+      return res.status(400).json({ error: 'b2: partSha1Array array not found' })
+    }
+
+    client.finishLargeFile({ fileId, partSha1Array })
+      .then(data => res.json(data))
+      .catch(err => next(err))
+  }
+
+  function abortMultipartUpload (req, res, next) {
+    const client = req.uppy.b2Client
+    const { fileId } = req.params
+
+    if (typeof fileId !== 'string') {",Also here :),This should be a `400` status
72,"@@ -0,0 +1,196 @@
+const router = require('express').Router
+const ms = require('ms')
+
+module.exports = function b2 (config) {
+  if (typeof config.getPath !== 'function') {
+    throw new TypeError('b2: the `getPath` option must be a function')
+  }
+
+  const getCachedBucketID = (() => {
+    const cache = Object.create({})
+    return (client, bucketName) => {
+      const match = cache[bucketName]
+      if (match && match.expiration < Date.now()) {
+        return match.result
+      } else {
+        return (cache[bucketName] = {
+          result: client.getBucketId({ bucketName }),
+          expiration: Date.now() + (config.cacheBucketIdDurationMS || ms('30m'))
+        }).result
+      }
+    }
+  })()
+
+  /**
+   * Initiate a B2 large file upload.
+   *
+   * Expected JSON body:
+   *  - filename - The name of the file, given to the `config.getPath`
+   *    option to determine the object's final path in the B2 bucket.
+   *  - type - The MIME type of the file
+   *
+   * Response JSON:
+   *  - fileId - The unique B2 fileId which will be used again to initiate
+   *    the actual file transfer.
+   */
+  function createMultipartUpload (req, res, next) {
+    const client = req.uppy.b2Client
+    const fileName = config.getPath(req, req.body.filename)
+    const { type } = req.body
+
+    if (typeof fileName !== 'string') {
+      return res.status(500).json({ error: 'b2: filename returned from `getPath` must be a string' })
+    }
+    if (typeof type !== 'string') {
+      return res.status(400).json({ error: 'b2: content type must be a string' })
+    }
+
+    return getCachedBucketID(client, config.bucket)
+      .then(bucketId =>
+        client.startLargeFile({
+          bucketId,
+          fileName,
+          contentType: type
+        }))
+      .then(largeFileResponse => ({
+        fileId: largeFileResponse.fileId
+      }))
+      .then((data) => {
+        res.json(data)
+      })
+      .catch(err => next(err))
+  }
+
+  /**
+   * Obtain an authorization token and destination URL to
+   * post upload data to.
+   *
+   * Expected JSON body:
+   *  - fileId - The B2 fileId we would like to obtain an
+   *    upload destination for.
+   *
+   * Response JSON:
+   *  - fileId - The unique fileId of file being uploaded
+   *    (should be same as passed-in fileId)
+   *  - uploadUrl - The Backblaze URL which we'll send file
+   *    parts to
+   *  - authorizationToken - Auth token for uploading to the
+   *    aforementioned uploadUrl.
+   */
+  function getEndpoint (req, res, next) {
+    const client = req.uppy.b2Client
+    const { fileId } = req.params
+
+    if (typeof fileId !== 'string') {
+      return res.status(400).json({ error: 'b2: fileId type must be a string' })
+    }
+
+    client.getUploadPartURL({ fileId })
+      .then(data => res.json(data))
+      .catch(err => next(err))
+  }
+
+  function getEndpointSmall (req, res, next) {
+    const client = req.uppy.b2Client
+
+    return getCachedBucketID(client, config.bucket)
+      .then(bucketId =>
+        client.getUploadURL({
+          bucketId
+        }).then(data =>
+          res.json(data)
+        ).catch(err => next(err))
+      )
+  }
+
+  function getUploadedParts (req, res, next) {
+    const client = req.uppy.b2Client
+    const { fileId } = req.params
+
+    if (typeof fileId !== 'string') {
+      return res.status(400).json({ error: 'b2: fileId type must be a string' })
+    }
+
+    const fetchParts = (prevParts = [], nextPartNumber) => {
+      const params = {
+        fileId,
+        maxPartCount: 1000
+      }
+      if (nextPartNumber) {
+        params.nextPartNumber = nextPartNumber
+      }
+      return client.listParts(params)
+        .then(response => {
+          const parts = [
+            ...prevParts,
+            ...(response.parts.map(part => ({
+              PartNumber: part.partNumber,
+              Size: part.contentLength
+            }))
+            )
+          ]
+
+          if (response.nextPartNumber) {
+            return fetchParts(parts, response.nextPartNumber)
+          } else {
+            return Promise.resolve(parts)
+          }
+        })
+    }
+
+    fetchParts()
+      .then(parts => res.json({ parts }))
+      .catch(err => next(err))
+  }
+
+  /**
+   * Finish off a multipart upload.
+   *
+   * Expected JSON body:
+   *  - fileId - The unique fileId of the file being uploaded
+   *  - partSha1Array - An array containing the hex digests of
+   *    each of the uploaded parts (in order). This is used on
+   *    the receiving end to verify the integrity of the upload.
+   *
+   * Response JSON:
+   *  see https://www.backblaze.com/b2/docs/b2_finish_large_file.html
+   */
+  function completeMultipartUpload (req, res, next) {
+    const client = req.uppy.b2Client
+    const { partSha1Array } = req.body
+    const { fileId } = req.params
+
+    if (typeof fileId !== 'string') {
+      return res.status(400).json({ error: 'b2: fileId type must be a string' })
+    }
+
+    if (typeof partSha1Array === 'undefined' || typeof partSha1Array.length !== 'number') {
+      return res.status(400).json({ error: 'b2: partSha1Array array not found' })
+    }
+
+    client.finishLargeFile({ fileId, partSha1Array })
+      .then(data => res.json(data))
+      .catch(err => next(err))
+  }
+
+  function abortMultipartUpload (req, res, next) {
+    const client = req.uppy.b2Client
+    const { fileId } = req.params
+
+    if (typeof fileId !== 'string') {
+      return res.status(400).json({ error: 'b2: fileId type must be a string' })
+    }
+
+    client.cancelLargeFile({ fileId })
+      .then(data => res.json(data))
+      .catch(err => next(err))
+  }
+
+  return router()
+    .post('/upload', getEndpointSmall)
+    .post('/multipart', createMultipartUpload)
+    .post('/multipart/:fileId', getEndpoint)
+    .get('/multipart/:fileId', getUploadedParts)","is there a reason for making `getEndpointSmall`, `getEndpoint`, and `getUploadedParts` to be `POST` requests? `GET` seems more fitting.",This should be a `400` status
73,"@@ -0,0 +1,21 @@
+The MIT License (MIT)
+
+Copyright (c) 2018 Transloadit",we should probably make this 2020,
74,"@@ -0,0 +1,21 @@
+The MIT License (MIT)
+
+Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)
+
+Permission is hereby granted, free of charge, to any person obtaining a copy
+of this software and associated documentation files (the ""Software""), to deal
+in the Software without restriction, including without limitation the rights
+to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
+copies of the Software, and to permit persons to whom the Software is
+furnished to do so, subject to the following conditions:
+
+The above copyright notice and this permission notice shall be included in
+all copies or substantial portions of the Software.
+
+THE SOFTWARE IS PROVIDED ""AS IS"", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
+AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
+OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
+THE SOFTWARE.",👍 ,Please add a new line at the 
75,"@@ -0,0 +1,21 @@
+const getTimeStamp = require('@uppy/utils/lib/getTimeStamp')
+
+// Swallow logs, default if logger is not set or debug: false
+const nullLogger = {
+  debug: (...args) => {},
+  warn: (...args) => {},
+  error: (...args) => {}
+}
+
+// Print logs to console with namespace + timestamp,
+// default if logger: 'debug' or debug: true
+const debugLogger = {
+  debug: (...args) => console.debug(`[Uppy] [${getTimeStamp()}]`, ...args),","```suggestion
  debug: (...args) => {
    const debug = console.debug || console.log
    debug(`[Uppy] [${getTimeStamp()}]`, ...args)
  },
```
this should work hopefully",Why do we need this?
76,"@@ -0,0 +1,21 @@
+const { h } = require('preact')
+
+module.exports = ({ currentDeviceId, videoSources, onChangeVideoSource }) => {
+  return (
+    <p className=""uppy-Webcam-videoSource"">Video source:
+      <select
+        className=""uppy-Webcam-videoSource-select""
+        onchange={() => { onChangeVideoSource(document.getElementsByClassName('uppy-Webcam-videoSource-select')[0].value) }}","We can use `event.target` here instead:
```suggestion
        onchange={(event) => { onChangeVideoSource(event.target.value) }}
```
it's technically possible that there are 2 or more Uppy instances on a page, and `getElementsByClassName()` may pick the wrong element in that case. `event.target` is always correct.",I'm not sure if this is the b
77,"@@ -0,0 +1,21 @@
+name: Companion
+on: [push, pull_request]
+
+jobs:
+  test:
+    name: Unit tests
+    runs-on: ubuntu-latest
+    strategy:
+      matrix:
+        node-version: [10.20.1, 12.x, 14.x]",:heart: ,I don't think we need this.
78,"@@ -0,0 +1,210 @@
+const Provider = require('../Provider')
+const request = require('request')
+const purest = require('purest')({ request })
+const logger = require('../../logger')
+const adapter = require('./adapter')
+const moment = require('moment')
+
+const { ProviderApiError, ProviderAuthError } = require('../error')
+const BASE_URL = 'https://zoom.us/v2'
+const GET_LIST_PATH = '/users/me/recordings'
+const PAGE_SIZE = 10
+const MAX_MO_RANGE = 3 // waiting on response: https://devforum.zoom.us/t/retrieve-all-past-zoom-cloud-recordings/22487/6?u=mokutsu
+
+class Zoom extends Provider {
+  constructor (options) {
+    super(options)
+    this.authProvider = options.provider = Zoom.authProvider
+    this.client = purest(options)
+  }
+
+  static get authProvider () {
+    return 'zoom'
+  }
+
+  // /users/{userId}/recordings
+  async list ({ token, query = { cursor: {}, nextPageToken: '' } }, done) {
+    /*
+    zoom restricts retrieval to 1 month range + records for 300 meetings
+      - if there's enough results to paginate, return that
+      - if there's not enough, keep grabbing older records until we get the max number of results or max date range
+    */
+    const { oldestMonth } = query.cursor || {}
+    let nextPageToken = query.nextPageToken || ''
+    let response = null
+    const results = []
+    let initialMonth = 1
+
+    if (nextPageToken && oldestMonth) {
+      initialMonth = parseInt(oldestMonth)
+    } else if (oldestMonth) {
+      initialMonth += parseInt(oldestMonth) + 1
+    }
+
+    let monthsPastToQuery = initialMonth
+    let dateRange = this._getDateRange(monthsPastToQuery)
+
+    while (
+      !(response && response.body.next_page_token) &&
+      (monthsPastToQuery - initialMonth < MAX_MO_RANGE) &&
+      results.length < PAGE_SIZE
+    ) {
+      dateRange = this._getDateRange(monthsPastToQuery)
+      const queryObj = {
+        page_size: PAGE_SIZE,
+        from: dateRange.fromDate,
+        to: dateRange.toDate
+      }
+      if (nextPageToken) {
+        queryObj.next_page_token = nextPageToken
+      }
+      try {
+        response = await new Promise((resolve, reject) => this.client.get(`${BASE_URL}${GET_LIST_PATH}`)
+          .qs(queryObj)
+          .auth(token)
+          .request((err, resp, body) => {
+            if (err || resp.statusCode !== 200) {
+              reject(this._error(err, resp))
+            } else {
+              resolve(resp)
+            }
+          })
+        )
+      } catch (err) {
+        return done(err)
+      }
+
+      if (response.body.next_page_token) {
+        nextPageToken = response.body.next_page_token
+      } else {
+        monthsPastToQuery += 1
+      }
+      results.push(response.body)
+    }
+
+    done(null, this._adaptData(results, dateRange))
+  }
+
+  download ({ id, token, query }, done) {
+    // zoom only allows retrieval by meeting so we need meeting ID and file ID to retrieve
+    const meetingId = id
+    const fileId = query.recordingId
+    const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+
+    const downloadUrlPromise = new Promise((resolve) => {
+      this.client
+        .get(`${BASE_URL}${GET_MEETING_FILES}`)
+        .auth(token)
+        .request((err, resp) => {
+          if (err) {
+            this._downloadError(resp, done)
+            return
+          }
+          const file = resp.body.recording_files.find(file => file.id === fileId)
+          if (!file || !file.download_url) {
+            return this._downloadError(resp, done)
+          }
+          resolve(file.download_url)
+        })
+    })
+    downloadUrlPromise.then((downloadUrl) => {
+      this.client
+        .get(`${downloadUrl}?access_token=${token}`)
+        .request()
+        .on('response', (resp) => {
+          if (resp.statusCode !== 200) {
+            done(this._error(null, resp))
+          } else {
+            resp.on('data', (chunk) => done(null, chunk))
+          }
+        })
+        .on('end', () => done(null, null))
+        .on('error', (err) => {
+          logger.error(err, 'provider.zoom.download.error')
+          done(err)
+        })
+    })
+  }
+
+  size ({ id, token, query }, done) {
+    const meetingId = id
+    const fileId = query.recordingId
+    const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+
+    return this.client
+      .get(`${BASE_URL}${GET_MEETING_FILES}`)
+      .auth(token)
+      .request((err, resp, body) => {
+        if (err || resp.statusCode !== 200) {
+          return this._downloadError(resp, done)
+        }
+        const file = resp.body.recording_files.find(file => file.id === fileId)
+        if (!file) {
+          return this._downloadError(resp, done)
+        }
+        done(null, file.file_size)
+      })
+  }
+
+  _adaptData (results, dateRange) {
+    if (!results || results.length === 0) {
+      return { items: [] }
+    }
+
+    const data = {
+      // is this nextPagePath ever used? It looks like pagination just uses the querystring / cursor key
+      nextPagePath: adapter.getQuery(results, dateRange),
+      items: []
+    }
+
+    results.forEach(res => {
+      res.meetings.forEach(meeting => {
+        meeting.recording_files.forEach((record, index) => {
+          data.items.push({
+            name: adapter.getItemName(meeting, record, index),
+            mimeType: adapter.getMimeType(record),
+            id: adapter.getId(record),
+            requestPath: adapter.getRequestPath(record),
+            modifiedDate: adapter.getStartDate(record),
+            size: adapter.getSize(record),
+            custom: adapter.getCustomFields(record)
+          })
+        })
+      })
+    })
+
+    return data
+  }
+
+  _error (err, response) {
+    // token expiry error doesn't seem to be returned correctly","i'm not 100% sure why the token expiry isn't being recognized correctly, any thoughts / feedback would be helpful. thanks!",I think this should be `const
79,"@@ -0,0 +1,22 @@
+const execa = require('execa')
+const fs = require('fs')
+
+const README_FILE_NAME = 'README.md'
+
+async function updateContributorsListInReadme () {
+  const readme = fs.readFileSync(README_FILE_NAME, 'utf-8')
+  const args = [
+    '--owner', 'transloadit',
+    '--repo', 'uppy',
+    '--cols', '6',
+    '--authToken', process.env.GITHUB_TOKEN ? `--authToken ${process.env.GITHUB_TOKEN}` : ''","```suggestion
    '--authToken', process.env.GITHUB_TOKEN ? process.env.GITHUB_TOKEN : ''
```
",This should be `const { execa
80,"@@ -0,0 +1,223 @@
+const Provider = require('../Provider')
+const request = require('request')
+const purest = require('purest')({ request })
+const logger = require('../../logger')
+const adapter = require('./adapter')
+const moment = require('moment')
+const { ProviderApiError, ProviderAuthError } = require('../error')
+
+const BASE_URL = 'https://zoom.us/v2'
+const GET_LIST_PATH = '/users/me/recordings'
+const PAGE_SIZE = 300
+const MAX_MO_RANGE = 3
+
+class Zoom extends Provider {
+  constructor (options) {
+    super(options)
+    this.authProvider = options.provider = Zoom.authProvider
+    this.client = purest(options)
+  }
+
+  static get authProvider () {
+    return 'zoom'
+  }
+
+  async list ({ token, query = { cursor: '', nextPageToken: '' } }, done) {","is there a reason this method needs to be `async`? For consistency and to avoid confusion, I'd say we should keep it the same as others.",I think this should be `zoom` instead of `zoom.us`
81,"@@ -0,0 +1,223 @@
+const Provider = require('../Provider')
+const request = require('request')
+const purest = require('purest')({ request })
+const logger = require('../../logger')
+const adapter = require('./adapter')
+const moment = require('moment')
+const { ProviderApiError, ProviderAuthError } = require('../error')
+
+const BASE_URL = 'https://zoom.us/v2'
+const GET_LIST_PATH = '/users/me/recordings'
+const PAGE_SIZE = 300
+const MAX_MO_RANGE = 3
+
+class Zoom extends Provider {
+  constructor (options) {
+    super(options)
+    this.authProvider = options.provider = Zoom.authProvider
+    this.client = purest(options)
+  }
+
+  static get authProvider () {
+    return 'zoom'
+  }
+
+  async list ({ token, query = { cursor: '', nextPageToken: '' } }, done) {
+    /*
+    zoom restricts retrieval to 1 month range + records for 300 meetings
+      - if there's enough results to paginate, return that
+      - if there's not enough, keep grabbing older records until we get the max number of results or max date range
+    */
+    const oldestMonth = query.cursor ? parseInt(query.cursor) : 0
+    let nextPageToken = query.nextPageToken || ''
+    let response = null
+    const results = []
+    let initialMonth = 1
+
+    if (nextPageToken && oldestMonth) {
+      initialMonth = oldestMonth
+    } else if (oldestMonth) {
+      initialMonth += oldestMonth + 1
+    }
+
+    let monthsPastToQuery = initialMonth
+    let dateRange = this._getDateRange(monthsPastToQuery)
+
+    while (
+      !(response && response.body.next_page_token) &&
+      (monthsPastToQuery - initialMonth < MAX_MO_RANGE) &&
+      results.length < PAGE_SIZE
+    ) {
+      dateRange = this._getDateRange(monthsPastToQuery)
+      const queryObj = {
+        page_size: PAGE_SIZE,
+        from: dateRange.fromDate,
+        to: dateRange.toDate
+      }
+      if (nextPageToken) {
+        queryObj.next_page_token = nextPageToken
+      }
+      try {
+        response = await new Promise((resolve, reject) => this.client.get(`${BASE_URL}${GET_LIST_PATH}`)
+          .qs(queryObj)
+          .auth(token)
+          .request((err, resp, body) => {
+            if (err || resp.statusCode !== 200) {
+              reject(this._error(err, resp))
+            } else {
+              resolve(resp)
+            }
+          })
+        )
+      } catch (err) {
+        return done(err)
+      }
+
+      if (response.body.next_page_token) {
+        nextPageToken = response.body.next_page_token
+      } else {
+        monthsPastToQuery += 1
+      }
+      results.push(response.body)
+    }
+
+    done(null, this._adaptData(results, dateRange))
+  }
+
+  download ({ id, token, query }, done) {
+    // meeting id + file id required
+    const meetingId = id
+    const fileId = query.recordingId
+    const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+
+    const downloadUrlPromise = new Promise((resolve) => {
+      this.client
+        .get(`${BASE_URL}${GET_MEETING_FILES}`)
+        .auth(token)
+        .request((err, resp) => {
+          if (err) {
+            this._downloadError(resp, done)
+            return
+          }
+          const file = resp.body.recording_files.find(file => file.id === fileId)
+          if (!file || !file.download_url) {
+            return this._downloadError(resp, done)
+          }
+          resolve(file.download_url)
+        })
+    })
+    downloadUrlPromise.then((downloadUrl) => {
+      this.client
+        .get(`${downloadUrl}?access_token=${token}`)
+        .request()
+        .on('response', (resp) => {
+          if (resp.statusCode !== 200) {
+            done(this._error(null, resp))
+          } else {
+            resp.on('data', (chunk) => done(null, chunk))
+          }
+        })
+        .on('end', () => done(null, null))
+        .on('error', (err) => {
+          logger.error(err, 'provider.zoom.download.error')
+          done(err)
+        })
+    })
+  }
+
+  size ({ id, token, query }, done) {
+    const meetingId = id
+    const fileId = query.recordingId
+    const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+
+    return this.client
+      .get(`${BASE_URL}${GET_MEETING_FILES}`)
+      .auth(token)
+      .request((err, resp, body) => {
+        if (err || resp.statusCode !== 200) {
+          return this._downloadError(resp, done)
+        }
+        const file = resp.body.recording_files.find(file => file.id === fileId)
+        if (!file) {
+          return this._downloadError(resp, done)
+        }
+        done(null, file.file_size)
+      })
+  }
+
+  _adaptData (results, dateRange) {
+    if (!results || results.length === 0) {
+      return { items: [] }
+    }
+
+    const data = {
+      nextPagePath: adapter.getQuery(results, dateRange),
+      monthsRetrieved: dateRange.monthsInPast,
+      items: []
+    }
+
+    results.forEach(res => {
+      res.meetings.forEach(meeting => {
+        meeting.recording_files.forEach((record, index) => {
+          data.items.push({","can we make this data adhere to all the fields here?
```js
items: [
    {
      // boolean value of whether or NOT it's a folder
      isFolder: false,
      // icon image URL
      icon: 'https://random-api.url.com/fileicon.jpg',
      // name of the item
      name: 'myfile.jpg',
      // the mime type of the item. Only relevant if the item is NOT a folder
      mimeType: 'image/jpg',
      // the id (in string) of the item
      id: 'uniqueitemid',
      // thumbnail image URL. Only relevant if the item is NOT a folder
      thumbnail: 'https://random-api.url.com/filethumbnail.jpg',
      // for folders this is typically the value that will be passed as ""directory"" in the list(...) method.
      // For files, this is the value that will be passed as id in the download(...) method.
      requestPath: 'file-or-folder-requestpath',
      // datetime string (in ISO 8601 format) of when this item was last modified
      modifiedDate: '2020-06-29T19:59:58Z',
      // the size in bytes of the item. Only relevent if the item is NOT a folder
      size: 278940,
      custom: {
        // an object that may contain some more custom fields that you may need to send to the client. Only add this object if you have a need for it.
        customData1: 'the value',
        customData2: 'the value',
      },
      // more items here
    }
  ]
```

so basically being explicit for every value. So for `isFolder` for example, I imagine that will be `false`. And fields that will not be specified like `icon` can be set to `null` (unless zoom actually provides icon URLs?)",I'm not sure if this is the best way to do this. I
82,"@@ -0,0 +1,26 @@
+'use strict'
+
+const RequestClient = require('./RequestClient')
+
+const _getName = (id) => {
+  return id.split('-').map((s) => s.charAt(0).toUpperCase() + s.slice(1)).join(' ')
+}
+
+module.exports = class SearchProvider extends RequestClient {
+  constructor (uppy, opts) {
+    super(uppy, opts)
+    this.provider = opts.provider
+    this.id = this.provider
+    this.name = this.opts.name || _getName(this.id)
+    this.pluginId = this.opts.pluginId
+  }
+
+  fileUrl (id) {
+    return `${this.hostname}/search/${this.id}/get/${id}`","This should _probably_ be URL-encoded? not totally sure
```suggestion
    return `${this.hostname}/search/${this.id}/get/${encodeURIComponent(id)}`
```",`uppy` -> `options`
83,"@@ -0,0 +1,26 @@
+'use strict'
+
+const RequestClient = require('./RequestClient')
+
+const _getName = (id) => {
+  return id.split('-').map((s) => s.charAt(0).toUpperCase() + s.slice(1)).join(' ')
+}
+
+module.exports = class SearchProvider extends RequestClient {
+  constructor (uppy, opts) {
+    super(uppy, opts)
+    this.provider = opts.provider
+    this.id = this.provider
+    this.name = this.opts.name || _getName(this.id)
+    this.pluginId = this.opts.pluginId
+  }
+
+  fileUrl (id) {
+    return `${this.hostname}/search/${this.id}/get/${id}`
+  }
+
+  search (text, queries) {
+    queries = queries ? `&${queries}` : ''
+    return this.get(`search/${this.id}/list?q=${text}${queries}`)","But I am sure about this one 😄 
```suggestion
    return this.get(`search/${this.id}/list?q=${encodeURIComponent(text)}${queries}`)
```",`uppy` -> `options`
84,"@@ -0,0 +1,26 @@
+/* global window, capabilities */
+
+function selectFakeFile (uppyID) {
+  var blob = new Blob(
+    ['data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTIwIDEyMCI+CiAgPGNpcmNsZSBjeD0iNjAiIGN5PSI2MCIgcj0iNTAiLz4KPC9zdmc+Cg=='],
+    { type: 'image/svg+xml' }
+  )
+  window[uppyID].addFile({
+    source: 'test',
+    name: 'test-file',
+    type: blob.type,
+    data: blob
+  })
+}
+
+function supportsChooseFile () {
+  // Webdriver for Safari and Edge doesn’t support .chooseFile
+  return capabilities.browserName !== 'safari' &&
+         capabilities.browserName !== 'MicrosoftEdge' &&
+         capabilities.platformName !== 'Android'
+}
+",Great idea with moving this to a method. Nice!,nit: space after `//`
85,"@@ -0,0 +1,262 @@
+const Provider = require('../Provider')
+const request = require('request')
+const purest = require('purest')({ request })
+const logger = require('../../logger')
+const adapter = require('./adapter')
+const moment = require('moment')
+const { ProviderApiError, ProviderAuthError } = require('../error')
+
+const BASE_URL = 'https://zoom.us/v2'
+const GET_LIST_PATH = '/users/me/recordings'
+const PAGE_SIZE = 300
+const DEFAULT_RANGE_MOS = 23
+// oldest possible folder for any user
+const OLDEST_RECORD = moment().set({ year: 2014, month: 11 })",so this is the oldest possible record for any user in zoom? No matter the account being used? 🤔 ,This should be `const { moment } = require('moment
86,"@@ -0,0 +1,262 @@
+const Provider = require('../Provider')
+const request = require('request')
+const purest = require('purest')({ request })
+const logger = require('../../logger')
+const adapter = require('./adapter')
+const moment = require('moment')
+const { ProviderApiError, ProviderAuthError } = require('../error')
+
+const BASE_URL = 'https://zoom.us/v2'
+const GET_LIST_PATH = '/users/me/recordings'
+const PAGE_SIZE = 300
+const DEFAULT_RANGE_MOS = 23
+// oldest possible folder for any user
+const OLDEST_RECORD = moment().set({ year: 2014, month: 11 })
+
+class Zoom extends Provider {
+  constructor (options) {
+    super(options)
+    this.authProvider = options.provider = Zoom.authProvider
+    this.client = purest(options)
+  }
+
+  static get authProvider () {
+    return 'zoom'
+  }
+
+  list (options, done) {
+    /*
+    - show 2 years by default, scroll for older folders
+    - drill down for rest
+    */
+    const token = options.token || ''","ideally, there should always be a token, otherwise this request shouldn't be allowed to begin with. Is there a reason we are providing a fallback value here? Lint issue perhaps?",I think this should be `options.token || ''`
87,"@@ -0,0 +1,262 @@
+const Provider = require('../Provider')
+const request = require('request')
+const purest = require('purest')({ request })
+const logger = require('../../logger')
+const adapter = require('./adapter')
+const moment = require('moment')
+const { ProviderApiError, ProviderAuthError } = require('../error')
+
+const BASE_URL = 'https://zoom.us/v2'
+const GET_LIST_PATH = '/users/me/recordings'
+const PAGE_SIZE = 300
+const DEFAULT_RANGE_MOS = 23
+// oldest possible folder for any user
+const OLDEST_RECORD = moment().set({ year: 2014, month: 11 })
+
+class Zoom extends Provider {
+  constructor (options) {
+    super(options)
+    this.authProvider = options.provider = Zoom.authProvider
+    this.client = purest(options)
+  }
+
+  static get authProvider () {
+    return 'zoom'
+  }
+
+  list (options, done) {
+    /*
+    - show 2 years by default, scroll for older folders
+    - drill down for rest
+    */
+    const token = options.token || ''
+    const query = options.query || {}
+    const { cursor, from, to } = query
+    const meetingId = options.directory || ''
+
+    if (!from && !to && !meetingId) {
+      const end = cursor && moment(cursor)
+      this.client.get(`${BASE_URL}${GET_LIST_PATH}`)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200) {
+            err = this._error(err, resp)
+            logger.error(err, 'provider.zoom.list.error')
+            return done(err)
+          }
+          done(null, this._initializeData(end))
+        })
+    }
+
+    if (from && to) {
+      const queryObj = {
+        page_size: PAGE_SIZE,
+        from,
+        to
+      }
+
+      if (cursor) {
+        queryObj.next_page_token = cursor
+      }
+
+      this.client.get(`${BASE_URL}${GET_LIST_PATH}`)
+        .qs(queryObj)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200) {
+            err = this._error(err, resp)
+            logger.error(err, 'provider.zoom.list.error')
+            return done(err)
+          } else {
+            done(null, this._adaptData(body))
+          }
+        })
+    }
+
+    if (meetingId) {
+      const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+      this.client
+        .get(`${BASE_URL}${GET_MEETING_FILES}`)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200) {
+            err = this._error(err, resp)
+            logger.error(err, 'provider.zoom.list.error')
+            return done(err)
+          } else {
+            done(null, this._adaptData(body))
+          }
+        })
+    }
+  }
+
+  download ({ id, token, query }, done) {
+    // meeting id + file id required
+    const meetingId = id
+    const fileId = query.recordingId
+    const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+
+    const downloadUrlPromise = new Promise((resolve) => {
+      this.client
+        .get(`${BASE_URL}${GET_MEETING_FILES}`)
+        .auth(token)
+        .request((err, resp) => {
+          if (err) {
+            this._downloadError(resp, done)
+            return
+          }
+          // timeline files don't have an ID
+          const file = resp
+            .body
+            .recording_files
+            .find(file => fileId === file.id || fileId === file.file_type)
+          if (!file || !file.download_url) {
+            return this._downloadError(resp, done)
+          }
+          resolve(file.download_url)
+        })
+    })
+    downloadUrlPromise.then((downloadUrl) => {
+      this.client
+        .get(`${downloadUrl}?access_token=${token}`)
+        .request()
+        .on('response', (resp) => {
+          if (resp.statusCode !== 200) {
+            done(this._error(null, resp))
+          } else {
+            resp.on('data', (chunk) => done(null, chunk))
+          }
+        })
+        .on('end', () => {
+          done(null, null)
+        })
+        .on('error', (err) => {
+          logger.error(err, 'provider.zoom.download.error')
+          done(err)
+        })
+    })
+  }
+
+  size ({ id, token, query }, done) {
+    const meetingId = id
+    const fileId = query.recordingId
+    const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+
+    return this.client
+      .get(`${BASE_URL}${GET_MEETING_FILES}`)
+      .auth(token)
+      .request((err, resp, body) => {
+        if (err || resp.statusCode !== 200) {
+          return this._downloadError(resp, done)
+        }
+        const file = resp
+          .body
+          .recording_files
+          .find(file => file.id === fileId || file.file_type === fileId)
+
+        if (!file) {
+          return this._downloadError(resp, done)
+        }
+        // timeline files don't have file size, but are typically small json files, should be much less than 1MB
+        const maxExportFileSize = 1024 * 1024
+        done(null, file.file_size || maxExportFileSize)
+      })
+  }
+
+  _initializeData (initialEnd = null) {
+    let end = initialEnd || moment()
+    let start = end.clone().date(1)
+
+    const defaultLimit = end.clone().subtract('months', DEFAULT_RANGE_MOS)
+    const limit = defaultLimit > OLDEST_RECORD ? defaultLimit : OLDEST_RECORD
+
+    const data = {
+      items: []
+    }",it seems we're leaving out the `username` field. Is this deliberate? 🤔 ,`meetingId` is not used.
88,"@@ -0,0 +1,262 @@
+const Provider = require('../Provider')
+const request = require('request')
+const purest = require('purest')({ request })
+const logger = require('../../logger')
+const adapter = require('./adapter')
+const moment = require('moment')
+const { ProviderApiError, ProviderAuthError } = require('../error')
+
+const BASE_URL = 'https://zoom.us/v2'
+const GET_LIST_PATH = '/users/me/recordings'
+const PAGE_SIZE = 300
+const DEFAULT_RANGE_MOS = 23
+// oldest possible folder for any user
+const OLDEST_RECORD = moment().set({ year: 2014, month: 11 })
+
+class Zoom extends Provider {
+  constructor (options) {
+    super(options)
+    this.authProvider = options.provider = Zoom.authProvider
+    this.client = purest(options)
+  }
+
+  static get authProvider () {
+    return 'zoom'
+  }
+
+  list (options, done) {
+    /*
+    - show 2 years by default, scroll for older folders
+    - drill down for rest
+    */
+    const token = options.token || ''
+    const query = options.query || {}
+    const { cursor, from, to } = query
+    const meetingId = options.directory || ''
+
+    if (!from && !to && !meetingId) {
+      const end = cursor && moment(cursor)
+      this.client.get(`${BASE_URL}${GET_LIST_PATH}`)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200) {
+            err = this._error(err, resp)
+            logger.error(err, 'provider.zoom.list.error')
+            return done(err)
+          }
+          done(null, this._initializeData(end))
+        })
+    }
+
+    if (from && to) {
+      const queryObj = {
+        page_size: PAGE_SIZE,
+        from,
+        to
+      }
+
+      if (cursor) {
+        queryObj.next_page_token = cursor
+      }
+
+      this.client.get(`${BASE_URL}${GET_LIST_PATH}`)
+        .qs(queryObj)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200) {
+            err = this._error(err, resp)
+            logger.error(err, 'provider.zoom.list.error')
+            return done(err)
+          } else {
+            done(null, this._adaptData(body))
+          }
+        })
+    }
+
+    if (meetingId) {
+      const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+      this.client
+        .get(`${BASE_URL}${GET_MEETING_FILES}`)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200) {
+            err = this._error(err, resp)
+            logger.error(err, 'provider.zoom.list.error')
+            return done(err)
+          } else {
+            done(null, this._adaptData(body))
+          }
+        })
+    }
+  }
+
+  download ({ id, token, query }, done) {
+    // meeting id + file id required
+    const meetingId = id
+    const fileId = query.recordingId
+    const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+
+    const downloadUrlPromise = new Promise((resolve) => {
+      this.client
+        .get(`${BASE_URL}${GET_MEETING_FILES}`)
+        .auth(token)
+        .request((err, resp) => {
+          if (err) {
+            this._downloadError(resp, done)
+            return
+          }
+          // timeline files don't have an ID
+          const file = resp
+            .body
+            .recording_files
+            .find(file => fileId === file.id || fileId === file.file_type)
+          if (!file || !file.download_url) {
+            return this._downloadError(resp, done)
+          }
+          resolve(file.download_url)
+        })
+    })
+    downloadUrlPromise.then((downloadUrl) => {
+      this.client
+        .get(`${downloadUrl}?access_token=${token}`)
+        .request()
+        .on('response', (resp) => {
+          if (resp.statusCode !== 200) {
+            done(this._error(null, resp))
+          } else {
+            resp.on('data', (chunk) => done(null, chunk))
+          }
+        })
+        .on('end', () => {
+          done(null, null)
+        })
+        .on('error', (err) => {
+          logger.error(err, 'provider.zoom.download.error')
+          done(err)
+        })
+    })
+  }
+
+  size ({ id, token, query }, done) {
+    const meetingId = id
+    const fileId = query.recordingId
+    const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+
+    return this.client
+      .get(`${BASE_URL}${GET_MEETING_FILES}`)
+      .auth(token)
+      .request((err, resp, body) => {
+        if (err || resp.statusCode !== 200) {
+          return this._downloadError(resp, done)
+        }
+        const file = resp
+          .body
+          .recording_files
+          .find(file => file.id === fileId || file.file_type === fileId)
+
+        if (!file) {
+          return this._downloadError(resp, done)
+        }
+        // timeline files don't have file size, but are typically small json files, should be much less than 1MB
+        const maxExportFileSize = 1024 * 1024
+        done(null, file.file_size || maxExportFileSize)
+      })
+  }
+
+  _initializeData (initialEnd = null) {
+    let end = initialEnd || moment()
+    let start = end.clone().date(1)
+
+    const defaultLimit = end.clone().subtract('months', DEFAULT_RANGE_MOS)
+    const limit = defaultLimit > OLDEST_RECORD ? defaultLimit : OLDEST_RECORD
+
+    const data = {
+      items: []
+    }
+
+    while (start > limit) {
+      start = end.clone().date(1)
+      data.items.push({
+        isFolder: true,
+        icon: 'folder',
+        name: adapter.getDateName(start, end),
+        mimeType: null,
+        id: adapter.getDateFolderId(start, end),
+        thumbnail: null,
+        requestPath: adapter.getDateFolderRequestPath(start, end),
+        modifiedDate: adapter.getDateFolderModified,",this should probably be `modifiedDate: adapter.getDateFolderModified(end)` right?,`meetingId` is not used.
89,"@@ -0,0 +1,262 @@
+const Provider = require('../Provider')
+const request = require('request')
+const purest = require('purest')({ request })
+const logger = require('../../logger')
+const adapter = require('./adapter')
+const moment = require('moment')
+const { ProviderApiError, ProviderAuthError } = require('../error')
+
+const BASE_URL = 'https://zoom.us/v2'
+const GET_LIST_PATH = '/users/me/recordings'
+const PAGE_SIZE = 300
+const DEFAULT_RANGE_MOS = 23
+// oldest possible folder for any user
+const OLDEST_RECORD = moment().set({ year: 2014, month: 11 })
+
+class Zoom extends Provider {
+  constructor (options) {
+    super(options)
+    this.authProvider = options.provider = Zoom.authProvider
+    this.client = purest(options)
+  }
+
+  static get authProvider () {
+    return 'zoom'
+  }
+
+  list (options, done) {
+    /*
+    - show 2 years by default, scroll for older folders
+    - drill down for rest
+    */
+    const token = options.token || ''
+    const query = options.query || {}
+    const { cursor, from, to } = query
+    const meetingId = options.directory || ''
+
+    if (!from && !to && !meetingId) {
+      const end = cursor && moment(cursor)
+      this.client.get(`${BASE_URL}${GET_LIST_PATH}`)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200) {
+            err = this._error(err, resp)
+            logger.error(err, 'provider.zoom.list.error')
+            return done(err)
+          }
+          done(null, this._initializeData(end))
+        })
+    }
+
+    if (from && to) {
+      const queryObj = {
+        page_size: PAGE_SIZE,
+        from,
+        to
+      }
+
+      if (cursor) {
+        queryObj.next_page_token = cursor
+      }
+
+      this.client.get(`${BASE_URL}${GET_LIST_PATH}`)
+        .qs(queryObj)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200) {
+            err = this._error(err, resp)
+            logger.error(err, 'provider.zoom.list.error')
+            return done(err)
+          } else {
+            done(null, this._adaptData(body))
+          }
+        })
+    }
+
+    if (meetingId) {
+      const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+      this.client
+        .get(`${BASE_URL}${GET_MEETING_FILES}`)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200) {
+            err = this._error(err, resp)
+            logger.error(err, 'provider.zoom.list.error')
+            return done(err)
+          } else {
+            done(null, this._adaptData(body))
+          }
+        })
+    }
+  }
+
+  download ({ id, token, query }, done) {
+    // meeting id + file id required
+    const meetingId = id
+    const fileId = query.recordingId
+    const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+
+    const downloadUrlPromise = new Promise((resolve) => {
+      this.client
+        .get(`${BASE_URL}${GET_MEETING_FILES}`)
+        .auth(token)
+        .request((err, resp) => {
+          if (err) {
+            this._downloadError(resp, done)
+            return
+          }
+          // timeline files don't have an ID
+          const file = resp
+            .body
+            .recording_files
+            .find(file => fileId === file.id || fileId === file.file_type)
+          if (!file || !file.download_url) {
+            return this._downloadError(resp, done)
+          }
+          resolve(file.download_url)
+        })
+    })
+    downloadUrlPromise.then((downloadUrl) => {
+      this.client
+        .get(`${downloadUrl}?access_token=${token}`)
+        .request()
+        .on('response', (resp) => {
+          if (resp.statusCode !== 200) {
+            done(this._error(null, resp))
+          } else {
+            resp.on('data', (chunk) => done(null, chunk))
+          }
+        })
+        .on('end', () => {
+          done(null, null)
+        })
+        .on('error', (err) => {
+          logger.error(err, 'provider.zoom.download.error')
+          done(err)
+        })
+    })
+  }
+
+  size ({ id, token, query }, done) {
+    const meetingId = id
+    const fileId = query.recordingId
+    const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+
+    return this.client
+      .get(`${BASE_URL}${GET_MEETING_FILES}`)
+      .auth(token)
+      .request((err, resp, body) => {
+        if (err || resp.statusCode !== 200) {
+          return this._downloadError(resp, done)
+        }
+        const file = resp
+          .body
+          .recording_files
+          .find(file => file.id === fileId || file.file_type === fileId)
+
+        if (!file) {
+          return this._downloadError(resp, done)
+        }
+        // timeline files don't have file size, but are typically small json files, should be much less than 1MB
+        const maxExportFileSize = 1024 * 1024
+        done(null, file.file_size || maxExportFileSize)
+      })
+  }
+
+  _initializeData (initialEnd = null) {
+    let end = initialEnd || moment()
+    let start = end.clone().date(1)
+
+    const defaultLimit = end.clone().subtract('months', DEFAULT_RANGE_MOS)
+    const limit = defaultLimit > OLDEST_RECORD ? defaultLimit : OLDEST_RECORD
+
+    const data = {
+      items: []
+    }
+
+    while (start > limit) {
+      start = end.clone().date(1)
+      data.items.push({
+        isFolder: true,
+        icon: 'folder',
+        name: adapter.getDateName(start, end),
+        mimeType: null,
+        id: adapter.getDateFolderId(start, end),
+        thumbnail: null,
+        requestPath: adapter.getDateFolderRequestPath(start, end),
+        modifiedDate: adapter.getDateFolderModified,
+        size: null
+      })
+      end = start.clone().subtract(1, 'days')
+    }
+    data.nextPagePath = adapter.getDateQuery(start)
+    return data
+  }
+
+  _adaptData (results) {
+    if (!results || results.length === 0) {",is `results` expected to be an array? Looking further down the code it seems not?,`meetingId` is not used.
90,"@@ -0,0 +1,262 @@
+const Provider = require('../Provider')
+const request = require('request')
+const purest = require('purest')({ request })
+const logger = require('../../logger')
+const adapter = require('./adapter')
+const moment = require('moment')
+const { ProviderApiError, ProviderAuthError } = require('../error')
+
+const BASE_URL = 'https://zoom.us/v2'
+const GET_LIST_PATH = '/users/me/recordings'
+const PAGE_SIZE = 300
+const DEFAULT_RANGE_MOS = 23
+// oldest possible folder for any user
+const OLDEST_RECORD = moment().set({ year: 2014, month: 11 })
+
+class Zoom extends Provider {
+  constructor (options) {
+    super(options)
+    this.authProvider = options.provider = Zoom.authProvider
+    this.client = purest(options)
+  }
+
+  static get authProvider () {
+    return 'zoom'
+  }
+
+  list (options, done) {
+    /*
+    - show 2 years by default, scroll for older folders
+    - drill down for rest
+    */
+    const token = options.token || ''
+    const query = options.query || {}
+    const { cursor, from, to } = query
+    const meetingId = options.directory || ''
+
+    if (!from && !to && !meetingId) {
+      const end = cursor && moment(cursor)
+      this.client.get(`${BASE_URL}${GET_LIST_PATH}`)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200) {
+            err = this._error(err, resp)
+            logger.error(err, 'provider.zoom.list.error')
+            return done(err)
+          }
+          done(null, this._initializeData(end))
+        })
+    }
+
+    if (from && to) {
+      const queryObj = {
+        page_size: PAGE_SIZE,
+        from,
+        to
+      }
+
+      if (cursor) {
+        queryObj.next_page_token = cursor
+      }
+
+      this.client.get(`${BASE_URL}${GET_LIST_PATH}`)
+        .qs(queryObj)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200) {
+            err = this._error(err, resp)
+            logger.error(err, 'provider.zoom.list.error')
+            return done(err)
+          } else {
+            done(null, this._adaptData(body))
+          }
+        })
+    }
+
+    if (meetingId) {
+      const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+      this.client
+        .get(`${BASE_URL}${GET_MEETING_FILES}`)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200) {
+            err = this._error(err, resp)
+            logger.error(err, 'provider.zoom.list.error')
+            return done(err)
+          } else {
+            done(null, this._adaptData(body))
+          }
+        })
+    }
+  }
+
+  download ({ id, token, query }, done) {
+    // meeting id + file id required
+    const meetingId = id
+    const fileId = query.recordingId
+    const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+
+    const downloadUrlPromise = new Promise((resolve) => {
+      this.client
+        .get(`${BASE_URL}${GET_MEETING_FILES}`)
+        .auth(token)
+        .request((err, resp) => {
+          if (err) {
+            this._downloadError(resp, done)
+            return
+          }
+          // timeline files don't have an ID
+          const file = resp
+            .body
+            .recording_files
+            .find(file => fileId === file.id || fileId === file.file_type)
+          if (!file || !file.download_url) {
+            return this._downloadError(resp, done)
+          }
+          resolve(file.download_url)
+        })
+    })
+    downloadUrlPromise.then((downloadUrl) => {
+      this.client
+        .get(`${downloadUrl}?access_token=${token}`)
+        .request()
+        .on('response', (resp) => {
+          if (resp.statusCode !== 200) {
+            done(this._error(null, resp))
+          } else {
+            resp.on('data', (chunk) => done(null, chunk))
+          }
+        })
+        .on('end', () => {
+          done(null, null)
+        })
+        .on('error', (err) => {
+          logger.error(err, 'provider.zoom.download.error')
+          done(err)
+        })
+    })
+  }
+
+  size ({ id, token, query }, done) {
+    const meetingId = id
+    const fileId = query.recordingId
+    const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+
+    return this.client
+      .get(`${BASE_URL}${GET_MEETING_FILES}`)
+      .auth(token)
+      .request((err, resp, body) => {
+        if (err || resp.statusCode !== 200) {
+          return this._downloadError(resp, done)
+        }
+        const file = resp
+          .body
+          .recording_files
+          .find(file => file.id === fileId || file.file_type === fileId)
+
+        if (!file) {
+          return this._downloadError(resp, done)
+        }
+        // timeline files don't have file size, but are typically small json files, should be much less than 1MB
+        const maxExportFileSize = 1024 * 1024
+        done(null, file.file_size || maxExportFileSize)
+      })
+  }
+
+  _initializeData (initialEnd = null) {
+    let end = initialEnd || moment()
+    let start = end.clone().date(1)
+
+    const defaultLimit = end.clone().subtract('months', DEFAULT_RANGE_MOS)
+    const limit = defaultLimit > OLDEST_RECORD ? defaultLimit : OLDEST_RECORD
+
+    const data = {
+      items: []
+    }
+
+    while (start > limit) {
+      start = end.clone().date(1)
+      data.items.push({
+        isFolder: true,
+        icon: 'folder',
+        name: adapter.getDateName(start, end),
+        mimeType: null,
+        id: adapter.getDateFolderId(start, end),
+        thumbnail: null,
+        requestPath: adapter.getDateFolderRequestPath(start, end),
+        modifiedDate: adapter.getDateFolderModified,
+        size: null
+      })
+      end = start.clone().subtract(1, 'days')
+    }
+    data.nextPagePath = adapter.getDateQuery(start)
+    return data
+  }
+
+  _adaptData (results) {
+    if (!results || results.length === 0) {
+      return { items: [] }
+    }
+
+    const data = {
+      nextPagePath: adapter.getQuery(results),
+      items: []
+    }
+    const items = results.meetings || results.recording_files
+    items.forEach(item => {
+      if (item.file_type && item.file_type === 'TIMELINE') {
+        console.log(item.download_url)",debug leftover? :),`meetingId` is not used.
91,"@@ -0,0 +1,262 @@
+const Provider = require('../Provider')
+const request = require('request')
+const purest = require('purest')({ request })
+const logger = require('../../logger')
+const adapter = require('./adapter')
+const moment = require('moment')
+const { ProviderApiError, ProviderAuthError } = require('../error')
+
+const BASE_URL = 'https://zoom.us/v2'
+const GET_LIST_PATH = '/users/me/recordings'
+const PAGE_SIZE = 300
+const DEFAULT_RANGE_MOS = 23
+// oldest possible folder for any user
+const OLDEST_RECORD = moment().set({ year: 2014, month: 11 })
+
+class Zoom extends Provider {
+  constructor (options) {
+    super(options)
+    this.authProvider = options.provider = Zoom.authProvider
+    this.client = purest(options)
+  }
+
+  static get authProvider () {
+    return 'zoom'
+  }
+
+  list (options, done) {
+    /*
+    - show 2 years by default, scroll for older folders
+    - drill down for rest
+    */
+    const token = options.token || ''
+    const query = options.query || {}
+    const { cursor, from, to } = query
+    const meetingId = options.directory || ''
+
+    if (!from && !to && !meetingId) {
+      const end = cursor && moment(cursor)
+      this.client.get(`${BASE_URL}${GET_LIST_PATH}`)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200) {
+            err = this._error(err, resp)
+            logger.error(err, 'provider.zoom.list.error')
+            return done(err)
+          }
+          done(null, this._initializeData(end))
+        })
+    }
+
+    if (from && to) {
+      const queryObj = {
+        page_size: PAGE_SIZE,
+        from,
+        to
+      }
+
+      if (cursor) {
+        queryObj.next_page_token = cursor
+      }
+
+      this.client.get(`${BASE_URL}${GET_LIST_PATH}`)
+        .qs(queryObj)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200) {
+            err = this._error(err, resp)
+            logger.error(err, 'provider.zoom.list.error')
+            return done(err)
+          } else {
+            done(null, this._adaptData(body))
+          }
+        })
+    }
+
+    if (meetingId) {
+      const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+      this.client
+        .get(`${BASE_URL}${GET_MEETING_FILES}`)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200) {
+            err = this._error(err, resp)
+            logger.error(err, 'provider.zoom.list.error')
+            return done(err)
+          } else {
+            done(null, this._adaptData(body))
+          }
+        })
+    }
+  }
+
+  download ({ id, token, query }, done) {
+    // meeting id + file id required
+    const meetingId = id
+    const fileId = query.recordingId
+    const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+
+    const downloadUrlPromise = new Promise((resolve) => {
+      this.client
+        .get(`${BASE_URL}${GET_MEETING_FILES}`)
+        .auth(token)
+        .request((err, resp) => {
+          if (err) {
+            this._downloadError(resp, done)
+            return
+          }
+          // timeline files don't have an ID
+          const file = resp
+            .body
+            .recording_files
+            .find(file => fileId === file.id || fileId === file.file_type)
+          if (!file || !file.download_url) {
+            return this._downloadError(resp, done)
+          }
+          resolve(file.download_url)
+        })
+    })
+    downloadUrlPromise.then((downloadUrl) => {
+      this.client
+        .get(`${downloadUrl}?access_token=${token}`)
+        .request()
+        .on('response', (resp) => {
+          if (resp.statusCode !== 200) {
+            done(this._error(null, resp))
+          } else {
+            resp.on('data', (chunk) => done(null, chunk))
+          }
+        })
+        .on('end', () => {
+          done(null, null)
+        })
+        .on('error', (err) => {
+          logger.error(err, 'provider.zoom.download.error')
+          done(err)
+        })
+    })
+  }
+
+  size ({ id, token, query }, done) {
+    const meetingId = id
+    const fileId = query.recordingId
+    const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+
+    return this.client
+      .get(`${BASE_URL}${GET_MEETING_FILES}`)
+      .auth(token)
+      .request((err, resp, body) => {
+        if (err || resp.statusCode !== 200) {
+          return this._downloadError(resp, done)
+        }
+        const file = resp
+          .body
+          .recording_files
+          .find(file => file.id === fileId || file.file_type === fileId)
+
+        if (!file) {
+          return this._downloadError(resp, done)
+        }
+        // timeline files don't have file size, but are typically small json files, should be much less than 1MB
+        const maxExportFileSize = 1024 * 1024
+        done(null, file.file_size || maxExportFileSize)
+      })
+  }
+
+  _initializeData (initialEnd = null) {
+    let end = initialEnd || moment()
+    let start = end.clone().date(1)
+
+    const defaultLimit = end.clone().subtract('months', DEFAULT_RANGE_MOS)
+    const limit = defaultLimit > OLDEST_RECORD ? defaultLimit : OLDEST_RECORD
+
+    const data = {
+      items: []
+    }
+
+    while (start > limit) {
+      start = end.clone().date(1)
+      data.items.push({
+        isFolder: true,
+        icon: 'folder',
+        name: adapter.getDateName(start, end),
+        mimeType: null,
+        id: adapter.getDateFolderId(start, end),
+        thumbnail: null,
+        requestPath: adapter.getDateFolderRequestPath(start, end),
+        modifiedDate: adapter.getDateFolderModified,
+        size: null
+      })
+      end = start.clone().subtract(1, 'days')
+    }
+    data.nextPagePath = adapter.getDateQuery(start)
+    return data
+  }
+
+  _adaptData (results) {
+    if (!results || results.length === 0) {
+      return { items: [] }
+    }
+
+    const data = {
+      nextPagePath: adapter.getQuery(results),
+      items: []
+    }
+    const items = results.meetings || results.recording_files
+    items.forEach(item => {
+      if (item.file_type && item.file_type === 'TIMELINE') {
+        console.log(item.download_url)
+      }
+      data.items.push({
+        isFolder: adapter.getIsFolder(item),
+        icon: adapter.getIcon(item),
+        name: adapter.getItemName(item),
+        mimeType: adapter.getMimeType(item),
+        id: adapter.getId(item),
+        thumbnail: null,
+        requestPath: adapter.getRequestPath(item),
+        modifiedDate: adapter.getStartDate(item),
+        size: null",are we meant to be calling `adapter.getSize` here?,`meetingId` is not used.
92,"@@ -0,0 +1,262 @@
+const Provider = require('../Provider')
+const request = require('request')
+const purest = require('purest')({ request })
+const logger = require('../../logger')
+const adapter = require('./adapter')
+const moment = require('moment')
+const { ProviderApiError, ProviderAuthError } = require('../error')
+
+const BASE_URL = 'https://zoom.us/v2'
+const GET_LIST_PATH = '/users/me/recordings'
+const PAGE_SIZE = 300
+const DEFAULT_RANGE_MOS = 23
+// oldest possible folder for any user
+const OLDEST_RECORD = moment().set({ year: 2014, month: 11 })
+
+class Zoom extends Provider {
+  constructor (options) {
+    super(options)
+    this.authProvider = options.provider = Zoom.authProvider
+    this.client = purest(options)
+  }
+
+  static get authProvider () {
+    return 'zoom'
+  }
+
+  list (options, done) {
+    /*
+    - show 2 years by default, scroll for older folders
+    - drill down for rest
+    */
+    const token = options.token || ''
+    const query = options.query || {}
+    const { cursor, from, to } = query
+    const meetingId = options.directory || ''
+
+    if (!from && !to && !meetingId) {
+      const end = cursor && moment(cursor)
+      this.client.get(`${BASE_URL}${GET_LIST_PATH}`)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200) {
+            err = this._error(err, resp)
+            logger.error(err, 'provider.zoom.list.error')
+            return done(err)
+          }
+          done(null, this._initializeData(end))
+        })
+    }
+
+    if (from && to) {
+      const queryObj = {
+        page_size: PAGE_SIZE,
+        from,
+        to
+      }
+
+      if (cursor) {
+        queryObj.next_page_token = cursor
+      }
+
+      this.client.get(`${BASE_URL}${GET_LIST_PATH}`)
+        .qs(queryObj)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200) {
+            err = this._error(err, resp)
+            logger.error(err, 'provider.zoom.list.error')
+            return done(err)
+          } else {
+            done(null, this._adaptData(body))
+          }
+        })
+    }
+
+    if (meetingId) {
+      const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+      this.client
+        .get(`${BASE_URL}${GET_MEETING_FILES}`)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200) {
+            err = this._error(err, resp)
+            logger.error(err, 'provider.zoom.list.error')
+            return done(err)
+          } else {
+            done(null, this._adaptData(body))
+          }
+        })
+    }
+  }
+
+  download ({ id, token, query }, done) {
+    // meeting id + file id required
+    const meetingId = id
+    const fileId = query.recordingId
+    const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+
+    const downloadUrlPromise = new Promise((resolve) => {
+      this.client
+        .get(`${BASE_URL}${GET_MEETING_FILES}`)
+        .auth(token)
+        .request((err, resp) => {
+          if (err) {
+            this._downloadError(resp, done)
+            return
+          }
+          // timeline files don't have an ID
+          const file = resp
+            .body
+            .recording_files
+            .find(file => fileId === file.id || fileId === file.file_type)
+          if (!file || !file.download_url) {
+            return this._downloadError(resp, done)
+          }
+          resolve(file.download_url)
+        })
+    })
+    downloadUrlPromise.then((downloadUrl) => {
+      this.client
+        .get(`${downloadUrl}?access_token=${token}`)
+        .request()
+        .on('response', (resp) => {
+          if (resp.statusCode !== 200) {
+            done(this._error(null, resp))
+          } else {
+            resp.on('data', (chunk) => done(null, chunk))
+          }
+        })
+        .on('end', () => {
+          done(null, null)
+        })
+        .on('error', (err) => {
+          logger.error(err, 'provider.zoom.download.error')
+          done(err)
+        })
+    })
+  }
+
+  size ({ id, token, query }, done) {
+    const meetingId = id
+    const fileId = query.recordingId
+    const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+
+    return this.client
+      .get(`${BASE_URL}${GET_MEETING_FILES}`)
+      .auth(token)
+      .request((err, resp, body) => {
+        if (err || resp.statusCode !== 200) {
+          return this._downloadError(resp, done)
+        }
+        const file = resp
+          .body
+          .recording_files
+          .find(file => file.id === fileId || file.file_type === fileId)
+
+        if (!file) {
+          return this._downloadError(resp, done)
+        }
+        // timeline files don't have file size, but are typically small json files, should be much less than 1MB
+        const maxExportFileSize = 1024 * 1024
+        done(null, file.file_size || maxExportFileSize)
+      })
+  }
+
+  _initializeData (initialEnd = null) {
+    let end = initialEnd || moment()
+    let start = end.clone().date(1)
+
+    const defaultLimit = end.clone().subtract('months', DEFAULT_RANGE_MOS)
+    const limit = defaultLimit > OLDEST_RECORD ? defaultLimit : OLDEST_RECORD
+
+    const data = {
+      items: []
+    }
+
+    while (start > limit) {
+      start = end.clone().date(1)
+      data.items.push({
+        isFolder: true,
+        icon: 'folder',
+        name: adapter.getDateName(start, end),
+        mimeType: null,
+        id: adapter.getDateFolderId(start, end),
+        thumbnail: null,
+        requestPath: adapter.getDateFolderRequestPath(start, end),
+        modifiedDate: adapter.getDateFolderModified,
+        size: null
+      })
+      end = start.clone().subtract(1, 'days')
+    }
+    data.nextPagePath = adapter.getDateQuery(start)
+    return data
+  }
+
+  _adaptData (results) {
+    if (!results || results.length === 0) {
+      return { items: [] }
+    }
+
+    const data = {
+      nextPagePath: adapter.getQuery(results),
+      items: []
+    }
+    const items = results.meetings || results.recording_files
+    items.forEach(item => {
+      if (item.file_type && item.file_type === 'TIMELINE') {
+        console.log(item.download_url)
+      }
+      data.items.push({
+        isFolder: adapter.getIsFolder(item),
+        icon: adapter.getIcon(item),
+        name: adapter.getItemName(item),
+        mimeType: adapter.getMimeType(item),
+        id: adapter.getId(item),
+        thumbnail: null,
+        requestPath: adapter.getRequestPath(item),
+        modifiedDate: adapter.getStartDate(item),
+        size: null
+      })
+    })
+    return data
+  }
+
+  logout ({ token }, done) {
+    const encodedAuth = Buffer.from(
+      `${process.env.COMPANION_ZOOM_KEY}:${process.env.COMPANION_ZOOM_SECRET}`, 'binary'
+    ).toString('base64')
+
+    return this.client
+      .get('logout')
+      .auth({ basic: encodedAuth })
+      .qs({ token })
+      .request((err, resp) => {
+        if (err || resp.statusCode !== 200) {
+          logger.error(err, 'provider.zoom.logout.error')
+          done(this._error(err, resp))
+          return
+        }
+        done(null, { revoked: true })
+      })
+  }
+
+  _error (err, resp) {
+    const customErrorCodes = [124, 401]
+    if (resp) {
+      const fallbackMessage = `request to ${this.authProvider} returned ${resp.statusCode}`
+      const errMsg = (resp.body && resp.body.error) ? resp.body.error.message : fallbackMessage","looking at the [API's error definition](https://marketplace.zoom.us/docs/api-reference/error-definitions), It doesn't seem there's an `error` field. Am I missing something?",`meetingId` is not used.
93,"@@ -0,0 +1,262 @@
+const Provider = require('../Provider')
+const request = require('request')
+const purest = require('purest')({ request })
+const logger = require('../../logger')
+const adapter = require('./adapter')
+const moment = require('moment')
+const { ProviderApiError, ProviderAuthError } = require('../error')
+
+const BASE_URL = 'https://zoom.us/v2'
+const GET_LIST_PATH = '/users/me/recordings'
+const PAGE_SIZE = 300
+const DEFAULT_RANGE_MOS = 23
+// oldest possible folder for any user
+const OLDEST_RECORD = moment().set({ year: 2014, month: 11 })
+
+class Zoom extends Provider {
+  constructor (options) {
+    super(options)
+    this.authProvider = options.provider = Zoom.authProvider
+    this.client = purest(options)
+  }
+
+  static get authProvider () {
+    return 'zoom'
+  }
+
+  list (options, done) {
+    /*
+    - show 2 years by default, scroll for older folders
+    - drill down for rest
+    */
+    const token = options.token || ''
+    const query = options.query || {}
+    const { cursor, from, to } = query
+    const meetingId = options.directory || ''
+
+    if (!from && !to && !meetingId) {
+      const end = cursor && moment(cursor)
+      this.client.get(`${BASE_URL}${GET_LIST_PATH}`)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200) {
+            err = this._error(err, resp)
+            logger.error(err, 'provider.zoom.list.error')
+            return done(err)
+          }
+          done(null, this._initializeData(end))
+        })
+    }
+
+    if (from && to) {
+      const queryObj = {
+        page_size: PAGE_SIZE,
+        from,
+        to
+      }
+
+      if (cursor) {
+        queryObj.next_page_token = cursor
+      }
+
+      this.client.get(`${BASE_URL}${GET_LIST_PATH}`)
+        .qs(queryObj)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200) {
+            err = this._error(err, resp)
+            logger.error(err, 'provider.zoom.list.error')
+            return done(err)
+          } else {
+            done(null, this._adaptData(body))
+          }
+        })
+    }
+
+    if (meetingId) {
+      const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+      this.client
+        .get(`${BASE_URL}${GET_MEETING_FILES}`)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200) {
+            err = this._error(err, resp)
+            logger.error(err, 'provider.zoom.list.error')
+            return done(err)
+          } else {
+            done(null, this._adaptData(body))
+          }
+        })
+    }
+  }
+
+  download ({ id, token, query }, done) {
+    // meeting id + file id required
+    const meetingId = id
+    const fileId = query.recordingId
+    const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+
+    const downloadUrlPromise = new Promise((resolve) => {
+      this.client
+        .get(`${BASE_URL}${GET_MEETING_FILES}`)
+        .auth(token)
+        .request((err, resp) => {
+          if (err) {
+            this._downloadError(resp, done)
+            return
+          }
+          // timeline files don't have an ID
+          const file = resp
+            .body
+            .recording_files
+            .find(file => fileId === file.id || fileId === file.file_type)
+          if (!file || !file.download_url) {
+            return this._downloadError(resp, done)
+          }
+          resolve(file.download_url)
+        })
+    })
+    downloadUrlPromise.then((downloadUrl) => {
+      this.client
+        .get(`${downloadUrl}?access_token=${token}`)
+        .request()
+        .on('response', (resp) => {
+          if (resp.statusCode !== 200) {
+            done(this._error(null, resp))
+          } else {
+            resp.on('data', (chunk) => done(null, chunk))
+          }
+        })
+        .on('end', () => {
+          done(null, null)
+        })
+        .on('error', (err) => {
+          logger.error(err, 'provider.zoom.download.error')
+          done(err)
+        })
+    })
+  }
+
+  size ({ id, token, query }, done) {
+    const meetingId = id
+    const fileId = query.recordingId
+    const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+
+    return this.client
+      .get(`${BASE_URL}${GET_MEETING_FILES}`)
+      .auth(token)
+      .request((err, resp, body) => {
+        if (err || resp.statusCode !== 200) {
+          return this._downloadError(resp, done)
+        }
+        const file = resp
+          .body
+          .recording_files
+          .find(file => file.id === fileId || file.file_type === fileId)
+
+        if (!file) {
+          return this._downloadError(resp, done)
+        }
+        // timeline files don't have file size, but are typically small json files, should be much less than 1MB
+        const maxExportFileSize = 1024 * 1024
+        done(null, file.file_size || maxExportFileSize)
+      })
+  }
+
+  _initializeData (initialEnd = null) {
+    let end = initialEnd || moment()
+    let start = end.clone().date(1)
+
+    const defaultLimit = end.clone().subtract('months', DEFAULT_RANGE_MOS)
+    const limit = defaultLimit > OLDEST_RECORD ? defaultLimit : OLDEST_RECORD
+
+    const data = {
+      items: []
+    }
+
+    while (start > limit) {
+      start = end.clone().date(1)
+      data.items.push({
+        isFolder: true,
+        icon: 'folder',
+        name: adapter.getDateName(start, end),
+        mimeType: null,
+        id: adapter.getDateFolderId(start, end),
+        thumbnail: null,
+        requestPath: adapter.getDateFolderRequestPath(start, end),
+        modifiedDate: adapter.getDateFolderModified,
+        size: null
+      })
+      end = start.clone().subtract(1, 'days')
+    }
+    data.nextPagePath = adapter.getDateQuery(start)
+    return data
+  }
+
+  _adaptData (results) {
+    if (!results || results.length === 0) {
+      return { items: [] }
+    }
+
+    const data = {
+      nextPagePath: adapter.getQuery(results),
+      items: []
+    }
+    const items = results.meetings || results.recording_files
+    items.forEach(item => {
+      if (item.file_type && item.file_type === 'TIMELINE') {
+        console.log(item.download_url)
+      }
+      data.items.push({
+        isFolder: adapter.getIsFolder(item),
+        icon: adapter.getIcon(item),
+        name: adapter.getItemName(item),
+        mimeType: adapter.getMimeType(item),
+        id: adapter.getId(item),
+        thumbnail: null,
+        requestPath: adapter.getRequestPath(item),
+        modifiedDate: adapter.getStartDate(item),
+        size: null
+      })
+    })
+    return data
+  }
+
+  logout ({ token }, done) {
+    const encodedAuth = Buffer.from(
+      `${process.env.COMPANION_ZOOM_KEY}:${process.env.COMPANION_ZOOM_SECRET}`, 'binary'
+    ).toString('base64')
+
+    return this.client
+      .get('logout')
+      .auth({ basic: encodedAuth })
+      .qs({ token })
+      .request((err, resp) => {
+        if (err || resp.statusCode !== 200) {
+          logger.error(err, 'provider.zoom.logout.error')
+          done(this._error(err, resp))
+          return
+        }
+        done(null, { revoked: true })
+      })
+  }
+
+  _error (err, resp) {
+    const customErrorCodes = [124, 401]
+    if (resp) {
+      const fallbackMessage = `request to ${this.authProvider} returned ${resp.statusCode}`
+      const errMsg = (resp.body && resp.body.error) ? resp.body.error.message : fallbackMessage
+      return customErrorCodes.indexOf(resp.statusCode) > -1 ? new ProviderAuthError() : new ProviderApiError(errMsg, resp.statusCode)",under what condition is the status code `124`? 🤔  I couldn't immediately find it in the documentation.,`meetingId` is not used.
94,"@@ -0,0 +1,267 @@
+const Provider = require('../Provider')
+
+const request = require('request')
+const moment = require('moment')
+const purest = require('purest')({ request })
+const logger = require('../../logger')
+const adapter = require('./adapter')
+const { ProviderApiError, ProviderAuthError } = require('../error')
+
+const BASE_URL = 'https://zoom.us/v2'
+const GET_LIST_PATH = '/users/me/recordings'
+const GET_USER_PATH = '/users/me'
+const PAGE_SIZE = 300
+const DEFAULT_RANGE_MOS = 23
+
+/**
+ * Adapter for API https://marketplace.zoom.us/docs/api-reference/zoom-api
+ */
+class Zoom extends Provider {
+  constructor (options) {
+    super(options)
+    this.authProvider = options.provider = Zoom.authProvider
+    this.client = purest(options)
+  }
+
+  static get authProvider () {
+    return 'zoom'
+  }
+
+  list (options, done) {
+    /*
+    - returns list of months by default
+    - drill down for specific files in each month
+    */
+    const token = options.token
+    const query = options.query || {}
+    const { cursor, from, to } = query
+    const meetingId = options.directory || ''
+
+    if (!from && !to && !meetingId) {
+      const end = cursor && moment(cursor)
+      this.client.get(`${BASE_URL}${GET_USER_PATH}`)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200) {
+            return this._listError(err, resp, done)
+          }
+          done(null, this._initializeData(body, end))
+        })
+    }
+
+    if (from && to) {
+      const queryObj = {
+        page_size: PAGE_SIZE,
+        from,
+        to
+      }
+
+      if (cursor) {
+        queryObj.next_page_token = cursor
+      }
+
+      this.client.get(`${BASE_URL}${GET_LIST_PATH}`)
+        .qs(queryObj)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200) {
+            return this._listError(err, resp, done)
+          } else {
+            done(null, this._adaptData(body))
+          }
+        })
+    }
+
+    if (meetingId) {
+      const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+      this.client
+        .get(`${BASE_URL}${GET_MEETING_FILES}`)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err ||
+            resp.statusCode !== 200
+          ) {
+            return this._listError(err, resp, done)
+          } else {
+            done(null, this._adaptData(body))
+          }
+        })
+    }
+  }
+
+  download ({ id, token, query }, done) {
+    // meeting id + file id required
+    // timeline files don't have an ID or size
+    const meetingId = id
+    const fileId = query.recordingId
+    const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+
+    const downloadUrlPromise = new Promise((resolve) => {
+      this.client
+        .get(`${BASE_URL}${GET_MEETING_FILES}`)
+        .auth(token)
+        .request((err, resp) => {
+          if (err || resp.statusCode !== 200) {
+            return this._downloadError(resp, done)
+          }
+          const file = resp
+            .body
+            .recording_files
+            .find(file => fileId === file.id || fileId === file.file_type)
+          if (!file || !file.download_url) {
+            return this._downloadError(resp, done)
+          }
+          resolve(file.download_url)
+        })
+    })
+    downloadUrlPromise.then((downloadUrl) => {
+      this.client
+        .get(`${downloadUrl}?access_token=${token}`)
+        .request()
+        .on('response', (resp) => {
+          if (resp.statusCode !== 200) {
+            done(this._error(null, resp))
+          } else {
+            resp.on('data', (chunk) => done(null, chunk))
+          }
+        })
+        .on('end', () => {
+          done(null, null)
+        })
+        .on('error', (err) => {
+          logger.error(err, 'provider.zoom.download.error')
+          done(err)
+        })
+    })
+  }
+
+  size ({ id, token, query }, done) {
+    const meetingId = id
+    const fileId = query.recordingId
+    const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+
+    return this.client
+      .get(`${BASE_URL}${GET_MEETING_FILES}`)
+      .auth(token)
+      .request((err, resp, body) => {
+        if (err || resp.statusCode !== 200) {
+          return this._downloadError(resp, done)
+        }
+        const file = resp
+          .body
+          .recording_files
+          .find(file => file.id === fileId || file.file_type === fileId)
+
+        if (!file) {
+          return this._downloadError(resp, done)
+        }
+        // timeline files don't have file size, but are typically small json files, should be much less than 1MB
+        const maxExportFileSize = 1024 * 1024
+        done(null, file.file_size || maxExportFileSize)
+      })
+  }
+
+  _initializeData (body, initialEnd = null) {
+    let end = initialEnd || moment()
+    let start = end.clone().date(1)
+
+    const accountCreation = adapter.getAccountCreationDate(body)
+    const defaultLimit = end.clone().subtract(DEFAULT_RANGE_MOS, 'months')
+    const limit = accountCreation > defaultLimit ? accountCreation : defaultLimit
+
+    const data = {
+      items: [],
+      username: adapter.getUserEmail(body)
+    }
+
+    while (start > limit) {
+      start = end.clone().date(1)
+      data.items.push({
+        isFolder: true,
+        icon: 'folder',
+        name: adapter.getDateName(start, end),
+        mimeType: null,
+        id: adapter.getDateFolderId(start, end),
+        thumbnail: null,
+        requestPath: adapter.getDateFolderRequestPath(start, end),
+        modifiedDate: adapter.getDateFolderModified(end),
+        size: null
+      })
+      end = start.clone().subtract(1, 'days')
+    }
+    data.nextPagePath = adapter.getDateNextPagePath(start)
+    return data
+  }
+
+  _adaptData (results) {
+    if (!results) {
+      return { items: [] }
+    }
+
+    const data = {
+      nextPagePath: adapter.getNextPagePath(results),
+      items: [],
+      username: null
+    }
+    const items = results.meetings || results.recording_files
+    items.forEach(item => {
+      data.items.push({
+        isFolder: adapter.getIsFolder(item),
+        icon: adapter.getIcon(item),
+        name: adapter.getItemName(item),
+        mimeType: adapter.getMimeType(item),
+        id: adapter.getId(item),
+        thumbnail: null,
+        requestPath: adapter.getRequestPath(item),
+        modifiedDate: adapter.getStartDate(item),
+        size: adapter.getSize(item)
+      })
+    })
+    return data
+  }
+
+  logout ({ token }, done) {
+    const encodedAuth = Buffer.from(
+      `${process.env.COMPANION_ZOOM_KEY}:${process.env.COMPANION_ZOOM_SECRET}`, 'binary'
+    ).toString('base64')
+    return this.client
+      .get('logout')
+      .auth({ basic: encodedAuth })",does `auth(encodedAuth)` not work here? I figured it should since we already specified the auth type [here](https://github.com/transloadit/uppy/blob/4a2ffe292f7eb679c111d776722adc0136d99879/packages/%40uppy/companion/src/server/provider/index.js#L36). Is this not the case?,`meetingId` is not used.
95,"@@ -0,0 +1,274 @@
+const Provider = require('../Provider')
+
+const request = require('request')
+const moment = require('moment')
+const purest = require('purest')({ request })
+const logger = require('../../logger')
+const adapter = require('./adapter')
+const { ProviderApiError, ProviderAuthError } = require('../error')
+
+const BASE_URL = 'https://zoom.us/v2'
+const GET_LIST_PATH = '/users/me/recordings'
+const GET_USER_PATH = '/users/me'
+const PAGE_SIZE = 300
+const DEFAULT_RANGE_MOS = 23
+
+/**
+ * Adapter for API https://marketplace.zoom.us/docs/api-reference/zoom-api
+ */
+class Zoom extends Provider {
+  constructor (options) {
+    super(options)
+    this.authProvider = options.provider = Zoom.authProvider
+    this.client = purest(options)
+  }
+
+  static get authProvider () {
+    return 'zoom'
+  }
+
+  list (options, done) {
+    /*
+    - returns list of months by default
+    - drill down for specific files in each month
+    */
+    const token = options.token
+    const query = options.query || {}
+    const { cursor, from, to } = query
+    const meetingId = options.directory || ''
+
+    if (!from && !to && !meetingId) {
+      const end = cursor && moment(cursor)
+      this.client.get(`${BASE_URL}${GET_USER_PATH}`)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200 || !body) {
+            return this._listError(err, resp, done)
+          }
+          done(null, this._initializeData(body, end))
+        })
+    }
+
+    if (from && to) {
+      const queryObj = {
+        page_size: PAGE_SIZE,
+        from,
+        to
+      }
+
+      if (cursor) {
+        queryObj.next_page_token = cursor
+      }
+
+      this.client.get(`${BASE_URL}${GET_LIST_PATH}`)
+        .qs(queryObj)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (
+            err ||
+            resp.statusCode !== 200 ||
+            !body",in what case is `body` falsy? 🤔 ,`meetingId` is not used.
96,"@@ -0,0 +1,274 @@
+const Provider = require('../Provider')
+
+const request = require('request')
+const moment = require('moment')
+const purest = require('purest')({ request })
+const logger = require('../../logger')
+const adapter = require('./adapter')
+const { ProviderApiError, ProviderAuthError } = require('../error')
+
+const BASE_URL = 'https://zoom.us/v2'
+const GET_LIST_PATH = '/users/me/recordings'
+const GET_USER_PATH = '/users/me'
+const PAGE_SIZE = 300
+const DEFAULT_RANGE_MOS = 23
+
+/**
+ * Adapter for API https://marketplace.zoom.us/docs/api-reference/zoom-api
+ */
+class Zoom extends Provider {
+  constructor (options) {
+    super(options)
+    this.authProvider = options.provider = Zoom.authProvider
+    this.client = purest(options)
+  }
+
+  static get authProvider () {
+    return 'zoom'
+  }
+
+  list (options, done) {
+    /*
+    - returns list of months by default
+    - drill down for specific files in each month
+    */
+    const token = options.token
+    const query = options.query || {}
+    const { cursor, from, to } = query
+    const meetingId = options.directory || ''
+
+    if (!from && !to && !meetingId) {
+      const end = cursor && moment(cursor)
+      this.client.get(`${BASE_URL}${GET_USER_PATH}`)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200 || !body) {
+            return this._listError(err, resp, done)
+          }
+          done(null, this._initializeData(body, end))
+        })
+    }
+
+    if (from && to) {
+      const queryObj = {
+        page_size: PAGE_SIZE,
+        from,
+        to
+      }
+
+      if (cursor) {
+        queryObj.next_page_token = cursor
+      }
+
+      this.client.get(`${BASE_URL}${GET_LIST_PATH}`)
+        .qs(queryObj)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (
+            err ||
+            resp.statusCode !== 200 ||
+            !body
+          ) {
+            return this._listError(err, resp, done)
+          } else {
+            done(null, this._adaptData(body))
+          }
+        })
+    }
+
+    if (meetingId) {
+      const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+      this.client
+        .get(`${BASE_URL}${GET_MEETING_FILES}`)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err ||
+            resp.statusCode !== 200 ||
+            !body
+          ) {
+            return this._listError(err, resp, done)
+          } else {
+            done(null, this._adaptData(body))
+          }
+        })
+    }
+  }
+
+  download ({ id, token, query }, done) {
+    // meeting id + file id required
+    // timeline files don't have an ID or size
+    const meetingId = id
+    const fileId = query.recordingId
+    const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+
+    const downloadUrlPromise = new Promise((resolve) => {
+      this.client
+        .get(`${BASE_URL}${GET_MEETING_FILES}`)
+        .auth(token)
+        .request((err, resp) => {
+          if (err ||
+            resp.statusCode !== 200 ||
+            !resp.body
+          ) {
+            return this._downloadError(resp, done)
+          }
+          const file = resp
+            .body
+            .recording_files
+            .find(file => fileId === file.id || fileId === file.file_type)
+          if (!file || !file.download_url) {
+            return this._downloadError(resp, done)
+          }
+          resolve(file.download_url)
+        })
+    })
+    downloadUrlPromise.then((downloadUrl) => {
+      this.client
+        .get(`${downloadUrl}?access_token=${token}`)
+        .request()
+        .on('response', (resp) => {
+          if (resp.statusCode !== 200) {
+            done(this._error(null, resp))
+          } else {
+            resp.on('data', (chunk) => done(null, chunk))
+          }
+        })
+        .on('end', () => {
+          done(null, null)
+        })
+        .on('error', (err) => {
+          logger.error(err, 'provider.zoom.download.error')
+          done(err)
+        })
+    })
+  }
+
+  size ({ id, token, query }, done) {
+    const meetingId = id
+    const fileId = query.recordingId
+    const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+
+    return this.client
+      .get(`${BASE_URL}${GET_MEETING_FILES}`)
+      .auth(token)
+      .request((err, resp, body) => {
+        if (err || resp.statusCode !== 200) {
+          return this._downloadError(resp, done)
+        }
+        const file = resp
+          .body
+          .recording_files
+          .find(file => file.id === fileId || file.file_type === fileId)
+
+        if (!file) {
+          return this._downloadError(resp, done)
+        }
+        // timeline files don't have file size, but are typically small json files, should be much less than 1MB
+        const maxExportFileSize = 1024 * 1024
+        done(null, file.file_size || maxExportFileSize)
+      })
+  }
+
+  _initializeData (body, initialEnd = null) {
+    let end = initialEnd || moment()
+    let start = end.clone().date(1)
+
+    const accountCreation = adapter.getAccountCreationDate(body)
+    const defaultLimit = end.clone().subtract(DEFAULT_RANGE_MOS, 'months')
+    const limit = accountCreation > defaultLimit ? accountCreation : defaultLimit
+
+    const data = {
+      items: [],
+      username: adapter.getUserEmail(body)
+    }
+
+    while (start > limit) {
+      start = end.clone().date(1)
+      data.items.push({
+        isFolder: true,
+        icon: 'folder',
+        name: adapter.getDateName(start, end),
+        mimeType: null,
+        id: adapter.getDateFolderId(start, end),
+        thumbnail: null,
+        requestPath: adapter.getDateFolderRequestPath(start, end),
+        modifiedDate: adapter.getDateFolderModified(end),
+        size: null
+      })
+      end = start.clone().subtract(1, 'days')
+    }
+    data.nextPagePath = adapter.getDateNextPagePath(start)
+    return data
+  }
+
+  _adaptData (results) {
+    if (!results) {
+      return { items: [] }
+    }
+
+    const data = {
+      nextPagePath: adapter.getNextPagePath(results),
+      items: []
+    }",it seems we still aren't sending the username field for this case?,`meetingId` is not used.
97,"@@ -0,0 +1,274 @@
+const Provider = require('../Provider')
+
+const request = require('request')
+const moment = require('moment')
+const purest = require('purest')({ request })
+const logger = require('../../logger')
+const adapter = require('./adapter')
+const { ProviderApiError, ProviderAuthError } = require('../error')
+
+const BASE_URL = 'https://zoom.us/v2'
+const GET_LIST_PATH = '/users/me/recordings'
+const GET_USER_PATH = '/users/me'
+const PAGE_SIZE = 300
+const DEFAULT_RANGE_MOS = 23
+
+/**
+ * Adapter for API https://marketplace.zoom.us/docs/api-reference/zoom-api
+ */
+class Zoom extends Provider {
+  constructor (options) {
+    super(options)
+    this.authProvider = options.provider = Zoom.authProvider
+    this.client = purest(options)
+  }
+
+  static get authProvider () {
+    return 'zoom'
+  }
+
+  list (options, done) {
+    /*
+    - returns list of months by default
+    - drill down for specific files in each month
+    */
+    const token = options.token
+    const query = options.query || {}
+    const { cursor, from, to } = query
+    const meetingId = options.directory || ''
+
+    if (!from && !to && !meetingId) {
+      const end = cursor && moment(cursor)
+      this.client.get(`${BASE_URL}${GET_USER_PATH}`)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200 || !body) {
+            return this._listError(err, resp, done)
+          }
+          done(null, this._initializeData(body, end))
+        })
+    }
+
+    if (from && to) {
+      const queryObj = {
+        page_size: PAGE_SIZE,
+        from,
+        to
+      }
+
+      if (cursor) {
+        queryObj.next_page_token = cursor
+      }
+
+      this.client.get(`${BASE_URL}${GET_LIST_PATH}`)
+        .qs(queryObj)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (
+            err ||
+            resp.statusCode !== 200 ||
+            !body
+          ) {
+            return this._listError(err, resp, done)
+          } else {
+            done(null, this._adaptData(body))
+          }
+        })
+    }
+
+    if (meetingId) {
+      const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+      this.client
+        .get(`${BASE_URL}${GET_MEETING_FILES}`)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err ||
+            resp.statusCode !== 200 ||
+            !body
+          ) {
+            return this._listError(err, resp, done)
+          } else {
+            done(null, this._adaptData(body))
+          }
+        })
+    }
+  }
+
+  download ({ id, token, query }, done) {
+    // meeting id + file id required
+    // timeline files don't have an ID or size
+    const meetingId = id
+    const fileId = query.recordingId
+    const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+
+    const downloadUrlPromise = new Promise((resolve) => {
+      this.client
+        .get(`${BASE_URL}${GET_MEETING_FILES}`)
+        .auth(token)
+        .request((err, resp) => {
+          if (err ||
+            resp.statusCode !== 200 ||
+            !resp.body
+          ) {
+            return this._downloadError(resp, done)
+          }
+          const file = resp
+            .body
+            .recording_files
+            .find(file => fileId === file.id || fileId === file.file_type)
+          if (!file || !file.download_url) {
+            return this._downloadError(resp, done)
+          }
+          resolve(file.download_url)
+        })
+    })
+    downloadUrlPromise.then((downloadUrl) => {
+      this.client
+        .get(`${downloadUrl}?access_token=${token}`)
+        .request()
+        .on('response', (resp) => {
+          if (resp.statusCode !== 200) {
+            done(this._error(null, resp))
+          } else {
+            resp.on('data', (chunk) => done(null, chunk))
+          }
+        })
+        .on('end', () => {
+          done(null, null)
+        })
+        .on('error', (err) => {
+          logger.error(err, 'provider.zoom.download.error')
+          done(err)
+        })
+    })
+  }
+
+  size ({ id, token, query }, done) {
+    const meetingId = id
+    const fileId = query.recordingId
+    const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+
+    return this.client
+      .get(`${BASE_URL}${GET_MEETING_FILES}`)
+      .auth(token)
+      .request((err, resp, body) => {
+        if (err || resp.statusCode !== 200) {
+          return this._downloadError(resp, done)
+        }
+        const file = resp
+          .body
+          .recording_files
+          .find(file => file.id === fileId || file.file_type === fileId)
+
+        if (!file) {
+          return this._downloadError(resp, done)
+        }
+        // timeline files don't have file size, but are typically small json files, should be much less than 1MB
+        const maxExportFileSize = 1024 * 1024
+        done(null, file.file_size || maxExportFileSize)
+      })
+  }
+
+  _initializeData (body, initialEnd = null) {
+    let end = initialEnd || moment()
+    let start = end.clone().date(1)
+
+    const accountCreation = adapter.getAccountCreationDate(body)
+    const defaultLimit = end.clone().subtract(DEFAULT_RANGE_MOS, 'months')
+    const limit = accountCreation > defaultLimit ? accountCreation : defaultLimit
+
+    const data = {
+      items: [],
+      username: adapter.getUserEmail(body)
+    }
+
+    while (start > limit) {
+      start = end.clone().date(1)
+      data.items.push({
+        isFolder: true,
+        icon: 'folder',
+        name: adapter.getDateName(start, end),
+        mimeType: null,
+        id: adapter.getDateFolderId(start, end),
+        thumbnail: null,
+        requestPath: adapter.getDateFolderRequestPath(start, end),
+        modifiedDate: adapter.getDateFolderModified(end),
+        size: null
+      })
+      end = start.clone().subtract(1, 'days')
+    }
+    data.nextPagePath = adapter.getDateNextPagePath(start)
+    return data
+  }
+
+  _adaptData (results) {
+    if (!results) {
+      return { items: [] }
+    }
+
+    const data = {
+      nextPagePath: adapter.getNextPagePath(results),
+      items: []
+    }
+    const items = results.meetings || results.recording_files
+    items.forEach(item => {
+      data.items.push({
+        isFolder: adapter.getIsFolder(item),
+        icon: adapter.getIcon(item),
+        name: adapter.getItemName(item),
+        mimeType: adapter.getMimeType(item),
+        id: adapter.getId(item),
+        thumbnail: null,
+        requestPath: adapter.getRequestPath(item),
+        modifiedDate: adapter.getStartDate(item),
+        size: adapter.getSize(item)
+      })
+    })
+    return data
+  }
+
+  logout ({ token }, done) {
+    const encodedAuth = Buffer.from(
+      `${process.env.COMPANION_ZOOM_KEY}:${process.env.COMPANION_ZOOM_SECRET}`, 'binary'
+    ).toString('base64')
+    return this.client
+      .get('logout')",should we be calling the [revoke endpoint](https://marketplace.zoom.us/docs/guides/auth/oauth#revoking) instead? Are they the same?,`meetingId` is not used.
98,"@@ -0,0 +1,274 @@
+const Provider = require('../Provider')
+
+const request = require('request')
+const moment = require('moment')
+const purest = require('purest')({ request })
+const logger = require('../../logger')
+const adapter = require('./adapter')
+const { ProviderApiError, ProviderAuthError } = require('../error')
+
+const BASE_URL = 'https://zoom.us/v2'
+const GET_LIST_PATH = '/users/me/recordings'
+const GET_USER_PATH = '/users/me'
+const PAGE_SIZE = 300
+const DEFAULT_RANGE_MOS = 23
+
+/**
+ * Adapter for API https://marketplace.zoom.us/docs/api-reference/zoom-api
+ */
+class Zoom extends Provider {
+  constructor (options) {
+    super(options)
+    this.authProvider = options.provider = Zoom.authProvider
+    this.client = purest(options)
+  }
+
+  static get authProvider () {
+    return 'zoom'
+  }
+
+  list (options, done) {
+    /*
+    - returns list of months by default
+    - drill down for specific files in each month
+    */
+    const token = options.token
+    const query = options.query || {}
+    const { cursor, from, to } = query
+    const meetingId = options.directory || ''
+
+    if (!from && !to && !meetingId) {
+      const end = cursor && moment(cursor)
+      this.client.get(`${BASE_URL}${GET_USER_PATH}`)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err || resp.statusCode !== 200 || !body) {
+            return this._listError(err, resp, done)
+          }
+          done(null, this._initializeData(body, end))
+        })
+    }
+
+    if (from && to) {
+      const queryObj = {
+        page_size: PAGE_SIZE,
+        from,
+        to
+      }
+
+      if (cursor) {
+        queryObj.next_page_token = cursor
+      }
+
+      this.client.get(`${BASE_URL}${GET_LIST_PATH}`)
+        .qs(queryObj)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (
+            err ||
+            resp.statusCode !== 200 ||
+            !body
+          ) {
+            return this._listError(err, resp, done)
+          } else {
+            done(null, this._adaptData(body))
+          }
+        })
+    }
+
+    if (meetingId) {
+      const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+      this.client
+        .get(`${BASE_URL}${GET_MEETING_FILES}`)
+        .auth(token)
+        .request((err, resp, body) => {
+          if (err ||
+            resp.statusCode !== 200 ||
+            !body
+          ) {
+            return this._listError(err, resp, done)
+          } else {
+            done(null, this._adaptData(body))
+          }
+        })
+    }
+  }
+
+  download ({ id, token, query }, done) {
+    // meeting id + file id required
+    // timeline files don't have an ID or size
+    const meetingId = id
+    const fileId = query.recordingId
+    const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+
+    const downloadUrlPromise = new Promise((resolve) => {
+      this.client
+        .get(`${BASE_URL}${GET_MEETING_FILES}`)
+        .auth(token)
+        .request((err, resp) => {
+          if (err ||
+            resp.statusCode !== 200 ||
+            !resp.body
+          ) {
+            return this._downloadError(resp, done)
+          }
+          const file = resp
+            .body
+            .recording_files
+            .find(file => fileId === file.id || fileId === file.file_type)
+          if (!file || !file.download_url) {
+            return this._downloadError(resp, done)
+          }
+          resolve(file.download_url)
+        })
+    })
+    downloadUrlPromise.then((downloadUrl) => {
+      this.client
+        .get(`${downloadUrl}?access_token=${token}`)
+        .request()
+        .on('response', (resp) => {
+          if (resp.statusCode !== 200) {
+            done(this._error(null, resp))
+          } else {
+            resp.on('data', (chunk) => done(null, chunk))
+          }
+        })
+        .on('end', () => {
+          done(null, null)
+        })
+        .on('error', (err) => {
+          logger.error(err, 'provider.zoom.download.error')
+          done(err)
+        })
+    })
+  }
+
+  size ({ id, token, query }, done) {
+    const meetingId = id
+    const fileId = query.recordingId
+    const GET_MEETING_FILES = `/meetings/${meetingId}/recordings`
+
+    return this.client
+      .get(`${BASE_URL}${GET_MEETING_FILES}`)
+      .auth(token)
+      .request((err, resp, body) => {
+        if (err || resp.statusCode !== 200) {
+          return this._downloadError(resp, done)
+        }
+        const file = resp
+          .body
+          .recording_files
+          .find(file => file.id === fileId || file.file_type === fileId)
+
+        if (!file) {
+          return this._downloadError(resp, done)
+        }
+        // timeline files don't have file size, but are typically small json files, should be much less than 1MB
+        const maxExportFileSize = 1024 * 1024
+        done(null, file.file_size || maxExportFileSize)
+      })
+  }
+
+  _initializeData (body, initialEnd = null) {
+    let end = initialEnd || moment()
+    let start = end.clone().date(1)
+
+    const accountCreation = adapter.getAccountCreationDate(body)
+    const defaultLimit = end.clone().subtract(DEFAULT_RANGE_MOS, 'months')
+    const limit = accountCreation > defaultLimit ? accountCreation : defaultLimit
+
+    const data = {
+      items: [],
+      username: adapter.getUserEmail(body)
+    }
+
+    while (start > limit) {
+      start = end.clone().date(1)
+      data.items.push({
+        isFolder: true,
+        icon: 'folder',
+        name: adapter.getDateName(start, end),
+        mimeType: null,
+        id: adapter.getDateFolderId(start, end),
+        thumbnail: null,
+        requestPath: adapter.getDateFolderRequestPath(start, end),
+        modifiedDate: adapter.getDateFolderModified(end),
+        size: null
+      })
+      end = start.clone().subtract(1, 'days')
+    }
+    data.nextPagePath = adapter.getDateNextPagePath(start)
+    return data
+  }
+
+  _adaptData (results) {
+    if (!results) {
+      return { items: [] }
+    }
+
+    const data = {
+      nextPagePath: adapter.getNextPagePath(results),
+      items: []
+    }
+    const items = results.meetings || results.recording_files
+    items.forEach(item => {
+      data.items.push({
+        isFolder: adapter.getIsFolder(item),
+        icon: adapter.getIcon(item),
+        name: adapter.getItemName(item),
+        mimeType: adapter.getMimeType(item),
+        id: adapter.getId(item),
+        thumbnail: null,
+        requestPath: adapter.getRequestPath(item),
+        modifiedDate: adapter.getStartDate(item),
+        size: adapter.getSize(item)
+      })
+    })
+    return data
+  }
+
+  logout ({ token }, done) {
+    const encodedAuth = Buffer.from(
+      `${process.env.COMPANION_ZOOM_KEY}:${process.env.COMPANION_ZOOM_SECRET}`, 'binary'
+    ).toString('base64')
+    return this.client
+      .get('logout')
+      .auth({ basic: encodedAuth })
+      .qs({ token })
+      .request((err, resp) => {
+        if (err || resp.statusCode !== 200) {
+          logger.error(err, 'provider.zoom.logout.error')
+          done(this._error(err, resp))
+          return
+        }
+        done(null, { revoked: true })
+      })
+  }
+
+  _error (err, resp) {
+    const authErrorCodes = [
+      124, // expired token
+      401
+    ]
+    if (resp.body) {
+      const fallbackMessage = `request to ${this.authProvider} returned ${resp.statusCode}`
+      const errMsg = resp.body.message || fallbackMessage
+      return authErrorCodes.indexOf(resp.statusCode) > -1 ? new ProviderAuthError() : new ProviderApiError(errMsg, resp.statusCode)
+    }
+    return err || 'No response'","I think we should follow same style [as others](https://github.com/transloadit/uppy/blob/e9651443c7eb1eca0de93d98b3d960d7738efd19/packages/%40uppy/companion/src/server/provider/onedrive/index.js#L138-L144), so something like:

```js
const authErrorCodes = [
      124, // expired token
      401
]
if (resp) {
      const fallbackMsg = `request to ${this.authProvider} returned ${resp.statusCode}`
      const errMsg = (resp.body || {}).message ? resp.body.message : fallbackMsg
      return authErrorCodes.indexOf(resp.statusCode) > -1 ? new ProviderAuthError() : new ProviderApiError(errMsg, resp.statusCode)
}

return err
```

so even when there's no response body, we'll at least be sending back the status code",`meetingId` is not used.
99,"@@ -0,0 +1,28 @@
+# @uppy/svelte
+
+<img src=""https://uppy.io/images/logos/uppy-dog-head-arrow.svg"" width=""120"" alt=""Uppy logo: a superman puppy in a pink suit"" align=""right"">
+
+<a href=""https://www.npmjs.com/package/@uppy/svelte""><img src=""https://img.shields.io/npm/v/@uppy/svelte.svg?style=flat-square""></a>
+<a href=""https://travis-ci.org/transloadit/uppy""><img src=""https://img.shields.io/travis/transloadit/uppy/master.svg?style=flat-square"" alt=""Build Status""></a>
+
+Svelte component wrappers around Uppy's officially maintained UI plugins.
+
+Uppy is being developed by the folks at [Transloadit](https://transloadit.com), a versatile file encoding service.
+
+
+## Installation
+
+```bash
+$ npm install @uppy/svelte
+```
+
+We recommend installing from npm and then using a module bundler such as [Webpack](https://webpack.js.org/), [Browserify](http://browserify.org/) or [Rollup.js](http://rollupjs.org/).",Should we instead point to Svelte guide or mention Rollup?,I think this should be `
100,"@@ -0,0 +1,28 @@
+---
+title: ""Companion 2.0 is here""
+date: 2020-08-20
+author: ife
+published: false
+---
+
+Companion 2.0 is here! 🎉 After maintaining and improving the 1.x series for over a year, we're releasing a Major version bump on the Companion package. So what are the changes you'd expect to see on Companion 2.0?
+
+## Node >= v10
+
+As you must have heard, Node v8.x has reached EOL, and in turn Companion 2.0 drops support for Node v6.x, Node v8.x and now requires that you run at least Node v10.x.","imho we can shorten this a bit and explain the acronym. I think the ""official"" spelling for node versions is ""Node.js X.Y.Z"", without a `v`, but people would understand either way :)
```suggestion
Node.js 8.x has reached End-of-life, and in turn Companion 2.0 drops support for Node.js 6.x, Node.js 8.x and now requires that you run at least Node.js 10.x.
```",I don't think this is th
101,"@@ -0,0 +1,28 @@
+---
+title: ""Companion 2.0 is here""
+date: 2020-08-20
+author: ife
+published: false
+---
+
+Companion 2.0 is here! 🎉 After maintaining and improving the 1.x series for over a year, we're releasing a Major version bump on the Companion package. So what are the changes you'd expect to see on Companion 2.0?
+
+## Node >= v10
+
+As you must have heard, Node v8.x has reached EOL, and in turn Companion 2.0 drops support for Node v6.x, Node v8.x and now requires that you run at least Node v10.x.
+
+## Renamed Provider Options
+
+Pre 2.0 there were inconsistencies in relation to the Provider names. In some places, the Google Drive provider was referred to as *google* (e.g in `providerOptions`) and in some other places, it was referred to as *drive* (e.g the server endpoints `/drive/list`). In Companion 2.0 it is now made to have the consistent name *drive* everywhere. Similarly the OneDrive provider is made to have the consistent name *onedrive* for the same reason.
+
+## Changed Redirect URIs
+
+On the journey to have more consistent naming with the providers (mentioned above), we have made changes to the redirect URIs that is supplied during the OAuth process. For example, for Google Drive, the old redirect URI was of the form `https://mycompanionwebsite.tld/connect/google/callback`. In Companion 2.0, this is now changed to `https://mycompanionwebsite.tld/drive/redirect`. This is a Breaking Change and it means you would need to make these corresponding changes to your redirect URIs on your Providers' API Dashboards.","I think this first sentence is also a bit lengthy but I don't have a good suggestion to improve it, so maybe we should ask AJ for some expert editing later :)",I don't think we need th
102,"@@ -0,0 +1,28 @@
+---
+title: ""Companion 2.0 is here""
+date: 2020-08-20
+author: ife
+published: false
+---
+
+Companion 2.0 is here! 🎉 After maintaining and improving the 1.x series for over a year, we're releasing a Major version bump on the Companion package. So what are the changes you'd expect to see on Companion 2.0?
+
+## Node >= v10
+
+As you must have heard, Node v8.x has reached EOL, and in turn Companion 2.0 drops support for Node v6.x, Node v8.x and now requires that you run at least Node v10.x.
+
+## Renamed Provider Options
+
+Pre 2.0 there were inconsistencies in relation to the Provider names. In some places, the Google Drive provider was referred to as *google* (e.g in `providerOptions`) and in some other places, it was referred to as *drive* (e.g the server endpoints `/drive/list`). In Companion 2.0 it is now made to have the consistent name *drive* everywhere. Similarly the OneDrive provider is made to have the consistent name *onedrive* for the same reason.
+
+## Changed Redirect URIs
+
+On the journey to have more consistent naming with the providers (mentioned above), we have made changes to the redirect URIs that is supplied during the OAuth process. For example, for Google Drive, the old redirect URI was of the form `https://mycompanionwebsite.tld/connect/google/callback`. In Companion 2.0, this is now changed to `https://mycompanionwebsite.tld/drive/redirect`. This is a Breaking Change and it means you would need to make these corresponding changes to your redirect URIs on your Providers' API Dashboards.
+
+## Compatibility with Uppy 1.x client
+
+Compannion 2.0 is compatible with any Uppy 1.x version, so you don't have to worry what Companion version a server may be runnning before using your Uppy client with it.","lil typo
```suggestion
Companion 2.0 is compatible with any Uppy 1.x version, so you don't have to worry what Companion version a server may be runnning before using your Uppy client with it.
```",I don't think we need th
103,"@@ -0,0 +1,294 @@
+const Provider = require('../Provider')
+
+const request = require('request')
+const moment = require('moment')
+const purest = require('purest')({ request })
+const logger = require('../../logger')
+const adapter = require('./adapter')
+const { ProviderApiError, ProviderAuthError } = require('../error')
+
+const BASE_URL = 'https://zoom.us/v2'
+const GET_LIST_PATH = '/users/me/recordings'
+const GET_USER_PATH = '/users/me'
+const PAGE_SIZE = 300
+const DEFAULT_RANGE_MOS = 23
+
+/**
+ * Adapter for API https://marketplace.zoom.us/docs/api-reference/zoom-api
+ */
+class Zoom extends Provider {
+  constructor (options) {
+    super(options)
+    this.authProvider = options.provider = Zoom.authProvider
+    this.client = purest(options)
+  }
+
+  static get authProvider () {
+    return 'zoom'
+  }
+
+  list (options, done) {
+    /*
+    - returns list of months by default
+    - drill down for specific files in each month
+    */
+    const token = options.token
+    const query = options.query || {}
+    const { cursor, from, to } = query
+    const meetingId = options.directory || ''
+    let meetingsPromise = Promise.resolve(undefined)
+    let recordingsPromise = Promise.resolve(undefined)",this is set up this way to try and match up the style in the drive provider,I don't think we need to
104,"@@ -0,0 +1,295 @@
+import AuthView from './AuthView'
+import Browser from './new/Browser'
+import ErrorView from './Error'
+
+/**
+ * Class to easily generate generic views for plugins
+ *
+ * This class expects the plugin using to have the following attributes
+ *
+ * stateId {String} object key of which the plugin state is stored
+ *
+ * This class also expects the plugin instance using it to have the following
+ * accessor methods.
+ * Each method takes the item whose property is to be accessed
+ * as a param
+ *
+ * isFolder
+ *    @return {Boolean} for if the item is a folder or not
+ * getItemData
+ *    @return {Object} that is format ready for uppy upload/download
+ * getItemIcon
+ *    @return {Object} html instance of the item's icon
+ * getItemSubList
+ *    @return {Array} sub-items in the item. e.g a folder may contain sub-items
+ * getItemName
+ *    @return {String} display friendly name of the item
+ * getMimeType
+ *    @return {String} mime type of the item
+ * getItemId
+ *    @return {String} unique id of the item
+ * getItemRequestPath
+ *    @return {String} unique request path of the item when making calls to uppy server
+ * getItemModifiedDate
+ *    @return {object} or {String} date of when last the item was modified
+ */",👌 💯 ,I don't think we need th
105,"@@ -0,0 +1,3 @@
+export const isVue2 = (...args) => {","I think we should ignore the warning in this case: This file is intended to be a bag of semi-related functions, it just happens to only contain one function right now.

```suggestion
// eslint-disable-next-line import/prefer-default-export
export const isVue2 = (...args) => {
```",export const isVue2 = ..
106,"@@ -0,0 +1,3 @@
+flask
+werkzeug
+flask-cors","probably an extraneous file? python-xhr and php-xhr both have a requirements.txt, should only be python i think?",Why is this needed?
107,"@@ -0,0 +1,30 @@
+---
+title: ""Companion 2.0 is here""
+date: 2020-08-20
+author: ife
+published: false
+---
+
+Companion 2.0 is here! 🎉 After maintaining and improving the 1.x series for over a year, we're releasing a Major version bump on the Companion package. Why you ask? Well, the drive on this release is mainly towards fixing some terminology inconsistencies and aligning with Node.js LTS to ease the maintenance burden.","After reading, as a reader, i'm left wondering what is to become of the v1 branch. Will it still be maintained and receive patches? For how long?",This should be `2020-08-
108,"@@ -0,0 +1,30 @@
+---
+title: ""Companion 2.0 is here""
+date: 2020-08-20
+author: ife
+published: false
+---
+
+Companion 2.0 is here! 🎉 After maintaining and improving the 1.x series for over a year, we're releasing a Major version bump on the Companion package. Why you ask? Well, the drive on this release is mainly towards fixing some terminology inconsistencies and aligning with Node.js LTS to ease the maintenance burden.
+
+So what are the changes you'd expect to see on Companion 2.0?
+
+## Node >= v10
+
+Node.js 8.x has reached End-of-life, and in turn Companion 2.0 drops support for Node.js 6.x, Node.js 8.x and now requires that you run at least Node.js 10.x.",Not just any 10.x right? Ten point something something?,I'm not sure if this is 
109,"@@ -0,0 +1,30 @@
+---
+title: ""Companion 2.0 is here""
+date: 2020-08-20
+author: ife
+published: false
+---
+
+Companion 2.0 is here! 🎉 After maintaining and improving the 1.x series for over a year, we're releasing a Major version bump on the Companion package. Why you ask? Well, the drive on this release is mainly towards fixing some terminology inconsistencies and aligning with Node.js LTS to ease the maintenance burden.
+
+So what are the changes you'd expect to see on Companion 2.0?
+
+## Node >= v10
+
+Node.js 8.x has reached End-of-life, and in turn Companion 2.0 drops support for Node.js 6.x, Node.js 8.x and now requires that you run at least Node.js 10.x.
+
+## Renamed Provider Options
+
+Pre 2.0 there were inconsistencies in relation to the Provider names. In some places, the Google Drive provider was referred to as *google* (e.g in `providerOptions`) and in some other places, it was referred to as *drive* (e.g the server endpoints `/drive/list`). In Companion 2.0 it is now made to have the consistent name *drive* everywhere. Similarly the OneDrive provider is made to have the consistent name *onedrive* for the same reason.
+
+## Changed Redirect URIs
+
+Still on consistent naming, we have made some changes to the redirect URIs supplied during the OAuth process. For example, for Google Drive, the old redirect URI was of the form `https://mycompanionwebsite.tld/connect/google/callback`. In Companion 2.0, this is now changed to `https://mycompanionwebsite.tld/drive/redirect`. This is a Breaking Change and it means you would need to make these corresponding changes to your redirect URIs on your Providers' API Dashboards.
+
+## Compatibility with Uppy 1.x client
+
+Companion 2.0 is compatible with any Uppy 1.x version, so you don't have to worry what Companion version a server may be runnning before using your Uppy client with it.","How about: So you don't have to worry that all clients also need to upgrade their Uppy client installations when you upgrade Companion on your server, at the exact same time.

Or similar?",I don't think we need to
110,"@@ -0,0 +1,30 @@
+---
+title: ""Companion 2.0 is here""
+date: 2020-08-20
+author: ife
+published: false
+---
+
+Companion 2.0 is here! 🎉 After maintaining and improving the 1.x series for over a year, we're releasing a Major version bump on the Companion package. Why you ask? Well, the drive on this release is mainly towards fixing some terminology inconsistencies and aligning with Node.js LTS to ease the maintenance burden.
+
+So what are the changes you'd expect to see on Companion 2.0?
+
+## Node >= v10
+
+Node.js 8.x has reached End-of-life, and in turn Companion 2.0 drops support for Node.js 6.x, Node.js 8.x and now requires that you run at least Node.js 10.x.
+
+## Renamed Provider Options
+
+Pre 2.0 there were inconsistencies in relation to the Provider names. In some places, the Google Drive provider was referred to as *google* (e.g in `providerOptions`) and in some other places, it was referred to as *drive* (e.g the server endpoints `/drive/list`). In Companion 2.0 it is now made to have the consistent name *drive* everywhere. Similarly the OneDrive provider is made to have the consistent name *onedrive* for the same reason.
+
+## Changed Redirect URIs
+
+Still on consistent naming, we have made some changes to the redirect URIs supplied during the OAuth process. For example, for Google Drive, the old redirect URI was of the form `https://mycompanionwebsite.tld/connect/google/callback`. In Companion 2.0, this is now changed to `https://mycompanionwebsite.tld/drive/redirect`. This is a Breaking Change and it means you would need to make these corresponding changes to your redirect URIs on your Providers' API Dashboards.
+
+## Compatibility with Uppy 1.x client
+
+Companion 2.0 is compatible with any Uppy 1.x version, so you don't have to worry what Companion version a server may be runnning before using your Uppy client with it.
+
+## Migrating from Companion 1.x to 2.x
+
+Given the breaking changes, we've put together a list of changes to make if you'd like to upgrade to Companion 2.0. You can have a look at this list [here](https://uppy.io/docs/companion/#Migrating-v1-to-v2).","As a best practice, link `We've created a [migration tutorial for upgrading from Companion v1 to v2].` vs linking `you can find it [here]`.",I don't think we need to
111,"@@ -0,0 +1,31 @@
+const DashboardPlugin = require('../../plugins/Dashboard')
+
+/**
+ * A version of the Dashboard plugin that externalises the modal open state
+ * management, allowing the React component wrapper to open and close it at
+ * will.
+ */
+class ReactDashboardPlugin extends DashboardPlugin {
+  constructor (core, opts) {","I’m a little worried about doing this. Could we maybe add onRequestClose/hideModal callback into the Dashboard plugin itself? Otherwise its third-level of class nesting, which is not that bad, but starting to feel like a dangerous territory :)",I'm not sure if this is 
112,"@@ -0,0 +1,32 @@
+---
+title: ""Day 21""
+date: 2019-04-15
+author: tyler
+image: ""https://uppy.io/images/blog/30daystoliftoff/day21.jpg""
+series: 30 Days to Liftoff
+seriesSuffix: 'of 30'
+---
+
+We're reaching the final stretch of our '30 Days to Liftoff' blog post challenge. After a refreshing weekend the entire team is ready to give it their all over the next 10 days to ensure that **Uppy 1.0 reaches its April 25** release date.
+
+<center><br /><img width=""400"" src=""/images/blog/30daystoliftoff/day21.jpg""><br /><br /></center>
+
+Since we're starting the week strong and prepared (as usual) let's take a quick glance at how our Uppy dashboard is looking.",">we're starting the week strong and prepared (as usual)

a bit too strong/macho for my taste",I think this should be `<center>` instead of `<center>`
113,"@@ -0,0 +1,33 @@
+---
+title: ""Day 24""
+date: 2019-04-18
+author: tyler
+published: true
+image: ""https://uppy.io/images/blog/30daystoliftoff/day24.gif""
+series: 30 Days to Liftoff
+seriesSuffix: 'of 30'
+---
+
+Six days remain in our '30 Days to Liftoff' blog post challenge. There's not long left until our planned **Uppy 1.0 release on April 25** release so let's take a look at how close we are to reaching our goal! 
+",release repeated 2 times,This should be `2020-04-18`
114,"@@ -0,0 +1,33 @@
+---
+title: ""Day 24""
+date: 2019-04-18
+author: tyler
+published: true
+image: ""https://uppy.io/images/blog/30daystoliftoff/day24.gif""
+series: 30 Days to Liftoff
+seriesSuffix: 'of 30'
+---
+
+Six days remain in our '30 Days to Liftoff' blog post challenge. There's not long left until our planned **Uppy 1.0 release on April 25** release so let's take a look at how close we are to reaching our goal! 
+
+<center><br /><img width=""400"" src=""/images/blog/30daystoliftoff/day24.gif""><br /><br /></center>
+
+<!--more-->
+
+- [Evgenia](https://github.com/lakesare) has made some great progress on improving the [drag to upload state](https://github.com/transloadit/uppy/pull/1440) for the Uppy Dashboard in a variety of browsers. Currently more MIME types are being added to give file previews their own unique icons.
+","> Currently more MIME types are being added

We are considering adding more later",I think this should be `2020-04-18`
115,"@@ -0,0 +1,33 @@
+---
+title: ""Day 24""
+date: 2019-04-18
+author: tyler
+published: true
+image: ""https://uppy.io/images/blog/30daystoliftoff/day24.gif""
+series: 30 Days to Liftoff
+seriesSuffix: 'of 30'
+---
+
+Six days remain in our '30 Days to Liftoff' blog post challenge. There's not long left until our planned **Uppy 1.0 release on April 25** release so let's take a look at how close we are to reaching our goal! 
+
+<center><br /><img width=""400"" src=""/images/blog/30daystoliftoff/day24.gif""><br /><br /></center>
+
+<!--more-->
+
+- [Evgenia](https://github.com/lakesare) has made some great progress on improving the [drag to upload state](https://github.com/transloadit/uppy/pull/1440) for the Uppy Dashboard in a variety of browsers. Currently more MIME types are being added to give file previews their own unique icons.
+
+- [Alex's](https://github.com/nqst) [design facelift](https://github.com/transloadit/uppy/pull/1452) was completed after some testing by [Artur](https://github.com/arturi). Take a look at some of the improvements below:
+
+<center><br /><img src=""/images/blog/30daystoliftoff/2019-04-18-design.png""><br /></center>
+
+- [Tim](https://github.com/tim-kos) will be spending today thoroughly testing Uppy in preparation for the upcoming release. We're making some big behind the scenes changes so there may be some issues that crop up on our webpage. 
+
+- Uppy 0.30.5 will be released by [Artur](https://github.com/arturi) today. One of the main changes here is our name change from the `serverUrl` property to `companionUrl`. A simple check if being added, and we will notify users that it has been depreceated so they have ample time to make the change within their code.
+
+- [React Native](https://github.com/transloadit/uppy/pull/988) was merged into our Uppy master branch on Github. We're confident that our initial release will be useful for those who need a basic implementation. Of course our React Native development will continue, so stay tuned for that. 
+",I’d add that this is an alpha-version of React Native support.,"I'm not sure if this is the best way to do this, but I'"
116,"@@ -0,0 +1,33 @@
+// Adapted from https://github.com/Flet/prettier-bytes/
+// Changing 1000 bytes to 1024, so we can keep uppercase KB vs kB","maybe add
```patch
+// ISC License (c) Dan Flettre https://github.com/Flet/prettier-bytes/blob/master/LICENSE
```",
117,"@@ -0,0 +1,33 @@
+{
+  ""name"": ""@uppy/drop-target"",
+  ""description"": ""Lets your users drag and drop and paste files on any of your existing DOM elements. Most likely document.body"",","```suggestion
  ""description"": ""Lets your users drag and drop files on a DOM element"",
```
shorter = better(?)

might be good to update all the descriptions to a common format, ""Uppy plugin for importing files from..."" ""Uppy plugin for receiving dropped files"" etc. but that's a separate issue :)",This should be `@uppy/drop-target`
118,"@@ -0,0 +1,33 @@
+{
+  ""name"": ""@uppy/drop-target"",
+  ""description"": ""Lets your users drag and drop and paste files on any of your existing DOM elements. Most likely document.body"",
+  ""version"": ""0.1.0"",
+  ""license"": ""MIT"",
+  ""main"": ""lib/index.js"",
+  ""types"": ""types/index.d.ts"",
+  ""keywords"": [
+    ""file uploader"",
+    ""uppy"",
+    ""uppy-plugin"",
+    ""drag-drop"",
+    ""drag"",
+    ""drop"",
+    ""dropzone"",
+    ""upload"",
+    ""paste""","
```suggestion
    ""upload""
```",This should be `@uppy/drop-target`
119,"@@ -0,0 +1,33 @@
+{
+  ""name"": ""@uppy/screen-capture"",
+  ""description"": ""Uppy plugin that captures video from display or application."",
+  ""version"": ""1.0.0"",
+  ""license"": ""MIT"",
+  ""main"": ""lib/index.js"",
+  ""style"": ""dist/style.min.css"",
+  ""types"": ""types/index.d.ts"",
+  ""keywords"": [
+    ""file uploader"",
+    ""uppy"",
+    ""uppy-plugin"",
+    ""screen capture"",
+    ""video"",
+    ""record"",
+    ""mediarecorder""
+  ],
+  ""homepage"": ""https://uppy.io"",
+  ""bugs"": {
+    ""url"": ""https://github.com/transloadit/uppy/issues""
+  },
+  ""repository"": {
+    ""type"": ""git"",
+    ""url"": ""git+https://github.com/transloadit/uppy.git""
+  },
+  ""dependencies"": {
+    ""@uppy/utils"": ""file:../utils"",
+    ""preact"": ""8.2.9""
+  },
+  ""peerDependencies"": {
+    ""@uppy/core"": ""^1.0.0""
+  }","We should add
```json
""publishConfig"": {
  ""access"": ""public""
}
```
so npm doesn't try to create a private package once this is published for the first time (which would fail the lerna publish midway)",This should be `^1.0.0`
120,"@@ -0,0 +1,33 @@
+{
+  ""name"": ""@uppy/vue"",
+  ""version"": ""0.0.1"",
+  ""private"": false,
+  ""main"": ""lib/index.js"",
+  ""types"": ""types/index.d.ts"",
+  ""scripts"": {
+    ""build"": ""tsc"",
+    ""dev"": ""parcel src/index.ts  --out-dir lib""
+  },
+  ""peerDependencies"": {
+    ""@uppy/core"": ""^1.0.0"",
+    ""vue"": "">=2.6.11""
+  },
+  ""dependencies"": {
+    ""shallow-equal"": ""^1.2.1"",
+    ""@uppy/dashboard"": ""^1.12.5"",
+    ""@uppy/drag-drop"": ""^1.4.18"",
+    ""@uppy/progress-bar"": ""^1.3.18"",
+    ""@uppy/status-bar"": ""^1.7.5""
+  },
+  ""devDependencies"": {
+    ""@uppy/core"": ""^1.0.0"",
+    ""@uppy/dashboard"": ""^1.12.5"",
+    ""@uppy/drag-drop"": ""^1.4.18"",
+    ""@uppy/progress-bar"": ""^1.3.18"",
+    ""@uppy/status-bar"": ""^1.7.5"",
+    ""@vue/component-compiler-utils"": ""^3.2.0"",
+    ""parcel-bundler"": ""^1.12.4"",
+    ""typescript"": ""^4.0.3"",
+    ""vue"": ""^2.6.12""
+  }","```suggestion
},
""publishConfig"": {
  ""access"": ""public""
}
```",I think this should be `^2.6.12`
121,"@@ -0,0 +1,333 @@
+import ThumbnailGeneratorPlugin from './index'
+import Plugin from '../../core/Plugin'
+
+const delay = duration => new Promise(resolve => setTimeout(resolve, duration))
+
+describe('uploader/ThumbnailGeneratorPlugin', () => {
+  it('should initialise successfully', () => {
+    const redux = new ThumbnailGeneratorPlugin(null, {})
+    expect(redux instanceof Plugin).toEqual(true)",minor copy-paste nit: description says `uploader/ThumbnailGeneratorPlugin` and this var is named `redux`,I think this should be `expect(redux instanceof Plugin)
122,"@@ -0,0 +1,34 @@
+---
+title: ""Day 21""
+date: 2019-04-15
+author: tyler
+image: ""https://uppy.io/images/blog/30daystoliftoff/day21.jpg""
+series: 30 Days to Liftoff
+seriesSuffix: 'of 30'
+---
+
+We're reaching the final stretch of our '30 Days to Liftoff' blog post challenge. After a refreshing weekend the entire team is ready to give it their all over the next 10 days to ensure that **Uppy 1.0 reaches its April 25** release date.
+
+<center><br /><img width=""400"" src=""/images/blog/30daystoliftoff/day21.jpg""><br /><br /></center>
+
+Since we're starting the week strong and prepared let's take a quick glance at how our Uppy dashboard is looking.
+
+<!--more-->
+
+<center><img width="""" src=""/images/blog/30daystoliftoff/15-dashboard.png""><br/><br/></center>
+
+There still a few unique, and possibly daunting, tasks left for the remainder of the development cycle but the team is taking each issue in stride and adding features with ease.
+
+- [Ife](https://github.com/ifedapoolarewaju) [fixed a bug](https://github.com/transloadit/uppy/commit/9f02d749b9aa4095e5871713ea2f25a716a21539) on the React Native side of things to get rid of an error that was present on one of our Android examples. Additionally, he also made some name changes in a number of files - changing `serverUrl` to `companionUrl` and `serverPattern` to `companionAllowedHosts`.
+","> present on one of our Android examples

we don’t have an Android-specific example, so he just fixed the example",I'm not sure if this is the best way to do this. I'm no
123,"@@ -0,0 +1,35 @@
+'use strict'
+/**
+ * This module serves as an Async wrapper for LocalStorage
+ */
+module.exports.setItem = (key, value) => {
+  return new Promise((resolve, reject) => {
+    try {
+      localStorage.setItem(key, value)
+      resolve()
+    } catch (error) {
+      reject(error)
+    }","a minor thing, but the Promise constructor already catches errors, so you can omit the try/catch and the behaviour is the same:

```js
return new Promise((resolve) => {
  localStorage.setItem(key, value)
  resolve()
})
```",I don't think you need to wrap this in a `Promise`
124,"@@ -0,0 +1,35 @@
+<?php
+ini_set('display_errors', 1);",No consistent indentation in this file,
125,"@@ -0,0 +1,35 @@
+<?php
+ini_set('display_errors', 1);
+ini_set('display_startup_errors', 1);
+error_reporting(E_ALL);
+
+if($_SERVER[""REQUEST_METHOD""] == ""OPTIONS"")",Please use triple equality,Please add a new line at the end of file.
126,"@@ -0,0 +1,35 @@
+<?php
+ini_set('display_errors', 1);
+ini_set('display_startup_errors', 1);
+error_reporting(E_ALL);
+
+if($_SERVER[""REQUEST_METHOD""] == ""OPTIONS"")
+{
+    if (isset($_SERVER[""HTTP_ACCESS_CONTROL_REQUEST_METHOD""]))",please wrap if contents in `{}`,Please add a new line at the end of file
127,"@@ -0,0 +1,35 @@
+<?php
+ini_set('display_errors', 1);
+ini_set('display_startup_errors', 1);
+error_reporting(E_ALL);
+
+if($_SERVER[""REQUEST_METHOD""] == ""OPTIONS"")
+{
+    if (isset($_SERVER[""HTTP_ACCESS_CONTROL_REQUEST_METHOD""]))
+        header(""Access-Control-Allow-Methods: POST, GET, OPTIONS, DELETE, PUT""); //Make sure you remove those you do not want to support
+        header(""Access-Control-Allow-Origin: *"");
+
+    if (isset($_SERVER[""HTTP_ACCESS_CONTROL_REQUEST_HEADERS""]))
+        header(""Access-Control-Allow-Headers: {$_SERVER['HTTP_ACCESS_CONTROL_REQUEST_HEADERS']}"");
+
+    //Just exit with 200 OK with the above headers for OPTIONS method
+    exit(0);
+}
+
+if($_POST) {","Maybe change to `!empty($_FILES[""files""])`","This should be `if (isset($_SERVER[""REQUEST_METHOD""]))`"
128,"@@ -0,0 +1,35 @@
+<?php
+ini_set('display_errors', 1);
+ini_set('display_startup_errors', 1);
+error_reporting(E_ALL);
+
+if($_SERVER[""REQUEST_METHOD""] == ""OPTIONS"")
+{
+    if (isset($_SERVER[""HTTP_ACCESS_CONTROL_REQUEST_METHOD""]))
+        header(""Access-Control-Allow-Methods: POST, GET, OPTIONS, DELETE, PUT""); //Make sure you remove those you do not want to support
+        header(""Access-Control-Allow-Origin: *"");
+
+    if (isset($_SERVER[""HTTP_ACCESS_CONTROL_REQUEST_HEADERS""]))
+        header(""Access-Control-Allow-Headers: {$_SERVER['HTTP_ACCESS_CONTROL_REQUEST_HEADERS']}"");
+
+    //Just exit with 200 OK with the above headers for OPTIONS method
+    exit(0);
+}
+
+if($_POST) {
+      $target_dir = ""./uploads/"";
+      $target_file = $target_dir . basename($_FILES[""files""][""name""][0]);
+      if (move_uploaded_file($_FILES[""files""][""tmp_name""][0], $target_file)) {
+        header(""Access-Control-Allow-Origin: *"");
+        header('Content-type: application/json');
+        $data = [""url"" => $target_file, ""message"" => ""The file "". basename( $_FILES[""files""][""name""][0]). "" has been uploaded.""];",inconsistent whitespace regarding concatenation here,Standards: Can you please add brackets to this conditional statement?
129,"@@ -0,0 +1,35 @@
+<?php
+ini_set('display_errors', 1);
+ini_set('display_startup_errors', 1);
+error_reporting(E_ALL);
+
+if($_SERVER[""REQUEST_METHOD""] == ""OPTIONS"")
+{
+    if (isset($_SERVER[""HTTP_ACCESS_CONTROL_REQUEST_METHOD""]))
+        header(""Access-Control-Allow-Methods: POST, GET, OPTIONS, DELETE, PUT""); //Make sure you remove those you do not want to support
+        header(""Access-Control-Allow-Origin: *"");
+
+    if (isset($_SERVER[""HTTP_ACCESS_CONTROL_REQUEST_HEADERS""]))
+        header(""Access-Control-Allow-Headers: {$_SERVER['HTTP_ACCESS_CONTROL_REQUEST_HEADERS']}"");
+
+    //Just exit with 200 OK with the above headers for OPTIONS method
+    exit(0);
+}
+
+if($_POST) {
+      $target_dir = ""./uploads/"";
+      $target_file = $target_dir . basename($_FILES[""files""][""name""][0]);
+      if (move_uploaded_file($_FILES[""files""][""tmp_name""][0], $target_file)) {
+        header(""Access-Control-Allow-Origin: *"");
+        header('Content-type: application/json');
+        $data = [""url"" => $target_file, ""message"" => ""The file "". basename( $_FILES[""files""][""name""][0]). "" has been uploaded.""];
+        http_response_code(201);
+        echo json_encode( $data );
+      } else {
+        header(""Access-Control-Allow-Origin: *"");
+        header('Content-type: application/json');",Mixing of single & double quotes,Standards: Can you please add brackets to this conditional statement?
130,"@@ -0,0 +1,35 @@
+<?php
+ini_set('display_errors', 1);
+ini_set('display_startup_errors', 1);
+error_reporting(E_ALL);
+
+if($_SERVER[""REQUEST_METHOD""] == ""OPTIONS"")
+{
+    if (isset($_SERVER[""HTTP_ACCESS_CONTROL_REQUEST_METHOD""]))
+        header(""Access-Control-Allow-Methods: POST, GET, OPTIONS, DELETE, PUT""); //Make sure you remove those you do not want to support
+        header(""Access-Control-Allow-Origin: *"");
+
+    if (isset($_SERVER[""HTTP_ACCESS_CONTROL_REQUEST_HEADERS""]))
+        header(""Access-Control-Allow-Headers: {$_SERVER['HTTP_ACCESS_CONTROL_REQUEST_HEADERS']}"");
+
+    //Just exit with 200 OK with the above headers for OPTIONS method
+    exit(0);
+}
+
+if($_POST) {
+      $target_dir = ""./uploads/"";
+      $target_file = $target_dir . basename($_FILES[""files""][""name""][0]);
+      if (move_uploaded_file($_FILES[""files""][""tmp_name""][0], $target_file)) {
+        header(""Access-Control-Allow-Origin: *"");
+        header('Content-type: application/json');
+        $data = [""url"" => $target_file, ""message"" => ""The file "". basename( $_FILES[""files""][""name""][0]). "" has been uploaded.""];
+        http_response_code(201);
+        echo json_encode( $data );
+      } else {
+        header(""Access-Control-Allow-Origin: *"");
+        header('Content-type: application/json');
+        $data = [""message"" => ""Sorry, there was an error uploading your file.""];",More descriptive error would be good,Standards: Can you please add brackets to this conditional statement?
131,"@@ -0,0 +1,35 @@
+<?php
+ini_set('display_errors', 1);
+ini_set('display_startup_errors', 1);
+error_reporting(E_ALL);
+
+if($_SERVER[""REQUEST_METHOD""] == ""OPTIONS"")
+{
+    if (isset($_SERVER[""HTTP_ACCESS_CONTROL_REQUEST_METHOD""]))
+        header(""Access-Control-Allow-Methods: POST, GET, OPTIONS, DELETE, PUT""); //Make sure you remove those you do not want to support
+        header(""Access-Control-Allow-Origin: *"");
+
+    if (isset($_SERVER[""HTTP_ACCESS_CONTROL_REQUEST_HEADERS""]))
+        header(""Access-Control-Allow-Headers: {$_SERVER['HTTP_ACCESS_CONTROL_REQUEST_HEADERS']}"");
+
+    //Just exit with 200 OK with the above headers for OPTIONS method
+    exit(0);
+}
+
+if($_POST) {
+      $target_dir = ""./uploads/"";
+      $target_file = $target_dir . basename($_FILES[""files""][""name""][0]);
+      if (move_uploaded_file($_FILES[""files""][""tmp_name""][0], $target_file)) {
+        header(""Access-Control-Allow-Origin: *"");
+        header('Content-type: application/json');
+        $data = [""url"" => $target_file, ""message"" => ""The file "". basename( $_FILES[""files""][""name""][0]). "" has been uploaded.""];
+        http_response_code(201);
+        echo json_encode( $data );
+      } else {
+        header(""Access-Control-Allow-Origin: *"");
+        header('Content-type: application/json');
+        $data = [""message"" => ""Sorry, there was an error uploading your file.""];
+        http_response_code(400);
+        echo json_encode( $data );",white space within parenthesis is new here,Standards: Please add braces to this conditional statement.
132,"@@ -0,0 +1,35 @@
+var formidable = require('formidable')
+var http = require('http')
+
+http.createServer(function (req, res) {
+  const headers = {
+    'Content-Type': 'application/json',
+    'Access-Control-Allow-Origin': '*',
+    'Access-Control-Allow-Methods': 'OPTIONS, POST, GET',
+    'Access-Control-Max-Age': 2592000 // 30 days
+    /** add other headers as per requirement */
+  }
+
+  if (req.method === 'OPTIONS') {
+    res.writeHead(204, headers)
+    res.end()
+    return
+  }
+  if (req.url === '/upload' && req.method.toLowerCase() === 'post') {
+    // parse a file upload
+    var form = new formidable.IncomingForm()
+","Can we add an upload directory, like `form.uploadDir = ""./uploads""`? Otherwise I ran this on mac and couldn’t figure out where the files went. And maybe also preserve the extension. So:

```js
form.uploadDir = ""./uploads""
form.keepExtensions = true
```",Why do we need this?
133,"@@ -0,0 +1,36 @@
+<!DOCTYPE html>
+<html lang=""en"">
+  <head>
+    <title></title>
+    <meta charset=""UTF-8"">
+    <meta name=""viewport"" content=""width=device-width, initial-scale=1"">
+    <link href=""https://unpkg.com/uppy/dist/uppy.min.css"" rel=""stylesheet""> 
+  </head>
+  <body>
+    <button id=""uppyModalOpener"">Open Modal</button>
+    <script src=""https://unpkg.com/uppy/dist/uppy.min.js""></script>
+    <script>
+      const Dashboard = Uppy.Dashboard
+      const Webcam = Uppy.Webcam
+      const Tus10 = Uppy.Tus10
+      const Informer = Uppy.Informer
+
+      const uppy = Uppy.Core({debug: true, autoProceed: false})
+      .use(Uppy.Dashboard, {
+        trigger: '#uppyModalOpener',
+        target: 'body'
+      })
+      .use(Webcam, {target: Dashboard})
+      .use(Tus10, {endpoint: 'http://master.tus.io/files/', resume: true})",http**s**://master.tus.io/files/ would be best 😃 ,Why do we need this?
134,"@@ -0,0 +1,36 @@
+name: CDN
+on:
+  push:
+    branches: master
+
+jobs:
+  release:
+    if: ${{startsWith(github.event.head_commit.message, 'Release')}}","Shouldn't we use tags for this, assuming we tag our releases. Just a suggestion, I think you know better. :thinking: ",I think this should be `if:`
135,"@@ -0,0 +1,36 @@
+name: CDN
+on:
+  push:
+    branches: master
+
+jobs:
+  release:
+    if: ${{startsWith(github.event.head_commit.message, 'Release')}}
+    name: Publish releases
+    runs-on: ubuntu-latest
+    steps:
+      - name: Checkout sources
+        uses: actions/checkout@v2
+      - name: Install Node.js
+        uses: actions/setup-node@v1",Why not use `actions/setup-node@v2-beta` ? :sweat_smile: ,I think this should be `if: ${startsWith(github.event.head_commit.mes
136,"@@ -0,0 +1,360 @@
+const cuid = require('cuid')
+const { Provider, RequestClient, Socket } = require('@uppy/companion-client')
+const emitSocketProgress = require('@uppy/utils/lib/emitSocketProgress')
+const getSocketHost = require('@uppy/utils/lib/getSocketHost')
+const EventTracker = require('@uppy/utils/lib/EventTracker')
+const ProgressTimeout = require('@uppy/utils/lib/ProgressTimeout')
+
+// See XHRUpload
+function buildResponseError (xhr, error) {
+  // No error message
+  if (!error) error = new Error('Upload error')
+  // Got an error message string
+  if (typeof error === 'string') error = new Error(error)
+  // Got something else
+  if (!(error instanceof Error)) {
+    error = Object.assign(new Error('Upload error'), { data: error })
+  }
+
+  error.request = xhr
+  return error
+}
+
+// See XHRUpload
+function setTypeInBlob (file) {
+  const dataWithUpdatedType = file.data.slice(0, file.data.size, file.meta.type)
+  return dataWithUpdatedType
+}
+
+module.exports = class MiniXHRUpload {
+  constructor (uppy, opts) {
+    this.uppy = uppy
+    this.opts = {
+      validateStatus (status, responseText, response) {
+        return status >= 200 && status < 300
+      },
+      ...opts
+    }
+
+    this.requests = opts.__queue
+    this.uploaderEvents = Object.create(null)
+  }
+
+  _getOptions (file) {
+    const uppy = this.uppy
+
+    const overrides = uppy.getState().xhrUpload
+    const opts = {
+      ...this.opts,
+      ...(overrides || {}),
+      ...(file.xhrUpload || {}),
+      headers: {}
+    }
+    Object.assign(opts.headers, this.opts.headers)
+    if (overrides) {
+      Object.assign(opts.headers, overrides.headers)
+    }
+    if (file.xhrUpload) {
+      Object.assign(opts.headers, file.xhrUpload.headers)
+    }
+
+    return opts
+  }
+
+  uploadFile (id, current, total) {
+    const file = this.uppy.getFile(id)
+    if (file.error) {
+      throw new Error(file.error)
+    } else if (file.isRemote) {
+      return this._uploadRemoteFile(file, current, total)
+    }
+    return this._uploadLocalFile(file, current, total)
+  }
+
+  _addMetadata (formData, meta, opts) {
+    const metaFields = Array.isArray(opts.metaFields)
+      ? opts.metaFields
+      // Send along all fields by default.
+      : Object.keys(meta)
+    metaFields.forEach((item) => {
+      formData.append(item, meta[item])
+    })
+  }
+
+  _createFormDataUpload (file, opts) {
+    const formPost = new FormData()
+
+    this._addMetadata(formPost, file.meta, opts)
+
+    const dataWithUpdatedType = setTypeInBlob(file)
+
+    if (file.name) {
+      formPost.append(opts.fieldName, dataWithUpdatedType, file.meta.name)
+    } else {
+      formPost.append(opts.fieldName, dataWithUpdatedType)
+    }
+
+    return formPost
+  }
+
+  _createBareUpload (file, opts) {
+    return file.data
+  }
+
+  _onFileRemoved (fileID, cb) {
+    this.uploaderEvents[fileID].on('file-removed', (file) => {
+      if (fileID === file.id) cb(file.id)
+    })
+  }
+
+  _onRetry (fileID, cb) {
+    this.uploaderEvents[fileID].on('upload-retry', (targetFileID) => {
+      if (fileID === targetFileID) {
+        cb()
+      }
+    })
+  }
+
+  _onRetryAll (fileID, cb) {
+    this.uploaderEvents[fileID].on('retry-all', (filesToRetry) => {
+      if (!this.uppy.getFile(fileID)) return
+      cb()
+    })
+  }
+
+  _onCancelAll (fileID, cb) {
+    this.uploaderEvents[fileID].on('cancel-all', () => {
+      if (!this.uppy.getFile(fileID)) return
+      cb()
+    })
+  }
+
+  _uploadLocalFile (file, current, total) {
+    const opts = this._getOptions(file)
+
+    this.uppy.log(`uploading ${current} of ${total}`)
+    return new Promise((resolve, reject) => {
+      // This is done in index.js in the S3 plugin.
+      // this.uppy.emit('upload-started', file)
+
+      const data = opts.formData
+        ? this._createFormDataUpload(file, opts)
+        : this._createBareUpload(file, opts)
+
+      const timer = new ProgressTimeout(opts.timeout, () => {
+        xhr.abort()",I got a lil confused here cos I couldn't find anywhere `xhr` was defined before it was referenced. Would it make sense to move [this](https://github.com/transloadit/uppy/pull/2060/files#diff-57355ea8780221946e05753c979ce54eR152) right before `ProgressTimeout` is instantiated?,I don't think this is needed.
137,"@@ -0,0 +1,360 @@
+const cuid = require('cuid')
+const { Provider, RequestClient, Socket } = require('@uppy/companion-client')
+const emitSocketProgress = require('@uppy/utils/lib/emitSocketProgress')
+const getSocketHost = require('@uppy/utils/lib/getSocketHost')
+const EventTracker = require('@uppy/utils/lib/EventTracker')
+const ProgressTimeout = require('@uppy/utils/lib/ProgressTimeout')
+
+// See XHRUpload
+function buildResponseError (xhr, error) {
+  // No error message
+  if (!error) error = new Error('Upload error')
+  // Got an error message string
+  if (typeof error === 'string') error = new Error(error)
+  // Got something else
+  if (!(error instanceof Error)) {
+    error = Object.assign(new Error('Upload error'), { data: error })
+  }
+
+  error.request = xhr
+  return error
+}
+
+// See XHRUpload
+function setTypeInBlob (file) {
+  const dataWithUpdatedType = file.data.slice(0, file.data.size, file.meta.type)
+  return dataWithUpdatedType
+}
+
+module.exports = class MiniXHRUpload {
+  constructor (uppy, opts) {
+    this.uppy = uppy
+    this.opts = {
+      validateStatus (status, responseText, response) {
+        return status >= 200 && status < 300
+      },
+      ...opts
+    }
+
+    this.requests = opts.__queue
+    this.uploaderEvents = Object.create(null)
+  }
+
+  _getOptions (file) {
+    const uppy = this.uppy
+
+    const overrides = uppy.getState().xhrUpload
+    const opts = {
+      ...this.opts,
+      ...(overrides || {}),
+      ...(file.xhrUpload || {}),
+      headers: {}
+    }
+    Object.assign(opts.headers, this.opts.headers)
+    if (overrides) {
+      Object.assign(opts.headers, overrides.headers)
+    }
+    if (file.xhrUpload) {
+      Object.assign(opts.headers, file.xhrUpload.headers)
+    }
+
+    return opts
+  }
+
+  uploadFile (id, current, total) {
+    const file = this.uppy.getFile(id)
+    if (file.error) {
+      throw new Error(file.error)
+    } else if (file.isRemote) {
+      return this._uploadRemoteFile(file, current, total)
+    }
+    return this._uploadLocalFile(file, current, total)
+  }
+
+  _addMetadata (formData, meta, opts) {
+    const metaFields = Array.isArray(opts.metaFields)
+      ? opts.metaFields
+      // Send along all fields by default.
+      : Object.keys(meta)
+    metaFields.forEach((item) => {
+      formData.append(item, meta[item])
+    })
+  }
+
+  _createFormDataUpload (file, opts) {
+    const formPost = new FormData()
+
+    this._addMetadata(formPost, file.meta, opts)
+
+    const dataWithUpdatedType = setTypeInBlob(file)
+
+    if (file.name) {
+      formPost.append(opts.fieldName, dataWithUpdatedType, file.meta.name)
+    } else {
+      formPost.append(opts.fieldName, dataWithUpdatedType)
+    }
+
+    return formPost
+  }
+
+  _createBareUpload (file, opts) {
+    return file.data
+  }
+
+  _onFileRemoved (fileID, cb) {
+    this.uploaderEvents[fileID].on('file-removed', (file) => {
+      if (fileID === file.id) cb(file.id)
+    })
+  }
+
+  _onRetry (fileID, cb) {
+    this.uploaderEvents[fileID].on('upload-retry', (targetFileID) => {
+      if (fileID === targetFileID) {
+        cb()
+      }
+    })
+  }
+
+  _onRetryAll (fileID, cb) {
+    this.uploaderEvents[fileID].on('retry-all', (filesToRetry) => {
+      if (!this.uppy.getFile(fileID)) return
+      cb()
+    })
+  }
+
+  _onCancelAll (fileID, cb) {
+    this.uploaderEvents[fileID].on('cancel-all', () => {
+      if (!this.uppy.getFile(fileID)) return
+      cb()
+    })
+  }
+
+  _uploadLocalFile (file, current, total) {
+    const opts = this._getOptions(file)
+
+    this.uppy.log(`uploading ${current} of ${total}`)
+    return new Promise((resolve, reject) => {
+      // This is done in index.js in the S3 plugin.
+      // this.uppy.emit('upload-started', file)
+
+      const data = opts.formData
+        ? this._createFormDataUpload(file, opts)
+        : this._createBareUpload(file, opts)
+
+      const timer = new ProgressTimeout(opts.timeout, () => {
+        xhr.abort()
+        queuedRequest.done()
+        const error = new Error(this.i18n('timedOut', { seconds: Math.ceil(opts.timeout / 1000) }))
+        this.uppy.emit('upload-error', file, error)
+        reject(error)
+      })
+
+      const xhr = new XMLHttpRequest()
+      this.uploaderEvents[file.id] = new EventTracker(this.uppy)
+
+      const id = cuid()
+
+      xhr.upload.addEventListener('loadstart', (ev) => {
+        this.uppy.log(`[AwsS3/XHRUpload] ${id} started`)
+      })
+
+      xhr.upload.addEventListener('progress', (ev) => {
+        this.uppy.log(`[AwsS3/XHRUpload] ${id} progress: ${ev.loaded} / ${ev.total}`)
+        // Begin checking for timeouts when progress starts, instead of loading,
+        // to avoid timing out requests on browser concurrency queue
+        timer.progress()
+
+        if (ev.lengthComputable) {
+          this.uppy.emit('upload-progress', file, {
+            uploader: this,
+            bytesUploaded: ev.loaded,
+            bytesTotal: ev.total
+          })
+        }
+      })
+
+      xhr.addEventListener('load', (ev) => {
+        this.uppy.log(`[AwsS3/XHRUpload] ${id} finished`)
+        timer.done()
+        queuedRequest.done()
+        if (this.uploaderEvents[file.id]) {
+          this.uploaderEvents[file.id].remove()
+          this.uploaderEvents[file.id] = null
+        }
+
+        if (opts.validateStatus(ev.target.status, xhr.responseText, xhr)) {
+          const body = opts.getResponseData(xhr.responseText, xhr)
+          const uploadURL = body[opts.responseUrlFieldName]
+
+          const uploadResp = {
+            status: ev.target.status,
+            body,
+            uploadURL
+          }
+
+          this.uppy.emit('upload-success', file, uploadResp)
+
+          if (uploadURL) {
+            this.uppy.log(`Download ${file.name} from ${uploadURL}`)
+          }
+
+          return resolve(file)
+        } else {
+          const body = opts.getResponseData(xhr.responseText, xhr)
+          const error = buildResponseError(xhr, opts.getResponseError(xhr.responseText, xhr))
+
+          const response = {
+            status: ev.target.status,
+            body
+          }
+
+          this.uppy.emit('upload-error', file, error, response)
+          return reject(error)
+        }
+      })
+
+      xhr.addEventListener('error', (ev) => {
+        this.uppy.log(`[AwsS3/XHRUpload] ${id} errored`)
+        timer.done()
+        queuedRequest.done()
+        if (this.uploaderEvents[file.id]) {
+          this.uploaderEvents[file.id].remove()
+          this.uploaderEvents[file.id] = null
+        }
+
+        const error = buildResponseError(xhr, opts.getResponseError(xhr.responseText, xhr))
+        this.uppy.emit('upload-error', file, error)
+        return reject(error)
+      })
+
+      xhr.open(opts.method.toUpperCase(), opts.endpoint, true)
+      // IE10 does not allow setting `withCredentials` and `responseType`
+      // before `open()` is called.
+      xhr.withCredentials = opts.withCredentials
+      if (opts.responseType !== '') {
+        xhr.responseType = opts.responseType
+      }
+
+      Object.keys(opts.headers).forEach((header) => {
+        xhr.setRequestHeader(header, opts.headers[header])
+      })
+
+      const queuedRequest = this.requests.run(() => {
+        xhr.send(data)
+        return () => {
+          timer.done()
+          xhr.abort()
+        }
+      }, { priority: 1 })
+
+      this._onFileRemoved(file.id, () => {
+        queuedRequest.abort()
+        reject(new Error('File removed'))
+      })
+
+      this._onCancelAll(file.id, () => {
+        queuedRequest.abort()
+        reject(new Error('Upload cancelled'))
+      })
+    })
+  }
+
+  _uploadRemoteFile (file, current, total) {
+    const opts = this._getOptions(file)
+    return new Promise((resolve, reject) => {
+      this.uppy.emit('upload-started', file)",should we leave this event emit to `index.js` as done [here](https://github.com/transloadit/uppy/pull/2060/files#diff-57355ea8780221946e05753c979ce54eR138),I don't think this is needed.
138,"@@ -0,0 +1,360 @@
+const cuid = require('cuid')
+const { Provider, RequestClient, Socket } = require('@uppy/companion-client')
+const emitSocketProgress = require('@uppy/utils/lib/emitSocketProgress')
+const getSocketHost = require('@uppy/utils/lib/getSocketHost')
+const EventTracker = require('@uppy/utils/lib/EventTracker')
+const ProgressTimeout = require('@uppy/utils/lib/ProgressTimeout')
+
+// See XHRUpload
+function buildResponseError (xhr, error) {
+  // No error message
+  if (!error) error = new Error('Upload error')
+  // Got an error message string
+  if (typeof error === 'string') error = new Error(error)
+  // Got something else
+  if (!(error instanceof Error)) {
+    error = Object.assign(new Error('Upload error'), { data: error })
+  }
+
+  error.request = xhr
+  return error
+}
+
+// See XHRUpload
+function setTypeInBlob (file) {
+  const dataWithUpdatedType = file.data.slice(0, file.data.size, file.meta.type)
+  return dataWithUpdatedType
+}
+
+module.exports = class MiniXHRUpload {
+  constructor (uppy, opts) {
+    this.uppy = uppy
+    this.opts = {
+      validateStatus (status, responseText, response) {
+        return status >= 200 && status < 300
+      },
+      ...opts
+    }
+
+    this.requests = opts.__queue
+    this.uploaderEvents = Object.create(null)
+  }
+
+  _getOptions (file) {
+    const uppy = this.uppy
+
+    const overrides = uppy.getState().xhrUpload
+    const opts = {
+      ...this.opts,
+      ...(overrides || {}),
+      ...(file.xhrUpload || {}),
+      headers: {}
+    }
+    Object.assign(opts.headers, this.opts.headers)
+    if (overrides) {
+      Object.assign(opts.headers, overrides.headers)
+    }
+    if (file.xhrUpload) {
+      Object.assign(opts.headers, file.xhrUpload.headers)
+    }
+
+    return opts
+  }
+
+  uploadFile (id, current, total) {
+    const file = this.uppy.getFile(id)
+    if (file.error) {
+      throw new Error(file.error)
+    } else if (file.isRemote) {
+      return this._uploadRemoteFile(file, current, total)
+    }
+    return this._uploadLocalFile(file, current, total)
+  }
+
+  _addMetadata (formData, meta, opts) {
+    const metaFields = Array.isArray(opts.metaFields)
+      ? opts.metaFields
+      // Send along all fields by default.
+      : Object.keys(meta)
+    metaFields.forEach((item) => {
+      formData.append(item, meta[item])
+    })
+  }
+
+  _createFormDataUpload (file, opts) {
+    const formPost = new FormData()
+
+    this._addMetadata(formPost, file.meta, opts)
+
+    const dataWithUpdatedType = setTypeInBlob(file)
+
+    if (file.name) {
+      formPost.append(opts.fieldName, dataWithUpdatedType, file.meta.name)
+    } else {
+      formPost.append(opts.fieldName, dataWithUpdatedType)
+    }
+
+    return formPost
+  }
+
+  _createBareUpload (file, opts) {
+    return file.data
+  }
+
+  _onFileRemoved (fileID, cb) {
+    this.uploaderEvents[fileID].on('file-removed', (file) => {
+      if (fileID === file.id) cb(file.id)
+    })
+  }
+
+  _onRetry (fileID, cb) {
+    this.uploaderEvents[fileID].on('upload-retry', (targetFileID) => {
+      if (fileID === targetFileID) {
+        cb()
+      }
+    })
+  }
+
+  _onRetryAll (fileID, cb) {
+    this.uploaderEvents[fileID].on('retry-all', (filesToRetry) => {
+      if (!this.uppy.getFile(fileID)) return
+      cb()
+    })
+  }
+
+  _onCancelAll (fileID, cb) {
+    this.uploaderEvents[fileID].on('cancel-all', () => {
+      if (!this.uppy.getFile(fileID)) return
+      cb()
+    })
+  }
+
+  _uploadLocalFile (file, current, total) {
+    const opts = this._getOptions(file)
+
+    this.uppy.log(`uploading ${current} of ${total}`)
+    return new Promise((resolve, reject) => {
+      // This is done in index.js in the S3 plugin.
+      // this.uppy.emit('upload-started', file)
+
+      const data = opts.formData
+        ? this._createFormDataUpload(file, opts)
+        : this._createBareUpload(file, opts)
+
+      const timer = new ProgressTimeout(opts.timeout, () => {
+        xhr.abort()
+        queuedRequest.done()
+        const error = new Error(this.i18n('timedOut', { seconds: Math.ceil(opts.timeout / 1000) }))
+        this.uppy.emit('upload-error', file, error)
+        reject(error)
+      })
+
+      const xhr = new XMLHttpRequest()
+      this.uploaderEvents[file.id] = new EventTracker(this.uppy)
+
+      const id = cuid()
+
+      xhr.upload.addEventListener('loadstart', (ev) => {
+        this.uppy.log(`[AwsS3/XHRUpload] ${id} started`)
+      })
+
+      xhr.upload.addEventListener('progress', (ev) => {
+        this.uppy.log(`[AwsS3/XHRUpload] ${id} progress: ${ev.loaded} / ${ev.total}`)
+        // Begin checking for timeouts when progress starts, instead of loading,
+        // to avoid timing out requests on browser concurrency queue
+        timer.progress()
+
+        if (ev.lengthComputable) {
+          this.uppy.emit('upload-progress', file, {
+            uploader: this,
+            bytesUploaded: ev.loaded,
+            bytesTotal: ev.total
+          })
+        }
+      })
+
+      xhr.addEventListener('load', (ev) => {
+        this.uppy.log(`[AwsS3/XHRUpload] ${id} finished`)
+        timer.done()
+        queuedRequest.done()
+        if (this.uploaderEvents[file.id]) {
+          this.uploaderEvents[file.id].remove()
+          this.uploaderEvents[file.id] = null
+        }
+
+        if (opts.validateStatus(ev.target.status, xhr.responseText, xhr)) {
+          const body = opts.getResponseData(xhr.responseText, xhr)
+          const uploadURL = body[opts.responseUrlFieldName]
+
+          const uploadResp = {
+            status: ev.target.status,
+            body,
+            uploadURL
+          }
+
+          this.uppy.emit('upload-success', file, uploadResp)
+
+          if (uploadURL) {
+            this.uppy.log(`Download ${file.name} from ${uploadURL}`)
+          }
+
+          return resolve(file)
+        } else {
+          const body = opts.getResponseData(xhr.responseText, xhr)
+          const error = buildResponseError(xhr, opts.getResponseError(xhr.responseText, xhr))
+
+          const response = {
+            status: ev.target.status,
+            body
+          }
+
+          this.uppy.emit('upload-error', file, error, response)
+          return reject(error)
+        }
+      })
+
+      xhr.addEventListener('error', (ev) => {
+        this.uppy.log(`[AwsS3/XHRUpload] ${id} errored`)
+        timer.done()
+        queuedRequest.done()
+        if (this.uploaderEvents[file.id]) {
+          this.uploaderEvents[file.id].remove()
+          this.uploaderEvents[file.id] = null
+        }
+
+        const error = buildResponseError(xhr, opts.getResponseError(xhr.responseText, xhr))
+        this.uppy.emit('upload-error', file, error)
+        return reject(error)
+      })
+
+      xhr.open(opts.method.toUpperCase(), opts.endpoint, true)
+      // IE10 does not allow setting `withCredentials` and `responseType`
+      // before `open()` is called.
+      xhr.withCredentials = opts.withCredentials
+      if (opts.responseType !== '') {
+        xhr.responseType = opts.responseType
+      }
+
+      Object.keys(opts.headers).forEach((header) => {
+        xhr.setRequestHeader(header, opts.headers[header])
+      })
+
+      const queuedRequest = this.requests.run(() => {
+        xhr.send(data)
+        return () => {
+          timer.done()
+          xhr.abort()
+        }
+      }, { priority: 1 })
+
+      this._onFileRemoved(file.id, () => {
+        queuedRequest.abort()
+        reject(new Error('File removed'))
+      })
+
+      this._onCancelAll(file.id, () => {
+        queuedRequest.abort()
+        reject(new Error('Upload cancelled'))
+      })
+    })
+  }
+
+  _uploadRemoteFile (file, current, total) {
+    const opts = this._getOptions(file)
+    return new Promise((resolve, reject) => {
+      this.uppy.emit('upload-started', file)
+
+      const fields = {}
+      const metaFields = Array.isArray(opts.metaFields)
+        ? opts.metaFields
+        // Send along all fields by default.
+        : Object.keys(file.meta)
+
+      metaFields.forEach((name) => {
+        fields[name] = file.meta[name]
+      })
+
+      const Client = file.remote.providerOptions.provider ? Provider : RequestClient
+      const client = new Client(this.uppy, file.remote.providerOptions)
+      client.post(file.remote.url, {",should we also be sending `httpMethod` here?,I don't think this is needed.
139,"@@ -0,0 +1,360 @@
+const cuid = require('cuid')
+const { Provider, RequestClient, Socket } = require('@uppy/companion-client')
+const emitSocketProgress = require('@uppy/utils/lib/emitSocketProgress')
+const getSocketHost = require('@uppy/utils/lib/getSocketHost')
+const EventTracker = require('@uppy/utils/lib/EventTracker')
+const ProgressTimeout = require('@uppy/utils/lib/ProgressTimeout')
+
+// See XHRUpload
+function buildResponseError (xhr, error) {
+  // No error message
+  if (!error) error = new Error('Upload error')
+  // Got an error message string
+  if (typeof error === 'string') error = new Error(error)
+  // Got something else
+  if (!(error instanceof Error)) {
+    error = Object.assign(new Error('Upload error'), { data: error })
+  }
+
+  error.request = xhr
+  return error
+}
+
+// See XHRUpload
+function setTypeInBlob (file) {
+  const dataWithUpdatedType = file.data.slice(0, file.data.size, file.meta.type)
+  return dataWithUpdatedType
+}
+
+module.exports = class MiniXHRUpload {
+  constructor (uppy, opts) {
+    this.uppy = uppy
+    this.opts = {
+      validateStatus (status, responseText, response) {
+        return status >= 200 && status < 300
+      },
+      ...opts
+    }
+
+    this.requests = opts.__queue
+    this.uploaderEvents = Object.create(null)
+  }
+
+  _getOptions (file) {
+    const uppy = this.uppy
+
+    const overrides = uppy.getState().xhrUpload
+    const opts = {
+      ...this.opts,
+      ...(overrides || {}),
+      ...(file.xhrUpload || {}),
+      headers: {}
+    }
+    Object.assign(opts.headers, this.opts.headers)
+    if (overrides) {
+      Object.assign(opts.headers, overrides.headers)
+    }
+    if (file.xhrUpload) {
+      Object.assign(opts.headers, file.xhrUpload.headers)
+    }
+
+    return opts
+  }
+
+  uploadFile (id, current, total) {
+    const file = this.uppy.getFile(id)
+    if (file.error) {
+      throw new Error(file.error)
+    } else if (file.isRemote) {
+      return this._uploadRemoteFile(file, current, total)
+    }
+    return this._uploadLocalFile(file, current, total)
+  }
+
+  _addMetadata (formData, meta, opts) {
+    const metaFields = Array.isArray(opts.metaFields)
+      ? opts.metaFields
+      // Send along all fields by default.
+      : Object.keys(meta)
+    metaFields.forEach((item) => {
+      formData.append(item, meta[item])
+    })
+  }
+
+  _createFormDataUpload (file, opts) {
+    const formPost = new FormData()
+
+    this._addMetadata(formPost, file.meta, opts)
+
+    const dataWithUpdatedType = setTypeInBlob(file)
+
+    if (file.name) {
+      formPost.append(opts.fieldName, dataWithUpdatedType, file.meta.name)
+    } else {
+      formPost.append(opts.fieldName, dataWithUpdatedType)
+    }
+
+    return formPost
+  }
+
+  _createBareUpload (file, opts) {
+    return file.data
+  }
+
+  _onFileRemoved (fileID, cb) {
+    this.uploaderEvents[fileID].on('file-removed', (file) => {
+      if (fileID === file.id) cb(file.id)
+    })
+  }
+
+  _onRetry (fileID, cb) {
+    this.uploaderEvents[fileID].on('upload-retry', (targetFileID) => {
+      if (fileID === targetFileID) {
+        cb()
+      }
+    })
+  }
+
+  _onRetryAll (fileID, cb) {
+    this.uploaderEvents[fileID].on('retry-all', (filesToRetry) => {
+      if (!this.uppy.getFile(fileID)) return
+      cb()
+    })
+  }
+
+  _onCancelAll (fileID, cb) {
+    this.uploaderEvents[fileID].on('cancel-all', () => {
+      if (!this.uppy.getFile(fileID)) return
+      cb()
+    })
+  }
+
+  _uploadLocalFile (file, current, total) {
+    const opts = this._getOptions(file)
+
+    this.uppy.log(`uploading ${current} of ${total}`)
+    return new Promise((resolve, reject) => {
+      // This is done in index.js in the S3 plugin.
+      // this.uppy.emit('upload-started', file)
+
+      const data = opts.formData
+        ? this._createFormDataUpload(file, opts)
+        : this._createBareUpload(file, opts)
+
+      const timer = new ProgressTimeout(opts.timeout, () => {
+        xhr.abort()
+        queuedRequest.done()
+        const error = new Error(this.i18n('timedOut', { seconds: Math.ceil(opts.timeout / 1000) }))
+        this.uppy.emit('upload-error', file, error)
+        reject(error)
+      })
+
+      const xhr = new XMLHttpRequest()
+      this.uploaderEvents[file.id] = new EventTracker(this.uppy)
+
+      const id = cuid()
+
+      xhr.upload.addEventListener('loadstart', (ev) => {
+        this.uppy.log(`[AwsS3/XHRUpload] ${id} started`)
+      })
+
+      xhr.upload.addEventListener('progress', (ev) => {
+        this.uppy.log(`[AwsS3/XHRUpload] ${id} progress: ${ev.loaded} / ${ev.total}`)
+        // Begin checking for timeouts when progress starts, instead of loading,
+        // to avoid timing out requests on browser concurrency queue
+        timer.progress()
+
+        if (ev.lengthComputable) {
+          this.uppy.emit('upload-progress', file, {
+            uploader: this,
+            bytesUploaded: ev.loaded,
+            bytesTotal: ev.total
+          })
+        }
+      })
+
+      xhr.addEventListener('load', (ev) => {
+        this.uppy.log(`[AwsS3/XHRUpload] ${id} finished`)
+        timer.done()
+        queuedRequest.done()
+        if (this.uploaderEvents[file.id]) {
+          this.uploaderEvents[file.id].remove()
+          this.uploaderEvents[file.id] = null
+        }
+
+        if (opts.validateStatus(ev.target.status, xhr.responseText, xhr)) {
+          const body = opts.getResponseData(xhr.responseText, xhr)
+          const uploadURL = body[opts.responseUrlFieldName]
+
+          const uploadResp = {
+            status: ev.target.status,
+            body,
+            uploadURL
+          }
+
+          this.uppy.emit('upload-success', file, uploadResp)
+
+          if (uploadURL) {
+            this.uppy.log(`Download ${file.name} from ${uploadURL}`)
+          }
+
+          return resolve(file)
+        } else {
+          const body = opts.getResponseData(xhr.responseText, xhr)
+          const error = buildResponseError(xhr, opts.getResponseError(xhr.responseText, xhr))
+
+          const response = {
+            status: ev.target.status,
+            body
+          }
+
+          this.uppy.emit('upload-error', file, error, response)
+          return reject(error)
+        }
+      })
+
+      xhr.addEventListener('error', (ev) => {
+        this.uppy.log(`[AwsS3/XHRUpload] ${id} errored`)
+        timer.done()
+        queuedRequest.done()
+        if (this.uploaderEvents[file.id]) {
+          this.uploaderEvents[file.id].remove()
+          this.uploaderEvents[file.id] = null
+        }
+
+        const error = buildResponseError(xhr, opts.getResponseError(xhr.responseText, xhr))
+        this.uppy.emit('upload-error', file, error)
+        return reject(error)
+      })
+
+      xhr.open(opts.method.toUpperCase(), opts.endpoint, true)
+      // IE10 does not allow setting `withCredentials` and `responseType`
+      // before `open()` is called.
+      xhr.withCredentials = opts.withCredentials
+      if (opts.responseType !== '') {
+        xhr.responseType = opts.responseType
+      }
+
+      Object.keys(opts.headers).forEach((header) => {
+        xhr.setRequestHeader(header, opts.headers[header])
+      })
+
+      const queuedRequest = this.requests.run(() => {
+        xhr.send(data)
+        return () => {
+          timer.done()
+          xhr.abort()
+        }
+      }, { priority: 1 })
+
+      this._onFileRemoved(file.id, () => {
+        queuedRequest.abort()
+        reject(new Error('File removed'))
+      })
+
+      this._onCancelAll(file.id, () => {
+        queuedRequest.abort()
+        reject(new Error('Upload cancelled'))
+      })
+    })
+  }
+
+  _uploadRemoteFile (file, current, total) {
+    const opts = this._getOptions(file)
+    return new Promise((resolve, reject) => {
+      this.uppy.emit('upload-started', file)
+
+      const fields = {}
+      const metaFields = Array.isArray(opts.metaFields)
+        ? opts.metaFields
+        // Send along all fields by default.
+        : Object.keys(file.meta)
+
+      metaFields.forEach((name) => {
+        fields[name] = file.meta[name]
+      })
+
+      const Client = file.remote.providerOptions.provider ? Provider : RequestClient
+      const client = new Client(this.uppy, file.remote.providerOptions)
+      client.post(file.remote.url, {
+        ...file.remote.body,
+        endpoint: opts.endpoint,
+        size: file.data.size,
+        fieldname: opts.fieldName,
+        metadata: fields,
+        headers: opts.headers
+      }).then((res) => {
+        const token = res.token
+        const host = getSocketHost(file.remote.companionUrl)
+        const socket = new Socket({ target: `${host}/api/${token}`, autoOpen: false })
+        this.uploaderEvents[file.id] = new EventTracker(this.uppy)
+
+        this._onFileRemoved(file.id, () => {
+          socket.send('pause', {})
+          queuedRequest.abort()
+          resolve(`upload ${file.id} was removed`)
+        })
+
+        this._onCancelAll(file.id, () => {
+          socket.send('pause', {})
+          queuedRequest.abort()
+          resolve(`upload ${file.id} was canceled`)
+        })
+
+        this._onRetry(file.id, () => {
+          socket.send('pause', {})
+          socket.send('resume', {})
+        })
+
+        this._onRetryAll(file.id, () => {
+          socket.send('pause', {})
+          socket.send('resume', {})
+        })
+
+        socket.on('progress', (progressData) => emitSocketProgress(this, progressData, file))
+
+        socket.on('success', (data) => {
+          const body = opts.getResponseData(data.response.responseText, data.response)
+          const uploadURL = body[opts.responseUrlFieldName]
+
+          const uploadResp = {
+            status: data.response.status,
+            body,
+            uploadURL
+          }
+
+          this.uppy.emit('upload-success', file, uploadResp)
+          queuedRequest.done()
+          if (this.uploaderEvents[file.id]) {
+            this.uploaderEvents[file.id].remove()
+            this.uploaderEvents[file.id] = null
+          }
+          return resolve()
+        })
+
+        socket.on('error', (errData) => {
+          const resp = errData.response
+          const error = resp
+            ? opts.getResponseError(resp.responseText, resp)
+            : Object.assign(new Error(errData.error.message), { cause: errData.error })
+          this.uppy.emit('upload-error', file, error)
+          queuedRequest.done()
+          if (this.uploaderEvents[file.id]) {
+            this.uploaderEvents[file.id].remove()
+            this.uploaderEvents[file.id] = null
+          }
+          reject(error)
+        })
+
+        const queuedRequest = this.requests.run(() => {
+          socket.open()
+          if (file.isPaused) {
+            socket.send('pause', {})
+          }
+
+          return () => socket.close()
+        })
+      })",I guess we should be doing something similar to [this](https://github.com/transloadit/uppy/blob/master/packages/%40uppy/xhr-upload/src/index.js#L434-L436) here now,I don't think this is needed.
140,"@@ -0,0 +1,374 @@
+const Writable = require('stream').Writable
+const crypto = require('crypto')
+const fdSlicer = require('fd-slicer')
+const fs = require('fs')
+
+const MAX_UPLOAD_PARTS = 10000
+
+function accumulator (start) {
+  let accum = start || 0
+  return (add = 0) => {
+    accum += add
+    return accum
+  }
+}
+
+function callWithRetry (fn, args = [], retriesLeft = 5) {
+  return fn(...args)
+    .catch((err) => {
+      if (retriesLeft > 0) {
+        return callWithRetry(fn, args, retriesLeft - 1)
+      }
+      return Promise.reject(err)
+    })
+}
+
+module.exports = class B2Stream {
+  // bucketName
+  // path
+  // fileName
+  // fileSize
+  // stream
+  // client
+  // endpointPool
+  constructor (client, options) {","if possible, it'll be nice if we can add JsDoc documentation to the modules added to this PR. Here's an [example](https://github.com/transloadit/uppy/blob/master/packages/%40uppy/companion/src/server/Uploader.js#L21-L42) of what I mean. With this, we can spot possible static errors with typescript.",I don't think this is needed.
141,"@@ -0,0 +1,374 @@
+const Writable = require('stream').Writable
+const crypto = require('crypto')
+const fdSlicer = require('fd-slicer')
+const fs = require('fs')
+
+const MAX_UPLOAD_PARTS = 10000
+
+function accumulator (start) {
+  let accum = start || 0
+  return (add = 0) => {
+    accum += add
+    return accum
+  }
+}
+
+function callWithRetry (fn, args = [], retriesLeft = 5) {
+  return fn(...args)
+    .catch((err) => {
+      if (retriesLeft > 0) {
+        return callWithRetry(fn, args, retriesLeft - 1)
+      }
+      return Promise.reject(err)
+    })
+}
+
+module.exports = class B2Stream {
+  // bucketName
+  // path
+  // fileName
+  // fileSize
+  // stream
+  // client
+  // endpointPool
+  constructor (client, options) {
+    this.options = options
+    this.client = client
+    this.onUploadProgress = ({ total, loaded }) => {
+      console.log('progress', loaded / total)",left over?,Can we remove this?
142,"@@ -0,0 +1,374 @@
+const Writable = require('stream').Writable
+const crypto = require('crypto')
+const fdSlicer = require('fd-slicer')
+const fs = require('fs')
+
+const MAX_UPLOAD_PARTS = 10000
+
+function accumulator (start) {
+  let accum = start || 0
+  return (add = 0) => {
+    accum += add
+    return accum
+  }
+}
+
+function callWithRetry (fn, args = [], retriesLeft = 5) {
+  return fn(...args)
+    .catch((err) => {
+      if (retriesLeft > 0) {
+        return callWithRetry(fn, args, retriesLeft - 1)
+      }
+      return Promise.reject(err)
+    })
+}
+
+module.exports = class B2Stream {
+  // bucketName
+  // path
+  // fileName
+  // fileSize
+  // stream
+  // client
+  // endpointPool
+  constructor (client, options) {
+    this.options = options
+    this.client = client
+    this.onUploadProgress = ({ total, loaded }) => {
+      console.log('progress', loaded / total)
+    }
+  }
+
+  getOptimalPartSize (fileSize) {
+    return this.client.preauth()
+      .then(({ recommendedPartSize }) => {
+        return Math.min(
+          Math.max(recommendedPartSize, Math.ceil(fileSize / MAX_UPLOAD_PARTS)),
+          fileSize
+        )
+      })
+  }
+
+  getBucketId (bucketName) {
+    return this.client.getCachedBucket(bucketName)
+      .then(({ bucketId }) => bucketId)
+  }
+
+  send (cb) {
+    return Promise.all([
+      this.getOptimalPartSize(this.options.fileSize),
+      this.getBucketId(this.options.bucketName)
+    ]).then(([partSize, bucketId]) => {
+      const fileSize = this.options.fileSize
+      const onUploadProgress = this.createProgressReporter(fileSize)",I vote we rename `onUploadProgress` to `progressReporter` to avoid confusion,`accum` is not used.
143,"@@ -0,0 +1,374 @@
+const Writable = require('stream').Writable
+const crypto = require('crypto')
+const fdSlicer = require('fd-slicer')
+const fs = require('fs')
+
+const MAX_UPLOAD_PARTS = 10000
+
+function accumulator (start) {
+  let accum = start || 0
+  return (add = 0) => {
+    accum += add
+    return accum
+  }
+}
+
+function callWithRetry (fn, args = [], retriesLeft = 5) {
+  return fn(...args)
+    .catch((err) => {
+      if (retriesLeft > 0) {
+        return callWithRetry(fn, args, retriesLeft - 1)
+      }
+      return Promise.reject(err)
+    })
+}
+
+module.exports = class B2Stream {
+  // bucketName
+  // path
+  // fileName
+  // fileSize
+  // stream
+  // client
+  // endpointPool
+  constructor (client, options) {
+    this.options = options
+    this.client = client
+    this.onUploadProgress = ({ total, loaded }) => {
+      console.log('progress', loaded / total)
+    }
+  }
+
+  getOptimalPartSize (fileSize) {
+    return this.client.preauth()
+      .then(({ recommendedPartSize }) => {
+        return Math.min(
+          Math.max(recommendedPartSize, Math.ceil(fileSize / MAX_UPLOAD_PARTS)),
+          fileSize
+        )
+      })
+  }
+
+  getBucketId (bucketName) {
+    return this.client.getCachedBucket(bucketName)
+      .then(({ bucketId }) => bucketId)
+  }
+
+  send (cb) {
+    return Promise.all([
+      this.getOptimalPartSize(this.options.fileSize),
+      this.getBucketId(this.options.bucketName)
+    ]).then(([partSize, bucketId]) => {
+      const fileSize = this.options.fileSize
+      const onUploadProgress = this.createProgressReporter(fileSize)
+      const isMultipart = (partSize < fileSize)
+      if (isMultipart) {
+        return this._sendMultipart(partSize, bucketId, onUploadProgress)
+      } else {
+        return this._sendSingle(partSize, bucketId, onUploadProgress)
+      }
+    })
+      .catch((err) => {
+        cb(err)
+      })
+      .then((result) => cb(null, result))","is there a reason why this is called after `catch`? 🤔 Doesn't it imply that the `callback` will be called twice (once with an error, and second time without) in the case where there's an error?",`accum` is not used.
144,"@@ -0,0 +1,374 @@
+const Writable = require('stream').Writable
+const crypto = require('crypto')
+const fdSlicer = require('fd-slicer')
+const fs = require('fs')
+
+const MAX_UPLOAD_PARTS = 10000
+
+function accumulator (start) {
+  let accum = start || 0
+  return (add = 0) => {
+    accum += add
+    return accum
+  }
+}
+
+function callWithRetry (fn, args = [], retriesLeft = 5) {
+  return fn(...args)
+    .catch((err) => {
+      if (retriesLeft > 0) {
+        return callWithRetry(fn, args, retriesLeft - 1)
+      }
+      return Promise.reject(err)
+    })
+}
+
+module.exports = class B2Stream {
+  // bucketName
+  // path
+  // fileName
+  // fileSize
+  // stream
+  // client
+  // endpointPool
+  constructor (client, options) {
+    this.options = options
+    this.client = client
+    this.onUploadProgress = ({ total, loaded }) => {
+      console.log('progress', loaded / total)
+    }
+  }
+
+  getOptimalPartSize (fileSize) {
+    return this.client.preauth()
+      .then(({ recommendedPartSize }) => {
+        return Math.min(
+          Math.max(recommendedPartSize, Math.ceil(fileSize / MAX_UPLOAD_PARTS)),
+          fileSize
+        )
+      })
+  }
+
+  getBucketId (bucketName) {
+    return this.client.getCachedBucket(bucketName)
+      .then(({ bucketId }) => bucketId)
+  }
+
+  send (cb) {
+    return Promise.all([
+      this.getOptimalPartSize(this.options.fileSize),
+      this.getBucketId(this.options.bucketName)
+    ]).then(([partSize, bucketId]) => {
+      const fileSize = this.options.fileSize
+      const onUploadProgress = this.createProgressReporter(fileSize)
+      const isMultipart = (partSize < fileSize)
+      if (isMultipart) {
+        return this._sendMultipart(partSize, bucketId, onUploadProgress)
+      } else {
+        return this._sendSingle(partSize, bucketId, onUploadProgress)
+      }
+    })
+      .catch((err) => {
+        cb(err)
+      })
+      .then((result) => cb(null, result))
+  }
+
+  createProgressReporter (total) {
+    const sent = accumulator(0)
+    return {
+      send: (bytes) => {
+        this.onUploadProgress({
+          loaded: sent(bytes),
+          total
+        })
+      }
+    }
+  }
+
+  _sendSingle (partSize, bucketId, progressReporter) {
+    const sendSinglePart = () => {
+      const { fileName, fileSize, stream, path, endpointPool } = this.options
+      const { client } = this
+      const chunks = []
+      let fileId
+      let data
+      const writerOptions = {
+        fileId: null,
+        fileName,
+        fileSize,
+        client,
+        endpointPool,
+        partSize,
+        path,
+        progressReporter,
+        handleSent: (chunk, response) => {
+          chunks[chunk.id] = { hash: chunk.hash }
+          data = response
+          fileId = response.fileId
+        }
+      }
+
+      return new Promise((resolve, reject) => {
+        try {
+          const writer = B2StreamWriter(writerOptions)","should we completely decouple `_sendSingle` from using the `B2StreamWriter`? Since it actually is a more straightforward process, then there's no need tying it to the more complex code of the `_sendMultipart `. This way, it saves us from diving into the complex code of the `B2StreamWriter` when we only want to debug or make changes to the  `_sendSingle` functionality.",`accum` is not used.
145,"@@ -0,0 +1,374 @@
+const Writable = require('stream').Writable
+const crypto = require('crypto')
+const fdSlicer = require('fd-slicer')
+const fs = require('fs')
+
+const MAX_UPLOAD_PARTS = 10000
+
+function accumulator (start) {
+  let accum = start || 0
+  return (add = 0) => {
+    accum += add
+    return accum
+  }
+}
+
+function callWithRetry (fn, args = [], retriesLeft = 5) {
+  return fn(...args)
+    .catch((err) => {
+      if (retriesLeft > 0) {
+        return callWithRetry(fn, args, retriesLeft - 1)
+      }
+      return Promise.reject(err)
+    })
+}
+
+module.exports = class B2Stream {
+  // bucketName
+  // path
+  // fileName
+  // fileSize
+  // stream
+  // client
+  // endpointPool
+  constructor (client, options) {
+    this.options = options
+    this.client = client
+    this.onUploadProgress = ({ total, loaded }) => {
+      console.log('progress', loaded / total)
+    }
+  }
+
+  getOptimalPartSize (fileSize) {
+    return this.client.preauth()
+      .then(({ recommendedPartSize }) => {
+        return Math.min(
+          Math.max(recommendedPartSize, Math.ceil(fileSize / MAX_UPLOAD_PARTS)),
+          fileSize
+        )
+      })
+  }
+
+  getBucketId (bucketName) {
+    return this.client.getCachedBucket(bucketName)
+      .then(({ bucketId }) => bucketId)
+  }
+
+  send (cb) {
+    return Promise.all([
+      this.getOptimalPartSize(this.options.fileSize),
+      this.getBucketId(this.options.bucketName)
+    ]).then(([partSize, bucketId]) => {
+      const fileSize = this.options.fileSize
+      const onUploadProgress = this.createProgressReporter(fileSize)
+      const isMultipart = (partSize < fileSize)
+      if (isMultipart) {
+        return this._sendMultipart(partSize, bucketId, onUploadProgress)
+      } else {
+        return this._sendSingle(partSize, bucketId, onUploadProgress)
+      }
+    })
+      .catch((err) => {
+        cb(err)
+      })
+      .then((result) => cb(null, result))
+  }
+
+  createProgressReporter (total) {
+    const sent = accumulator(0)
+    return {
+      send: (bytes) => {
+        this.onUploadProgress({
+          loaded: sent(bytes),
+          total
+        })
+      }
+    }
+  }
+
+  _sendSingle (partSize, bucketId, progressReporter) {
+    const sendSinglePart = () => {
+      const { fileName, fileSize, stream, path, endpointPool } = this.options
+      const { client } = this
+      const chunks = []
+      let fileId
+      let data
+      const writerOptions = {
+        fileId: null,
+        fileName,
+        fileSize,
+        client,
+        endpointPool,
+        partSize,
+        path,
+        progressReporter,
+        handleSent: (chunk, response) => {
+          chunks[chunk.id] = { hash: chunk.hash }
+          data = response
+          fileId = response.fileId
+        }
+      }
+
+      return new Promise((resolve, reject) => {
+        try {
+          const writer = B2StreamWriter(writerOptions)
+          stream.pipe(writer)
+          writer.on('finish', () => {
+            resolve({ chunks, fileId, data })
+          })
+        } catch (err) {
+          reject(err)
+        }
+      })
+    }
+
+    return callWithRetry(sendSinglePart)
+  }
+
+  _sendMultipart (partSize, bucketId, progressReporter) {
+    const sendMultipartStartLargeFile = () => {
+      const { fileName } = this.options
+      return this.client.startLargeFile({ bucketId, fileName })
+        .then(({ data }) => data)
+    }
+
+    const sendMultipartUploadParts = (startLargeFileResponse) => {
+      const { fileName, fileSize, stream, path, endpointPool } = this.options
+      const { client } = this
+      const { fileId } = startLargeFileResponse
+      const chunks = []
+      const writerOptions = {
+        fileId,
+        fileName,
+        fileSize,
+        client,
+        endpointPool,
+        partSize,
+        path,
+        progressReporter,
+        handleSent: (chunk, response) => {
+          chunks[chunk.id] = { hash: chunk.hash }
+        }
+      }
+
+      return new Promise((resolve, reject) => {
+        try {
+          const writer = B2StreamWriter(writerOptions)
+          stream.pipe(writer)
+          writer.on('finish', () => {
+            resolve({ chunks, fileId })
+          })
+        } catch (err) {
+          reject(err)
+        }
+      })
+    }
+
+    const sendMultipartFinishLargeFile = (uploadStartResult, uploadPartsResult) => {
+      const { chunks, fileId } = uploadPartsResult
+      const partSha1Array = chunks.map(({ hash }) => hash)
+      return this.client.finishLargeFile({ fileId, partSha1Array })
+        .then(({ data }) => ({
+          chunks,
+          data,
+          fileId
+        }))
+    }
+
+    return callWithRetry(sendMultipartStartLargeFile)
+      .then((startResult) => sendMultipartUploadParts(startResult)
+        .then((partsResult) => callWithRetry(sendMultipartFinishLargeFile, [startResult, partsResult]))
+      )
+      .catch((err) => {
+        throw err
+      })
+  }
+}
+
+function createSlicerFromPath (path) {
+  return new Promise((resolve, reject) => {
+    fs.open(path, 'r', (err, fd) => {
+      if (err) {
+        reject(err)
+      }
+      const slicer = fdSlicer.createFromFd(fd)
+      resolve({ slicer, fd })
+    })
+  })
+}
+
+function createStreamHashSHA1 (slicer, start, end) {
+  const hasher = crypto.createHash('sha1')
+  hasher.setEncoding('hex')
+
+  return new Promise((resolve, reject) => {
+    slicer.createReadStream({ start, end })
+      .on('end', () => {
+        hasher.end()
+        const hash = hasher.read()
+        resolve(hash)
+      })
+      .pipe(hasher)
+  })
+}
+
+function closeFileDescriptorAsync (fd) {
+  return new Promise((resolve, reject) => {
+    fs.close(fd, (err) => {
+      if (err) {
+        reject(err)
+        return
+      }
+      resolve(fd)
+    })
+  })
+}
+
+function B2StreamWriter (options) {",should we rename this to `b2StreamWriter`? or `getB2StreamWriter`? I got a bit misled thinking it was a class. Perhaps  it's better to avoid that confusion?,`accum` is not used.
146,"@@ -0,0 +1,374 @@
+const Writable = require('stream').Writable
+const crypto = require('crypto')
+const fdSlicer = require('fd-slicer')
+const fs = require('fs')
+
+const MAX_UPLOAD_PARTS = 10000
+
+function accumulator (start) {
+  let accum = start || 0
+  return (add = 0) => {
+    accum += add
+    return accum
+  }
+}
+
+function callWithRetry (fn, args = [], retriesLeft = 5) {
+  return fn(...args)
+    .catch((err) => {
+      if (retriesLeft > 0) {
+        return callWithRetry(fn, args, retriesLeft - 1)
+      }
+      return Promise.reject(err)
+    })
+}
+
+module.exports = class B2Stream {
+  // bucketName
+  // path
+  // fileName
+  // fileSize
+  // stream
+  // client
+  // endpointPool
+  constructor (client, options) {
+    this.options = options
+    this.client = client
+    this.onUploadProgress = ({ total, loaded }) => {
+      console.log('progress', loaded / total)
+    }
+  }
+
+  getOptimalPartSize (fileSize) {
+    return this.client.preauth()
+      .then(({ recommendedPartSize }) => {
+        return Math.min(
+          Math.max(recommendedPartSize, Math.ceil(fileSize / MAX_UPLOAD_PARTS)),
+          fileSize
+        )
+      })
+  }
+
+  getBucketId (bucketName) {
+    return this.client.getCachedBucket(bucketName)
+      .then(({ bucketId }) => bucketId)
+  }
+
+  send (cb) {
+    return Promise.all([
+      this.getOptimalPartSize(this.options.fileSize),
+      this.getBucketId(this.options.bucketName)
+    ]).then(([partSize, bucketId]) => {
+      const fileSize = this.options.fileSize
+      const onUploadProgress = this.createProgressReporter(fileSize)
+      const isMultipart = (partSize < fileSize)
+      if (isMultipart) {
+        return this._sendMultipart(partSize, bucketId, onUploadProgress)
+      } else {
+        return this._sendSingle(partSize, bucketId, onUploadProgress)
+      }
+    })
+      .catch((err) => {
+        cb(err)
+      })
+      .then((result) => cb(null, result))
+  }
+
+  createProgressReporter (total) {
+    const sent = accumulator(0)
+    return {
+      send: (bytes) => {
+        this.onUploadProgress({
+          loaded: sent(bytes),
+          total
+        })
+      }
+    }
+  }
+
+  _sendSingle (partSize, bucketId, progressReporter) {
+    const sendSinglePart = () => {
+      const { fileName, fileSize, stream, path, endpointPool } = this.options
+      const { client } = this
+      const chunks = []
+      let fileId
+      let data
+      const writerOptions = {
+        fileId: null,
+        fileName,
+        fileSize,
+        client,
+        endpointPool,
+        partSize,
+        path,
+        progressReporter,
+        handleSent: (chunk, response) => {
+          chunks[chunk.id] = { hash: chunk.hash }
+          data = response
+          fileId = response.fileId
+        }
+      }
+
+      return new Promise((resolve, reject) => {
+        try {
+          const writer = B2StreamWriter(writerOptions)
+          stream.pipe(writer)
+          writer.on('finish', () => {
+            resolve({ chunks, fileId, data })
+          })
+        } catch (err) {
+          reject(err)
+        }
+      })
+    }
+
+    return callWithRetry(sendSinglePart)
+  }
+
+  _sendMultipart (partSize, bucketId, progressReporter) {
+    const sendMultipartStartLargeFile = () => {
+      const { fileName } = this.options
+      return this.client.startLargeFile({ bucketId, fileName })
+        .then(({ data }) => data)
+    }
+
+    const sendMultipartUploadParts = (startLargeFileResponse) => {
+      const { fileName, fileSize, stream, path, endpointPool } = this.options
+      const { client } = this
+      const { fileId } = startLargeFileResponse
+      const chunks = []
+      const writerOptions = {
+        fileId,
+        fileName,
+        fileSize,
+        client,
+        endpointPool,
+        partSize,
+        path,
+        progressReporter,
+        handleSent: (chunk, response) => {
+          chunks[chunk.id] = { hash: chunk.hash }
+        }
+      }
+
+      return new Promise((resolve, reject) => {
+        try {
+          const writer = B2StreamWriter(writerOptions)
+          stream.pipe(writer)
+          writer.on('finish', () => {
+            resolve({ chunks, fileId })
+          })
+        } catch (err) {
+          reject(err)
+        }
+      })
+    }
+
+    const sendMultipartFinishLargeFile = (uploadStartResult, uploadPartsResult) => {
+      const { chunks, fileId } = uploadPartsResult
+      const partSha1Array = chunks.map(({ hash }) => hash)
+      return this.client.finishLargeFile({ fileId, partSha1Array })
+        .then(({ data }) => ({
+          chunks,
+          data,
+          fileId
+        }))
+    }
+
+    return callWithRetry(sendMultipartStartLargeFile)
+      .then((startResult) => sendMultipartUploadParts(startResult)
+        .then((partsResult) => callWithRetry(sendMultipartFinishLargeFile, [startResult, partsResult]))
+      )
+      .catch((err) => {
+        throw err
+      })
+  }
+}
+
+function createSlicerFromPath (path) {
+  return new Promise((resolve, reject) => {
+    fs.open(path, 'r', (err, fd) => {
+      if (err) {
+        reject(err)
+      }
+      const slicer = fdSlicer.createFromFd(fd)
+      resolve({ slicer, fd })
+    })
+  })
+}
+
+function createStreamHashSHA1 (slicer, start, end) {
+  const hasher = crypto.createHash('sha1')
+  hasher.setEncoding('hex')
+
+  return new Promise((resolve, reject) => {
+    slicer.createReadStream({ start, end })
+      .on('end', () => {
+        hasher.end()
+        const hash = hasher.read()
+        resolve(hash)
+      })
+      .pipe(hasher)
+  })
+}
+
+function closeFileDescriptorAsync (fd) {
+  return new Promise((resolve, reject) => {
+    fs.close(fd, (err) => {
+      if (err) {
+        reject(err)
+        return
+      }
+      resolve(fd)
+    })
+  })
+}
+
+function B2StreamWriter (options) {
+  const { fileName, fileSize, partSize, path, endpointPool, fileId, client, progressReporter } = options
+  const { connections = 3 } = options
+  const isMultipart = !!fileId // fileId is present when first obtained via startLargeFile()
+  const fdSlicer = createSlicerFromPath(path)","while reviewing, I found this variable shadowing (with [this one](https://github.com/transloadit/uppy/pull/1933/files#diff-a2701fda284f857def20dd049d248e6fR3)) confusing. Maybe we should rename one of them?",`accum` is not used.
147,"@@ -0,0 +1,374 @@
+const Writable = require('stream').Writable
+const crypto = require('crypto')
+const fdSlicer = require('fd-slicer')
+const fs = require('fs')
+
+const MAX_UPLOAD_PARTS = 10000
+
+function accumulator (start) {
+  let accum = start || 0
+  return (add = 0) => {
+    accum += add
+    return accum
+  }
+}
+
+function callWithRetry (fn, args = [], retriesLeft = 5) {
+  return fn(...args)
+    .catch((err) => {
+      if (retriesLeft > 0) {
+        return callWithRetry(fn, args, retriesLeft - 1)
+      }
+      return Promise.reject(err)
+    })
+}
+
+module.exports = class B2Stream {
+  // bucketName
+  // path
+  // fileName
+  // fileSize
+  // stream
+  // client
+  // endpointPool
+  constructor (client, options) {
+    this.options = options
+    this.client = client
+    this.onUploadProgress = ({ total, loaded }) => {
+      console.log('progress', loaded / total)
+    }
+  }
+
+  getOptimalPartSize (fileSize) {
+    return this.client.preauth()
+      .then(({ recommendedPartSize }) => {
+        return Math.min(
+          Math.max(recommendedPartSize, Math.ceil(fileSize / MAX_UPLOAD_PARTS)),
+          fileSize
+        )
+      })
+  }
+
+  getBucketId (bucketName) {
+    return this.client.getCachedBucket(bucketName)
+      .then(({ bucketId }) => bucketId)
+  }
+
+  send (cb) {
+    return Promise.all([
+      this.getOptimalPartSize(this.options.fileSize),
+      this.getBucketId(this.options.bucketName)
+    ]).then(([partSize, bucketId]) => {
+      const fileSize = this.options.fileSize
+      const onUploadProgress = this.createProgressReporter(fileSize)
+      const isMultipart = (partSize < fileSize)
+      if (isMultipart) {
+        return this._sendMultipart(partSize, bucketId, onUploadProgress)
+      } else {
+        return this._sendSingle(partSize, bucketId, onUploadProgress)
+      }
+    })
+      .catch((err) => {
+        cb(err)
+      })
+      .then((result) => cb(null, result))
+  }
+
+  createProgressReporter (total) {
+    const sent = accumulator(0)
+    return {
+      send: (bytes) => {
+        this.onUploadProgress({
+          loaded: sent(bytes),
+          total
+        })
+      }
+    }
+  }
+
+  _sendSingle (partSize, bucketId, progressReporter) {
+    const sendSinglePart = () => {
+      const { fileName, fileSize, stream, path, endpointPool } = this.options
+      const { client } = this
+      const chunks = []
+      let fileId
+      let data
+      const writerOptions = {
+        fileId: null,
+        fileName,
+        fileSize,
+        client,
+        endpointPool,
+        partSize,
+        path,
+        progressReporter,
+        handleSent: (chunk, response) => {
+          chunks[chunk.id] = { hash: chunk.hash }
+          data = response
+          fileId = response.fileId
+        }
+      }
+
+      return new Promise((resolve, reject) => {
+        try {
+          const writer = B2StreamWriter(writerOptions)
+          stream.pipe(writer)
+          writer.on('finish', () => {
+            resolve({ chunks, fileId, data })
+          })
+        } catch (err) {
+          reject(err)
+        }
+      })
+    }
+
+    return callWithRetry(sendSinglePart)
+  }
+
+  _sendMultipart (partSize, bucketId, progressReporter) {
+    const sendMultipartStartLargeFile = () => {
+      const { fileName } = this.options
+      return this.client.startLargeFile({ bucketId, fileName })
+        .then(({ data }) => data)
+    }
+
+    const sendMultipartUploadParts = (startLargeFileResponse) => {
+      const { fileName, fileSize, stream, path, endpointPool } = this.options
+      const { client } = this
+      const { fileId } = startLargeFileResponse
+      const chunks = []
+      const writerOptions = {
+        fileId,
+        fileName,
+        fileSize,
+        client,
+        endpointPool,
+        partSize,
+        path,
+        progressReporter,
+        handleSent: (chunk, response) => {
+          chunks[chunk.id] = { hash: chunk.hash }
+        }
+      }
+
+      return new Promise((resolve, reject) => {
+        try {
+          const writer = B2StreamWriter(writerOptions)
+          stream.pipe(writer)
+          writer.on('finish', () => {
+            resolve({ chunks, fileId })
+          })
+        } catch (err) {
+          reject(err)
+        }
+      })
+    }
+
+    const sendMultipartFinishLargeFile = (uploadStartResult, uploadPartsResult) => {
+      const { chunks, fileId } = uploadPartsResult
+      const partSha1Array = chunks.map(({ hash }) => hash)
+      return this.client.finishLargeFile({ fileId, partSha1Array })
+        .then(({ data }) => ({
+          chunks,
+          data,
+          fileId
+        }))
+    }
+
+    return callWithRetry(sendMultipartStartLargeFile)
+      .then((startResult) => sendMultipartUploadParts(startResult)
+        .then((partsResult) => callWithRetry(sendMultipartFinishLargeFile, [startResult, partsResult]))
+      )
+      .catch((err) => {
+        throw err
+      })
+  }
+}
+
+function createSlicerFromPath (path) {
+  return new Promise((resolve, reject) => {
+    fs.open(path, 'r', (err, fd) => {
+      if (err) {
+        reject(err)
+      }
+      const slicer = fdSlicer.createFromFd(fd)
+      resolve({ slicer, fd })
+    })
+  })
+}
+
+function createStreamHashSHA1 (slicer, start, end) {
+  const hasher = crypto.createHash('sha1')
+  hasher.setEncoding('hex')
+
+  return new Promise((resolve, reject) => {
+    slicer.createReadStream({ start, end })
+      .on('end', () => {
+        hasher.end()
+        const hash = hasher.read()
+        resolve(hash)
+      })
+      .pipe(hasher)
+  })
+}
+
+function closeFileDescriptorAsync (fd) {
+  return new Promise((resolve, reject) => {
+    fs.close(fd, (err) => {
+      if (err) {
+        reject(err)
+        return
+      }
+      resolve(fd)
+    })
+  })
+}
+
+function B2StreamWriter (options) {
+  const { fileName, fileSize, partSize, path, endpointPool, fileId, client, progressReporter } = options
+  const { connections = 3 } = options
+  const isMultipart = !!fileId // fileId is present when first obtained via startLargeFile()
+  const fdSlicer = createSlicerFromPath(path)
+  const workers = []
+  const queue = []
+
+  let bytesRead = 0 // total bytes received
+  let partAccum = 0 // total bytes in the current part which have been processed
+  let partCount = 0 // number of emitted parts
+
+  const pendingWriteDrain = () => {
+    // If we have pending onwrite()s queued and we're under the maximum number
+    // of transmit workers...
+    if (queue.length && workers.length < connections) {
+      const cb = queue.shift()
+      cb() // signal that we're ready for more data
+    }
+  }
+
+  const pendingWriteHandler = (onwrite) => {
+    queue.push(onwrite)
+    pendingWriteDrain()
+  }
+
+  const emitPart = (writableStream) => {
+    // start and end correspond to the partAccum length section of bytes at the
+    // tail of the read stream.
+    const start = bytesRead - partAccum
+    const end = bytesRead
+    const id = partCount++
+    const contentLength = end - start
+    partAccum = 0
+
+    // Create a stream slice of this part's range and run it through hasher.
+    const partHashResult = () =>","should we as well make this multiline (with curly braces)?
`const partHashResult = () => {...}` 
might help with readability",`accum` is not used.
148,"@@ -0,0 +1,374 @@
+const Writable = require('stream').Writable
+const crypto = require('crypto')
+const fdSlicer = require('fd-slicer')
+const fs = require('fs')
+
+const MAX_UPLOAD_PARTS = 10000
+
+function accumulator (start) {
+  let accum = start || 0
+  return (add = 0) => {
+    accum += add
+    return accum
+  }
+}
+
+function callWithRetry (fn, args = [], retriesLeft = 5) {
+  return fn(...args)
+    .catch((err) => {
+      if (retriesLeft > 0) {
+        return callWithRetry(fn, args, retriesLeft - 1)
+      }
+      return Promise.reject(err)
+    })
+}
+
+module.exports = class B2Stream {
+  // bucketName
+  // path
+  // fileName
+  // fileSize
+  // stream
+  // client
+  // endpointPool
+  constructor (client, options) {
+    this.options = options
+    this.client = client
+    this.onUploadProgress = ({ total, loaded }) => {
+      console.log('progress', loaded / total)
+    }
+  }
+
+  getOptimalPartSize (fileSize) {
+    return this.client.preauth()
+      .then(({ recommendedPartSize }) => {
+        return Math.min(
+          Math.max(recommendedPartSize, Math.ceil(fileSize / MAX_UPLOAD_PARTS)),
+          fileSize
+        )
+      })
+  }
+
+  getBucketId (bucketName) {
+    return this.client.getCachedBucket(bucketName)
+      .then(({ bucketId }) => bucketId)
+  }
+
+  send (cb) {
+    return Promise.all([
+      this.getOptimalPartSize(this.options.fileSize),
+      this.getBucketId(this.options.bucketName)
+    ]).then(([partSize, bucketId]) => {
+      const fileSize = this.options.fileSize
+      const onUploadProgress = this.createProgressReporter(fileSize)
+      const isMultipart = (partSize < fileSize)
+      if (isMultipart) {
+        return this._sendMultipart(partSize, bucketId, onUploadProgress)
+      } else {
+        return this._sendSingle(partSize, bucketId, onUploadProgress)
+      }
+    })
+      .catch((err) => {
+        cb(err)
+      })
+      .then((result) => cb(null, result))
+  }
+
+  createProgressReporter (total) {
+    const sent = accumulator(0)
+    return {
+      send: (bytes) => {
+        this.onUploadProgress({
+          loaded: sent(bytes),
+          total
+        })
+      }
+    }
+  }
+
+  _sendSingle (partSize, bucketId, progressReporter) {
+    const sendSinglePart = () => {
+      const { fileName, fileSize, stream, path, endpointPool } = this.options
+      const { client } = this
+      const chunks = []
+      let fileId
+      let data
+      const writerOptions = {
+        fileId: null,
+        fileName,
+        fileSize,
+        client,
+        endpointPool,
+        partSize,
+        path,
+        progressReporter,
+        handleSent: (chunk, response) => {
+          chunks[chunk.id] = { hash: chunk.hash }
+          data = response
+          fileId = response.fileId
+        }
+      }
+
+      return new Promise((resolve, reject) => {
+        try {
+          const writer = B2StreamWriter(writerOptions)
+          stream.pipe(writer)
+          writer.on('finish', () => {
+            resolve({ chunks, fileId, data })
+          })
+        } catch (err) {
+          reject(err)
+        }
+      })
+    }
+
+    return callWithRetry(sendSinglePart)
+  }
+
+  _sendMultipart (partSize, bucketId, progressReporter) {
+    const sendMultipartStartLargeFile = () => {
+      const { fileName } = this.options
+      return this.client.startLargeFile({ bucketId, fileName })
+        .then(({ data }) => data)
+    }
+
+    const sendMultipartUploadParts = (startLargeFileResponse) => {
+      const { fileName, fileSize, stream, path, endpointPool } = this.options
+      const { client } = this
+      const { fileId } = startLargeFileResponse
+      const chunks = []
+      const writerOptions = {
+        fileId,
+        fileName,
+        fileSize,
+        client,
+        endpointPool,
+        partSize,
+        path,
+        progressReporter,
+        handleSent: (chunk, response) => {
+          chunks[chunk.id] = { hash: chunk.hash }
+        }
+      }
+
+      return new Promise((resolve, reject) => {
+        try {
+          const writer = B2StreamWriter(writerOptions)
+          stream.pipe(writer)
+          writer.on('finish', () => {
+            resolve({ chunks, fileId })
+          })
+        } catch (err) {
+          reject(err)
+        }
+      })
+    }
+
+    const sendMultipartFinishLargeFile = (uploadStartResult, uploadPartsResult) => {
+      const { chunks, fileId } = uploadPartsResult
+      const partSha1Array = chunks.map(({ hash }) => hash)
+      return this.client.finishLargeFile({ fileId, partSha1Array })
+        .then(({ data }) => ({
+          chunks,
+          data,
+          fileId
+        }))
+    }
+
+    return callWithRetry(sendMultipartStartLargeFile)
+      .then((startResult) => sendMultipartUploadParts(startResult)
+        .then((partsResult) => callWithRetry(sendMultipartFinishLargeFile, [startResult, partsResult]))
+      )
+      .catch((err) => {
+        throw err
+      })
+  }
+}
+
+function createSlicerFromPath (path) {
+  return new Promise((resolve, reject) => {
+    fs.open(path, 'r', (err, fd) => {
+      if (err) {
+        reject(err)
+      }
+      const slicer = fdSlicer.createFromFd(fd)
+      resolve({ slicer, fd })
+    })
+  })
+}
+
+function createStreamHashSHA1 (slicer, start, end) {
+  const hasher = crypto.createHash('sha1')
+  hasher.setEncoding('hex')
+
+  return new Promise((resolve, reject) => {
+    slicer.createReadStream({ start, end })
+      .on('end', () => {
+        hasher.end()
+        const hash = hasher.read()
+        resolve(hash)
+      })
+      .pipe(hasher)
+  })
+}
+
+function closeFileDescriptorAsync (fd) {
+  return new Promise((resolve, reject) => {
+    fs.close(fd, (err) => {
+      if (err) {
+        reject(err)
+        return
+      }
+      resolve(fd)
+    })
+  })
+}
+
+function B2StreamWriter (options) {
+  const { fileName, fileSize, partSize, path, endpointPool, fileId, client, progressReporter } = options
+  const { connections = 3 } = options
+  const isMultipart = !!fileId // fileId is present when first obtained via startLargeFile()
+  const fdSlicer = createSlicerFromPath(path)
+  const workers = []
+  const queue = []
+
+  let bytesRead = 0 // total bytes received
+  let partAccum = 0 // total bytes in the current part which have been processed
+  let partCount = 0 // number of emitted parts
+
+  const pendingWriteDrain = () => {
+    // If we have pending onwrite()s queued and we're under the maximum number
+    // of transmit workers...
+    if (queue.length && workers.length < connections) {
+      const cb = queue.shift()
+      cb() // signal that we're ready for more data
+    }
+  }
+
+  const pendingWriteHandler = (onwrite) => {
+    queue.push(onwrite)
+    pendingWriteDrain()
+  }
+
+  const emitPart = (writableStream) => {
+    // start and end correspond to the partAccum length section of bytes at the
+    // tail of the read stream.
+    const start = bytesRead - partAccum
+    const end = bytesRead
+    const id = partCount++
+    const contentLength = end - start
+    partAccum = 0
+
+    // Create a stream slice of this part's range and run it through hasher.
+    const partHashResult = () =>
+      fdSlicer.then(({ slicer }) => {
+        return createStreamHashSHA1(slicer, start, end)
+      })
+
+    // Attempt transmitting the stream data for this part to the
+    // appropriate B2 endpoint.
+    const attemptPartTransmission = (hash, slicer) => {
+      return endpointPool.acquire(fileId)
+        .then((endpoint) => {
+          const { authorizationToken, uploadUrl } = endpoint
+          const partStream = slicer.createReadStream({ start, end })
+          let transmit = null
+          if (isMultipart) {
+            transmit = client.uploadPart({
+              uploadUrl,
+              uploadAuthToken: authorizationToken,
+              data: partStream,
+              hash,
+              contentLength,
+              partNumber: id + 1 // b2 part numbers start a 1
+            })
+          } else {
+            transmit = client.uploadFile({
+              uploadUrl,
+              uploadAuthToken: authorizationToken,
+              fileName,
+              data: partStream,
+              hash,
+              contentLength
+            })
+          }
+          // only release endpoint back to the pool if it was last used
+          // successfully.
+          transmit.then(() => endpointPool.release(endpoint))
+          transmit.catch(() => { partStream.destroy() })",should we be logging the error here? 🤔 So we know why there's a failure? We can use the `logger` module like it's done [here](https://github.com/transloadit/uppy/blob/master/packages/%40uppy/companion/src/server/Uploader.js#L415).,`accum` is not used.
149,"@@ -0,0 +1,374 @@
+const Writable = require('stream').Writable
+const crypto = require('crypto')
+const fdSlicer = require('fd-slicer')
+const fs = require('fs')
+
+const MAX_UPLOAD_PARTS = 10000
+
+function accumulator (start) {
+  let accum = start || 0
+  return (add = 0) => {
+    accum += add
+    return accum
+  }
+}
+
+function callWithRetry (fn, args = [], retriesLeft = 5) {
+  return fn(...args)
+    .catch((err) => {
+      if (retriesLeft > 0) {
+        return callWithRetry(fn, args, retriesLeft - 1)
+      }
+      return Promise.reject(err)
+    })
+}
+
+module.exports = class B2Stream {
+  // bucketName
+  // path
+  // fileName
+  // fileSize
+  // stream
+  // client
+  // endpointPool
+  constructor (client, options) {
+    this.options = options
+    this.client = client
+    this.onUploadProgress = ({ total, loaded }) => {
+      console.log('progress', loaded / total)
+    }
+  }
+
+  getOptimalPartSize (fileSize) {
+    return this.client.preauth()
+      .then(({ recommendedPartSize }) => {
+        return Math.min(
+          Math.max(recommendedPartSize, Math.ceil(fileSize / MAX_UPLOAD_PARTS)),
+          fileSize
+        )
+      })
+  }
+
+  getBucketId (bucketName) {
+    return this.client.getCachedBucket(bucketName)
+      .then(({ bucketId }) => bucketId)
+  }
+
+  send (cb) {
+    return Promise.all([
+      this.getOptimalPartSize(this.options.fileSize),
+      this.getBucketId(this.options.bucketName)
+    ]).then(([partSize, bucketId]) => {
+      const fileSize = this.options.fileSize
+      const onUploadProgress = this.createProgressReporter(fileSize)
+      const isMultipart = (partSize < fileSize)
+      if (isMultipart) {
+        return this._sendMultipart(partSize, bucketId, onUploadProgress)
+      } else {
+        return this._sendSingle(partSize, bucketId, onUploadProgress)
+      }
+    })
+      .catch((err) => {
+        cb(err)
+      })
+      .then((result) => cb(null, result))
+  }
+
+  createProgressReporter (total) {
+    const sent = accumulator(0)
+    return {
+      send: (bytes) => {
+        this.onUploadProgress({
+          loaded: sent(bytes),
+          total
+        })
+      }
+    }
+  }
+
+  _sendSingle (partSize, bucketId, progressReporter) {
+    const sendSinglePart = () => {
+      const { fileName, fileSize, stream, path, endpointPool } = this.options
+      const { client } = this
+      const chunks = []
+      let fileId
+      let data
+      const writerOptions = {
+        fileId: null,
+        fileName,
+        fileSize,
+        client,
+        endpointPool,
+        partSize,
+        path,
+        progressReporter,
+        handleSent: (chunk, response) => {
+          chunks[chunk.id] = { hash: chunk.hash }
+          data = response
+          fileId = response.fileId
+        }
+      }
+
+      return new Promise((resolve, reject) => {
+        try {
+          const writer = B2StreamWriter(writerOptions)
+          stream.pipe(writer)
+          writer.on('finish', () => {
+            resolve({ chunks, fileId, data })
+          })
+        } catch (err) {
+          reject(err)
+        }
+      })
+    }
+
+    return callWithRetry(sendSinglePart)
+  }
+
+  _sendMultipart (partSize, bucketId, progressReporter) {
+    const sendMultipartStartLargeFile = () => {
+      const { fileName } = this.options
+      return this.client.startLargeFile({ bucketId, fileName })
+        .then(({ data }) => data)
+    }
+
+    const sendMultipartUploadParts = (startLargeFileResponse) => {
+      const { fileName, fileSize, stream, path, endpointPool } = this.options
+      const { client } = this
+      const { fileId } = startLargeFileResponse
+      const chunks = []
+      const writerOptions = {
+        fileId,
+        fileName,
+        fileSize,
+        client,
+        endpointPool,
+        partSize,
+        path,
+        progressReporter,
+        handleSent: (chunk, response) => {
+          chunks[chunk.id] = { hash: chunk.hash }
+        }
+      }
+
+      return new Promise((resolve, reject) => {
+        try {
+          const writer = B2StreamWriter(writerOptions)
+          stream.pipe(writer)
+          writer.on('finish', () => {
+            resolve({ chunks, fileId })
+          })
+        } catch (err) {
+          reject(err)
+        }
+      })
+    }
+
+    const sendMultipartFinishLargeFile = (uploadStartResult, uploadPartsResult) => {
+      const { chunks, fileId } = uploadPartsResult
+      const partSha1Array = chunks.map(({ hash }) => hash)
+      return this.client.finishLargeFile({ fileId, partSha1Array })
+        .then(({ data }) => ({
+          chunks,
+          data,
+          fileId
+        }))
+    }
+
+    return callWithRetry(sendMultipartStartLargeFile)
+      .then((startResult) => sendMultipartUploadParts(startResult)
+        .then((partsResult) => callWithRetry(sendMultipartFinishLargeFile, [startResult, partsResult]))
+      )
+      .catch((err) => {
+        throw err
+      })
+  }
+}
+
+function createSlicerFromPath (path) {
+  return new Promise((resolve, reject) => {
+    fs.open(path, 'r', (err, fd) => {
+      if (err) {
+        reject(err)
+      }
+      const slicer = fdSlicer.createFromFd(fd)
+      resolve({ slicer, fd })
+    })
+  })
+}
+
+function createStreamHashSHA1 (slicer, start, end) {
+  const hasher = crypto.createHash('sha1')
+  hasher.setEncoding('hex')
+
+  return new Promise((resolve, reject) => {
+    slicer.createReadStream({ start, end })
+      .on('end', () => {
+        hasher.end()
+        const hash = hasher.read()
+        resolve(hash)
+      })
+      .pipe(hasher)
+  })
+}
+
+function closeFileDescriptorAsync (fd) {
+  return new Promise((resolve, reject) => {
+    fs.close(fd, (err) => {
+      if (err) {
+        reject(err)
+        return
+      }
+      resolve(fd)
+    })
+  })
+}
+
+function B2StreamWriter (options) {
+  const { fileName, fileSize, partSize, path, endpointPool, fileId, client, progressReporter } = options
+  const { connections = 3 } = options
+  const isMultipart = !!fileId // fileId is present when first obtained via startLargeFile()
+  const fdSlicer = createSlicerFromPath(path)
+  const workers = []
+  const queue = []
+
+  let bytesRead = 0 // total bytes received
+  let partAccum = 0 // total bytes in the current part which have been processed
+  let partCount = 0 // number of emitted parts
+
+  const pendingWriteDrain = () => {
+    // If we have pending onwrite()s queued and we're under the maximum number
+    // of transmit workers...
+    if (queue.length && workers.length < connections) {
+      const cb = queue.shift()
+      cb() // signal that we're ready for more data
+    }
+  }
+
+  const pendingWriteHandler = (onwrite) => {
+    queue.push(onwrite)
+    pendingWriteDrain()
+  }
+
+  const emitPart = (writableStream) => {
+    // start and end correspond to the partAccum length section of bytes at the
+    // tail of the read stream.
+    const start = bytesRead - partAccum
+    const end = bytesRead
+    const id = partCount++
+    const contentLength = end - start
+    partAccum = 0
+
+    // Create a stream slice of this part's range and run it through hasher.
+    const partHashResult = () =>
+      fdSlicer.then(({ slicer }) => {
+        return createStreamHashSHA1(slicer, start, end)
+      })
+
+    // Attempt transmitting the stream data for this part to the
+    // appropriate B2 endpoint.
+    const attemptPartTransmission = (hash, slicer) => {
+      return endpointPool.acquire(fileId)
+        .then((endpoint) => {
+          const { authorizationToken, uploadUrl } = endpoint
+          const partStream = slicer.createReadStream({ start, end })
+          let transmit = null
+          if (isMultipart) {
+            transmit = client.uploadPart({
+              uploadUrl,
+              uploadAuthToken: authorizationToken,
+              data: partStream,
+              hash,
+              contentLength,
+              partNumber: id + 1 // b2 part numbers start a 1
+            })
+          } else {
+            transmit = client.uploadFile({
+              uploadUrl,
+              uploadAuthToken: authorizationToken,
+              fileName,
+              data: partStream,
+              hash,
+              contentLength
+            })
+          }
+          // only release endpoint back to the pool if it was last used
+          // successfully.
+          transmit.then(() => endpointPool.release(endpoint))
+          transmit.catch(() => { partStream.destroy() })
+          return transmit
+        })
+    }
+
+    const transmit = Promise.all([
+      partHashResult(),
+      fdSlicer
+    ]).then(([hash, { slicer }]) =>
+      callWithRetry(attemptPartTransmission, [hash, slicer])
+        .then(({ data }) => {","based on this [line](https://github.com/transloadit/uppy/pull/1933/files#diff-a2701fda284f857def20dd049d248e6fR297), is it possible that the data resolved here may be what is receive from `endpointPool.release`, which in this case is not desired? 🤔 ",`accum` is not used.
150,"@@ -0,0 +1,374 @@
+const Writable = require('stream').Writable
+const crypto = require('crypto')
+const fdSlicer = require('fd-slicer')
+const fs = require('fs')
+
+const MAX_UPLOAD_PARTS = 10000
+
+function accumulator (start) {
+  let accum = start || 0
+  return (add = 0) => {
+    accum += add
+    return accum
+  }
+}
+
+function callWithRetry (fn, args = [], retriesLeft = 5) {
+  return fn(...args)
+    .catch((err) => {
+      if (retriesLeft > 0) {
+        return callWithRetry(fn, args, retriesLeft - 1)
+      }
+      return Promise.reject(err)
+    })
+}
+
+module.exports = class B2Stream {
+  // bucketName
+  // path
+  // fileName
+  // fileSize
+  // stream
+  // client
+  // endpointPool
+  constructor (client, options) {
+    this.options = options
+    this.client = client
+    this.onUploadProgress = ({ total, loaded }) => {
+      console.log('progress', loaded / total)
+    }
+  }
+
+  getOptimalPartSize (fileSize) {
+    return this.client.preauth()
+      .then(({ recommendedPartSize }) => {
+        return Math.min(
+          Math.max(recommendedPartSize, Math.ceil(fileSize / MAX_UPLOAD_PARTS)),
+          fileSize
+        )
+      })
+  }
+
+  getBucketId (bucketName) {
+    return this.client.getCachedBucket(bucketName)
+      .then(({ bucketId }) => bucketId)
+  }
+
+  send (cb) {
+    return Promise.all([
+      this.getOptimalPartSize(this.options.fileSize),
+      this.getBucketId(this.options.bucketName)
+    ]).then(([partSize, bucketId]) => {
+      const fileSize = this.options.fileSize
+      const onUploadProgress = this.createProgressReporter(fileSize)
+      const isMultipart = (partSize < fileSize)
+      if (isMultipart) {
+        return this._sendMultipart(partSize, bucketId, onUploadProgress)
+      } else {
+        return this._sendSingle(partSize, bucketId, onUploadProgress)
+      }
+    })
+      .catch((err) => {
+        cb(err)
+      })
+      .then((result) => cb(null, result))
+  }
+
+  createProgressReporter (total) {
+    const sent = accumulator(0)
+    return {
+      send: (bytes) => {
+        this.onUploadProgress({
+          loaded: sent(bytes),
+          total
+        })
+      }
+    }
+  }
+
+  _sendSingle (partSize, bucketId, progressReporter) {
+    const sendSinglePart = () => {
+      const { fileName, fileSize, stream, path, endpointPool } = this.options
+      const { client } = this
+      const chunks = []
+      let fileId
+      let data
+      const writerOptions = {
+        fileId: null,
+        fileName,
+        fileSize,
+        client,
+        endpointPool,
+        partSize,
+        path,
+        progressReporter,
+        handleSent: (chunk, response) => {
+          chunks[chunk.id] = { hash: chunk.hash }
+          data = response
+          fileId = response.fileId
+        }
+      }
+
+      return new Promise((resolve, reject) => {
+        try {
+          const writer = B2StreamWriter(writerOptions)
+          stream.pipe(writer)
+          writer.on('finish', () => {
+            resolve({ chunks, fileId, data })
+          })
+        } catch (err) {
+          reject(err)
+        }
+      })
+    }
+
+    return callWithRetry(sendSinglePart)
+  }
+
+  _sendMultipart (partSize, bucketId, progressReporter) {
+    const sendMultipartStartLargeFile = () => {
+      const { fileName } = this.options
+      return this.client.startLargeFile({ bucketId, fileName })
+        .then(({ data }) => data)
+    }
+
+    const sendMultipartUploadParts = (startLargeFileResponse) => {
+      const { fileName, fileSize, stream, path, endpointPool } = this.options
+      const { client } = this
+      const { fileId } = startLargeFileResponse
+      const chunks = []
+      const writerOptions = {
+        fileId,
+        fileName,
+        fileSize,
+        client,
+        endpointPool,
+        partSize,
+        path,
+        progressReporter,
+        handleSent: (chunk, response) => {
+          chunks[chunk.id] = { hash: chunk.hash }
+        }
+      }
+
+      return new Promise((resolve, reject) => {
+        try {
+          const writer = B2StreamWriter(writerOptions)
+          stream.pipe(writer)
+          writer.on('finish', () => {
+            resolve({ chunks, fileId })
+          })
+        } catch (err) {
+          reject(err)
+        }
+      })
+    }
+
+    const sendMultipartFinishLargeFile = (uploadStartResult, uploadPartsResult) => {
+      const { chunks, fileId } = uploadPartsResult
+      const partSha1Array = chunks.map(({ hash }) => hash)
+      return this.client.finishLargeFile({ fileId, partSha1Array })
+        .then(({ data }) => ({
+          chunks,
+          data,
+          fileId
+        }))
+    }
+
+    return callWithRetry(sendMultipartStartLargeFile)
+      .then((startResult) => sendMultipartUploadParts(startResult)
+        .then((partsResult) => callWithRetry(sendMultipartFinishLargeFile, [startResult, partsResult]))
+      )
+      .catch((err) => {
+        throw err
+      })
+  }
+}
+
+function createSlicerFromPath (path) {
+  return new Promise((resolve, reject) => {
+    fs.open(path, 'r', (err, fd) => {
+      if (err) {
+        reject(err)
+      }
+      const slicer = fdSlicer.createFromFd(fd)
+      resolve({ slicer, fd })
+    })
+  })
+}
+
+function createStreamHashSHA1 (slicer, start, end) {
+  const hasher = crypto.createHash('sha1')
+  hasher.setEncoding('hex')
+
+  return new Promise((resolve, reject) => {
+    slicer.createReadStream({ start, end })
+      .on('end', () => {
+        hasher.end()
+        const hash = hasher.read()
+        resolve(hash)
+      })
+      .pipe(hasher)
+  })
+}
+
+function closeFileDescriptorAsync (fd) {
+  return new Promise((resolve, reject) => {
+    fs.close(fd, (err) => {
+      if (err) {
+        reject(err)
+        return
+      }
+      resolve(fd)
+    })
+  })
+}
+
+function B2StreamWriter (options) {
+  const { fileName, fileSize, partSize, path, endpointPool, fileId, client, progressReporter } = options
+  const { connections = 3 } = options
+  const isMultipart = !!fileId // fileId is present when first obtained via startLargeFile()
+  const fdSlicer = createSlicerFromPath(path)
+  const workers = []
+  const queue = []
+
+  let bytesRead = 0 // total bytes received
+  let partAccum = 0 // total bytes in the current part which have been processed
+  let partCount = 0 // number of emitted parts
+
+  const pendingWriteDrain = () => {
+    // If we have pending onwrite()s queued and we're under the maximum number
+    // of transmit workers...
+    if (queue.length && workers.length < connections) {
+      const cb = queue.shift()
+      cb() // signal that we're ready for more data
+    }
+  }
+
+  const pendingWriteHandler = (onwrite) => {
+    queue.push(onwrite)
+    pendingWriteDrain()
+  }
+
+  const emitPart = (writableStream) => {
+    // start and end correspond to the partAccum length section of bytes at the
+    // tail of the read stream.
+    const start = bytesRead - partAccum
+    const end = bytesRead
+    const id = partCount++
+    const contentLength = end - start
+    partAccum = 0
+
+    // Create a stream slice of this part's range and run it through hasher.
+    const partHashResult = () =>
+      fdSlicer.then(({ slicer }) => {
+        return createStreamHashSHA1(slicer, start, end)
+      })
+
+    // Attempt transmitting the stream data for this part to the
+    // appropriate B2 endpoint.
+    const attemptPartTransmission = (hash, slicer) => {
+      return endpointPool.acquire(fileId)
+        .then((endpoint) => {
+          const { authorizationToken, uploadUrl } = endpoint
+          const partStream = slicer.createReadStream({ start, end })
+          let transmit = null
+          if (isMultipart) {
+            transmit = client.uploadPart({
+              uploadUrl,
+              uploadAuthToken: authorizationToken,
+              data: partStream,
+              hash,
+              contentLength,
+              partNumber: id + 1 // b2 part numbers start a 1
+            })
+          } else {
+            transmit = client.uploadFile({
+              uploadUrl,
+              uploadAuthToken: authorizationToken,
+              fileName,
+              data: partStream,
+              hash,
+              contentLength
+            })
+          }
+          // only release endpoint back to the pool if it was last used
+          // successfully.
+          transmit.then(() => endpointPool.release(endpoint))
+          transmit.catch(() => { partStream.destroy() })
+          return transmit
+        })
+    }
+
+    const transmit = Promise.all([
+      partHashResult(),
+      fdSlicer
+    ]).then(([hash, { slicer }]) =>
+      callWithRetry(attemptPartTransmission, [hash, slicer])
+        .then(({ data }) => {
+          if (options.handleSent) {
+            options.handleSent({ id, hash }, data)
+          }
+          return data
+        })
+    ).then((data) => {
+      // After a successful transmission, remove this
+      // part transmission promise from the worker array
+      const index = workers.indexOf(transmit)
+      workers.splice(index, 1)
+
+      // Keep the stream moving
+      pendingWriteDrain()
+      return data
+    })
+
+    // Push this transmission promise into the pending worker queue
+    workers.push(transmit)
+    return transmit
+  }
+
+  let handledCounter = 0
+
+  return new Writable({","would it be possible to move the core of the `multipart` implementation to the [b2 client](https://github.com/yakovkhalinsky/backblaze-b2) itself? I'm talking about the parts of the implementation that requires slicing the files, and reading the streams in parts, etc. It seems like a heavy duty that we'll be taking to maintain this on companion along with all the other features that are already supported.

And since this is possibly a desired functionality by other Backblaze users, maybe it makes sense to make it re-usable/available in the [b2 client](https://github.com/yakovkhalinsky/backblaze-b2) instead? Aka submit a PR to that repo?",`accum` is not used.
151,"@@ -0,0 +1,374 @@
+const Writable = require('stream').Writable
+const crypto = require('crypto')
+const fdSlicer = require('fd-slicer')
+const fs = require('fs')
+
+const MAX_UPLOAD_PARTS = 10000
+
+function accumulator (start) {
+  let accum = start || 0
+  return (add = 0) => {
+    accum += add
+    return accum
+  }
+}
+
+function callWithRetry (fn, args = [], retriesLeft = 5) {
+  return fn(...args)
+    .catch((err) => {
+      if (retriesLeft > 0) {
+        return callWithRetry(fn, args, retriesLeft - 1)
+      }
+      return Promise.reject(err)
+    })
+}
+
+module.exports = class B2Stream {
+  // bucketName
+  // path
+  // fileName
+  // fileSize
+  // stream
+  // client
+  // endpointPool
+  constructor (client, options) {
+    this.options = options
+    this.client = client
+    this.onUploadProgress = ({ total, loaded }) => {
+      console.log('progress', loaded / total)
+    }
+  }
+
+  getOptimalPartSize (fileSize) {
+    return this.client.preauth()
+      .then(({ recommendedPartSize }) => {
+        return Math.min(
+          Math.max(recommendedPartSize, Math.ceil(fileSize / MAX_UPLOAD_PARTS)),
+          fileSize
+        )
+      })
+  }
+
+  getBucketId (bucketName) {
+    return this.client.getCachedBucket(bucketName)
+      .then(({ bucketId }) => bucketId)
+  }
+
+  send (cb) {
+    return Promise.all([
+      this.getOptimalPartSize(this.options.fileSize),
+      this.getBucketId(this.options.bucketName)
+    ]).then(([partSize, bucketId]) => {
+      const fileSize = this.options.fileSize
+      const onUploadProgress = this.createProgressReporter(fileSize)
+      const isMultipart = (partSize < fileSize)
+      if (isMultipart) {
+        return this._sendMultipart(partSize, bucketId, onUploadProgress)
+      } else {
+        return this._sendSingle(partSize, bucketId, onUploadProgress)
+      }
+    })
+      .catch((err) => {
+        cb(err)
+      })
+      .then((result) => cb(null, result))
+  }
+
+  createProgressReporter (total) {
+    const sent = accumulator(0)
+    return {
+      send: (bytes) => {
+        this.onUploadProgress({
+          loaded: sent(bytes),
+          total
+        })
+      }
+    }
+  }
+
+  _sendSingle (partSize, bucketId, progressReporter) {
+    const sendSinglePart = () => {
+      const { fileName, fileSize, stream, path, endpointPool } = this.options
+      const { client } = this
+      const chunks = []
+      let fileId
+      let data
+      const writerOptions = {
+        fileId: null,
+        fileName,
+        fileSize,
+        client,
+        endpointPool,
+        partSize,
+        path,
+        progressReporter,
+        handleSent: (chunk, response) => {
+          chunks[chunk.id] = { hash: chunk.hash }
+          data = response
+          fileId = response.fileId
+        }
+      }
+
+      return new Promise((resolve, reject) => {
+        try {
+          const writer = B2StreamWriter(writerOptions)
+          stream.pipe(writer)
+          writer.on('finish', () => {
+            resolve({ chunks, fileId, data })
+          })
+        } catch (err) {
+          reject(err)
+        }
+      })
+    }
+
+    return callWithRetry(sendSinglePart)
+  }
+
+  _sendMultipart (partSize, bucketId, progressReporter) {
+    const sendMultipartStartLargeFile = () => {
+      const { fileName } = this.options
+      return this.client.startLargeFile({ bucketId, fileName })
+        .then(({ data }) => data)
+    }
+
+    const sendMultipartUploadParts = (startLargeFileResponse) => {
+      const { fileName, fileSize, stream, path, endpointPool } = this.options
+      const { client } = this
+      const { fileId } = startLargeFileResponse
+      const chunks = []
+      const writerOptions = {
+        fileId,
+        fileName,
+        fileSize,
+        client,
+        endpointPool,
+        partSize,
+        path,
+        progressReporter,
+        handleSent: (chunk, response) => {
+          chunks[chunk.id] = { hash: chunk.hash }
+        }
+      }
+
+      return new Promise((resolve, reject) => {
+        try {
+          const writer = B2StreamWriter(writerOptions)
+          stream.pipe(writer)
+          writer.on('finish', () => {
+            resolve({ chunks, fileId })
+          })
+        } catch (err) {
+          reject(err)
+        }
+      })
+    }
+
+    const sendMultipartFinishLargeFile = (uploadStartResult, uploadPartsResult) => {
+      const { chunks, fileId } = uploadPartsResult
+      const partSha1Array = chunks.map(({ hash }) => hash)
+      return this.client.finishLargeFile({ fileId, partSha1Array })
+        .then(({ data }) => ({
+          chunks,
+          data,
+          fileId
+        }))
+    }
+
+    return callWithRetry(sendMultipartStartLargeFile)
+      .then((startResult) => sendMultipartUploadParts(startResult)
+        .then((partsResult) => callWithRetry(sendMultipartFinishLargeFile, [startResult, partsResult]))
+      )
+      .catch((err) => {
+        throw err
+      })
+  }
+}
+
+function createSlicerFromPath (path) {
+  return new Promise((resolve, reject) => {
+    fs.open(path, 'r', (err, fd) => {
+      if (err) {
+        reject(err)
+      }
+      const slicer = fdSlicer.createFromFd(fd)
+      resolve({ slicer, fd })
+    })
+  })
+}
+
+function createStreamHashSHA1 (slicer, start, end) {
+  const hasher = crypto.createHash('sha1')
+  hasher.setEncoding('hex')
+
+  return new Promise((resolve, reject) => {
+    slicer.createReadStream({ start, end })
+      .on('end', () => {
+        hasher.end()
+        const hash = hasher.read()
+        resolve(hash)
+      })
+      .pipe(hasher)
+  })
+}
+
+function closeFileDescriptorAsync (fd) {
+  return new Promise((resolve, reject) => {
+    fs.close(fd, (err) => {
+      if (err) {
+        reject(err)
+        return
+      }
+      resolve(fd)
+    })
+  })
+}
+
+function B2StreamWriter (options) {
+  const { fileName, fileSize, partSize, path, endpointPool, fileId, client, progressReporter } = options
+  const { connections = 3 } = options
+  const isMultipart = !!fileId // fileId is present when first obtained via startLargeFile()
+  const fdSlicer = createSlicerFromPath(path)
+  const workers = []
+  const queue = []
+
+  let bytesRead = 0 // total bytes received
+  let partAccum = 0 // total bytes in the current part which have been processed
+  let partCount = 0 // number of emitted parts
+
+  const pendingWriteDrain = () => {
+    // If we have pending onwrite()s queued and we're under the maximum number
+    // of transmit workers...
+    if (queue.length && workers.length < connections) {
+      const cb = queue.shift()
+      cb() // signal that we're ready for more data
+    }
+  }
+
+  const pendingWriteHandler = (onwrite) => {
+    queue.push(onwrite)
+    pendingWriteDrain()
+  }
+
+  const emitPart = (writableStream) => {
+    // start and end correspond to the partAccum length section of bytes at the
+    // tail of the read stream.
+    const start = bytesRead - partAccum
+    const end = bytesRead
+    const id = partCount++
+    const contentLength = end - start
+    partAccum = 0
+
+    // Create a stream slice of this part's range and run it through hasher.
+    const partHashResult = () =>
+      fdSlicer.then(({ slicer }) => {
+        return createStreamHashSHA1(slicer, start, end)
+      })
+
+    // Attempt transmitting the stream data for this part to the
+    // appropriate B2 endpoint.
+    const attemptPartTransmission = (hash, slicer) => {
+      return endpointPool.acquire(fileId)
+        .then((endpoint) => {
+          const { authorizationToken, uploadUrl } = endpoint
+          const partStream = slicer.createReadStream({ start, end })
+          let transmit = null
+          if (isMultipart) {
+            transmit = client.uploadPart({
+              uploadUrl,
+              uploadAuthToken: authorizationToken,
+              data: partStream,
+              hash,
+              contentLength,
+              partNumber: id + 1 // b2 part numbers start a 1
+            })
+          } else {
+            transmit = client.uploadFile({
+              uploadUrl,
+              uploadAuthToken: authorizationToken,
+              fileName,
+              data: partStream,
+              hash,
+              contentLength
+            })
+          }
+          // only release endpoint back to the pool if it was last used
+          // successfully.
+          transmit.then(() => endpointPool.release(endpoint))
+          transmit.catch(() => { partStream.destroy() })
+          return transmit
+        })
+    }
+
+    const transmit = Promise.all([
+      partHashResult(),
+      fdSlicer
+    ]).then(([hash, { slicer }]) =>
+      callWithRetry(attemptPartTransmission, [hash, slicer])
+        .then(({ data }) => {
+          if (options.handleSent) {
+            options.handleSent({ id, hash }, data)
+          }
+          return data
+        })
+    ).then((data) => {
+      // After a successful transmission, remove this
+      // part transmission promise from the worker array
+      const index = workers.indexOf(transmit)
+      workers.splice(index, 1)
+
+      // Keep the stream moving
+      pendingWriteDrain()
+      return data
+    })
+
+    // Push this transmission promise into the pending worker queue
+    workers.push(transmit)
+    return transmit
+  }
+
+  let handledCounter = 0
+
+  return new Writable({
+    write: function (chunk, _, cb) {
+      const chunkLength = chunk.length
+      let remaining = chunkLength
+      while (remaining > 0) {
+        const maxRead = Math.min(remaining, partSize - partAccum)
+        remaining -= maxRead
+        partAccum += maxRead
+        bytesRead += maxRead
+        // If we've received an entire part worth of data, then
+        // we will emit a new transmit job
+        if (partAccum === partSize) {
+          emitPart(this)
+        }
+      }
+
+      // handle the callback (now or later)
+      pendingWriteHandler(() => {
+        progressReporter.send(chunkLength)
+        handledCounter += chunkLength
+        cb()
+        // Sometimes when the file is very small, the read stream end event
+        // must occur before the pipe begins? This ensures we wrap up once
+        // we've processed all the bytes we've been expecting.
+        if (handledCounter === fileSize) {
+          this.end()
+        }
+      })
+    },
+    final: function (cb) {
+      if (partAccum > 0) {
+        emitPart(this)
+      }
+      // Wait on all workers to finish
+      Promise.all(workers)
+        .then(() => fdSlicer.then(({ fd }) => fd))
+        .then((fd) => closeFileDescriptorAsync(fd))
+        .then((fd) => {
+          cb()","what should happen if any of the promises throw an error? Should we be catching like this as well?
```js
.catch((err) => cb(err))
```",`accum` is not used.
152,"@@ -0,0 +1,38 @@
+import Core from '../../src/core/index.js'
+import russian from '../../src/locales/ru_RU.js'","should we be using `import` here if everywhere else we are using `require`? IT probably works because Babel, and maybe its fine, but thought I’d bring it up.",
153,"@@ -0,0 +1,38 @@
+import Core from '../../src/core/index.js'
+import russian from '../../src/locales/ru_RU.js'
+import english from '../../src/locales/en_US.js'
+","Locale files are probably outdates, because locale settings are per-plugin now. Not a major issue, but just to keep this in mind :)",This file should be 
154,"@@ -0,0 +1,38 @@
+name: Companion Deploy
+on:
+  push:
+    branches: [master]
+
+jobs:
+  docker:
+    name: DockerHub
+    runs-on: ubuntu-latest
+    steps:
+      - name: Checkout sources
+        uses: actions/checkout@v2
+      - name: Log in to DockerHub
+        uses: docker/login-action@v1
+        with:
+          username: ${{secrets.DOCKER_USERNAME}}
+          password: ${{secrets.DOCKER_PASSWORD}}
+      - name: Build and push
+        uses: docker/build-push-action@v2
+        with:
+          context: packages/@uppy/companion
+          file: packages/@uppy/companion/Dockerfile
+          # TODO add a companion version tag if this is a ""Release"" commit",I think there was a fix for it a few months ago that made releases work. I could add it if you're cool with that :pray: ,I don't think we nee
155,"@@ -0,0 +1,39 @@
+---
+title: ""Day 30""
+date: 2019-04-24
+author: kvz
+image: ""https://uppy.io/images/blog/30daystoliftoff/day30.jpg""
+series: 30 Days to Liftoff
+seriesSuffix: 'of 30'
+---
+
+And then there were none! Zero days left in our thirty-day blog post challenge. I can't believe this is already the final day of our push to get Uppy to 1.0. There's still a bunch of things that we'd like to finish before shipping, so let's dive right in.
+
+<center><br /><img width=""400"" src=""/images/blog/30daystoliftoff/day30.jpg""><br /><br /></center>
+
+<!--more-->
+
+- [Tim](https://github.com/tim-kos) added additional information to the [migration guide](https://uppy.io/docs/robodog/form/#Migrating-From-the-jQuery-SDK), so Transloadit customers looking to move from the jQuery SDK to Uppy Robodog will have an easier time doing so. He also smashed out the [German Locale Pack](https://github.com/transloadit/uppy/pull/1475)!
+
+- [Abdel](https://github.com/kiloreux) [translated](https://github.com/transloadit/uppy/pull/1481) Uppy to French. <img src=""https://avatars1.githubusercontent.com/u/20061212?s=460&v=4"" width=""16"" align=""absmiddle"">
+
+- [Artur](https://github.com/arturi) [documented](https://github.com/transloadit/uppy/pull/1468) the Thumbnail Generator plugin and made a few more hardcoded English strings translatable via Locale Packs. For instance, we can even translate ""[Powered By](https://github.com/transloadit/uppy/commit/6d36309b72b62e215caa172a6300a0f0c7083ce8)"" now 
+",incorrect quotes around “powered by” and in a few other places,I'm not sure if this
156,"@@ -0,0 +1,40 @@
+# @uppy/dropbox",we might need to change all the occurrences of `dropbox` here to `zoom`,
157,"@@ -0,0 +1,40 @@
+---
+title: ""Day 10""
+date: 2019-04-04
+author: tyler
+image: ""https://uppy.io/images/blog/30daystoliftoff/day10.jpg""
+series: 30 Days to Liftoff
+seriesSuffix: 'of 30'
+---
+
+Today marks the tenth day in our 30 Days to Liftoff! **April 25** is still in our sights as we work towards the **Uppy 1.0** release. The end of the working week is almost upon us but there's no sign of slowing down yet.  
+
+<center><img width=""400"" src=""/images/blog/30daystoliftoff/day10.jpg""><br /></center>
+
+Things are looking good on our project board and the team has been working on tasks at a steady pace. A quick status update will give us a little insight into how things are going concerning all things Uppy.
+
+<!--more-->
+
+## In Progress
+
+- [Alex](https://github.com/nqst) and Artur are debugging [flickering on Drag & Drop](https://github.com/transloadit/uppy/pull/1400) that Chrome and Safari suffer from. Fingers crossed for a solution!
+",and Evgenia,I don't think we nee
158,"@@ -0,0 +1,40 @@
+---
+title: ""Day 10""
+date: 2019-04-04
+author: tyler
+image: ""https://uppy.io/images/blog/30daystoliftoff/day10.jpg""
+series: 30 Days to Liftoff
+seriesSuffix: 'of 30'
+---
+
+Today marks the tenth day in our 30 Days to Liftoff! **April 25** is still in our sights as we work towards the **Uppy 1.0** release. The end of the working week is almost upon us but there's no sign of slowing down yet.  
+
+<center><img width=""400"" src=""/images/blog/30daystoliftoff/day10.jpg""><br /></center>
+
+Things are looking good on our project board and the team has been working on tasks at a steady pace. A quick status update will give us a little insight into how things are going concerning all things Uppy.
+
+<!--more-->
+
+## In Progress
+
+- [Alex](https://github.com/nqst) and Artur are debugging [flickering on Drag & Drop](https://github.com/transloadit/uppy/pull/1400) that Chrome and Safari suffer from. Fingers crossed for a solution!
+
+- [Artur](https://github.com/arturi), working on the React Native side of things, has impressively added [file previews and tested hashes with different file types](https://github.com/transloadit/uppy/pull/988). He hopes to do a release once some testing is complete. In addition the React Native team has reschedulded their pair programming session to Friday, so expect some pretty significant updates tomorrow!
+","Release is not a result of those particular changes, so maybe “after that he is panning to move on to releasing a new version of uppy”",I think this should 
159,"@@ -0,0 +1,40 @@
+.uploaded-files{","```suggestion
.uploaded-files {
```",
160,"@@ -0,0 +1,40 @@
+.uploaded-files{
+  background: rgba(240, 238, 238, 0.35);
+  padding: 10px;
+  margin-top: 10px;
+  border-radius: 5px;
+  h5 {
+    margin: 0;
+    font-size: 15px;
+    color: rgb(114, 114, 114);
+    font-weight: 500;
+  }
+  ol {
+    color: rgb(55, 55, 55);
+    margin: 0;
+    padding-left: 18px;
+    li {
+      font-size: 15px;
+      padding-top: 10px;
+      word-break: break-all;
+      a {
+        color: rgb(34, 117, 215);
+        &:hover {
+          color: rgb(34, 117, 215);
+          border-bottom: 1px solid rgb(34, 117, 215);
+        }
+      }
+    }
+  }
+}
+
+// Prettier progress bar
+.uppy-ProgressBar-inner {
+  box-shadow: none !important;",I wonder if we should change the progress bar to only add the shadow when `fixed: true`?,This should be `.uppy-ProgressBar-inner {`
161,"@@ -0,0 +1,40 @@
+.uploaded-files{
+  background: rgba(240, 238, 238, 0.35);
+  padding: 10px;
+  margin-top: 10px;
+  border-radius: 5px;
+  h5 {
+    margin: 0;
+    font-size: 15px;
+    color: rgb(114, 114, 114);
+    font-weight: 500;
+  }
+  ol {
+    color: rgb(55, 55, 55);
+    margin: 0;
+    padding-left: 18px;
+    li {
+      font-size: 15px;
+      padding-top: 10px;
+      word-break: break-all;
+      a {
+        color: rgb(34, 117, 215);
+        &:hover {
+          color: rgb(34, 117, 215);
+          border-bottom: 1px solid rgb(34, 117, 215);
+        }
+      }
+    }
+  }
+}
+
+// Prettier progress bar
+.uppy-ProgressBar-inner {
+  box-shadow: none !important;
+}
+
+// Prettier focus for the 'Choose files' button
+.uppy-FileInput-btn:focus{","```suggestion
.uppy-FileInput-btn:focus {
```",Missing space before opening brace.
162,"@@ -0,0 +1,41 @@
+{
+  ""name"": ""@uppy/svelte"",
+  ""svelte"": ""src/index.js"",
+  ""module"": ""dist/index.mjs"",
+  ""main"": ""dist/index.js"",
+  ""version"": ""0.1.0"",
+  ""scripts"": {
+    ""build"": ""rollup -c"",
+    ""prepublishOnly"": ""npm run build"",
+    ""validate"": ""svelte-check""
+  },
+  ""devDependencies"": {
+    ""@rollup/plugin-node-resolve"": ""^9.0.0"",
+    ""@tsconfig/svelte"": ""^1.0.0"",
+    ""@uppy/core"": ""file:../../@uppy/core"",
+    ""rollup"": ""^2.0.0"",
+    ""rollup-plugin-svelte"": ""^6.0.0"",
+    ""svelte"": ""^3.0.0"",
+    ""svelte-check"": ""^1.0.0"",
+    ""svelte-preprocess"": ""^4.0.0"",
+    ""tslib"": ""^2.0.0"",
+    ""typescript"": ""^3.9.3""","Maybe we should move everything to root package.json, so it’s installed with root `npm install`?",I think this should be `^2.0.0`
163,"@@ -0,0 +1,41 @@
+{
+  ""name"": ""@uppy/svelte"",
+  ""svelte"": ""src/index.js"",
+  ""module"": ""dist/index.mjs"",
+  ""main"": ""dist/index.js"",
+  ""version"": ""0.1.0"",
+  ""scripts"": {
+    ""build"": ""rollup -c"",
+    ""prepublishOnly"": ""npm run build"",
+    ""validate"": ""svelte-check""
+  },
+  ""devDependencies"": {
+    ""@rollup/plugin-node-resolve"": ""^9.0.0"",
+    ""@tsconfig/svelte"": ""^1.0.0"",
+    ""@uppy/core"": ""file:../../@uppy/core"",
+    ""rollup"": ""^2.0.0"",
+    ""rollup-plugin-svelte"": ""^6.0.0"",
+    ""svelte"": ""^3.0.0"",
+    ""svelte-check"": ""^1.0.0"",
+    ""svelte-preprocess"": ""^4.0.0"",
+    ""tslib"": ""^2.0.0"",
+    ""typescript"": ""^3.9.3""
+  },
+  ""dependencies"": {
+    ""@uppy/dashboard"": ""1.13.0"",
+    ""@uppy/drag-drop"": ""^1.4.18"",
+    ""@uppy/progress-bar"": ""^1.3.18"",
+    ""@uppy/status-bar"": ""1.8.0""
+  },
+  ""peerDependencies"": {
+    ""@uppy/core"": "">=^1.0.0"",
+    ""svelte"": ""^3.0.0""
+  },","```suggestion
  },
  ""publishConfig"": {
    ""access"": ""public""
  },
```",I think this should be `^2.0.0`
164,"@@ -0,0 +1,42 @@
+/* global browser, expect, capabilities, $ */
+const path = require('path')
+const { selectFakeFile, supportsChooseFile } = require('../utils')
+
+const testURL = 'http://localhost:4567/transloadit'
+
+function unhideTheInput () {
+  var input = document.querySelector('#uppy-transloadit .uppy-Dashboard-input')
+  input.removeAttribute('hidden')
+  input.removeAttribute('aria-hidden')
+  input.removeAttribute('tabindex')
+}
+
+function setTransloaditKeyAndInit (transloaditKey) {
+  window.initUppyTransloadit(transloaditKey)
+}
+
+describe('Transloadit file processing', () => {
+  beforeEach(() => {
+    browser.url(testURL)
+    browser.execute(setTransloaditKeyAndInit, process.env.TRANSLOADIT_KEY)","We could skip this test if TRANSLOADIT_KEY is not available, so users don't have to set it up to run integration tests when they aren't actually changing anything Transloadit related. See eg the provider tests:

https://github.com/transloadit/uppy/blob/007504cefc12289cc6d4173b5fe6483ff03c1b53/test/endtoend/providers/test.js#L11-L14

I think we could do the check inside a `before(function () {})` section, calling `this.skip()` there should skip the entire test.",nit: `browser.execute(setTransloaditKeyAnd
165,"@@ -0,0 +1,42 @@
+/* global browser, expect, capabilities, $ */
+const path = require('path')
+const { selectFakeFile, supportsChooseFile } = require('../utils')
+
+const testURL = 'http://localhost:4567/transloadit'
+
+function unhideTheInput () {
+  var input = document.querySelector('#uppy-transloadit .uppy-Dashboard-input')
+  input.removeAttribute('hidden')
+  input.removeAttribute('aria-hidden')
+  input.removeAttribute('tabindex')
+}
+
+function setTransloaditKeyAndInit (transloaditKey) {
+  window.initUppyTransloadit(transloaditKey)
+}
+
+describe('Transloadit file processing', () => {
+  beforeEach(() => {
+    browser.url(testURL)
+    browser.execute(setTransloaditKeyAndInit, process.env.TRANSLOADIT_KEY)
+  })
+
+  it('should upload a file to Transloadit and crop it', () => {
+    const inputPath = '#uppy-transloadit .uppy-Dashboard-input'
+    const resultPath = '#uppy-result'
+
+    $(inputPath).waitForExist()
+
+    if (supportsChooseFile(capabilities)) {
+      browser.execute(unhideTheInput)
+      browser.chooseFile(inputPath, path.join(__dirname, '../../resources/image.jpg'))
+    } else {
+      browser.execute(selectFakeFile, 'uppyTransloadit')
+    }
+    browser.pause(15000)
+    // $('.uppy-StatusBar-actionBtn--upload').click()
+    // $(resultPath).waitForExist()","it would be nice to avoid the hardcoded time here…did `waitForExist()` not work?

If that fails we could use `executeAsync` too:

```js
browser.executeAsync(function (done) {
  window.onResultAvailable = done
})
```

And then call `window.onResultAvailable()` from inside main.js.",Can we remove this?
166,"@@ -0,0 +1,42 @@
+const React = require('react')
+const PropTypes = require('prop-types')
+const UppyCore = require('../core')
+
+const h = React.createElement
+
+class UppyWrapper extends React.Component {
+  constructor (props) {
+    super(props)
+
+    this.refContainer = this.refContainer.bind(this)
+  }
+
+  componentDidMount () {
+    const plugin = this.props.uppy
+      .getPlugin(this.props.plugin)
+
+    plugin.mount(this.container, plugin)
+  }
+
+  componentWillUnmount () {
+    const plugin = this.props.uppy
+      .getPlugin(this.props.plugin)
+
+    plugin.unmount()
+  }
+
+  refContainer (container) {
+    this.container = container
+  }
+
+  render () {
+    return h('div', { ref: this.refContainer })
+  }
+}
+
+UppyWrapper.propTypes = {
+  uppy: PropTypes.instanceOf(UppyCore).isRequired,
+  plugin: PropTypes.string.isRequired",Looking into making a custom proptype validator here to assert that the plugin exists,Why do we need this wrapper?
167,"@@ -0,0 +1,43 @@
+require('es6-promise/auto')
+require('whatwg-fetch')
+
+// Core
+exports.Core = require('@uppy/core')
+
+// Utilities
+exports.server = require('@uppy/companion-client')
+exports.views = {
+  ProviderView: require('@uppy/provider-views')
+}
+
+// Stores
+exports.DefaultStore = require('@uppy/store-default')
+exports.ReduxStore = require('@uppy/store-redux')
+
+// UI plugins
+exports.Dashboard = require('@uppy/dashboard')
+exports.DragDrop = require('@uppy/drag-drop')
+exports.FileInput = require('@uppy/file-input')
+exports.Informer = require('@uppy/informer')
+exports.ProgressBar = require('@uppy/progress-bar')
+exports.StatusBar = require('@uppy/status-bar')
+
+// Acquirers
+exports.Dropbox = require('@uppy/dropbox')
+exports.GoogleDrive = require('@uppy/google-drive')
+exports.Instagram = require('@uppy/instagram')
+exports.Url = require('@uppy/url')
+exports.Webcam = require('@uppy/webcam')
+
+// Uploaders
+exports.AwsS3 = require('@uppy/aws-s3')
+exports.AwsS3Multipart = require('@uppy/aws-s3-multipart')
+exports.Transloadit = require('@uppy/transloadit')
+exports.Tus = require('@uppy/tus')
+exports.XHRUpload = require('@uppy/xhr-upload')
+
+// Miscellaneous
+exports.Form = require('@uppy/form')
+exports.GoldenRetriever = require('@uppy/golden-retriever')
+exports.ReduxDevTools = require('@uppy/redux-dev-tools')
+exports.ThumbnailGenerator = require('@uppy/thumbnail-generator')","Is there a way to re-export `index.js` in `bundle.js`, to avoid copy/pasting? 🤔",I don't think we need this file.
168,"@@ -0,0 +1,44 @@
+---
+title: ""Day 17""
+date: 2019-04-11
+author: samuel
+image: ""https://uppy.io/images/blog/30daystoliftoff/day17.jpg""
+series: 30 Days to Liftoff
+seriesSuffix: 'of 30'
+---
+
+Today marks the seventeenth day in our '30 Days to Liftoff' blog post challenge, working our way towards **launching Uppy 1.0 on April 25**. The Uppy team is dealing with the big tasks now, and the updates might be a little scanty!
+
+<center><br /><img width=""400"" src=""/images/blog/30daystoliftoff/day17.jpg""><br /><br /></center>
+
+
+<!--more-->
+
+## Done
+
+- [Artur](https://github.com/arturi) updated the [React Native](https://github.com/transloadit/uppy/pull/988) UI example. Here is what the new UI looks like:
+
+<center><img width=""400"" src=""/images/blog/30daystoliftoff/2019-04-11-react-native-ui-1.png""></center>
+<center><img width=""400"" src=""/images/blog/30daystoliftoff/2019-04-11-react-native-ui-2.png""></center>
+<center><img width=""400"" src=""/images/blog/30daystoliftoff/2019-04-11-react-native-ui-3.png""></center>
+
+- [Alex](https://github.com/nqst) updated the focus styles on the Uppy Dashboard, such that it is no longer the ugly border it used to be. Here is what it looks like now:
+","> no longer the ugly border

let’s please tone it down a bit, it’s was not _that_ bad ;)",I don't think we need the `<br /><br />`
169,"@@ -0,0 +1,44 @@
+---
+title: ""Day 17""
+date: 2019-04-11
+author: samuel
+image: ""https://uppy.io/images/blog/30daystoliftoff/day17.jpg""
+series: 30 Days to Liftoff
+seriesSuffix: 'of 30'
+---
+
+Today marks the seventeenth day in our '30 Days to Liftoff' blog post challenge, working our way towards **launching Uppy 1.0 on April 25**. The Uppy team is dealing with the big tasks now, and the updates might be a little scanty!
+
+<center><br /><img width=""400"" src=""/images/blog/30daystoliftoff/day17.jpg""><br /><br /></center>
+
+
+<!--more-->
+
+## Done
+
+- [Artur](https://github.com/arturi) updated the [React Native](https://github.com/transloadit/uppy/pull/988) UI example. Here is what the new UI looks like:
+
+<center><img width=""400"" src=""/images/blog/30daystoliftoff/2019-04-11-react-native-ui-1.png""></center>
+<center><img width=""400"" src=""/images/blog/30daystoliftoff/2019-04-11-react-native-ui-2.png""></center>
+<center><img width=""400"" src=""/images/blog/30daystoliftoff/2019-04-11-react-native-ui-3.png""></center>
+
+- [Alex](https://github.com/nqst) updated the focus styles on the Uppy Dashboard, such that it is no longer the ugly border it used to be. Here is what it looks like now:
+
+Before:<br />
+<center><img width=""400"" src=""/images/blog/30daystoliftoff/2019-04-11-before-focus.gif""></center>
+After:<br />
+<center><img width=""400"" src=""/images/blog/30daystoliftoff/2019-04-11-after-focus.gif""></center>
+
+
+## In Progress
+
+- Artur is reviewing PRs, reporting errors and testing Uppy to see where Uppy might break. 
+","> and testing Uppy to see where Uppy might break

and testing Uppy in response to the team’s feedback",I think this should be `<br />` instead of
170,"@@ -0,0 +1,44 @@
+---
+title: ""Day 17""
+date: 2019-04-11
+author: samuel
+image: ""https://uppy.io/images/blog/30daystoliftoff/day17.jpg""
+series: 30 Days to Liftoff
+seriesSuffix: 'of 30'
+---
+
+Today marks the seventeenth day in our '30 Days to Liftoff' blog post challenge, working our way towards **launching Uppy 1.0 on April 25**. The Uppy team is dealing with the big tasks now, and the updates might be a little scanty!
+
+<center><br /><img width=""400"" src=""/images/blog/30daystoliftoff/day17.jpg""><br /><br /></center>
+
+
+<!--more-->
+
+## Done
+
+- [Artur](https://github.com/arturi) updated the [React Native](https://github.com/transloadit/uppy/pull/988) UI example. Here is what the new UI looks like:
+
+<center><img width=""400"" src=""/images/blog/30daystoliftoff/2019-04-11-react-native-ui-1.png""></center>
+<center><img width=""400"" src=""/images/blog/30daystoliftoff/2019-04-11-react-native-ui-2.png""></center>
+<center><img width=""400"" src=""/images/blog/30daystoliftoff/2019-04-11-react-native-ui-3.png""></center>
+
+- [Alex](https://github.com/nqst) updated the focus styles on the Uppy Dashboard, such that it is no longer the ugly border it used to be. Here is what it looks like now:
+
+Before:<br />
+<center><img width=""400"" src=""/images/blog/30daystoliftoff/2019-04-11-before-focus.gif""></center>
+After:<br />
+<center><img width=""400"" src=""/images/blog/30daystoliftoff/2019-04-11-after-focus.gif""></center>
+
+
+## In Progress
+
+- Artur is reviewing PRs, reporting errors and testing Uppy to see where Uppy might break. 
+
+- [Alex](https://github.com/nqst) continues [improving Uppy's UI](https://github.com/transloadit/uppy/compare/master...nqst:design-facelift) and has recently been refactoring CSS code, while Evgenia keeps charging at the [many accessibility issues](https://github.com/transloadit/uppy/issues/created_by/nqst) that are still open.
+
+- [Evgenia](https://github.com/lakesare) is working on the new drag/drop implementation where there will be a new `Drop Here` placeholder and we will not be experiencing any flickering. She is also working on  `drop folder` support for cross-browser compatibility, where we won’t be relying on DOM manipulation in our React components.
+","> relying on DOM manipulation in our React components

React --> Preact, we are using Preact",I think this should be `<br />` instead of
171,"@@ -0,0 +1,44 @@
+const tus = require('tus-js-client')
+
+function isCordova () {
+  return typeof window !== 'undefined' && (
+    typeof window.PhoneGap !== 'undefined' ||
+    typeof window.Cordova !== 'undefined' ||
+    typeof window.cordova !== 'undefined'
+  )
+}
+
+function isReactNative () {
+  return typeof navigator !== 'undefined' &&
+    typeof navigator.product === 'string' &&
+    navigator.product.toLowerCase() === 'reactnative'
+}
+
+// We override tus fingerprint to uppy’s `file.id`, since the `file.id`
+// now also includes `relativePath` for files added from folders.
+// This means you can add 2 identical files, if one is in folder a,
+// the other in folder b — `a/file.jpg` and `b/file.jpg`, when added
+// together with a folder, will be treated as 2 separate files.
+//
+// For React Native and Cordova, we let tus-js-client’s default",Is it actually necessary to differentiate between React Native/Cordova and other environments? Is it dangerous if the relative path is just empty there?,I'm not sure if this is the best way to ch
172,"@@ -0,0 +1,44 @@
+const tus = require('tus-js-client')
+
+function isCordova () {
+  return typeof window !== 'undefined' && (
+    typeof window.PhoneGap !== 'undefined' ||
+    typeof window.Cordova !== 'undefined' ||
+    typeof window.cordova !== 'undefined'
+  )
+}
+
+function isReactNative () {
+  return typeof navigator !== 'undefined' &&
+    typeof navigator.product === 'string' &&
+    navigator.product.toLowerCase() === 'reactnative'
+}
+
+// We override tus fingerprint to uppy’s `file.id`, since the `file.id`
+// now also includes `relativePath` for files added from folders.
+// This means you can add 2 identical files, if one is in folder a,
+// the other in folder b — `a/file.jpg` and `b/file.jpg`, when added
+// together with a folder, will be treated as 2 separate files.
+//
+// For React Native and Cordova, we let tus-js-client’s default
+// fingerprint handling take charge.
+module.exports = function getFingerprint (uppyFileObj) {
+  return function (file, options, callback) {
+    console.log(file, options, callback)",Leftover from debugging?,Can we remove this console.log?
173,"@@ -0,0 +1,44 @@
+import Vue from 'vue'
+import type { Uppy, Plugin } from '@uppy/core'
+
+declare module '@uppy/vue' {",Is this file still necessary? It looks like these exports are now declared by individual typescript files instead and reexported from `index.d.ts`?,Why do we need this?
174,"@@ -0,0 +1,44 @@
+{
+  ""name"": ""@uppy/svelte"",
+  ""svelte"": ""src/index.js"",
+  ""module"": ""dist/index.mjs"",
+  ""main"": ""dist/index.js"",
+  ""version"": ""0.1.0"",
+  ""scripts"": {
+    ""build"": ""rollup -c"",
+    ""prepublishOnly"": ""npm run build"",
+    ""validate"": ""svelte-check""
+  },
+  ""devDependencies"": {
+    ""@rollup/plugin-node-resolve"": ""^9.0.0"",
+    ""@tsconfig/svelte"": ""^1.0.0"",
+    ""@uppy/core"": ""file:../../@uppy/core"",
+    ""rollup"": ""^2.0.0"",
+    ""rollup-plugin-svelte"": ""^6.0.0"",
+    ""svelte"": ""^3.0.0"",
+    ""svelte-check"": ""^1.0.0"",
+    ""svelte-preprocess"": ""^4.0.0"",
+    ""tslib"": ""^2.0.0"",
+    ""typescript"": ""^3.9.3""
+  },
+  ""dependencies"": {
+    ""@uppy/dashboard"": ""1.13.0"",
+    ""@uppy/drag-drop"": ""^1.4.18"",
+    ""@uppy/progress-bar"": ""^1.3.18"",
+    ""@uppy/status-bar"": ""1.8.0""
+  },
+  ""peerDependencies"": {
+    ""@uppy/core"": "">=^1.0.0"",","```suggestion
    ""@uppy/core"": ""^1.0.0"",
```
",I think this should be `^1.0.0`
175,"@@ -0,0 +1,46 @@
+const React = require('react')
+const PropTypes = require('prop-types')
+const UppyCore = require('../core/Core')
+const UppyWrapper = require('./Wrapper')
+
+const h = React.createElement
+
+/**
+ * React Component that renders a Dashboard for an Uppy instance in a Modal
+ * dialog. Visibility of the Modal is toggled using the `open` prop.
+ */
+
+class DashboardModal extends React.Component {
+  componentDidMount () {
+    const uppy = this.props.uppy
+
+    this.plugin = uppy.getPlugin(this.props.plugin)
+    if (this.props.open) {
+      this.plugin.showModal()
+    }
+  }
+
+  componentWillReceiveProps (nextProps) {
+    if (this.props.open && !nextProps.open) {
+      this.plugin.hideModal()
+    } else if (!this.props.open && nextProps.open) {
+      this.plugin.showModal()
+    }
+  }
+
+  render () {
+    return h(UppyWrapper, this.props)
+  }
+}
+
+DashboardModal.propTypes = {
+  uppy: PropTypes.instanceOf(UppyCore).isRequired,
+  open: PropTypes.bool,
+  onRequestClose: PropTypes.func",`onRequestClose` doesn't work yet,Why do we need to check `!nextProps.open`?
176,"@@ -0,0 +1,47 @@
+const querystring = require('querystring')
+
+exports.isFolder = (item) => {
+  return false
+}
+
+exports.getItemIcon = (item) => {
+  return item.urls.thumb
+}
+
+exports.getItemSubList = (item) => {
+  return item.results
+}
+
+exports.getItemName = (item) => {
+  return item.description
+}
+
+exports.getMimeType = (item) => {
+  return 'image/jpeg'
+}
+
+exports.getItemId = (item) => {
+  return `${item.id}`
+}
+
+exports.getItemRequestPath = (item) => {
+  return `${item.id}`
+}
+
+exports.getItemModifiedDate = (item) => {
+  return item.created_at
+}
+
+exports.getItemThumbnailUrl = (item) => {
+  return item.urls.thumb
+}
+
+exports.getNextPageQuery = (currentQuery) => {
+  const newCursor = parseInt(currentQuery.cursor || 1) + 1
+  const query = Object.assign({}, currentQuery, {
+    cursor: newCursor
+  })","I think we can use object rest spread in server components now too? Doesn't really matter either way
```suggestion
  const query = {
    ...currentQuery,
    cursor: newCursor
  }
```",I'm not sure if this is the best way to do this. I think it would be better to just return `item.url` here.
177,"@@ -0,0 +1,49 @@
+/* global test:false, expect:false, describe:false, beforeAll:false, */
+const logger = require('../../src/server/logger')
+const chalk = require('chalk')
+
+describe('Test Logger secret mask', () => {
+  beforeAll(() => {
+    logger.addMaskables(['ToBeMasked1', 'toBeMasked2'])
+  })
+
+  test('masks secret values present in log.info messages', () => {
+    let loggedMessage = null
+
+    // override the default console.log to capture the logged message
+    const defualtConsoleLog = console.log","typo:
`defualtConsoleLog` →
`defaultConsoleLog`",I think you can just use `console.log`
178,"@@ -0,0 +1,49 @@
+/* global test:false, expect:false, describe:false, beforeAll:false, */
+const logger = require('../../src/server/logger')
+const chalk = require('chalk')
+
+describe('Test Logger secret mask', () => {
+  beforeAll(() => {
+    logger.addMaskables(['ToBeMasked1', 'toBeMasked2'])
+  })
+
+  test('masks secret values present in log.info messages', () => {
+    let loggedMessage = null
+
+    // override the default console.log to capture the logged message
+    const defualtConsoleLog = console.log
+    console.log = (logPrefix, message) => {
+      loggedMessage = message
+      defualtConsoleLog(logPrefix, message)
+    }
+
+    logger.info('this info has ToBeMasked1 and toBeMasked2 and case-insensitive TOBEMasKED2')
+    // restore the default console.log before using ""expect"" to avoid weird log behaviors
+    console.log = defualtConsoleLog
+
+    const exptectedMsg = 'this info has ****** and ****** and case-insensitive ******'
+
+    expect(loggedMessage).toBeTruthy()
+    expect(loggedMessage).toBe(exptectedMsg)
+  })
+
+  test('masks secret values present in log.warn messages', () => {
+    let loggedMessage = null
+
+    // override the default console.log to capture the logged message
+    const defualtConsoleLog = console.log","also here:
`defualtConsoleLog` →
`defaultConsoleLog`",I don't think we need this test. It's already covered by the previous test.
179,"@@ -0,0 +1,499 @@
+const { Plugin } = require('@uppy/core')
+const { Socket, Provider, RequestClient } = require('@uppy/companion-client')
+const EventTracker = require('@uppy/utils/lib/EventTracker')
+const emitSocketProgress = require('@uppy/utils/lib/emitSocketProgress')
+const getSocketHost = require('@uppy/utils/lib/getSocketHost')
+const RateLimitedQueue = require('@uppy/utils/lib/RateLimitedQueue')
+const Uploader = require('./B2Uploader')
+
+function assertServerError (res) {
+  if (res && res.error) {
+    const error = new Error(res.message)
+    Object.assign(error, res.error)
+    throw error
+  }
+  return res
+}
+
+module.exports = class BackblazeB2Multipart extends Plugin {
+  static VERSION = require('../package.json').version
+
+  constructor (uppy, opts) {
+    super(uppy, opts)
+    this.type = 'uploader'
+    this.id = this.opts.id || 'BackblazeB2Multipart'
+    this.title = 'Backblaze B2 Multipart'
+    this.client = new RequestClient(uppy, opts)
+    this.sharedEndpointPool = []
+
+    const defaultOptions = {
+      timeout: 30 * 1000,
+      limit: 0,
+      createMultipartUpload: this.createMultipartUpload.bind(this),
+      getEndpoint: this.getEndpoint.bind(this),
+      listParts: this.listParts.bind(this),
+      // prepareUploadPart: this.prepareUploadPart.bind(this),
+      abortMultipartUpload: this.abortMultipartUpload.bind(this),
+      completeMultipartUpload: this.completeMultipartUpload.bind(this)
+    }
+
+    this.opts = { ...defaultOptions, ...opts }
+
+    this.upload = this.upload.bind(this)
+
+    this.requests = new RateLimitedQueue(this.opts.limit)
+
+    this.uploaders = Object.create(null)
+    this.uploaderEvents = Object.create(null)
+    this.uploaderSockets = Object.create(null)
+  }
+
+  /**
+   * Clean up all references for a file's upload: the MultipartUploader instance,
+   * any events related to the file, and the Companion WebSocket connection.
+   *
+   * Set `opts.abort` to tell b2 that the multipart upload is cancelled and must be removed.
+   * This should be done when the user cancels the upload, not when the upload is completed or errored.
+   */
+  resetUploaderReferences (fileID, opts = {}) {
+    if (this.uploaders[fileID]) {
+      this.uploaders[fileID].abort({ really: opts.abort || false })
+      this.uploaders[fileID] = null
+    }
+    if (this.uploaderEvents[fileID]) {
+      this.uploaderEvents[fileID].remove()
+      this.uploaderEvents[fileID] = null
+    }
+    if (this.uploaderSockets[fileID]) {
+      this.uploaderSockets[fileID].close()
+      this.uploaderSockets[fileID] = null
+    }
+  }
+
+  assertHost () {
+    if (!this.opts.companionUrl) {
+      throw new Error('Expected a `companionUrl` option containing a Companion address.')
+    }
+  }
+
+  createMultipartUpload (file) {
+    this.assertHost()
+
+    const metadata = {}
+
+    Object.keys(file.meta).map(key => {","since the returned array is not used, we should probably be using `forEach` instead of `map`",Why do we need this?
180,"@@ -0,0 +1,5 @@
+const ProviderView = require('./ProviderView')
+
+module.exports = {
+  ProviderView
+}","Seems like `src/views` also conflicts a bit with splitting into multiple packages? I was thinking we were going to do `provider-views` package for the ProviderView and `uppy-server-connect` (draft name) for `RequestClient`?

We can look at Babel’s package folder structure: https://github.com/babel/babel/tree/master/packages",Why do we need this?
181,"@@ -0,0 +1,50 @@
+const qs = require('qs')
+
+const MIMETYPES = {
+  MP4: 'video/mp4',
+  M4A: 'audio/mp4',
+  CHAT: 'text/plain',
+  TRANSCRIPT: 'text/plain', // note: waiting confirmation, https://devforum.zoom.us/t/retrieve-all-past-zoom-cloud-recordings/22487/5?u=mokutsu
+  CC: 'text/vtt'
+}
+
+exports.getQuery = (results, dateRange) => {
+  const query = {
+    cursor: dateRange.monthsInPast","does this cursor require a specific format or does it only accept a plain string? It seemed like setting an object to cursor triggered excessive requests for infinite scroll, not sure why ","I'm not sure if this is the best way to do this, but I'm not sure if there's a better way."
182,"@@ -0,0 +1,50 @@
+const { AbortController, AbortSignal } = require('./AbortController')
+
+function flushInstantTimeouts () {
+  return new Promise(resolve => setTimeout(resolve, 0))
+}
+
+describe('AbortController', () => {
+  it('has the expected shape', () => {
+    const controller = new AbortController()
+    expect(typeof controller.abort).toBe('function')
+    expect(controller.signal).toBeInstanceOf(AbortSignal)
+  })
+
+  it('emits ""abort"" when abort() is called', async () => {
+    const controller = new AbortController()
+    const callback = jest.fn()
+
+    controller.signal.addEventListener('abort', callback)
+    controller.abort()
+
+    await flushInstantTimeouts()
+
+    expect(callback).toHaveBeenCalled()
+    expect(callback.mock.calls[0][0]).toBeInstanceOf(Event)
+  })
+
+  it('add and remove events', async () => {
+    const controller = new AbortController()
+    const callback = jest.fn()
+    const callback2 = jest.fn()
+
+    controller.signal.addEventListener('abort', callback)
+    controller.signal.addEventListener('abort', callback2)
+    controller.signal.removeEventListener('abort', callback)
+    controller.abort()
+
+    await flushInstantTimeouts()
+
+    expect(callback2).toHaveBeenCalled()
+    expect(callback2.mock.calls[0][0]).toBeInstanceOf(Event)","should we also be doing something like:

```js
expect(callback).not.toHaveBeenCalled()
```
to actually test the `removeEventListener`?",I don't think this test is needed.
183,"@@ -0,0 +1,51 @@
+module.exports = class Client {
+  constructor (opts) {
+    this.apiUrl = 'https://api2.transloadit.com'
+    this.opts = opts
+  }
+
+  /**
+   * Create a new assembly.
+   *
+   * @param {object} options
+   */
+  createAssembly ({ templateId, expectedFiles }) {
+    const data = new FormData()
+    data.append('params', JSON.stringify({
+      template_id: templateId,
+      auth: { key: this.opts.key }
+    }))
+    data.append('fields', JSON.stringify({
+      // Nothing yet.
+    }))
+    data.append('tus_num_expected_upload_files', expectedFiles)
+
+    return fetch(`${this.apiUrl}/assemblies`, {
+      method: 'post',
+      body: data
+    }).then((response) => response.json()).then((assembly) => {
+      if (assembly.error) {
+        const error = new Error(assembly.message)
+        error.code = assembly.error
+        error.status = assembly
+        throw error
+      }
+
+      return this.getAssemblyStatus(assembly.status_endpoint)
+    })
+  }
+
+  /**
+   * Get the current status for an assembly.
+   *
+   * @param {string} url The status endpoint of the assembly.
+   */
+  getAssemblyStatus (url) {
+    return fetch(url)
+      .then((response) => response.json())
+  }
+
+  getTusEndpoint () {
+    return `${this.apiUrl}/resumable/files/`","This should use the same endpoint as the `assembly` later, I think. Currently it just always goes to api2.transloadit.com/resumable. There should be a `tus_url` in assembly status responses now that can be used to make that happen :raised_hands: ",I think this should be `this.getTusEndpoint()`
184,"@@ -0,0 +1,53 @@
+---
+title: ""Day 8""
+date: 2019-04-02
+author: samuel
+image: ""https://uppy.io/images/blog/30daystoliftoff/day08.jpg""
+series: 30 Days to Liftoff
+seriesSuffix: 'of 30'
+---
+
+Welcome to Day 8 of our ongoing thirty-day blog post challenge toward the **Uppy 1.0 release on April 25**! Yesterday was the 1st of April, the day we really kickstarted our coding speedrun towards 1.0
+
+The entire team during the weekly call yesterday iterated on the whole process again, moving a lot of cards from the `todo` lane to the `in progress` lane. This is what our board currently looks like.
+
+<center><br /><img width=""400"" src=""/images/blog/30daystoliftoff/2019-04-02-asana-board.png""><br /></center>
+
+Let's dive into the updates we have ready to share with you.
+
+
+<!--more-->
+
+<center><br /><img width=""400"" src=""/images/blog/30daystoliftoff/day07.jpg""><br /></center>
+
+## Done
+- [Artur](https://transloadit.com/about/#artur) merged this [PR](https://github.com/transloadit/uppy/pull/1393) which removed the use of `window.location` from companion's client coutrsey of [Ife](https://transloadit.com/about/#ife)
+- [Alex](https://transloadit.com/about/#alex) improved the design of the drag to upload stage. <br />
+Before:<br />
+<center><img width=""400"" src=""/images/blog/30daystoliftoff/2019-04-02-before.png""></center>
+After:<br />
+<center><img width=""400"" src=""/images/blog/30daystoliftoff/2019-04-02-after.png""></center>
+- [Evgenia](https://github.com/lakesare) made list items even out using the `justify-content: space-between` CSS property.
+","that’s incorrect, let’s just say she “made file items even out properly”, she didn’t use `space-between` @AJvanLoon ",I think this should be `<br />` instead of `<br />`
185,"@@ -0,0 +1,53 @@
+---
+title: ""Day 8""
+date: 2019-04-02
+author: samuel
+image: ""https://uppy.io/images/blog/30daystoliftoff/day08.jpg""
+series: 30 Days to Liftoff
+seriesSuffix: 'of 30'
+---
+
+Welcome to Day 8 of our ongoing thirty-day blog post challenge toward the **Uppy 1.0 release on April 25**! Yesterday was the 1st of April, the day we really kickstarted our coding speedrun towards 1.0
+
+The entire team during the weekly call yesterday iterated on the whole process again, moving a lot of cards from the `todo` lane to the `in progress` lane. This is what our board currently looks like.
+
+<center><br /><img width=""400"" src=""/images/blog/30daystoliftoff/2019-04-02-asana-board.png""><br /></center>
+
+Let's dive into the updates we have ready to share with you.
+
+
+<!--more-->
+
+<center><br /><img width=""400"" src=""/images/blog/30daystoliftoff/day07.jpg""><br /></center>
+
+## Done
+- [Artur](https://transloadit.com/about/#artur) merged this [PR](https://github.com/transloadit/uppy/pull/1393) which removed the use of `window.location` from companion's client coutrsey of [Ife](https://transloadit.com/about/#ife)
+- [Alex](https://transloadit.com/about/#alex) improved the design of the drag to upload stage. <br />
+Before:<br />
+<center><img width=""400"" src=""/images/blog/30daystoliftoff/2019-04-02-before.png""></center>
+After:<br />
+<center><img width=""400"" src=""/images/blog/30daystoliftoff/2019-04-02-after.png""></center>
+- [Evgenia](https://github.com/lakesare) made list items even out using the `justify-content: space-between` CSS property.
+
+## In Progress
+
+- We are currently investigating an issue with `tuts-js-client` which affects uploads where the file size is larger than 500MB as reported in this [issue](https://github.com/tus/tus-js-client/issues/146).",`tuts` typo,I think this should be `<br />` instead of `<br />`
186,"@@ -0,0 +1,55 @@
+---
+title: ""Initializing Uppy""
+type: docs
+module: ""@uppy/react""
+permalink: docs/react/initializing/
+alias: docs/react/initializing/
+order: 1
+category: ""React""
+---
+
+Your Uppy instance must be initialized before passing it to an `uppy={}` prop in the desired component,
+and should be cleaned up using `uppy.close()` when you are done with it.
+
+## Class Components
+
+A simple approach is to initialize it in your React component's `constructor()` and destroy it in `componentWillUnmount()`.
+
+> ⚠ Uppy instances are stateful, so the same instance must be used across different renders.
+> Do **NOT** initialize Uppy in a `render()` method!
+
+```js
+class MyComponent extends React.Component {
+  constructor (props) {
+    super(props)
+    this.uppy = Uppy()
+      .use(Transloadit, {})
+  }
+
+  componentWillUnmount () {
+    this.uppy.close()
+  }
+
+  render () {
+    return <DashboardModal uppy={this.uppy} />
+  }
+}
+```
+
+## Functional Components
+
+With react hooks, writing pure functional components are on hype. For wealthy initializing Uppy in a functional component, we need to use the `useMemo` hook for keeping the same instance across multiple renders and use `useEffect` for cleaning up things when the component is unmounted.
+
+```js
+const MyComponent = () => {
+  const uppy = useMemo(() => Uppy().use(Transloadit, {}), []);
+
+  useEffect(() => {
+    return () => uppy.close()
+  }, [])
+
+  return <DashboardModal uppy={uppy.current} />","I was able to follow these docs to get this working.  The only change I had to make was to use   return ```<DashboardModal uppy={uppy} />``` instead of ```<DashboardModal uppy={uppy.current}/>```
",I'm not sure if this is the best way to do this. I think it would be better to use `useRef` instead of `use
187,"@@ -0,0 +1,55 @@
+---
+title: ""Initializing Uppy""
+type: docs
+module: ""@uppy/react""
+permalink: docs/react/initializing/
+alias: docs/react/initializing/
+order: 1
+category: ""React""
+---
+
+Your Uppy instance must be initialized before passing it to an `uppy={}` prop in the desired component,
+and should be cleaned up using `uppy.close()` when you are done with it.
+
+## Class Components
+
+A simple approach is to initialize it in your React component's `constructor()` and destroy it in `componentWillUnmount()`.
+
+> ⚠ Uppy instances are stateful, so the same instance must be used across different renders.
+> Do **NOT** initialize Uppy in a `render()` method!
+
+```js
+class MyComponent extends React.Component {
+  constructor (props) {
+    super(props)
+    this.uppy = Uppy()
+      .use(Transloadit, {})
+  }
+
+  componentWillUnmount () {
+    this.uppy.close()
+  }
+
+  render () {
+    return <DashboardModal uppy={this.uppy} />
+  }
+}
+```
+
+## Functional Components
+
+With react hooks, writing pure functional components are on hype. For wealthy initializing Uppy in a functional component, we need to use the `useRef` hook for keeping the same instance across multiple renders and use `useEffect` for cleaning up things when the component is unmounted.
+
+```js
+const MyComponent = () => {
+  const uppy = useRef(Uppy().use(Transloadit, {}));","This will create a ""garbage"" instance of Uppy on every render, because the `Uppy()` function is called even before `useRef()`--wonder if we can just create it once? :thinking: ",I think this should be `componentDidMount` instead of `componentWillUnmount`.
188,"@@ -0,0 +1,55 @@
+---
+title: ""Initializing Uppy""
+type: docs
+module: ""@uppy/react""
+permalink: docs/react/initializing/
+alias: docs/react/initializing/
+order: 1
+category: ""React""
+---
+
+Your Uppy instance must be initialized before passing it to an `uppy={}` prop in the desired component,
+and should be cleaned up using `uppy.close()` when you are done with it.
+
+## Class Components
+
+A simple approach is to initialize it in your React component's `constructor()` and destroy it in `componentWillUnmount()`.
+
+> ⚠ Uppy instances are stateful, so the same instance must be used across different renders.
+> Do **NOT** initialize Uppy in a `render()` method!
+
+```js
+class MyComponent extends React.Component {
+  constructor (props) {
+    super(props)
+    this.uppy = Uppy()
+      .use(Transloadit, {})
+  }
+
+  componentWillUnmount () {
+    this.uppy.close()
+  }
+
+  render () {
+    return <DashboardModal uppy={this.uppy} />
+  }
+}
+```
+
+## Functional Components
+
+With react hooks, writing pure functional components are on hype. For wealthy initializing Uppy in a functional component, we need to use the `useRef` hook for keeping the same instance across multiple renders and use `useEffect` for cleaning up things when the component is unmounted.
+
+```js
+const MyComponent = () => {
+  const uppy = useRef(Uppy().use(Transloadit, {}));
+
+  useEffect(() => {
+    return () => uppy.current.close()","From es-lint: The ref value for `uppy.current` will likely have changed by the time this effect cleanup function runs. Copy `uppy.current` to a variable inside the effect, and use that variable in the cleanup function. 
```suggestion
    const currentUppyInstance = uppy.current
    return () =>  currentUppyInstance.close()
```",I'm not sure if this is the best way to do this. I think it would be better to use the `useRef` hook instea
189,"@@ -0,0 +1,59 @@
+---
+title: ""Initializing Uppy""
+type: docs
+module: ""@uppy/react""
+permalink: docs/react/initializing/
+alias: docs/react/initializing/
+order: 1
+category: ""React""
+---
+
+Your Uppy instance must be initialized before passing it to an `uppy={}` prop in the desired component,
+and should be cleaned up using `uppy.close()` when you are done with it.
+
+## Class Components
+
+A simple approach is to initialize it in your React component's `constructor()` and destroy it in `componentWillUnmount()`.
+
+> ⚠ Uppy instances are stateful, so the same instance must be used across different renders.
+> Do **NOT** initialize Uppy in a `render()` method!
+
+```js
+class MyComponent extends React.Component {
+  constructor (props) {
+    super(props)
+    this.uppy = Uppy()
+      .use(Transloadit, {})
+  }
+
+  componentWillUnmount () {
+    this.uppy.close()
+  }
+
+  render () {
+    return <DashboardModal uppy={this.uppy} />
+  }
+}
+```
+
+## Functional Components
+
+With react hooks, writing pure functional components are on hype. For wealthy initializing Uppy in a functional component, we need to use the `useRef` and `useMemo` hooks for keeping the same instance across multiple renders and use `useEffect` for cleaning up things when the component is unmounted.
+
+```js
+const MyComponent = () => {
+  const uppyInstance = useMemo(() => Uppy().use(Transloadit, {}), []);
+
+  const uppy = useRef(uppyInstance);","Is useRef still required here? Looking at this code, I think just useMemo/useEffect might be enough?",I think this should be `componentDidMount` instead of `componentWillUnmount`.
190,"@@ -0,0 +1,6 @@
+function isNetworkError (xhr) {
+  if (!xhr) return",Shouldn't this return false here?,
191,"@@ -0,0 +1,6 @@
+function isNetworkError (xhr) {
+  if (!xhr) return
+  return (xhr.readyState !== 0 && xhr.readyState !== 4) || xhr.status === 0",Did you test this condition and can confirm that it works as expected?,nit: `return xhr.readyState === 4 || xhr.status === 0`
192,"@@ -0,0 +1,61 @@
+'use strict'
+
+require('whatwg-fetch')
+
+module.exports = class Request {",this name sounds like `new Request` would be initiating a single request. maybe something along the lines of `RequestClient` would be clearer?,Why do we need this file?
193,"@@ -0,0 +1,61 @@
+{",are we also saving `package-lock` files for each uppy package? 🤔 ,
194,"@@ -0,0 +1,62 @@
+<template>
+  <div ref=""container"" />
+</template>
+<script>
+import DashboardPlugin from '@uppy/dashboard'
+
+export default {
+  data () {
+    return {
+      plugin: null
+    }
+  },
+  props: {
+    uppy: {
+      required: true
+    },
+    props: {","I'm not sure what the idiomatic Vue way is … does it make sense to be able to do something like this?
```
<Dashboard
  hideCancelButton=""true""
/>
```
Or is the `props=""{ hideCancelButton: true }""` nesting quite normal?",I don't think we need thi
195,"@@ -0,0 +1,62 @@
+<template>
+  <div ref=""container"" />
+</template>
+<script>
+import DashboardPlugin from '@uppy/dashboard'
+
+export default {
+  data () {
+    return {
+      plugin: null
+    }
+  },
+  props: {
+    uppy: {
+      required: true
+    },
+    props: {
+      type: Object
+    },
+    plugins: {
+      type: Array
+    }
+  },
+  mounted () {
+    this.installPlugin()
+  },
+  methods: {
+    installPlugin () {
+      const uppy = this.uppy
+      const options = {
+        id: 'vue:Dashboard',
+        inline: true,
+        plugins: this.plugins,
+        ...this.props,
+        target: this.$refs.container
+      }
+      uppy.use(DashboardPlugin, options)
+      this.plugin = uppy.getPlugin(options.id)
+    },
+    uninstallPlugin (uppy = this.uppy) {
+      uppy.removePlugin(this.plugin)
+    }
+  },
+  beforeDestroy () {
+    this.uninstallPlugin()
+  },
+  watch: {
+    uppy (current, old) {
+      if (old !== current) {
+        this.uninstallPlugin(old)
+        this.installPlugin()
+      }
+    },
+    props (current, old) {
+      if (JSON.stringify(old) !== JSON.stringify(current)) {","This may not be quite right for options objects with functions in them. Something like https://www.npmjs.com/package/shallow-equal could work better.

Could we try using `this.plugin.setOptions(current)` here instead of re-installing the plugin?",Why do we need this?
196,"@@ -0,0 +1,620 @@
+const ExifTags = {",Could you please include a link to https://github.com/exif-js/exif-js with a comment that the code was adapted from exif-js and license info? Like here: https://github.com/transloadit/uppy/blob/7873f057ca1301cb642a2521361ff219fb38170b/packages/%40uppy/utils/src/prettyBytes.js#L1-L3. ,const ExifTags = {
197,"@@ -0,0 +1,620 @@
+const ExifTags = {
+  // version tags
+  0x9000: 'ExifVersion', // EXIF version
+  0xA000: 'FlashpixVersion', // Flashpix format version
+
+  // colorspace tags
+  0xA001: 'ColorSpace', // Color space information tag
+
+  // image configuration
+  0xA002: 'PixelXDimension', // Valid width of meaningful image
+  0xA003: 'PixelYDimension', // Valid height of meaningful image
+  0x9101: 'ComponentsConfiguration', // Information about channels
+  0x9102: 'CompressedBitsPerPixel', // Compressed bits per pixel
+
+  // user information
+  0x927C: 'MakerNote', // Any desired information written by the manufacturer
+  0x9286: 'UserComment', // Comments by user
+
+  // related file
+  0xA004: 'RelatedSoundFile', // Name of related sound file
+
+  // date and time
+  0x9003: 'DateTimeOriginal', // Date and time when the original image was generated
+  0x9004: 'DateTimeDigitized', // Date and time when the image was stored digitally
+  0x9290: 'SubsecTime', // Fractions of seconds for DateTime
+  0x9291: 'SubsecTimeOriginal', // Fractions of seconds for DateTimeOriginal
+  0x9292: 'SubsecTimeDigitized', // Fractions of seconds for DateTimeDigitized
+
+  // picture-taking conditions
+  0x829A: 'ExposureTime', // Exposure time (in seconds)
+  0x829D: 'FNumber', // F number
+  0x8822: 'ExposureProgram', // Exposure program
+  0x8824: 'SpectralSensitivity', // Spectral sensitivity
+  0x8827: 'ISOSpeedRatings', // ISO speed rating
+  0x8828: 'OECF', // Optoelectric conversion factor
+  0x9201: 'ShutterSpeedValue', // Shutter speed
+  0x9202: 'ApertureValue', // Lens aperture
+  0x9203: 'BrightnessValue', // Value of brightness
+  0x9204: 'ExposureBias', // Exposure bias
+  0x9205: 'MaxApertureValue', // Smallest F number of lens
+  0x9206: 'SubjectDistance', // Distance to subject in meters
+  0x9207: 'MeteringMode', // Metering mode
+  0x9208: 'LightSource', // Kind of light source
+  0x9209: 'Flash', // Flash status
+  0x9214: 'SubjectArea', // Location and area of main subject
+  0x920A: 'FocalLength', // Focal length of the lens in mm
+  0xA20B: 'FlashEnergy', // Strobe energy in BCPS
+  0xA20C: 'SpatialFrequencyResponse', //
+  0xA20E: 'FocalPlaneXResolution', // Number of pixels in width direction per FocalPlaneResolutionUnit
+  0xA20F: 'FocalPlaneYResolution', // Number of pixels in height direction per FocalPlaneResolutionUnit
+  0xA210: 'FocalPlaneResolutionUnit', // Unit for measuring FocalPlaneXResolution and FocalPlaneYResolution
+  0xA214: 'SubjectLocation', // Location of subject in image
+  0xA215: 'ExposureIndex', // Exposure index selected on camera
+  0xA217: 'SensingMethod', // Image sensor type
+  0xA300: 'FileSource', // Image source (3 === DSC)
+  0xA301: 'SceneType', // Scene type (1 === directly photographed)
+  0xA302: 'CFAPattern', // Color filter array geometric pattern
+  0xA401: 'CustomRendered', // Special processing
+  0xA402: 'ExposureMode', // Exposure mode
+  0xA403: 'WhiteBalance', // 1 = auto white balance, 2 = manual
+  0xA404: 'DigitalZoomRation', // Digital zoom ratio
+  0xA405: 'FocalLengthIn35mmFilm', // Equivalent foacl length assuming 35mm film camera (in mm)
+  0xA406: 'SceneCaptureType', // Type of scene
+  0xA407: 'GainControl', // Degree of overall image gain adjustment
+  0xA408: 'Contrast', // Direction of contrast processing applied by camera
+  0xA409: 'Saturation', // Direction of saturation processing applied by camera
+  0xA40A: 'Sharpness', // Direction of sharpness processing applied by camera
+  0xA40B: 'DeviceSettingDescription', //
+  0xA40C: 'SubjectDistanceRange', // Distance to subject
+
+  // other tags
+  0xA005: 'InteroperabilityIFDPointer',
+  0xA420: 'ImageUniqueID' // Identifier assigned uniquely to each image
+}
+
+const TiffTags = {
+  0x0100: 'ImageWidth',
+  0x0101: 'ImageHeight',
+  0x8769: 'ExifIFDPointer',
+  0x8825: 'GPSInfoIFDPointer',
+  0xA005: 'InteroperabilityIFDPointer',
+  0x0102: 'BitsPerSample',
+  0x0103: 'Compression',
+  0x0106: 'PhotometricInterpretation',
+  0x0112: 'Orientation',","Could we theoretically only use `Orientation`, thus saving bytes on not including core/name mappings for all of the other tags?",I think this should be `0
198,"@@ -0,0 +1,63 @@
+// ***
+// View type: list
+// ***
+
+.uppy-ProviderBrowser-viewType--list {
+  background-color: $white;
+
+  li.uppy-ProviderBrowserItem {
+    display: flex;
+    align-items: center;
+    padding: 7px 15px;
+    margin: 0;
+
+    // Checkbox
+    > .uppy-ProviderBrowserItem-fakeCheckbox {
+      margin-right: 15px;","Is deep-deep nesting like this necessary here? Ideally I’d lift a level or so, it becomes a little hard to follow and too specific, I think.",This should be `.uppy-Pro
199,"@@ -0,0 +1,64 @@
+# @uppy/vue
+
+<img src=""https://uppy.io/images/logos/uppy-dog-head-arrow.svg"" width=""120"" alt=""Uppy logo: a superman puppy in a pink suit"" align=""right"">
+
+<a href=""https://www.npmjs.com/package/@uppy/vue""><img src=""https://img.shields.io/npm/v/@uppy/vue.svg?style=flat-square""></a>
+<a href=""https://travis-ci.org/transloadit/uppy""><img src=""https://img.shields.io/travis/transloadit/uppy/master.svg?style=flat-square"" alt=""Build Status""></a>
+
+Vue component wrappers around Uppy's officially maintained UI plugins.
+
+Uppy is being developed by the folks at [Transloadit](https://transloadit.com), a versatile file encoding service.
+
+## Example
+
+```vue
+<template>
+  <dashboard-modal ",Should this be `DashboardModal`?,I think this should be `u
200,"@@ -0,0 +1,64 @@
+# @uppy/vue
+
+<img src=""https://uppy.io/images/logos/uppy-dog-head-arrow.svg"" width=""120"" alt=""Uppy logo: a superman puppy in a pink suit"" align=""right"">
+
+<a href=""https://www.npmjs.com/package/@uppy/vue""><img src=""https://img.shields.io/npm/v/@uppy/vue.svg?style=flat-square""></a>
+<a href=""https://travis-ci.org/transloadit/uppy""><img src=""https://img.shields.io/travis/transloadit/uppy/master.svg?style=flat-square"" alt=""Build Status""></a>
+
+Vue component wrappers around Uppy's officially maintained UI plugins.
+
+Uppy is being developed by the folks at [Transloadit](https://transloadit.com), a versatile file encoding service.
+
+## Example
+
+```vue
+<template>
+  <dashboard-modal 
+  :uppy=""uppy"" 
+  :open=""open"" 
+  :props=""{
+    onRequestCloseModal: handleClose
+  }""/>
+</template>
+
+<script>
+import Uppy from '@uppy/core'
+import { DashboardModal } from '@uppy/vue'
+
+export default {
+  components: {
+    DashboardModal
+  },
+  computed: {
+    uppy: () => new Uppy()
+  },
+  data () {
+    return {
+      open: false
+    }
+  },
+  methods: {
+    handleClose: () => ''
+  }
+}
+</script>
+```
+
+## Installation
+
+```bash
+$ npm install @uppy/vue
+```
+
+We recommend installing from npm and then using a module bundler such as [Webpack](https://webpack.js.org/), [Browserify](http://browserify.org/) or [Rollup.js](http://rollupjs.org/).
+
+Alternatively, you can also use this plugin in a pre-built bundle from Transloadit's CDN: Edgly. In that case `Uppy` will attach itself to the global `window.Uppy` object. See the [main Uppy documentation](https://uppy.io/docs/#Installation) for instructions.
+
+## Documentation
+
+Documentation for this plugin can be found on the [Uppy website](https://uppy.io/docs/vue), when finalized. For now, you can read them [here](../../../website/src/docs/vue.md)","We probably need to change the url to `uppy.io`, because `website` is not available when you install a package from npm.",I think this should be `u
201,"@@ -0,0 +1,64 @@
+const Uppy = require('@uppy/core')
+const Dashboard = require('@uppy/dashboard')
+const Instagram = require('@uppy/instagram')
+const GoogleDrive = require('@uppy/google-drive')
+const Url = require('@uppy/url')
+const Webcam = require('@uppy/webcam')
+const Tus = require('@uppy/tus')
+
+require('@uppy/core/dist/style.css')
+require('@uppy/dashboard/dist/style.css')
+require('@uppy/url/dist/style.css')
+require('@uppy/webcam/dist/style.css')
+
+const TUS_ENDPOINT = 'https://master.tus.io/files/'
+
+const uppy = Uppy({
+  debug: true,
+  meta: {
+    username: 'John',
+    license: 'Creative Commons'
+  }
+})
+  .use(Dashboard, {
+    trigger: '#pick-files',
+    target: '#upload-form',
+    inline: true,
+    replaceTargetContent: true,
+    metaFields: [
+      { id: 'license', name: 'License', placeholder: 'specify license' },
+      { id: 'caption', name: 'Caption', placeholder: 'add caption' }
+    ],
+    showProgressDetails: true,
+    proudlyDisplayPoweredByUppy: true,
+    note: '2 files, images and video only'
+  })
+  .use(GoogleDrive, { target: Dashboard, serverUrl: 'http://localhost:3020' })
+  .use(Instagram, { target: Dashboard, serverUrl: 'http://localhost:3020' })
+  .use(Url, { target: Dashboard, serverUrl: 'http://localhost:3020' })
+  .use(Webcam, { target: Dashboard })
+  .use(Tus, { endpoint: TUS_ENDPOINT })
+  // .use(GoldenRetriever, {serviceWorker: true})",to delete?,Can we remove this?
202,"@@ -0,0 +1,66 @@
+exports.getUsername = (data) => {",Can we find the username somehow even if there are no files?,exports.getUsername = () 
203,"@@ -0,0 +1,71 @@
+<template>
+  <div ref=""container"" />
+</template>",You might want to convert this into a render function so these files can just be plain `*.ts` instead of vue templates. ,I think this should be `<
204,"@@ -0,0 +1,73 @@
+exports.getUsername = (data) => {
+  return data.data[0].user.username","Should only do this if `data.data[0]` actually exists, in case there are no files",This should be `data.data
205,"@@ -0,0 +1,76 @@
+# Uppy
+
+Hi, thanks for trying out the bundled version of the Uppy File Uploader. You can use
+this from a CDN (e.g. `<script src=""https://releases.transloadit.com/uppy/v1.26.1/uppy.min.js""></script>) or bundle it with your webapp. ","```suggestion
this from a CDN (e.g. `<script src=""https://releases.transloadit.com/uppy/v1.26.1/uppy.min.js""></script>`) or bundle it with your webapp. 
```
missing closing `",This should be `<script s
206,"@@ -0,0 +1,80 @@
+const Transloadit = require('@uppy/transloadit')
+
+const remoteProviders = {
+  dropbox: require('@uppy/dropbox'),
+  'google-drive': require('@uppy/google-drive'),
+  instagram: require('@uppy/instagram'),
+  url: require('@uppy/url')
+}",Hard-coding providers for simpler usage? They are indeed lightweight now 🤔 And I guess that’s what “preset” is for.,I'm not sure if this is t
207,"@@ -0,0 +1,84 @@
+const Plugin = require('../core/Plugin')
+
+module.exports = class DeletrFiles extends Plugin {",Small typo in the name here and in the `this.id` / `this.title` properties below :),Why do we need this file?
208,"@@ -0,0 +1,86 @@
+---
+type: docs
+order: 2
+title: ""Thumbnail Generator""
+module: ""@uppy/thumbnail-generator""
+permalink: docs/thumbnail-generator/
+category: 'Miscellaneous'
+---
+
+`@uppy/thumbnail-generator` generates proportional thumbnails (file previews) for images that are added to Uppy. It then creates a string with a local preview url (via `URL.createObjectURL(blob)`) and sets it to `file.preview`. `thumbnail:generated` event is also emitted, see below for details.","this feels like a bit much detail for the introductory paragraph, i'd move this sentence to just below the code sample and write something like

> Now, the `file.preview` property will contain a URL to the thumbnail.

i think the createObjectURL stuff probably doesn't have to be mentioned",This should be `@uppy/thumbnail-generator`
209,"@@ -0,0 +1,86 @@
+---
+type: docs
+order: 2
+title: ""Thumbnail Generator""
+module: ""@uppy/thumbnail-generator""
+permalink: docs/thumbnail-generator/
+category: 'Miscellaneous'
+---
+
+`@uppy/thumbnail-generator` generates proportional thumbnails (file previews) for images that are added to Uppy. It then creates a string with a local preview url (via `URL.createObjectURL(blob)`) and sets it to `file.preview`. `thumbnail:generated` event is also emitted, see below for details.
+
+This plugin is included by default with the [Dashboard](/docs/dashboard), so you don’t have to include it manually. But it is useful if you are not using the Dashboard and want to display image previews in your custom UI.
+
+```js
+const ThumbnailGenerator = require('@uppy/thumbnail-generator')
+
+uppy.use(ThumbnailGenerator, {
+  thumbnailWidth: 200,
+  // thumbnailHeight: 200 // optional, use either width or height
+})
+```
+
+## Installation
+
+This plugin is published as the `@uppy/thumbnail-generator` package.
+
+Install from NPM:
+
+```shell
+npm install @uppy/thumbnail-generator
+```
+
+In the [CDN package](/docs/#With-a-script-tag), it is available on the `Uppy` global object:
+
+```js
+const ThumbnailGenerator = Uppy.ThumbnailGenerator
+```
+
+## Options
+
+The `@uppy/file-input` plugin has the following configurable options:","```suggestion
The `@uppy/thumbnail-generator` plugin has the following configurable options:
```",I don't think we need this line.
210,"@@ -0,0 +1,95 @@
+const Plugin = require('../Plugin')
+
+module.exports = class AwsS3 extends Plugin {
+  constructor (core, opts) {
+    super(core, opts)
+    this.type = 'uploader'
+    this.id = 'AwsS3'
+    this.title = 'AWS S3'
+
+    const defaultOptions = {
+      getUploadParameters: this.getUploadParameters.bind(this)
+    }
+
+    this.opts = Object.assign({}, defaultOptions, opts)
+
+    this.prepareUpload = this.prepareUpload.bind(this)
+  }
+
+  getFile (id) {
+    return this.core.getState().files[id]
+  }
+
+  getUploadParameters (file) {
+    if (!this.opts.host) {
+      throw new Error('Expected a `host` option containing an uppy-server address.')
+    }
+
+    const filename = encodeURIComponent(file.name)
+    const type = encodeURIComponent(`${file.type.general}/${file.type.specific}`)
+    return fetch(`${this.opts.host}/s3/credentials?filename=${filename}&type=${type}`, {
+      method: 'get',
+      headers: { accept: 'application/json' }
+    }).then((response) => response.json())
+  }
+
+  prepareUpload (fileIDs) {
+    fileIDs.forEach((id) => {
+      this.core.emit('core:preprocess-progress', id, {
+        mode: 'determinate',
+        message: 'Preparing upload...',
+        value: 0
+      })
+    })
+
+    return Promise.all(
+      fileIDs.map((id) => {
+        const file = this.getFile(id)
+        return this.opts.getUploadParameters(file).then((params) => {
+          this.core.emit('core:preprocess-progress', file.id, {
+            mode: 'determinate',
+            message: 'Preparing upload...',
+            value: 1
+          })
+          return params
+        })
+      })
+    ).then((responses) => {
+      const updatedFiles = {}
+      fileIDs.forEach((id, index) => {
+        const file = this.getFile(id)
+        const { endpoint, params } = responses[index]
+        const updatedFile = Object.assign({}, file, {
+          meta: Object.assign({}, file.meta, params),
+          multipart: {
+            endpoint,
+            fieldName: 'file',
+            fields: Object.keys(params),
+            getUploadUrl (xhr) {
+              const locationEl = xhr.responseXML.querySelector('Location')","The only good thing about XML responses is that you can do DOM things with them with 0 effort, hehe",Why do we need to do this?
211,"@@ -1,10 +1,10 @@
 const Plugin = require('../../core/Plugin')
 const Translator = require('../../core/Translator')
 const dragDrop = require('drag-drop')
-const Dashboard = require('./Dashboard')
+const DashboardUI = require('./Dashboard')",good call swapping these names! makes more sense this way i think,Why this change?
212,"@@ -1,10 +1,10 @@
-import html from '../../core/html'
+import html from '../core/html'
 
 export default (props) => {
   const demoLink = props.demo ? html`<a onclick=${props.handleDemoAuth}>Proceed with Demo Account</a>` : null
   return html`
-    <div class=""UppyGoogleDrive-authenticate"">
-      <h1>You need to authenticate with Google before selecting files.</h1>
+    <div class=""UppyPlugin-authenticate"">","I’m thinking what would be the best name for this generic provider view, as you’ve correctly described it in you folder naming. Maybe `UppyAcquire`, `UppyView` or `UppyProvider`? The reason I don’t like `UppyPlugin` is Plugin can be a different thing, like Tus is a plugin that doesn’t even have a view, and ProgressBar is a plugin that does different thing, while this is a generic view for providers.",I think this should be `UppyPlugin-authent
213,"@@ -1,10 +1,10 @@
-import html from '../../core/html'
+import html from '../core/html'
 
 export default (props) => {
   const demoLink = props.demo ? html`<a onclick=${props.handleDemoAuth}>Proceed with Demo Account</a>` : null
   return html`
-    <div class=""UppyGoogleDrive-authenticate"">
-      <h1>You need to authenticate with Google before selecting files.</h1>
+    <div class=""UppyPlugin-authenticate"">
+      <h1>You need to authenticate with Dropbox before selecting files.</h1>","We could put ${plugin.id} here, I guess?",I think this should be `UppyPlugin-authent
214,"@@ -1,101 +1,113 @@
-const ActionBrowseTagline = require('./ActionBrowseTagline')
 const { localIcon } = require('./icons')
 const { h, Component } = require('preact')
 
-const poweredByUppy = (props) => {
-  return <a tabindex=""-1"" href=""https://uppy.io"" rel=""noreferrer noopener"" target=""_blank"" class=""uppy-Dashboard-poweredBy"">{props.i18n('poweredBy')} <svg aria-hidden=""true"" class=""UppyIcon uppy-Dashboard-poweredByIcon"" width=""11"" height=""11"" viewBox=""0 0 11 11"">
-    <path d=""M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z"" fill-rule=""evenodd"" />
-  </svg><span class=""uppy-Dashboard-poweredByUppy"">Uppy</span></a>
-}
 class AddFiles extends Component {
   constructor (props) {
     super(props)
-    this.handleClick = this.handleClick.bind(this)
+
+    this.triggerFileInputClick = this.triggerFileInputClick.bind(this)
+
+    this.renderPoweredByUppy = this.renderPoweredByUppy.bind(this)
+    this.renderHiddenFileInput = this.renderHiddenFileInput.bind(this)
+    this.renderDropPasteBrowseTagline = this.renderDropPasteBrowseTagline.bind(this)
+    this.renderMyDeviceAcquirer = this.renderMyDeviceAcquirer.bind(this)
+    this.renderAcquirer = this.renderAcquirer.bind(this)
   }
 
-  handleClick (ev) {
-    this.input.click()
+  triggerFileInputClick () {
+    this.fileInput.click()
   }
 
-  render () {
-    const hasAcquirers = this.props.acquirers.length !== 0
+  renderPoweredByUppy () {
+    return <a tabindex=""-1"" href=""https://uppy.io"" rel=""noreferrer noopener"" target=""_blank"" class=""uppy-Dashboard-poweredBy"">
+      {this.props.i18n('poweredBy')}
+      <svg aria-hidden=""true"" class=""UppyIcon uppy-Dashboard-poweredByIcon"" width=""11"" height=""11"" viewBox=""0 0 11 11"">","Spacing between “powered by” text and “Uppy” with icon is gone, adding something like `{' '}` should fix it, I think.",Why do we need to bind these?
215,"@@ -1,101 +1,113 @@
-const ActionBrowseTagline = require('./ActionBrowseTagline')
 const { localIcon } = require('./icons')
 const { h, Component } = require('preact')
 
-const poweredByUppy = (props) => {
-  return <a tabindex=""-1"" href=""https://uppy.io"" rel=""noreferrer noopener"" target=""_blank"" class=""uppy-Dashboard-poweredBy"">{props.i18n('poweredBy')} <svg aria-hidden=""true"" class=""UppyIcon uppy-Dashboard-poweredByIcon"" width=""11"" height=""11"" viewBox=""0 0 11 11"">
-    <path d=""M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z"" fill-rule=""evenodd"" />
-  </svg><span class=""uppy-Dashboard-poweredByUppy"">Uppy</span></a>
-}
 class AddFiles extends Component {
   constructor (props) {
     super(props)
-    this.handleClick = this.handleClick.bind(this)
+
+    this.triggerFileInputClick = this.triggerFileInputClick.bind(this)
+
+    this.renderPoweredByUppy = this.renderPoweredByUppy.bind(this)
+    this.renderHiddenFileInput = this.renderHiddenFileInput.bind(this)
+    this.renderDropPasteBrowseTagline = this.renderDropPasteBrowseTagline.bind(this)
+    this.renderMyDeviceAcquirer = this.renderMyDeviceAcquirer.bind(this)
+    this.renderAcquirer = this.renderAcquirer.bind(this)
   }
 
-  handleClick (ev) {
-    this.input.click()
+  triggerFileInputClick () {
+    this.fileInput.click()
   }
 
-  render () {
-    const hasAcquirers = this.props.acquirers.length !== 0
+  renderPoweredByUppy () {
+    return <a tabindex=""-1"" href=""https://uppy.io"" rel=""noreferrer noopener"" target=""_blank"" class=""uppy-Dashboard-poweredBy"">
+      {this.props.i18n('poweredBy')}
+      <svg aria-hidden=""true"" class=""UppyIcon uppy-Dashboard-poweredByIcon"" width=""11"" height=""11"" viewBox=""0 0 11 11"">
+        <path d=""M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z"" fill-rule=""evenodd"" />
+      </svg>
+      <span class=""uppy-Dashboard-poweredByUppy"">Uppy</span>
+    </a>
+  }
 
-    if (!hasAcquirers) {
-      return (
-        <div class=""uppy-DashboardAddFiles"">
-          <div class=""uppy-DashboardTabs"">
-            <ActionBrowseTagline
-              acquirers={this.props.acquirers}
-              handleInputChange={this.props.handleInputChange}
-              i18n={this.props.i18n}
-              i18nArray={this.props.i18nArray}
-              allowedFileTypes={this.props.allowedFileTypes}
-              maxNumberOfFiles={this.props.maxNumberOfFiles}
-            />
-          </div>
-          <div class=""uppy-DashboardAddFiles-info"">
-            { this.props.note && <div class=""uppy-Dashboard-note"">{this.props.note}</div> }
-            { this.props.proudlyDisplayPoweredByUppy && poweredByUppy(this.props) }
-          </div>
-        </div>
-      )
-    }
+  renderHiddenFileInput () {
+    return <input class=""uppy-Dashboard-input""
+      hidden
+      aria-hidden=""true""
+      tabindex={-1}
+      type=""file""
+      name=""files[]""
+      multiple={this.props.maxNumberOfFiles !== 1}
+      // Clear file input","Maybe add that setting an empty `value=""""` wasn’t enough, and we are doing this to fix `onBeforeFileAdded`? Not sure, but might be helpful in the future?",Why do we need to bind these?
216,"@@ -1,101 +1,113 @@
-const ActionBrowseTagline = require('./ActionBrowseTagline')
 const { localIcon } = require('./icons')
 const { h, Component } = require('preact')
 
-const poweredByUppy = (props) => {
-  return <a tabindex=""-1"" href=""https://uppy.io"" rel=""noreferrer noopener"" target=""_blank"" class=""uppy-Dashboard-poweredBy"">{props.i18n('poweredBy')} <svg aria-hidden=""true"" class=""UppyIcon uppy-Dashboard-poweredByIcon"" width=""11"" height=""11"" viewBox=""0 0 11 11"">
-    <path d=""M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z"" fill-rule=""evenodd"" />
-  </svg><span class=""uppy-Dashboard-poweredByUppy"">Uppy</span></a>
-}
 class AddFiles extends Component {
   constructor (props) {
     super(props)
-    this.handleClick = this.handleClick.bind(this)
+
+    this.triggerFileInputClick = this.triggerFileInputClick.bind(this)
+
+    this.renderPoweredByUppy = this.renderPoweredByUppy.bind(this)
+    this.renderHiddenFileInput = this.renderHiddenFileInput.bind(this)
+    this.renderDropPasteBrowseTagline = this.renderDropPasteBrowseTagline.bind(this)
+    this.renderMyDeviceAcquirer = this.renderMyDeviceAcquirer.bind(this)
+    this.renderAcquirer = this.renderAcquirer.bind(this)
   }
 
-  handleClick (ev) {
-    this.input.click()
+  triggerFileInputClick () {
+    this.fileInput.click()
   }
 
-  render () {
-    const hasAcquirers = this.props.acquirers.length !== 0
+  renderPoweredByUppy () {
+    return <a tabindex=""-1"" href=""https://uppy.io"" rel=""noreferrer noopener"" target=""_blank"" class=""uppy-Dashboard-poweredBy"">
+      {this.props.i18n('poweredBy')}
+      <svg aria-hidden=""true"" class=""UppyIcon uppy-Dashboard-poweredByIcon"" width=""11"" height=""11"" viewBox=""0 0 11 11"">
+        <path d=""M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z"" fill-rule=""evenodd"" />
+      </svg>
+      <span class=""uppy-Dashboard-poweredByUppy"">Uppy</span>
+    </a>
+  }
 
-    if (!hasAcquirers) {
-      return (
-        <div class=""uppy-DashboardAddFiles"">
-          <div class=""uppy-DashboardTabs"">
-            <ActionBrowseTagline
-              acquirers={this.props.acquirers}
-              handleInputChange={this.props.handleInputChange}
-              i18n={this.props.i18n}
-              i18nArray={this.props.i18nArray}
-              allowedFileTypes={this.props.allowedFileTypes}
-              maxNumberOfFiles={this.props.maxNumberOfFiles}
-            />
-          </div>
-          <div class=""uppy-DashboardAddFiles-info"">
-            { this.props.note && <div class=""uppy-Dashboard-note"">{this.props.note}</div> }
-            { this.props.proudlyDisplayPoweredByUppy && poweredByUppy(this.props) }
-          </div>
-        </div>
-      )
-    }
+  renderHiddenFileInput () {
+    return <input class=""uppy-Dashboard-input""
+      hidden
+      aria-hidden=""true""
+      tabindex={-1}
+      type=""file""
+      name=""files[]""
+      multiple={this.props.maxNumberOfFiles !== 1}
+      // Clear file input
+      onchange={(event) => {
+        this.props.handleInputChange(event)
+        event.target.value = null
+      }}
+      accept={this.props.allowedFileTypes}
+      ref={(ref) => { this.fileInput = ref }} />
+  }
+
+  renderDropPasteBrowseTagline () {
+    const browse =
+      <button type=""button""
+        class=""uppy-Dashboard-browse""
+        onclick={this.triggerFileInputClick}>
+        {this.props.i18n('browse')}
+      </button>
 
-    // empty value="""" on file input, so that the input is cleared after a file is selected,
-    // because Uppy will be handling the upload and so we can select same file
-    // after removing — otherwise browser thinks it’s already selected
+    return <div class=""uppy-Dashboard-dropFilesTitle"">
+      {this.props.acquirers.length === 0
+        ? this.props.i18nArray('dropPaste', { browse })
+        : this.props.i18nArray('dropPasteImport', { browse })
+      }
+    </div>
+  }
+
+  renderMyDeviceAcquirer () {
+    return <div class=""uppy-DashboardTab"" role=""presentation"">
+      <button type=""button""
+        class=""uppy-DashboardTab-btn""
+        role=""tab""
+        tabindex={0}
+        onclick={this.triggerFileInputClick}>
+        {localIcon()}
+        <div class=""uppy-DashboardTab-name"">{this.props.i18n('myDevice')}</div>
+      </button>
+    </div>
+  }
+
+  renderAcquirer (acquirer) {
+    return <div class=""uppy-DashboardTab"" role=""presentation"">","Nitpick: since you’ve refactored this (thanks!), could we add `()` after all of the `return` statements, maybe?",Why do we need to bind these?
217,"@@ -1,11 +1,12 @@
-const Uppy = require('../../../../src/core')
-const Dashboard = require('../../../../src/plugins/Dashboard')
-const GoogleDrive = require('../../../../src/plugins/GoogleDrive')
-const Dropbox = require('../../../../src/plugins/Dropbox')
-const Webcam = require('../../../../src/plugins/Webcam')
-const Tus10 = require('../../../../src/plugins/Tus10')
-const MetaData = require('../../../../src/plugins/MetaData')
-const Informer = require('../../../../src/plugins/Informer')
+const Uppy = require('uppy/lib/core')
+const Dashboard = require('uppy/lib/plugins/Dashboard')
+const StatusBar = require('uppy/lib/plugins/StatusBar')
+const GoogleDrive = require('uppy/lib/plugins/GoogleDrive')
+const Dropbox = require('uppy/lib/plugins/Dropbox')
+const Webcam = require('uppy/lib/plugins/Webcam')
+const Tus10 = require('uppy/lib/plugins/Tus10')
+const MetaData = require('uppy/lib/plugins/MetaData')
+const Informer = require('uppy/lib/plugins/Informer')","I used `aliasify` to alias `uppy/lib` → `../../../../src/` here, so the examples are basically copy-pastable into projects that depend on `uppy`.",Why did you change this?
218,"@@ -1,12 +1,27 @@
 const html = require('yo-yo')
 const getFileTypeIcon = require('./getFileTypeIcon')
+const onload = require('on-load')
 const { checkIcon } = require('./icons')
 
+let file
+const meta = {}","Hmm, wouldn't this merge in edited metadata from previously edited files? If I change `a.png`'s ""license"" to ""public domain"" and then change `b.png`s ""caption"" to ""hello world"", `meta.license` would still be set to ""public domain""",Why do we need this?
219,"@@ -1,14 +1,33 @@
 const FileItem = require('./FileItem/index.js')
+const VirtualList = require('./VirtualList')
 const classNames = require('classnames')
 const { h } = require('preact')
 
+function chunks (list, size) {
+  const chunked = []
+  let currentChunk = []
+  list.forEach((item, i) => {
+    if (currentChunk.length < size) {
+      currentChunk.push(item)
+    } else {
+      chunked.push(currentChunk)
+      currentChunk = [item]
+    }
+  })
+  if (currentChunk.length) chunked.push(currentChunk)
+  return chunked
+}
+
 module.exports = (props) => {
   const noFiles = props.totalFileCount === 0
   const dashboardFilesClass = classNames(
     'uppy-Dashboard-files',
     { 'uppy-Dashboard-files--noFiles': noFiles }
   )
 
+  // 190px height + 2 * 5px margin
+  const rowHeight = 200",Maybe we could add a comment in CSS that the height is tied to this property in JS as well?,Why is this a function and not a function?
220,"@@ -1,141 +1,150 @@
 const zh_TW = {}
 
 zh_TW.strings = {
-  addMoreFiles: '添加更多文件',
-  addingMoreFiles: '正在添加更多文件',
-  allowAccessDescription: '為了通過您的相機進行拍照或錄影，請給網站相機的讀取權限',
+  addBulkFilesFailed: {
+    '0': '因伺服器錯誤，無法新增 %{smart_count} 個檔案',
+    '1': '因伺服器錯誤，無法新增 %{smart_count} 個檔案'
+  },
+  addMore: '新增更多',
+  addMoreFiles: '新增更多檔案',
+  addingMoreFiles: '正在新增更多檔案',
+  allowAccessDescription: '為了使用您的相機進行拍照或錄影，請允許網站讀取相機',
   allowAccessTitle: '請允許對相機的讀取權限',
   authenticateWith: '連接到%{pluginName}',
-  authenticateWithTitle: '請使用%{pluginName}進行身份驗證以選擇文件',
+  authenticateWithTitle: '請使用%{pluginName}進行身份驗證以選擇檔案',
   back: '返回',
-  addMore: '添加更多',
   browse: '瀏覽',
   cancel: '取消',
   cancelUpload: '取消上傳',
-  chooseFiles: '選擇文件',
-  closeModal: '關閉模態',
+  chooseFiles: '選擇檔案',
+  closeModal: '關閉互動視窗',
   companionAuthError: '需要認證',
   companionError: '與Companion的連接失敗',
+  companionUnauthorizeHint: '若要取消 %{provider} 帳號認證, 請前往 %{url}',
   complete: '完成',
-  connectedToInternet: '連接至網絡',
-  copyLink: '複製鏈接',
+  connectedToInternet: '連線至網絡',
+  copyLink: '複製連結',
   copyLinkToClipboardFallback: '複製以下網址',
-  copyLinkToClipboardSuccess: '鏈接已複製到剪貼板',
+  copyLinkToClipboardSuccess: '連結已複製到剪貼板',
   creatingAssembly: '準備上傳中...',
-  creatingAssemblyFailed: 'Transloadit：無法創建程序集',
-  dashboardTitle: '文件上傳工具',
-  dashboardWindowTitle: '文件上傳工具窗口（點擊離開以關閉）',
+  creatingAssemblyFailed: 'Transloadit：無法建立程序集',
+  dashboardTitle: '檔案上傳工具',
+  dashboardWindowTitle: '檔案上傳視窗（點擊離開以關閉）',
   dataUploadedOfTotal: '%{total}%{complete}',
   done: '完成',
-  dropHereOr: '拖動文件到這裡或%{browse}',
-  dropHint: '拖動文件到這裡',
-  dropPaste: '拖動文件到這裡，黏貼或者%{browse}',
-  dropPasteImport: '拖動文件到這裡，黏貼，%{browse}或者導入',
+  dropHereOr: '拖曳檔案到這裡或%{browse}',
+  dropHint: '拖曳檔案到這裡',
+  dropPaste: '拖曳檔案到這裡，貼上或者%{browse}',
+  dropPasteImport: '拖曳檔案到這裡，貼上，%{browse}或者匯入',
   edit: '編輯',
-  editFile: '編輯文件',
-  editing: '正在編輯%{file}',
-  emptyFolderAdded: '無法從空文件夾添加文件',
+  editFile: '編輯檔案',
+  editing: '編輯%{file}中',
+  emptyFolderAdded: '無法從空資料夾新增檔案',
   encoding: '編碼中...',
-  enterCorrectUrl: '錯誤鏈接： 請確認您輸入的是文件的鏈接',
-  enterUrlToImport: '輸入鏈接或者導入文件',
-  exceedsSize: '此文件超出允許的最大大小',
-  failedToFetch: 'Companion無法抓取此鏈接，請確保它是正確的',
+  enterCorrectUrl: '錯誤連結： 請確認您輸入的是檔案連結',
+  enterUrlToImport: '輸入連結或者匯入文件',
+  exceedsSize: '此檔案大小超出允許的最大值',
+  failedToFetch: 'Companion無法抓取此連結，請確認它是正確的',
   failedToUpload: '上傳%{file}失敗',
-  fileSource: '文件來源：%{name}',
+  fileSource: '檔案來源：%{name}',
   filesUploadedOfTotal: {
-    '0': '%{smart_count}個文件上傳%{complete}',
-    '1': '%{smart_count}個文件上傳%{complete}',
-    '2': '%{smart_count}個文件上傳%{complete}'
+    '0': '%{smart_count}個檔案上傳%{complete}',
+    '1': '%{smart_count}個檔案上傳%{complete}',
+    '2': '%{smart_count}個檔案上傳%{complete}'
   },
   filter: '篩選器',
-  finishEditingFile: '完成文件編輯',
+  finishEditingFile: '完成檔案編輯',
   folderAdded: {
-    '0': '從%{folder}添加了%{smart_count}個文件',
-    '1': '從%{folder}添加了%{smart_count}個文件',
-    '2': '從%{folder}添加了%{smart_count}個文件'
+    '0': '從%{folder}新增了%{smart_count}個檔案',
+    '1': '從%{folder}新增了%{smart_count}個檔案',
+    '2': '從%{folder}新增了%{smart_count}個檔案'
   },
-  import: '導入',
-  importFrom: '從%{name}導入',
-  link: '鏈接',
+  generatingThumbnails: '產生縮圖中...',
+  import: '匯入',
+  importFrom: '從%{name}匯入',
+  link: '連結',
   loading: '載入中...',
   logOut: '登出',
-  myDevice: '我的設備',
+  myDevice: '我的裝置',
+  noDuplicates: '無法新增重複檔案 \'%{fileName}\' 已存在',
   noFilesFound: '這裡空空如也',
-  noInternetConnection: '無法連接到網絡',
+  noInternetConnection: '無法連線到網絡',
+  noNewAlreadyUploading: '無法新增檔案: 已在上傳中',
+  openFolderNamed: '開啟資料夾 %{name}',
   pause: '暫停',
   pauseUpload: '暫停上傳',
   paused: '已暫停',
-  poweredBy: '強力驅動於',
+  poweredBy: '技術提供者',
   preparingUpload: '準備上傳中...',
   processingXFiles: {
-    '0': '%{smart_count}個文件處理中',
-    '1': '%{smart_count}個文件處理中',
-    '2': '%{smart_count}個文件處理中'
+    '0': '%{smart_count}個檔案處理中',
+    '1': '%{smart_count}個檔案處理中',
+    '2': '%{smart_count}個檔案處理中'
   },
-  removeFile: '移除文件',
-  resetFilter: '重置篩選器',
+  recordingLength: '錄影長度 %{recording_length}',
+  removeFile: '移除檔案',
+  resetFilter: '重設篩選器',
   resume: '恢復',
   resumeUpload: '恢復上傳',
   retry: '重試',
   retryUpload: '重試上傳',
-  saveChanges: '保存變更',
+  saveChanges: '儲存變更',
+  selectAllFilesFromFolderNamed: '選擇資料夾 %{name} 中的所有檔案',
+  selectFileNamed: '選擇檔案 %{name}',
   selectX: {
-    '0': '选择%{smart_count}',
-    '1': '选择%{smart_count}',
-    '2': '选择%{smart_count}'
+    '0': '選擇%{smart_count}',
+    '1': '選擇%{smart_count}',
+    '2': '選擇%{smart_count}'
   },
-  smile: '笑！',
-  startRecording: '開始影片錄制',
-  stopRecording: '停止影片錄制',
+  smile: '請微笑！',
+  startRecording: '開始錄影',
+  stopRecording: '停止錄影',
   takePicture: '拍照',
-  timedOut: '上傳已經停滯不前%{seconds}秒，中止上傳',
+  timedOut: '上傳已經停滯%{seconds}秒，中止上傳',
+  unselectAllFilesFromFolderNamed: '取消選擇資料夾 %{name} 中的所有檔案',
+  unselectFileNamed: '取消選擇檔案 %{name}',
   upload: '上傳',
   uploadComplete: '上傳完成',
   uploadFailed: '上傳失敗',
-  uploadPaused: '上傳暫停',
+  uploadPaused: '暫停上傳',
   uploadXFiles: {
-    '0': '上傳%{smart_count}個文件',
-    '1': '上傳%{smart_count}個文件',
-    '2': '上傳%{smart_count}個文件'
+    '0': '上傳%{smart_count}個檔案',
+    '1': '上傳%{smart_count}個檔案',
+    '2': '上傳%{smart_count}個檔案'
   },
   uploadXNewFiles: {
-    '0': '新上傳了%{smart_count}個文件',
-    '1': '新上傳了%{smart_count}個文件',
-    '2': '新上傳了%{smart_count}個文件'
+    '0': '新上傳了%{smart_count}個檔案',
+    '1': '新上傳了%{smart_count}個檔案',
+    '2': '新上傳了%{smart_count}個檔案'
   },
-  uploading: '正在上傳',
+  uploading: '上傳中',
   uploadingXFiles: {
-    '0': '正在上傳%{smart_count}個文件',
-    '1': '正在上傳%{smart_count}個文件',
-    '2': '正在上傳%{smart_count}個文件'
+    '0': '上傳%{smart_count}個檔案中',
+    '1': '上傳%{smart_count}個檔案中',
+    '2': '上傳%{smart_count}個檔案中'
   },
   xFilesSelected: {
-    '0': '%{smart_count}個文件被選中',
-    '1': '%{smart_count}個文件被選中',
-    '2': '%{smart_count}個文件被選中'
+    '0': '已選擇%{smart_count}個檔案',
+    '1': '已選擇%{smart_count}個檔案',
+    '2': '已選擇%{smart_count}個檔案'
   },
   xMoreFilesAdded: {
-    '0': '又有%{smart_count}個文件被添加',
-    '1': '又有%{smart_count}個文件被添加',
-    '2': '又有%{smart_count}個文件被添加'
+    '0': '又新增%{smart_count}個檔案',
+    '1': '又新增%{smart_count}個檔案',
+    '2': '又新增%{smart_count}個檔案'
   },
   xTimeLeft: '還剩下%{time}',
-  youCanOnlyUploadFileTypes: '您只能上傳這些文件類型：%{types}',
+  youCanOnlyUploadFileTypes: '您只能上傳這些檔案類型：%{types}',
   youCanOnlyUploadX: {
-    '0': '您只能上傳%{smart_count}個文件',
-    '1': '您只能上傳%{smart_count}個文件',
-    '2': '您只能上傳%{smart_count}個文件'
+    '0': '您只能上傳%{smart_count}個檔案',
+    '1': '您只能上傳%{smart_count}個檔案',
+    '2': '您只能上傳%{smart_count}個檔案'
   },
   youHaveToAtLeastSelectX: {
-    '0': '您至少要選擇%{smart_count}個文件',
-    '1': '您至少要選擇%{smart_count}個文件',
-    '2': '您至少要選擇%{smart_count}個文件'
+    '0': '您至少要選擇%{smart_count}個檔案',
+    '1': '您至少要選擇%{smart_count}個檔案',
+    '2': '您至少要選擇%{smart_count}個檔案'
   },","```suggestion
}
```",`addBulkFilesFailed` -> `addBulkFilesFaile
221,"@@ -1,15 +0,0 @@
-# transloadit-js-client","Would be cool if the project had _some_ kind of readme still. I'm not against keeping the design goals where everyone can see them.
",:
222,"@@ -1,155 +1,244 @@
-import UppyUtils = require('@uppy/utils');
+import UppyUtils = require('@uppy/utils')
 
 declare module Uppy {
   // Utility types
-  type OmitKey<T, Key> = Pick<T, Exclude<keyof T, Key>>;
+  type OmitKey<T, Key> = Pick<T, Exclude<keyof T, Key>>
 
   // These are defined in @uppy/utils instead of core so it can be used there without creating import cycles
-  export type UppyFile<TMeta extends IndexedObject<any> = {}, TBody extends IndexedObject<any> = {}> = UppyUtils.UppyFile<TMeta, TBody>;
-  export type Store = UppyUtils.Store;
-  export type InternalMetadata = UppyUtils.InternalMetadata;
+  export type UppyFile<
+    TMeta extends IndexedObject<any> = {},
+    TBody extends IndexedObject<any> = {}
+  > = UppyUtils.UppyFile<TMeta, TBody>
+  export type Store = UppyUtils.Store
+  export type InternalMetadata = UppyUtils.InternalMetadata
 
   interface IndexedObject<T> {
-    [key: string]: T;
-    [key: number]: T;
+    [key: string]: T
+    [key: number]: T
   }
 
   interface UploadedUppyFile<TMeta, TBody> extends UppyFile<TMeta, TBody> {
-    uploadURL: string;
+    uploadURL: string
   }
 
   interface FailedUppyFile<TMeta, TBody> extends UppyFile<TMeta, TBody> {
-    error: string;
+    error: string
   }
 
   // Replace the `meta` property type with one that allows omitting internal metadata; addFile() will add that
-  type UppyFileWithoutMeta<TMeta, TBody> = OmitKey<UppyFile<TMeta, TBody>, 'meta'>;
-  interface AddFileOptions<TMeta = IndexedObject<any>, TBody = IndexedObject<any>> extends Partial<UppyFileWithoutMeta<TMeta, TBody>> {
+  type UppyFileWithoutMeta<TMeta, TBody> = OmitKey<
+    UppyFile<TMeta, TBody>,
+    'meta'
+  >
+  interface AddFileOptions<
+    TMeta = IndexedObject<any>,
+    TBody = IndexedObject<any>
+  > extends Partial<UppyFileWithoutMeta<TMeta, TBody>> {
     // `.data` is the only required property here.
-    data: Blob | File;
-    meta?: Partial<InternalMetadata> & TMeta;
+    data: Blob | File
+    meta?: Partial<InternalMetadata> & TMeta
   }
 
   interface PluginOptions {
-    id?: string;
+    id?: string
   }
+  interface DefaultPluginOptions extends PluginOptions {
+    [prop: string]: any
+  }
+
+  type PluginTarget = string | Element | typeof Plugin
 
-  class Plugin {
-    id: string;
-    uppy: Uppy;
-    type: string;
-    constructor(uppy: Uppy, opts?: PluginOptions);
-    getPluginState(): object;
-    setPluginState(update: any): object;
-    update(state?: object): void;
-    mount(target: any, plugin: any): void;
-    render(state: object): void;
-    addTarget(plugin: any): void;
-    unmount(): void;
-    install(): void;
-    uninstall(): void;
+  class Plugin<TOptions extends PluginOptions = DefaultPluginOptions> {
+    id: string
+    uppy: Uppy
+    type: string
+    constructor(uppy: Uppy, opts?: TOptions)
+    getPluginState(): object
+    setPluginState(update: any): object
+    update(state?: object): void
+    mount(target: PluginTarget, plugin: typeof Plugin): void
+    render(state: object): void
+    addTarget(plugin: any): void
+    unmount(): void
+    install(): void
+    uninstall(): void
   }
 
   interface LocaleStrings {
-    [key: string]: string | LocaleStrings;
+    [key: string]: string | LocaleStrings
   }
   interface Locale {
-    strings: LocaleStrings;
-    pluralize?: (n: number) => number;
+    strings: LocaleStrings
+    pluralize?: (n: number) => number
   }
 
   interface Restrictions {
-    maxFileSize: number | null;
-    maxNumberOfFiles: number | null;
-    minNumberOfFiles: number | null;
-    allowedFileTypes: string[] | null;
+    maxFileSize?: number | null
+    maxNumberOfFiles?: number | null
+    minNumberOfFiles?: number | null
+    allowedFileTypes?: string[] | null
   }
 
-  interface UppyOptions {
-    id: string;
-    autoProceed: boolean;
-    allowMultipleUploads: boolean;
-    debug: boolean;
-    restrictions: Partial<Restrictions>;
-    target: string | Plugin;
-    meta: any;
-    onBeforeFileAdded: (currentFile: UppyFile, files: {[key: string]: UppyFile}) => UppyFile | boolean | undefined;
-    onBeforeUpload: (files: {[key: string]: UppyFile}) => {[key: string]: UppyFile} | boolean;
-    locale: Locale;
-    store: Store;
+  interface UppyOptions<TMeta extends IndexedObject<any> = {}> {
+    id?: string
+    autoProceed?: boolean
+    allowMultipleUploads?: boolean
+    debug?: boolean
+    restrictions?: Restrictions
+    meta?: TMeta
+    onBeforeFileAdded?: (
+      currentFile: UppyFile<TMeta>,
+      files: { [key: string]: UppyFile<TMeta> }
+    ) => UppyFile<TMeta> | boolean | undefined
+    onBeforeUpload?: (files: {
+      [key: string]: UppyFile<TMeta>
+    }) => { [key: string]: UppyFile<TMeta> } | boolean
+    locale?: Locale
+    store?: Store
   }
 
-  interface UploadResult<TMeta extends IndexedObject<any> = {}, TBody extends IndexedObject<any> = {}> {
-    successful: UploadedUppyFile<TMeta, TBody>[];
-    failed: FailedUppyFile<TMeta, TBody>[];
+  interface UploadResult<
+    TMeta extends IndexedObject<any> = {},
+    TBody extends IndexedObject<any> = {}
+  > {
+    successful: UploadedUppyFile<TMeta, TBody>[]
+    failed: FailedUppyFile<TMeta, TBody>[]
   }
 
-  interface State<TMeta extends IndexedObject<any> = {}, TBody extends IndexedObject<any> = {}> extends IndexedObject<any> {
-    capabilities?: {resumableUploads?: boolean};
-    currentUploads: {};
-    error?: string;
-    files: {[key: string]: UploadedUppyFile<TMeta, TBody> | FailedUppyFile<TMeta, TBody>};
+  interface State<
+    TMeta extends IndexedObject<any> = {},
+    TBody extends IndexedObject<any> = {}
+  > extends IndexedObject<any> {
+    capabilities?: { resumableUploads?: boolean }
+    currentUploads: {}
+    error?: string
+    files: {
+      [key: string]:
+        | UploadedUppyFile<TMeta, TBody>
+        | FailedUppyFile<TMeta, TBody>
+    }
     info?: {
-      isHidden: boolean;
-      type: string;
-      message: string;
-      details: string;
-    };
-    plugins?: IndexedObject<any>;
-    totalProgress: number;
+      isHidden: boolean
+      type: string
+      message: string
+      details: string
+    }
+    plugins?: IndexedObject<any>
+    totalProgress: number
   }
-  type LogLevel = 'info' | 'warning' | 'error';
-  class Uppy {
-    constructor(opts?: Partial<UppyOptions>);
-    on<TMeta extends IndexedObject<any> = {}>(event: 'upload-success', callback: (file: UppyFile<TMeta>, body: any, uploadURL: string) => void): Uppy;
-    on<TMeta extends IndexedObject<any> = {}>(event: 'complete', callback: (result: UploadResult<TMeta>) => void): Uppy;
-    on(event: string, callback: (...args: any[]) => void): Uppy;
-    off(event: string, callback: any): Uppy;
+
+  type LogLevel = 'info' | 'warning' | 'error'
+
+  /** Enable the old, untyped `uppy.use()` signature. */
+  type LooseTypes = 'loose'
+  /** Disable the old, untyped `uppy.use()` signature. */
+  type StrictTypes = 'strict'
+  type TypeChecking = LooseTypes | StrictTypes
+
+  class Uppy<TUseStrictTypes extends TypeChecking = TypeChecking> {
+    constructor(opts?: UppyOptions)
+    on<TMeta extends IndexedObject<any> = {}>(
+      event: 'upload-success',
+      callback: (file: UppyFile<TMeta>, body: any, uploadURL: string) => void
+    ): this
+    on<TMeta extends IndexedObject<any> = {}>(
+      event: 'complete',
+      callback: (result: UploadResult<TMeta>) => void
+    ): this
+    on(event: string, callback: (...args: any[]) => void): this
+    off(event: string, callback: any): this
     /**
      * For use by plugins only!
      */
-    emit(event: string, ...args: any[]): void;
-    updateAll(state: object): void;
-    setState(patch: object): void;
-    getState<TMeta extends IndexedObject<any> = {}>(): State<TMeta>;
-    readonly state: State;
-    setFileState(fileID: string, state: object): void;
-    resetProgress(): void;
-    addPreProcessor(fn: any): void;
-    removePreProcessor(fn: any): void;
-    addPostProcessor(fn: any): void;
-    removePostProcessor(fn: any): void;
-    addUploader(fn: any): void;
-    removeUploader(fn: any): void;
-    setMeta<TMeta extends IndexedObject<any> = {}>(data: TMeta): void;
-    setFileMeta<TMeta extends IndexedObject<any> = {}>(fileID: string, data: TMeta): void;
-    getFile<TMeta extends IndexedObject<any> = {}, TBody extends IndexedObject<any> = {}>(fileID: string): UppyFile<TMeta, TBody>;
-    getFiles<TMeta extends IndexedObject<any> = {}, TBody extends IndexedObject<any> = {}>(): Array<UppyFile<TMeta, TBody>>;
-    addFile<TMeta extends IndexedObject<any> = {}>(file: AddFileOptions<TMeta>): void;
-    removeFile(fileID: string): void;
-    pauseResume(fileID: string): boolean;
-    pauseAll(): void;
-    resumeAll(): void;
-    retryAll(): void;
-    cancelAll(): void;
-    retryUpload(fileID: string): any;
-    reset(): void;
-    getID(): string;
-    use<T extends typeof Plugin>(pluginClass: T, opts: object): Uppy;
-    getPlugin(name: string): Plugin;
-    iteratePlugins(callback: (plugin: Plugin) => void): void;
-    removePlugin(instance: Plugin): void;
-    close(): void;
-    info(message: string | {message: string; details: string}, type?: LogLevel, duration?: number): void;
-    hideInfo(): void;
-    log(msg: string, type?: LogLevel): void;
-    run(): Uppy;
-    restore<TMeta extends IndexedObject<any> = {}>(uploadID: string): Promise<UploadResult>;
-    addResultData(uploadID: string, data: object): void;
-    upload<TMeta extends IndexedObject<any> = {}>(): Promise<UploadResult>;
+    emit(event: string, ...args: any[]): void
+    updateAll(state: object): void
+    setState(patch: object): void
+    getState<TMeta extends IndexedObject<any> = {}>(): State<TMeta>
+    readonly state: State
+    setFileState(fileID: string, state: object): void
+    resetProgress(): void
+    addPreProcessor(fn: any): void",should `fn` be a function instead? Same for others below?,Why did you change this?
223,"@@ -1,16 +1,18 @@
 {
+  ""name"": ""uppy-dev-example"",
+  ""aliasify"": {
+    ""aliases"": {
+      ""@uppy"": ""../../packages/@uppy""
+    }
+  },
   ""dependencies"": {
-    ""@babel/core"": ""^7.2.2"",
+    ""@babel/core"": ""^7.4.4"",
     ""aliasify"": ""^2.1.0"",
     ""babelify"": ""^10.0.0"",
     ""watchify"": ""^3.11.0""
   },
+  ""private"": true,
   ""scripts"": {
-    ""watch:sandbox"": ""watchify -t babelify -t aliasify main.js -o bundle.js -vd""
-  },
-  ""aliasify"": {
-    ""aliases"": {
-      ""@uppy"": ""../../packages/@uppy""
-    }
+    ""watch:sandbox"": ""watchify -vd -t [ babelify --cwd ../../ ] -g aliasify main.js -o bundle.js""",:+1: But why did it work before? Something changed in that regard in Babel 7?,I think this should be `@babel/core`
224,"@@ -1,169 +0,0 @@
-const Provider = require('../Provider')",this is the legacy instagram module which is no longer used,Provider
225,"@@ -1,17 +1,19 @@
-const webkitGetAsEntryApi = require('./utils/webkitGetAsEntryApi')
+const webkitGetAsEntryApi = require('./utils/webkitGetAsEntryApi/index')
 const fallbackApi = require('./utils/fallbackApi')
 
 /**
  * Returns a promise that resolves to the array of dropped files (if a folder is dropped, and browser supports folder parsing - promise resolves to the flat array of all files in all directories).
  * Each file has .relativePath prop appended to it (e.g. ""/docs/Prague/ticket_from_prague_to_ufa.pdf"") if browser supports it. Otherwise it's undefined.
  *
  * @param {DataTransfer} dataTransfer
+ * @param {Function} logDropError - a function that's called every time some folder or some file error out (e.g. because of the folder name being too long on Windows). Notice that resulting promise will always be resolved anyway.
+ *
  * @returns {Promise} - Array<File>
  */
-module.exports = function getDroppedFiles (dataTransfer) {
+module.exports = function getDroppedFiles (dataTransfer, { logDropError = () => {} } = {}) {",`logDropError = ¯\_(ツ)_/¯`,`logDrop
226,"@@ -1,17 +1,70 @@
 language: node_js
-node_js:
-- ""10.15.3""
+
+.hosts: &HOSTS
+  - companion.test
+.apt: &APT
+  sources:
+  - ubuntu-toolchain-r-test
+  packages:
+  - g++-4.8
+.sauce_connect: &SAUCE
+  username:
+    secure: nAMJ/d1fm9urTYsQ+1uqj6Jjf71J8rzwYBSZbTDAeUEZzAdvGc0a9H3PYWM4pnUDPo5s1c9MMetXi2XNdUbXgMKHbEnePZ2mJamqFtXMmpG8pgFmMqj+btMd7Yybt070tRsn4Vy0uBSi2H/en7F3j+grABJV+SAXqWkSB7CU1fZaN/u0DpoGBNj1ZNwkYCIhpLueYJTPRWBOodMAarXuFv5+7KFOKuZM3tF/JjsMNSSaDgTkz13BZnbX6vNPxGJJNJcyJGSaXrVW8hh1Zmvnk/XdiLy+vt7Wz1wz3A9ebiFDuydo5AAkxrLFsCJ5nGEqLg3bkr6NaTRpbM84ZT3i1FQMTdKP6OHHqwAeBscB6BkyhZhzvsFtl2YRBNK9mA3OtOYvBmTkFkNqvrPQlfu7cFtyG5+AUfSCiTTgS/vWIwoqSVAXaOEqN8Fp54ecUdkzCTttl3gXteZzNLRYvyQcFpoJb6E+dS8qAW0OFOteiwKVuPCh3nGUzBP13bRo1i9UAX7ZCTlpjinkxE8ryzbToo6ZcVQMBAkKhaw/x8GzOtfm5rgYMeQzGEoBJNfr7qqfs7JMxAIEMYjrTL9PXVOp/R8F3FdsqbV70jSyfsxMSMkwSWFRmVslG8+Djy8P3LnckGy1FEbMHnH8GZHZg+hbBzN8Be1/1fV0oRRAr939WRc=
+  access_key:
+    secure: OY3oWwiJghfty9wSPVvlhirvFGxPHDdIRuVkzAv6j7C/hj2BWYAP/UHrwdQ9XiYisHi/B5mGeyRVlrAf0MNGrG84rTDUbTWZbmktfuxl7A+Y6c0czk+s4SdhOiANG5b3tFl5wKq8h7uhrWH5/jWoKQ2Fz1VDCqxTvvZQbo41jSBhi7TBia626hxEePzdaiuw6HhGFZtfaoVs/FX30ylz8WDNrBjwCynjxsT52BaQrVvgEhuyzlOpI69YkZBPOq4fc3KiZ2YR43gLTx8K+sYCE9yJxdg1xT/UAawEhmedU83nyBZVo4rr7+03AixIxtI28MUCfBMlcsGwBxcKEKY/IWcp9UkPCq6+zALQoncV478tP21eYvlmxSFhYCrv+WEQlN+BcNjr4OJlmmFDbCVaF7r9qLeQPImU0+9iJU3OjrW7lpfLxORpGDEr2Nx6awKkIJCxNyK9weefeNo6Fz3V1kkyZ/7yWFeniJnRUCbahrB2XgzxIE+W307s1Qs4fm6JK7hVLTtG4fBzjChmAyGIzu744ws9WqmjvkC9D7OfnuXqanv/VcBFqPiudInerv7NL8FketUC+fxe/7XJfcxdaDGBjk8Kq7zXDohGRGymUXEoMDNJsKkMMlaKzdf7tgqdhsRJoH9NCVqrDXuG5al0UtrDP5RS7qfoxUunJmNFhlg=
+  no_ssl_bump_domains: companion.test
+
+matrix:
+  include:
+    - node_js: 'stable'
+      env: UNIT=true
+      addons:
+        apt: *APT
+    - node_js: 10
+      env: UNIT=true
+      addons:
+        apt: *APT
+    - node_js: 10
+      env: LINT=true
+      addons:
+        apt: *APT
+    - node_js: 10
+      env: BUILD=true
+      addons:
+        apt: *APT
+    - node_js: 10
+      env: COMPANION=true
+      addons:
+        apt: *APT
+    # Build the website when things are merged to master
+    - node_js: 10
+      env: WEBSITE=true
+      if: branch = master AND type = push
+      addons:
+        apt: *APT
+    # Run e2e tests on branch builds, not PRs
+    - node_js: 10
+      env: ENDTOEND=true
+      if: type = push
+      addons:
+        hosts: *HOSTS
+        apt: *APT
+        sauce_connect: *SAUCE
 before_install:
 - nvm install-latest-npm
 install:
 - npm install
 - npm run bootstrap -- --no-ci
 script:
-- npm run build
-- npm run test
-- if [ ""${TRAVIS_PULL_REQUEST}"" = ""false"" ]; then npm run test:endtoend; fi
+- 'if [ -n ""${LINT-}"" ]; then npm run lint; fi'
+- 'if [ -n ""${LINT-}"" ]; then npm run test:type; fi'
+- 'if [ -n ""${WEBSITE-}"" ]; then npm run web:install; fi'
+- 'if [ -n ""${UNIT-}"" ]; then npm run test:unit; fi'
+- 'if [ -n ""${COMPANION-}"" ]; then npm run test:companion; fi'
+- 'if [ -n ""${ENDTOEND-}"" ] && [ ""${TRAVIS_PULL_REQUEST}"" = ""false"" ]; then npm run test:endtoend; fi'
+- 'if [ -n ""${BUILD-}"" ]; then npm run build; fi'
 - |
-  if [ ""${TRAVIS_PULL_REQUEST}"" = ""false"" ] &&\
+  if [ -n ""${BUILD-}"" ] && [ ""${TRAVIS_PULL_REQUEST}"" = ""false"" ] &&\",Perhaps :- for travis pull request too?,I think 
227,"@@ -1,20 +1,22 @@
 <%
 var categories = [
   // order: 1x
-  { path: 'docs/plugins/', name: 'Plugins', link: true },
+  { path: 'docs/robodog/', name: 'Robodog', link: true },","Robodog too high is the sidebar, maybe?",I don't 
228,"@@ -1,21 +1,17 @@
-import Uppy = require('@uppy/core');
-import CompanionClient = require('@uppy/companion-client');
+import Uppy = require('@uppy/core')
+import CompanionClient = require('@uppy/companion-client')
 
 declare module Dropbox {
-  interface DropboxOptions extends Uppy.PluginOptions, CompanionClient.ProviderOptions {
-    companionUrl: string;
-    companionAllowedHosts: string | RegExp | Array<string | RegExp>;
+  interface DropboxOptions
+    extends Uppy.PluginOptions,
+      CompanionClient.RequestClientOptions {",why not `CompanionClient.ProviderOptions `? 🤔 ,Why did 
229,"@@ -1,21 +1,17 @@
-import Uppy = require('@uppy/core');
-import CompanionClient = require('@uppy/companion-client');
+import Uppy = require('@uppy/core')
+import CompanionClient = require('@uppy/companion-client')
 
 declare module Dropbox {
-  interface DropboxOptions extends Uppy.PluginOptions, CompanionClient.ProviderOptions {
-    companionUrl: string;
-    companionAllowedHosts: string | RegExp | Array<string | RegExp>;
+  interface DropboxOptions
+    extends Uppy.PluginOptions,
+      CompanionClient.RequestClientOptions {
+    replaceTargetContent?: boolean
+    target?: Uppy.PluginTarget
+    companionUrl: string
+    companionAllowedHosts?: string | RegExp | Array<string | RegExp>","```suggestion
    companionAllowedHosts?: string | RegExp | Array<string | RegExp>
    title?: string
    storage?: CompanionClient.TokenStorage
```",Why do w
230,"@@ -1,21 +1,17 @@
-import Uppy = require('@uppy/core');
-import CompanionClient = require('@uppy/companion-client');
+import Uppy = require('@uppy/core')
+import CompanionClient = require('@uppy/companion-client')
 
 declare module Facebook {
-  interface FacebookOptions extends Uppy.PluginOptions, CompanionClient.ProviderOptions {
-    companionUrl: string;
-    companionAllowedHosts: string | RegExp | Array<string | RegExp>;
+  interface FacebookOptions
+    extends Uppy.PluginOptions,
+      CompanionClient.RequestClientOptions {
+    replaceTargetContent?: boolean
+    target?: Uppy.PluginTarget
+    companionUrl: string
+    companionAllowedHosts?: string | RegExp | Array<string | RegExp>","```suggestion
    companionAllowedHosts?: string | RegExp | Array<string | RegExp>
    title?: string
    storage?: CompanionClient.TokenStorage
```",why do w
231,"@@ -1,21 +1,17 @@
-import Uppy = require('@uppy/core');
-import CompanionClient = require('@uppy/companion-client');
+import Uppy = require('@uppy/core')
+import CompanionClient = require('@uppy/companion-client')
 
 declare module GoogleDrive {
-  interface GoogleDriveOptions extends Uppy.PluginOptions, CompanionClient.ProviderOptions {
-    companionUrl: string;
-    companionAllowedHosts: string | RegExp | Array<string | RegExp>;
+  interface GoogleDriveOptions
+    extends Uppy.PluginOptions,
+      CompanionClient.RequestClientOptions {
+    replaceTargetContent?: boolean
+    target?: Uppy.PluginTarget
+    companionUrl: string
+    companionAllowedHosts?: string | RegExp | Array<string | RegExp>",same suggestion as dropbox provider,I'm not 
232,"@@ -1,21 +1,17 @@
-import Uppy = require('@uppy/core');
-import CompanionClient = require('@uppy/companion-client');
+import Uppy = require('@uppy/core')
+import CompanionClient = require('@uppy/companion-client')
 
 declare module Instagram {
-  interface InstagramOptions extends Uppy.PluginOptions, CompanionClient.ProviderOptions {
-    companionUrl: string;
-    companionAllowedHosts: string | RegExp | Array<string | RegExp>;
+  interface InstagramOptions
+    extends Uppy.PluginOptions,
+      CompanionClient.RequestClientOptions {
+    replaceTargetContent?: boolean
+    target?: Uppy.PluginTarget
+    companionUrl: string
+    companionAllowedHosts?: string | RegExp | Array<string | RegExp>",same suggestion as previous providers,Why do w
233,"@@ -1,21 +1,17 @@
-import Uppy = require('@uppy/core');
-import CompanionClient = require('@uppy/companion-client');
+import Uppy = require('@uppy/core')
+import CompanionClient = require('@uppy/companion-client')
 
 declare module OneDrive {
-  interface OneDriveOptions extends Uppy.PluginOptions, CompanionClient.ProviderOptions {
-    companionUrl: string;
-    companionAllowedHosts: string | RegExp | Array<string | RegExp>;
+  interface OneDriveOptions
+    extends Uppy.PluginOptions,
+      CompanionClient.RequestClientOptions {
+    replaceTargetContent?: boolean
+    target?: Uppy.PluginTarget
+    companionUrl: string
+    companionAllowedHosts?: string | RegExp | Array<string | RegExp>",same suggestion as previous providers,I'm not 
234,"@@ -1,22 +0,0 @@
-The MIT License (MIT)","License can remain MIT
", ->
235,"@@ -1,23 +1,17 @@
-import Uppy = require('@uppy/core');
+import Uppy = require('@uppy/core')
 
 declare module DragDrop {
   interface DragDropOptions extends Uppy.PluginOptions {
-    inputName: string;
-    allowMultipleFiles: boolean;
-    width: string;
-    height: string;
-    note: string;
+    replaceTargetContent?: boolean
+    target?: Uppy.PluginTarget
+    inputName?: string
+    allowMultipleFiles?: boolean
+    width?: string
+    height?: string
+    note?: string",should this also include `locale`?,why do w
236,"@@ -1,23 +1,17 @@
-import Uppy = require('@uppy/core');
+import Uppy = require('@uppy/core')
 
 declare module Form {
   interface FormOptions extends Uppy.PluginOptions {
-    getMetaFromForm: boolean;
-    addResultToForm: boolean;
-    submitOnSuccess: boolean;
-    triggerUploadOnSubmit: boolean;
-    resultName: string;
+    replaceTargetContent?: boolean
+    target?: Uppy.PluginTarget
+    getMetaFromForm?: boolean
+    addResultToForm?: boolean
+    submitOnSuccess?: boolean
+    triggerUploadOnSubmit?: boolean
+    resultName?: string",what about `multipleResults`?,`replace
237,"@@ -1,24 +1,16 @@
-import Uppy = require('@uppy/core');
+import Uppy = require('@uppy/core')
 
 declare module Tus {
   export interface TusOptions extends Uppy.PluginOptions {",should we also extend type options from the `tus-js-client`? 🤔If it's available in its type declarations i.e,Why this
238,"@@ -1,25 +1,48 @@
-const html = require('yo-yo')
+const { h } = require('preact')
+const hyperx = require('hyperx')
+const html = hyperx(h)
 const cuid = require('cuid')
 
 module.exports = (props) => {
-  // const classes = props.active ? 'BrowserTable-row is-active' : 'BrowserTable-row'
   const uniqueId = cuid()
 
+  const checkboxSelect = (ev) => {
+    if (ev.keyCode === 13) {
+      ev.stopPropagation()
+      ev.preventDefault()
+    }
+  }
+
+  const handleItemClick = (ev) => {
+    // when file is clicked, select it, but when folder is clicked, open it
+    if (props.type === 'folder') {
+      return props.handleClick()
+    }
+    props.handleCheckboxClick(ev)
+  }","nice additions! minor point, should `checkboxSelect` be `handleCheckboxSelect` for consistency? i'm not sure if we follow that convention anywhere else, might be useful to do so though to identify event handlers.",Why do w
239,"@@ -1,26 +1,18 @@
-import Uppy = require('@uppy/core');
+import Uppy = require('@uppy/core')
 
 declare module Informer {
   interface Color {
-    bg: string | number;
-    text: string | number;
+    bg: string | number
+    text: string | number
   }
 
   interface InformerOptions extends Uppy.PluginOptions {
-    typeColors: {
-      [type: string]: Color
-    };
+    replaceTargetContent?: boolean
+    target?: Uppy.PluginTarget
+    typeColors?: { [type: string]: Color }",I don't see this property used anywhere in the plugin 🤔 ,Why do w
240,"@@ -1,28 +1,32 @@
 import { Plugin, PluginOptions, Uppy, UppyFile } from '@uppy/core';
 
-export interface AwsS3Part {
-  PartNumber: number;
-  Size: number;
-  ETag: string;
-}
+declare module AwsS3Multipart {
+    interface AwsS3Part {
+        PartNumber?: number;
+        Size?: number;
+        ETag?: string;
+    }
 
-export interface AwsS3MultipartOptions extends PluginOptions {
-  serverUrl: string;
-  createMultipartUpload(file: UppyFile): Promise<{uploadId: string, key: string}>;
-  listParts(file: UppyFile, opts: {uploadId: string, key: string}): Promise<AwsS3Part>;
-  prepareUploadPart(file: UppyFile, partData: {uploadId: string, key: string, body: Blob, number: number}): Promise<{url: string}>;
-  abortMultipartUpload(file: UppyFile, opts: {uploadId: string, key: string}): Promise<void>;
-  completeMultipartUpload(file: UppyFile, opts: {uploadId: string, key: string, parts: AwsS3Part[]}): Promise<{location?: string}>;
-  timeout: number;
-  limit: number;
+    interface AwsS3MultipartOptions extends PluginOptions {
+        serverUrl: string;
+        createMultipartUpload(file: UppyFile): Promise<{ uploadId: string, key: string }>;
+        listParts(file: UppyFile, opts: { uploadId: string, key: string }): Promise<AwsS3Part[]>;
+        prepareUploadPart(file: UppyFile, partData: { uploadId: string, key: string, body: Blob, number: number }): Promise<{ url: string }>;
+        abortMultipartUpload(file: UppyFile, opts: { uploadId: string, key: string }): Promise<void>;
+        completeMultipartUpload(file: UppyFile, opts: { uploadId: string, key: string, parts: AwsS3Part[] }): Promise<{ location?: string }>;
+        timeout: number;
+        limit: number;
+    }
 }
 
-export default class AwsS3Multipart extends Plugin {
-  constructor(uppy: Uppy, opts: Partial<AwsS3MultipartOptions>);
+declare class AwsS3Multipart extends Plugin {
+    constructor(uppy: Uppy, opts: Partial<AwsS3Multipart.AwsS3MultipartOptions>);
 }
 
+export = AwsS3Multipart;
+
 declare module '@uppy/core' {
-  export interface Uppy {
-    use(pluginClass: typeof AwsS3Multipart, opts: Partial<AwsS3MultipartOptions>): Uppy;
-  }
+    export interface Uppy {
+        use(pluginClass: typeof AwsS3Multipart, opts: Partial<AwsS3Multipart.AwsS3MultipartOptions>): Uppy;
+    }",please keep the 2-space indents,Why do we need this change?
241,"@@ -1,3 +1,17 @@
+/**
+ * Array.prototype.findIndex ponyfill for old browsers.",*polyfill?,
242,"@@ -1,3 +1,23 @@
+<%
+var categories = [
+  // order: 1x
+  { path: 'docs/plugins/', name: 'Plugins', link: true },
+  // order: 2x
+  { path: 'docs/dashboard/', name: 'Local Sources', link: false },
+  // order: 3x
+  { path: 'docs/providers/', name: 'Remote Providers', link: true },
+  // order: 4x
+  { path: 'docs/tus/', name: 'Uploaders', link: false },
+  // order: 5x
+  { path: 'docs/status-bar/', name: 'UI Elements', link: false },
+  // order: 6x
+  { path: 'docs/transloadit/', name: 'File Processing', link: false },
+  // order: 7x
+  { path: 'docs/form/', name: 'Miscellaneous', link: false },
+  // order: 8x
+  { path: 'docs/react/', name: 'React Components', link: true },",Reserved 10 items for each section … should maybe extract this to a json or yaml file like doc-order.json is.,I don't think we need a sep
243,"@@ -1,3 +1,4 @@
+require('whatwg-fetch')","hey @goto-bus-stop I'm not sure about this part, but does it look good to you?",
244,"@@ -1,32 +1,42 @@
-import Uppy = require('@uppy/core');
+import Uppy = require('@uppy/core')
+
+type MaybePromise<T> = T | Promise<T>
 
 declare module AwsS3Multipart {
   interface AwsS3Part {
-    PartNumber?: number;
-    Size?: number;
-    ETag?: string;
+    PartNumber?: number
+    Size?: number","looking through the code, it seems `Size` is never present in an `AwsS3Part` object 🤔",Why do we need this?
245,"@@ -1,32 +1,42 @@
-import Uppy = require('@uppy/core');
+import Uppy = require('@uppy/core')
+
+type MaybePromise<T> = T | Promise<T>
 
 declare module AwsS3Multipart {
   interface AwsS3Part {
-    PartNumber?: number;
-    Size?: number;
-    ETag?: string;
+    PartNumber?: number
+    Size?: number
+    ETag?: string
   }
 
   interface AwsS3MultipartOptions extends Uppy.PluginOptions {
-    companionUrl: string;
-    createMultipartUpload(file: Uppy.UppyFile): Promise<{ uploadId: string, key: string }>;
-    listParts(file: Uppy.UppyFile, opts: { uploadId: string, key: string }): Promise<AwsS3Part[]>;
-    prepareUploadPart(file: Uppy.UppyFile, partData: { uploadId: string, key: string, body: Blob, number: number }): Promise<{ url: string }>;
-    abortMultipartUpload(file: Uppy.UppyFile, opts: { uploadId: string, key: string }): Promise<void>;
-    completeMultipartUpload(file: Uppy.UppyFile, opts: { uploadId: string, key: string, parts: AwsS3Part[] }): Promise<{ location?: string }>;
-    timeout: number;
-    limit: number;
+    companionUrl?: string
+    createMultipartUpload?: (",TIL that you can create `partial functions` with `bind` like this https://github.com/transloadit/uppy/blob/ad80911ed3efa9ab40b0edb938633bd97298be9f/packages/%40uppy/aws-s3-multipart/src/index.js#L199,Why do we need `MaybePromis
246,"@@ -1,33 +1,34 @@
-# Uppy
+# [Uppy](http://uppy.io)
 
-<img src=""http://uppy.io/images/logos/uppy-dog-full.svg"" width=""120"" alt=""Uppy logo — a superman puppy in a pink suit"" align=""right"">
+<img src=""http://uppy.io/images/logos/uppy-dog-head-arrow.svg"" width=""120"" alt=""Uppy logo — a superman puppy in a pink suit"" align=""right"">
 
-<a href=""https://www.npmjs.com/package/uppy""><img src=""https://img.shields.io/badge/stability-experimental-orange.svg?style=flat-square""></a>
 <a href=""https://www.npmjs.com/package/uppy""><img src=""https://img.shields.io/npm/v/uppy.svg?style=flat-square""></a>
 <a href=""https://travis-ci.org/transloadit/uppy""><img src=""https://img.shields.io/travis/transloadit/uppy/master.svg?style=flat-square"" alt=""Build Status""></a>
+<a href=""https://www.npmjs.com/package/uppy""><img src=""https://img.shields.io/badge/stability-experimental-orange.svg?style=flat-square""></a>
 
-Uppy is a sleek, modular file uploader that integrates seemlessly with any framework. It fetches files from local disk, Google Drive, Dropbox, Instagram, remote URLs, cameras and other exciting locations, and then uploads them to the final destination. It’s fast, easy to use and let's you worry about more important problems than building a file uploader. [Try it live](http://uppy.io/examples/dashboard/).
+Uppy is a sleek, modular file uploader that integrates seemlessly with any application. It’s fast, easy to use and lets you worry about more important problems than building a file uploader.
 
-Uppy is developed by the [Transloadit](https://transloadit.com) team.
+- **Fetch** files from local disk, Google Drive, Dropbox, Instagram, or take selfies and videos with a camera;
+- **Preview** and edit metadata with a nice interface;
+- **Upload** to the final destination, optionally processing/encoding on the way;
 
-Check out docs and examples on [uppy.io](http://uppy.io).
+**[Try Uppy](http://uppy.io/examples/dashboard/)** | **[Read the docs](http://uppy.io/docs)**
 
 <img width=""700"" alt=""Uppy UI Demo: modal dialog with a few selected files and an upload button"" src=""https://github.com/transloadit/uppy/raw/master/uppy-screenshot.jpg"">
 
-- [Full featured UI](http://uppy.io/examples/dashboard)
-- [Simple Drag & Drop](http://uppy.io/examples/dragdrop)
+Uppy is being developed by the [Transloadit](https://transloadit.com) team.
 
 ## Features
 
 - Lightweight, modular plugin-based architecture, easy on dependencies :zap:
-- Use from a CDN or as a module to import",Is this no longer a goal? 😱 or just not something to advertise on the intro page?,I think this should be `upp
247,"@@ -1,4 +1,4 @@
-const { h, Component } = require('preact')
+const { Component } = require('preact')","Just FYI, I had to remove this unused import because Travis/`npm run lint` were complaining.",const { h } = require('prea
248,"@@ -1,4 +1,8 @@
-const html = require('yo-yo')
+const { h } = require('preact')
+const hyperx = require('hyperx')
+const html = hyperx(h)
+
+let inputEl",this might interfere when we have multiple dashboards. maybe ActionBrowseTagline needs to be a Component so we can store the reference to the element on it.,Why do we need this?
249,"@@ -1,40 +1,39 @@
-import Uppy = require('@uppy/core');
+import Uppy = require('@uppy/core')
 
 declare module Transloadit {
   interface AssemblyParameters {
-    auth: { key: string };
-    template_id?: string;
-    steps?: { [step: string]: object };
-    notify_url?: string;
-    fields?: { [name: string]: number | string };
+    auth: { key: string }
+    template_id?: string
+    steps?: { [step: string]: object }
+    notify_url?: string
+    fields?: { [name: string]: number | string }
   }
 
   interface AssemblyOptions {
-    params: AssemblyParameters;
-    fields?: { [name: string]: number | string };
-    signature?: string;
+    params: AssemblyParameters
+    fields?: { [name: string]: number | string }
+    signature?: string
   }
 
-  interface TransloaditOptions extends Uppy.PluginOptions {
-    params: AssemblyParameters;
-    signature: string;
-    service: string;
-    waitForEncoding: boolean;
-    waitForMetadata: boolean;
-    importFromUploadURLs: boolean;
-    alwaysRunAssembly: boolean;
-    getAssemblyOptions: (file: Uppy.UppyFile) => AssemblyOptions | Promise<AssemblyOptions>;
+  interface TransloaditOptionsBase extends Uppy.PluginOptions {
+    service?: string
+    waitForEncoding?: boolean
+    waitForMetadata?: boolean
+    importFromUploadURLs?: boolean
+    alwaysRunAssembly?: boolean",how about `errorReporting` and `limit`? 🤔 ,why do we need this?
250,"@@ -1,45 +1,49 @@
-const html = require('yo-yo')
+const { h, Component } = require('preact')
+const hyperx = require('hyperx')
+const html = hyperx(h)
 const SnapshotButton = require('./SnapshotButton')
 const RecordButton = require('./RecordButton')
 
 function isModeAvailable (modes, mode) {
   return modes.indexOf(mode) !== -1
 }
 
-module.exports = (props) => {
-  const src = props.src || ''
-  let video
-
-  if (props.useTheFlash) {
-    video = props.getSWFHTML()",😱 i coulda sworn i removed that! thanks for cleaning up 🙏 ,Why did you remove this?
251,"@@ -1,48 +1,48 @@
 export interface RequestClientOptions {
-  companionUrl: string;
-  companionHeaders?: object;
+  companionUrl: string
+  companionHeaders?: object
   /**
    * Deprecated, use `companionHeaders` instead.
    */
-  serverHeaders?: object;
+  serverHeaders?: object
 }
 ","we should also add token Storage interface like so 

```typescript
export interface TokenStorage {
  setItem: (key: string, value: string) => Promise<any> // or <void> not sure
  getItem: (key: string) => Promise<string>
  removeItem: (key: string) => Promise<any> // or <void> not sure
}
```

it will be used in `packages/@uppy/dropbox/types/index.d.ts` and other providers",Why did you change this?
252,"@@ -1,48 +1,48 @@
 export interface RequestClientOptions {
-  companionUrl: string;
-  companionHeaders?: object;
+  companionUrl: string
+  companionHeaders?: object
   /**
    * Deprecated, use `companionHeaders` instead.
    */
-  serverHeaders?: object;
+  serverHeaders?: object
 }
 
 export class RequestClient {
-  constructor (uppy: any, opts: RequestClientOptions);
-  get (path: string): Promise<any>;
-  post (path: string, data: object): Promise<any>;
-  delete (path: string, data: object): Promise<any>;
+  constructor (uppy: any, opts: RequestClientOptions)
+  get (path: string): Promise<any>
+  post (path: string, data: object): Promise<any>
+  delete (path: string, data: object): Promise<any>
 }
 
 export interface ProviderOptions extends RequestClientOptions {
-  provider: string;
-  authProvider?: string;
-  name?: string;
+  provider: string
+  authProvider?: string
+  name?: string","```suggestion
  name?: string
  pluginId: string
```",Why did you remove the semi
253,"@@ -1,48 +1,71 @@
+/**
+ * Async storage interface, similar to `localStorage`. This can be used to
+ * implement custom storages for authentication tokens.
+ */
+export interface TokenStorage {
+  setItem: (key: string, value: string) => Promise<void>
+  getItem: (key: string) => Promise<string>
+  removeItem: (key: string) => Promise<void>
+}
+
 export interface RequestClientOptions {
-  companionUrl: string;
-  companionHeaders?: object;
+  companionUrl: string
+  companionHeaders?: object
   /**
    * Deprecated, use `companionHeaders` instead.
    */
-  serverHeaders?: object;
+  serverHeaders?: object
 }
 
 export class RequestClient {
-  constructor (uppy: any, opts: RequestClientOptions);
-  get (path: string): Promise<any>;
-  post (path: string, data: object): Promise<any>;
-  delete (path: string, data: object): Promise<any>;
+  constructor (uppy: any, opts: RequestClientOptions)
+  get (path: string): Promise<any>
+  post (path: string, data: object): Promise<any>
+  delete (path: string, data: object): Promise<any>
 }
 
-export interface ProviderOptions extends RequestClientOptions {
-  provider: string;
-  authProvider?: string;
-  name?: string;
+/**
+ * Options for Providers that can be passed in by Uppy users through
+ * Plugin constructors.
+ */
+export interface PublicProviderOptions extends RequestClientOptions {
+  companionAllowedHosts?: string | RegExp | Array<string | RegExp>
+  storage?: TokenStorage","apologies for the mix up here 🙈, but based on [this PR](https://github.com/transloadit/uppy/pull/2046/files) which I submitted recently, it became apparent that the `storage` option is only supplied to the provider plugins themselves (i.e Dropbox, Instagram, etc.). A fallback is set for the provider plugins [like so](https://github.com/transloadit/uppy/blob/master/packages/%40uppy/companion-client/src/Provider.js#L99). It is then used by `companion-client/Provider` class [like so](https://github.com/transloadit/uppy/blob/master/packages/%40uppy/companion-client/src/Provider.js#L42). 

In essence, what I think we need to do is remove this line ☝️ and then add the field [here](https://github.com/transloadit/uppy/pull/1918/files#diff-8c1b43bfbf1e79e2aab309c4f195090dR10) (same for Instagram, OneDrive, etc.). Apologies for the mx up once again",I don't think we need to ex
254,"@@ -1,5 +1,19 @@
 const chalk = require('chalk')
 
+const valuesToMask = []
+/**
+ * Adds a list of strings that should be masked by the logger.
+ * This function can only be called once through out the life of the server.
+ * @param {Array} maskables a list of strings to be masked
+ */
+exports.addMaskables = (maskables) => {","If it can only be called once, perhaps a more appropriate name is something like `setMaskables`? `addX` sounds like you can add many `X`es by calling it many times",I don't think we need to ex
255,"@@ -1,5 +1,4 @@
 #!/usr/bin/env node
-'use strict'","hmm, we actually should _add_ `'use strict'` everywhere 🤔 ",//
256,"@@ -1,5 +1,5 @@
 ---
-title: ""List of Plugins""","I think we mostly use double quotes in YAML, actually, and single quotes around “category” everywhere are a mistake.", of
257,"@@ -1,5 +1,6 @@
 const express = require('express')
 const qs = require('querystring')
+const URL = require('url').URL","the `""engines""` field in package.json says companion supports Node.js 6.0 and up, but the `URL` class was added in 6.13.0. I think we should drop support for Node 6 but until then, perhaps we could use the old `url.parse` and `url.format` APIs, or add a fallback to use the [`whatwg-url`](https://www.npmjs.com/package/whatwg-url) package?",Can
258,"@@ -1,5 +1,6 @@
 const tokenService = require('./helpers/jwt')
 const logger = require('./logger')
+const uniq = require('lodash/uniq')","`lodash` is not a dependency of Companion yet, it just happens to be available in the repository due to hoisted dependencies. it should be added to its package.json.",Why
259,"@@ -1,6 +1,10 @@
-const html = require('yo-yo')
 const ActionBrowseTagline = require('./ActionBrowseTagline')
 const { localIcon } = require('./icons')
+const { h } = require('preact')
+const hyperx = require('hyperx')
+const html = hyperx(h)
+
+let inputEl",same deal about the global state maybe interfering as in ActionBrowseTagline,Why
260,"@@ -1,6 +1,16 @@
 const { iconText, iconAudio, iconVideo, iconPDF } = require('./icons')
 
-module.exports = function getIconByMime (fileTypeGeneral, fileTypeSpecific) {
+module.exports = function getIconByMime (fileType) {
+  const defaultChoise = {",very minor but `Choise` → `Choice`,Why
261,"@@ -1,6 +1,28 @@
 const preact = require('preact')
 const { findDOMElement } = require('../core/Utils')
 
+/**
+ * Defer a frequent call to the microtask queue.
+ */
+function debounce (fn) {
+  let calling = null
+  let latestArgs = null
+  return (...args) => {
+    latestArgs = args
+    if (!calling) {
+      calling = Promise.resolve().then(() => {
+        calling = null
+        // At this point `args` may be different from the most
+        // recent state, if multiple calls happened since this task
+        // was queued. So we use the `latestArgs`, which definitely
+        // is the most recent call.
+        return fn(...latestArgs)
+      })
+    }
+    return calling
+  }
+}
+",Would it make sense to use lodash’s debounce here or this is different?,I'm
262,"@@ -1,6 +1,5 @@
 const Uppy = require('uppy/lib/core')
 const Dashboard = require('uppy/lib/plugins/Dashboard')
-const StatusBar = require('uppy/lib/plugins/StatusBar')",The `use(Informer)` call should also be removed from this file,con
263,"@@ -1,6 +1,6 @@
-\----		
-type: docs		
-order: 30	
+\----
+type: docs
+order: 99",prolly should get rid of this?,Why
264,"@@ -1,6 +1,7 @@
 'use strict'
 
 const RequestClient = require('./RequestClient')
+const tokenStorage = require('./token-storage')",Most of the other Uppy client file names use camel case `tokenStorage.js` (see eg. @uppy/utils),con
265,"@@ -1,6 +1,8 @@
 const Plugin = require('../core/Plugin')
 const { findDOMElement } = require('../core/Utils')
-const getFormData = require('get-form-data').default
+// Rollup uses get-form-data's ES modules build, and rollup-plugin-commonjs automatically resolves `.default`.
+// So, if we are being built using rollup, this require() won't have a `.default` property.
+const getFormData = require('get-form-data').default || require('get-form-data')
 ","Oh wow, that’s one complicated require :)",I'm
266,"@@ -1,7 +1,7 @@
 <%
 var categories = [
   // order: 1x
-  { path: 'docs/transloadit-wrapper/', name: 'Transloadit Wrapper', link: true },
+  { path: 'docs/robodog/', name: 'Robodog', link: true },",:robot: :dog: :heart_eyes:  ,I d
267,"@@ -1,7 +1,7 @@
 {
   ""name"": ""@uppy/companion"",
   ""version"": ""0.14.2"",
-  ""description"": ""Server component for Uppy's (https://uppy.io) extensible file upload widget with support for drag&drop, resumable uploads, previews, restrictions, file processing/encoding, remote providers like Dropbox and Google Drive, S3 and more :dog:"",
+  ""description"": ""OAuth helper and remote fetcher for Uppy's (https://uppy.io) extensible file upload widget with support for drag&drop, resumable uploads, previews, restrictions, file processing/encoding, remote providers like Dropbox and Google Drive, S3 and more :dog:"",",":+1: 
","""au"
268,"@@ -1,76 +1,89 @@
-const { h } = require('preact')
+const { h, Component } = require('preact')
 const classNames = require('classnames')
-const pure = require('../../utils/pure')
+const shallowEqual = require('is-shallow-equal')
 const FilePreviewAndLink = require('./FilePreviewAndLink')
 const FileProgress = require('./FileProgress')
 const FileInfo = require('./FileInfo')
 const Buttons = require('./Buttons')
 
-module.exports = pure(function FileItem (props) {
-  const file = props.file
+module.exports = class FileItem extends Component {
+  shouldComponentUpdate (nextProps) {
+    return !shallowEqual(this.props, nextProps)","Same than `pure`, but a 3-rd party module?",Why
269,"@@ -1,76 +1,89 @@
-const { h } = require('preact')
+const { h, Component } = require('preact')
 const classNames = require('classnames')
-const pure = require('../../utils/pure')
+const shallowEqual = require('is-shallow-equal')
 const FilePreviewAndLink = require('./FilePreviewAndLink')
 const FileProgress = require('./FileProgress')
 const FileInfo = require('./FileInfo')
 const Buttons = require('./Buttons')
 
-module.exports = pure(function FileItem (props) {
-  const file = props.file
+module.exports = class FileItem extends Component {
+  shouldComponentUpdate (nextProps) {
+    return !shallowEqual(this.props, nextProps)
+  }
 
-  const isProcessing = file.progress.preprocess || file.progress.postprocess
-  const isUploaded = file.progress.uploadComplete && !isProcessing && !file.error
-  const uploadInProgressOrComplete = file.progress.uploadStarted || isProcessing
-  const uploadInProgress = (file.progress.uploadStarted && !file.progress.uploadComplete) || isProcessing
-  const isPaused = file.isPaused || false
-  const error = file.error || false
+  componentDidMount () {
+    const file = this.props.file
+    if (!file.preview && this.props.handleRequestThumbnail) {","Why do we need `&& this.props.handleRequestThumbnail` conditional, isn't it always defined?",Why
270,"@@ -1,8 +1,8 @@
-import Plugin from '../../src/plugins/Plugin.js'
+import Plugin from '../../src/core/Plugin.js'",maybe remove the .js from the import path like in the rest of the codebase?,Why
271,"@@ -1,80 +1,30 @@
-# @uppy/transloadit
+# @uppy/robodog
 
 <img src=""https://uppy.io/images/logos/uppy-dog-head-arrow.svg"" width=""120"" alt=""Uppy logo: a superman puppy in a pink suit"" align=""right"">
 
-<a href=""https://www.npmjs.com/package/@uppy/transloadit""><img src=""https://img.shields.io/npm/v/@uppy/transloadit.svg?style=flat-square""></a>
+<a href=""https://www.npmjs.com/package/@uppy/robodog""><img src=""https://img.shields.io/npm/v/@uppy/robodog.svg?style=flat-square""></a>
 <a href=""https://travis-ci.org/transloadit/uppy""><img src=""https://img.shields.io/travis/transloadit/uppy/master.svg?style=flat-square"" alt=""Build Status""></a>
 
-The Transloadit plugin can be used to upload files to Transloadit for all kinds of processing, such as transcoding video, resizing images, zipping/unzipping, [and more](https://transloadit.com/services/).
-
-[Try it live →](https://uppy.io/examples/transloadit/)
-
-Uppy is being developed by the folks at [Transloadit](https://transloadit.com), a versatile file encoding service.
-
-## Example
-
-`transloadit.form` attaches Transloadit to an existing HTML form.
-It could act like the jQuery SDK using the `@uppy/file-input` plugin,
-or it could also add the `@uppy/dashboard`.
-Uploads files on form submission, adds results to a hidden input,
-then really submits the form.
-
-```js
-const transloadit = require('@uppy/robodog')
-
-transloadit.form('#form', {
-  params: {
-    auth: { key: '' },
-    template_id: ''
-  }
-})
-```
-
-Adding Dashboard could be optional, eg
-
-```js
-transloadit.form('#form', {
-  ...
-  dashboard: true // or css selector, true means input[type=file]
-})
-```
-The file input would be replaced by a button that opens the dashboard modal.
-Needs:
-- a way of having a 'Done' button instead of 'Upload' that closes the modal but doesn't trigger upload.
-
-`transloadit.modal` opens the Dashboard and allows the user to select files.
-When the user is done, presses 'upload', files are uploaded and the modal closes.
-Promise resolves with results.
-
-Needs:
-- `{multi: false}` option in core, so that no new files can be added once `upload()` was called
-- `{autoClose: true}` option in dashboard, that closes it once upload is complete
-
-```js
-transloadit.modal({
-  params: {
-    auth: { key: '' },
-    template_id: ''
-  }
-}).then(({ successful, failed }) => {
-  // successful, failed are uppy.upload() result
-  // perhaps it could be assembly status or assembly results instead
-})
-```
+Robodog is an Uppy-based library that pulls your files through Transloadit for all kinds of processing, such as transcoding video, resizing images, zipping/unzipping, [and more](https://transloadit.com/services/).
 
 ## Installation
 
 ```bash
-$ npm install @uppy/transloadit --save
+$ npm install @uppy/robodog --save
 ```
 
-We recommend installing from npm and then using a module bundler such as [Webpack](http://webpack.github.io/), [Browserify](http://browserify.org/) or [Rollup.js](http://rollupjs.org/).
+We recommend installing from npm and then using a module bundler such as [Webpack](http://webpack.js.org/), [Browserify](http://browserify.org/) or [Rollup.js](http://rollupjs.org/).
 
-Alternatively, you can also use this plugin in a pre-built bundle from Transloadit's CDN: Edgly. In that case `Uppy` will attach itself to the global `window.Uppy` object. See the [main Uppy documentation](https://uppy.io/docs/#Installation) for instructions.
+Alternatively, you can also use this package in a pre-built bundle from Transloadit's CDN: Edgly.
+
+```html
+<link rel=""stylesheet"" href=""https://transloadit.edgly.net/releases/uppy/v0.30.2/robodog.min.css"">
+<script src=""https://transloadit.edgly.net/releases/uppy/v0.30.2/robodog.min.js""></script>
+```",I think this could use the equivalent of `In that case `Uppy` will attach itself to the global `window.Uppy` object. See the [main Uppy documentation](https://uppy.io/docs/#Installation) for instructions.`,I t
272,"@@ -1,84 +1,151 @@
-var fs = require('fs')
-var path = require('path')
-var chalk = require('chalk')
-var exec = require('child_process').exec
-var YAML = require('js-yaml')
+const fs = require('fs')
+const path = require('path')
+const chalk = require('chalk')
+const { exec } = require('child_process')
+const YAML = require('js-yaml')
+const { promisify } = require('util')
+const gzipSize = require('gzip-size')
+const bytes = require('pretty-bytes')
+const browserify = require('browserify')
 
-var webRoot = __dirname
-var uppyRoot = path.join(__dirname, '../packages/uppy')
+const webRoot = __dirname
+const uppyRoot = path.join(__dirname, '../packages/uppy')
 
-var configPath = webRoot + '/themes/uppy/_config.yml'
-var version = require(uppyRoot + '/package.json').version
+const configPath = path.join(webRoot, '/themes/uppy/_config.yml')
+const { version } = require(path.join(uppyRoot, '/package.json'))
 
-var defaultConfig = {
+const defaultConfig = {
   comment: 'Auto updated by update.js',
   uppy_version_anchor: '001',
   uppy_version: '0.0.1',
-  uppy_bundle_kb_sizes: {
-    'uppy.js': 'N/A'
-  },
+  uppy_bundle_kb_sizes: {},
   config: {}
 }
 
-var loadedConfig
-var buf
-try {
-  buf = fs.readFileSync(configPath, 'utf-8')
-  loadedConfig = YAML.safeLoad(buf)
-} catch (e) {
+// Keeping a whitelist so utils etc are excluded
+// It may be easier to maintain a blacklist instead
+const packages = [
+  'uppy',
+  '@uppy/core',
+  '@uppy/dashboard',
+  '@uppy/drag-drop',
+  '@uppy/file-input',
+  '@uppy/webcam',
+  '@uppy/dropbox',
+  '@uppy/google-drive',
+  '@uppy/instagram',
+  '@uppy/url',
+  '@uppy/tus',
+  '@uppy/xhr-upload',
+  '@uppy/aws-s3',
+  '@uppy/aws-s3-multipart',
+  '@uppy/status-bar',
+  '@uppy/progress-bar',
+  '@uppy/informer',
+  '@uppy/transloadit',
+  '@uppy/form',
+  '@uppy/golden-retriever',
+  '@uppy/react',
+  '@uppy/store-default',
+  '@uppy/store-redux'
+]","Yeah, `@uppy/thumbnail-generator` is not here, intentional? :)","I'm not sure if this is the best way to do this, but I'm not sure if there's a better way."
273,"@@ -1,9 +1,11 @@
-<!-- Basic Uppy styles. You can use a CDN: https://unpkg.com/uppy/dist/uppy.min.css -->
+<!-- Basic Uppy styles. You can use a Transloadit's CDN, Edgly: ",`a Transloadit` → `Transloadit` :),"I think this should be ""Transloadit's CDN"""
274,"@@ -1,9 +1,11 @@
-<!-- Basic Uppy styles. You can use a CDN: https://unpkg.com/uppy/dist/uppy.min.css -->
+<!-- Basic Uppy styles. You can use a Transloadit's CDN, Edgly: 
+https://transloadit.edgly.net/releases/uppy/v0.22.0/dist/uppy.min.css -->
 <link rel=""stylesheet"" href=""/uppy/uppy.min.css"">
 
 <div class=""UppyDragDrop""></div>
 
-<!-- Load Uppy pre-built bundled version. You can use a CDN: https://unpkg.com/uppy -->
+<!-- Load Uppy pre-built bundled version. You can use a Transloadit's CDN, Edgly: ",same here 👆 ,I think this should be `v0.22.0`
275,"@@ -1,9 +1,94 @@
----
-title: Dropbox
-type: examples
-order: 1
----
+<!DOCTYPE html>","Since this uses a layout, we already have `<html>` and page styling. You can rename the file to `dropbox.html` remove everything above `<h1>`, and starting/below `<body>`
",Why did you remove this?
276,"@@ -10,24 +51,36 @@ describe('File upload with Providers', () => {
     browser.reload()
   })
 
-  it('should upload a file completely with Google Drive', () => {
+  it('should upload a file completely with Google Drive', function () {",why are we not using arrow functions in this case?,"it('should upload a file completely with Google Drive', () => {"
277,"@@ -10,24 +51,36 @@ describe('File upload with Providers', () => {
     browser.reload()
   })
 
-  it('should upload a file completely with Google Drive', () => {
+  it('should upload a file completely with Google Drive', function () {
+    if (process.env.UPPY_GOOGLE_EMAIL === undefined) {
+      return this.skip()
+    }
+
     startUploadTest(browser, 'GoogleDrive')
     signIntoGoogle(browser)
     finishUploadTest(browser)
   })
 
-  it('should upload a file completely with Instagram', () => {
+  it('should upload a file completely with Instagram', function () {
+    if (process.env.UPPY_INSTAGRAM_USERNAME === undefined) {
+      return this.skip()
+    }
+
     startUploadTest(browser, 'Instagram')
     // do oauth authentication
     browser.waitForExist('input[name=username]')
     browser.setValue('input[name=username]', process.env.UPPY_INSTAGRAM_USERNAME)
     browser.setValue('input[name=password]', process.env.UPPY_INSTAGRAM_PASSWORD)
-    browser.click('button')
+    browser.click('form button')",Just `button` was clicking a cookie consent button locally :see_no_evil: ,Why do we need this check?
278,"@@ -10,28 +10,30 @@ module.exports = class MyCustomProvider extends Plugin {
     this.id = this.opts.id || 'MyCustomProvider'
     Provider.initPlugin(this, opts)
 
-    this.title = 'MyCustomProvider'
+    this.title = 'MyUnsplash'
     this.icon = () => (
-      <img src=""https://uppy.io/images/logos/uppy-dog-head-arrow.svg"" width=""23"" />
+      <img src=""https://unsplash.com/assets/core/logo-black-df2168ed0c378fa5506b1816e75eb379d06cfcd0af01e07a2eb813ae9b5d7405.svg"" width=""30"" />","Maybe we should store this file in this repo, in case the hash changes",Why did you change this?
279,"@@ -10,54 +10,28 @@ category: ""React""
 
 When using Uppy's React components, an Uppy instance must be passed in to the `uppy={}` prop from the outside. This Uppy instance must be initialized before passing it to the desired component, and be cleaned up using `uppy.close()` when you are done with it.
 
-## Functional Components
+## Functionl Components","Shouldn't this be ""Functional Components""?",This should be `Functional Components`
280,"@@ -10,6 +10,10 @@ declare module StatusBar {
     showProgressDetails?: boolean
     hideUploadButton?: boolean
     hideAfterFinish?: boolean
+    hideRetryButton?: boolean,
+    hidePauseResumeButton?: boolean,
+    hideCancelButton?: boolean,
+    doneButtonHandler: Function | null,","As is this would require users to pass in `doneButtonHandler: null`; we do need a `?` type here. Instead of `Function`, with typescript you can also specify a function signature, so that users wont accidentally expect to receive any arguments:
```suggestion
    doneButtonHandler?: () => void,
```",I think it would be better to use `Function` instead of `Function`
281,"@@ -10,6 +11,11 @@ const h = React.createElement
  */
 
 class Dashboard extends React.Component {
+  constructor (props) {
+    super(props)
+    this.validProps = getHTMLProps(props)","This only gathers the props from the initial render, which can be an issue if the user changes the props over time. Is `getHTMLProps` fast enough to just do it on every render? (I think the answer is probably yes—we do a bunch of work in render paths in Uppy itself, so a bit of props filtering is unlikely to matter…)",Why do we need this?
282,"@@ -10,7 +10,13 @@ script:
 - npm run build
 - npm run test
 - if [ ""${TRAVIS_PULL_REQUEST}"" = ""false"" ]; then npm run test:endtoend; fi
-#- npm run uploadcdn
+- |
+  if [ ""${TRAVIS_PULL_REQUEST}"" = ""false"" ] &&\
+     [[ ""${TRAVIS_COMMIT_MESSAGE}"" =~ ^Release* ]]; then",Still a little bit of shell but :),I'm not sure if this is the best way to do this. I'm not sure what the best way to do this
283,"@@ -10,9 +10,21 @@ function resolveUrl (origin, link) {
   return new URL_(link, origin).toString()
 }
 
-function isXml (xhr) {
-  const contentType = xhr.headers ? xhr.headers['content-type'] : xhr.getResponseHeader('Content-Type')
-  return typeof contentType === 'string' && contentType.toLowerCase() === 'application/xml'
+function isXml (content, xhr) {
+  const contentType = (xhr.headers ? xhr.headers['content-type'] : xhr.getResponseHeader('Content-Type'))
+    // Get rid of mime parameters like charset=utf-8
+    .replace(/;.*$/, '')
+  if (typeof contentType === 'string') {
+    if (contentType.toLowerCase() === 'application/xml') {","should we also be checking for `text/xml`? so maybe this?
```suggestion
    if (['application/xml', 'text/xml'].includes(contentType.toLowerCase())) {
```",Why do we need to strip the charset?
284,"@@ -100,8 +99,9 @@ class Uppy {
     }
 
     // Merge default options with the ones set by user
-    this.opts = Object.assign({}, defaultOptions, opts)
-    this.opts.restrictions = Object.assign({}, defaultOptions.restrictions, this.opts.restrictions)
+    this.opts = {}
+    this.setOptions(defaultOptions)
+    this.setOptions(opts)","I think we can safely do this here:
```js
this.opts = defaultOptions
this.setOptions(opts)
```
since `defaultOptions` is a local object that is created inside the constructor already.
Then `setOptions()` will only do the locale init once. Right now we're creating a Translator instance and then immediately throwing it away and creating a second one.",Why do we need this line?
285,"@@ -101,6 +126,13 @@ module.exports = class Client {
   cancelAssembly (assembly) {
     const url = assembly.assembly_ssl_url
     return fetch(url, { method: 'delete', headers: this._headers })","maybe it's worth wrapping the `fetch` module into a reusable module that handles the `NetworkError` internally? This pattern is now spread across the codebase, and the need to change this snippet at one place will most likely imply the need to change it everywhere else.",export default function
286,"@@ -102,22 +102,34 @@ module.exports = class DragDrop extends Plugin {
   }
 
   render (state) {
-    const DragDropClass = `uppy uppy-DragDrop-container ${this.isDragDropSupported ? 'is-dragdrop-supported' : ''}`
+    /* http://tympanus.net/codrops/2015/09/15/styling-customizing-file-inputs-smart-way/ */
+    const hiddenInputStyle = {
+      width: '0.1px',
+      height: '0.1px',
+      opacity: 0,
+      overflow: 'hidden',
+      position: 'absolute',
+      zIndex: -1
+    }
+    const DragDropClass = `uppy uppy-DragDrop-container ${this.isDragDropSupported ? 'uppy-DragDrop--is-dragdrop-supported' : ''}`
     const DragDropStyle = {
       width: this.opts.width,
       height: this.opts.height
     }
+    const restrictions = this.uppy.opts.restrictions
     return (
       <div class={DragDropClass} style={DragDropStyle}>
         <div class=""uppy-DragDrop-inner"">
           <svg aria-hidden=""true"" class=""UppyIcon uppy-DragDrop-arrow"" width=""16"" height=""16"" viewBox=""0 0 16 16"" xmlns=""http://www.w3.org/2000/svg"">
             <path d=""M11 10V0H5v10H2l6 6 6-6h-3zm0 0"" fill-rule=""evenodd"" />
           </svg>
           <label class=""uppy-DragDrop-label"">
-            <input class=""uppy-DragDrop-input""
+            <input style={hiddenInputStyle}
+              class=""uppy-DragDrop-input""
               type=""file""
               name=""files[]""
-              multiple=""true""
+              multiple={restrictions.maxNumberOfFiles !== 1 || !restrictions.maxNumberOfFiles}",and here,I think this should be `!restrictions.maxNumberOfFiles`
287,"@@ -102,6 +102,49 @@ strings: {
 }
 ```
 
+### `getUploadHeaders()`
+
+Set the default headers for the request to be sent to the server.
+A common use case is adding the `Authorization` header with your JWT token.",We should clarify that this is only used if you do not override `getUploadParameters()`,I don't think we need this line.
288,"@@ -1020,7 +1020,7 @@ describe('src/Core', () => {
       })
 
       core._calculateTotalProgress()
-      expect(core.getState().totalProgress).toEqual(65)
+      expect(core.getState().totalProgress).toEqual(66)
     })",65 vs 66? 🤔,Why was this changed?
289,"@@ -1028,6 +1060,7 @@
 
 .uppy-DashboardFileCard[aria-hidden=true] {
   transform: translateY(-105%);
+  transform: translate3d(0, -105%, 0);","The `translateY` is commented out in some places and kept here, is it intended as a fallback or should they be removed everywhere?",This should be `trans
290,"@@ -103,14 +116,49 @@ module.exports = class GoogleDrive extends Plugin {
   }
 
   getItemModifiedDate (item) {
-    return item.modifiedByMeDate
+    return item.modifiedTime
   }
 
   getItemThumbnailUrl (item) {
     return `${this.opts.serverUrl}/${this.GoogleDrive.id}/thumbnail/${this.getItemRequestPath(item)}`
   }
 
   render (state) {
+    // If the user has access to any Team Drives, handle them as needed.
+    if (state.plugins[this.id].hasTeamDrives) {","You can do `this.getPluginState()` instead of accessing `state.plugins[this.id]`, is a bit clearer I think :)",I'm not sure if this 
291,"@@ -103,14 +116,49 @@ module.exports = class GoogleDrive extends Plugin {
   }
 
   getItemModifiedDate (item) {
-    return item.modifiedByMeDate
+    return item.modifiedTime
   }
 
   getItemThumbnailUrl (item) {
     return `${this.opts.serverUrl}/${this.GoogleDrive.id}/thumbnail/${this.getItemRequestPath(item)}`
   }
 
   render (state) {
+    // If the user has access to any Team Drives, handle them as needed.
+    if (state.plugins[this.id].hasTeamDrives) {
+      let folders = state.plugins[this.id].folders
+
+      // Add Team Drive id parameter to any folders within Team Drives.
+      // This is needed in order to retrieve file lists.
+      folders.forEach((folder) => {
+        if (folder.teamDriveId) {
+          folder.id += `?teamDriveId=${folder.teamDriveId}`",this logic should be added to `getItemRequestPath` instead,I'm not sure if this 
292,"@@ -103,6 +104,14 @@ function uppySetOptions () {
     window.uppy.removePlugin(dropboxInstance)
   }
 
+  const boxInstance = window.uppy.getPlugin('Box')
+  if (opts.Box && !boxInstance) {
+    window.uppy.use(Box, { target: Dashboard, companionUrl: COMPANION })
+  }
+  if (!opts.Box && boxInstance) {
+    window.uppy.removePlugin(boxInstance)
+  }
+","excluding from examples in the meantime
```suggestion
```",Why do we need to che
293,"@@ -1031,6 +1037,11 @@ class Uppy {
    * @return {string} ID of this upload.
    */
   _createUpload (fileIDs) {
+    const { allowNewUpload, currentUploads } = this.getState()
+    if (!allowNewUpload) {
+      throw new Error('Cannot create a new upload: already uploading.')
+    }","Seems like a “hard” error, will this be shown in the UI?",I don't think we shou
294,"@@ -1034,12 +1074,12 @@ using `fetch()` to access it.
 
 ### Node
 Check out [this tutorial](https://www.fullstackreact.com/articles/using-create-react-app-with-a-server/).
-You can find the companion GitHub repository [here](https://github.com/fullstackreact/food-lookup-demo).
+You can find the Companion GitHub repository [here](https://github.com/fullstackreact/food-lookup-demo).
 
 ### Ruby on Rails
 
 Check out [this tutorial](https://www.fullstackreact.com/articles/how-to-get-create-react-app-to-work-with-your-rails-api/).
-You can find the companion GitHub repository [here](https://github.com/fullstackreact/food-lookup-demo-rails).
+You can find the Companion GitHub repository [here](https://github.com/fullstackreact/food-lookup-demo-rails).","The companions in this file don't refer to Companion :smile: We might as well nuke this readme, it's just here because create-react-app made it",Prefer single-quoted 
295,"@@ -104,13 +104,12 @@ module.exports = class ThumbnailGenerator extends Plugin {
 
     image = this.protect(image)
 
-    var steps = Math.ceil(Math.log2(image.width / targetWidth))
+    var steps = Math.ceil(Math.abs(Math.log2(image.width / targetWidth)))","I'm not sure if `Math.abs` is the best way to do it, for very small images the Math.abs call might return a positive number > 1 which would cause the step scaling to first size it up to N times the target size and then resize it back down. Another way could be to check if `steps < 1` and then set it to 1?",var steps = Math.ceil
296,"@@ -105,101 +119,91 @@ module.exports = (props) => {
   const isHidden = (uploadState === STATE_WAITING && props.hideUploadButton) ||
     (uploadState === STATE_WAITING && !props.newFiles > 0)
 
-  const statusBarEl = html`
-    <div class=""UppyStatusBar is-${uploadState}""
-         aria-hidden=""${isHidden}"">
-      <div class=""UppyStatusBar-progress ${progressMode ? `is-${progressMode}` : ''}""
-           style=""width: ${width}%""
-           role=""progressbar""
-           aria-valuemin=""0""
-           aria-valuemax=""100""
-           ${progressValue
-           ? { 'aria-valuenow': progressValue }
-           : {}}></div>
-      ${progressBarContent}
-      <div class=""UppyStatusBar-actions"">
-        ${props.newFiles && !props.hideUploadButton ? UploadBtn(props) : ''}
-        ${props.error ? RetryBtn(props) : ''}
+  const progressClasses = `uppy-StatusBar-progress 
+                           ${progressMode ? 'is-' + progressMode : ''}`
+
+  return (
+    <div class={'uppy uppy-StatusBar ' + `is-${uploadState}`} aria-hidden={isHidden}>","``` '' + `` ``` reads a bit weird, maybe use a single template string? or pass it through classnames",Why do we need the `i
297,"@@ -105,101 +119,91 @@ module.exports = (props) => {
   const isHidden = (uploadState === STATE_WAITING && props.hideUploadButton) ||
     (uploadState === STATE_WAITING && !props.newFiles > 0)
 
-  const statusBarEl = html`
-    <div class=""UppyStatusBar is-${uploadState}""
-         aria-hidden=""${isHidden}"">
-      <div class=""UppyStatusBar-progress ${progressMode ? `is-${progressMode}` : ''}""
-           style=""width: ${width}%""
-           role=""progressbar""
-           aria-valuemin=""0""
-           aria-valuemax=""100""
-           ${progressValue
-           ? { 'aria-valuenow': progressValue }
-           : {}}></div>
-      ${progressBarContent}
-      <div class=""UppyStatusBar-actions"">
-        ${props.newFiles && !props.hideUploadButton ? UploadBtn(props) : ''}
-        ${props.error ? RetryBtn(props) : ''}
+  const progressClasses = `uppy-StatusBar-progress 
+                           ${progressMode ? 'is-' + progressMode : ''}`
+
+  return (
+    <div class={'uppy uppy-StatusBar ' + `is-${uploadState}`} aria-hidden={isHidden}>
+      <div class={progressClasses}
+        style={{ width: width + '%' }}
+        role=""progressbar""
+        aria-valuemin=""0""
+        aria-valuemax=""100""
+        aria-valuenow={progressValue} />
+      {progressBarContent}
+      <div class=""uppy-StatusBar-actions"">
+        { props.newFiles && !props.hideUploadButton ? UploadBtn(props) : null }
+        { props.error ? RetryBtn(props) : null }","we could also use JSX where we're currently just calling functions, for nicer tree display in react devtools",Why do we need the `w
298,"@@ -105,6 +105,10 @@ module.exports = class DragDrop extends Plugin {
         // Nothing, restriction errors handled in Core
       }
     })
+
+    // ___Why not use value="""" on <input/> instead?
+    //    Because if we use that method of clearing the input, Chrome will not trigger onChange={} if we drop the same file twice (Issue #768).
+    event.target.value = null","We pass `ev` to the callback, but `event` works anyway. What sort of sorcery is this? 🙀 Been trying to find documentation for a while, nothing so far.",I don't think this is
299,"@@ -105,7 +105,6 @@
     ""@types/node"": ""12.12.27"",
     ""@types/react"": ""16.9.19"",
     ""@types/request"": ""2.48.4"",
-    ""@types/tus-js-client"": ""1.8.0"",","tus-js-client v2.1.0+ now includes the type definitions on its own, so that dependency is not needed anymore.","""@types/tus-js-client"
300,"@@ -106,24 +106,58 @@ module.exports = (props) => {
   }
 
   const width = typeof progressValue === 'number' ? progressValue : 100
+  const isHidden = uploadState === STATE_WAITING && !props.newFiles > 0
 
   return html`
     <div class=""UppyStatusBar is-${uploadState}""
-                aria-hidden=""${uploadState === STATE_WAITING}""
-                title="""">
-      <progress style=""display: none;"" min=""0"" max=""100"" value=${progressValue}></progress>
+         aria-hidden=""${isHidden}"">
       <div class=""UppyStatusBar-progress ${progressMode ? `is-${progressMode}` : ''}""
-           style=""width: ${width}%""></div>
+           style=""width: ${width}%""
+           role=""progressbar""
+           aria-valuemin=""0""
+           aria-valuemax=""100""
+           aria-valuenow=""${progressValue}""></div>
       ${progressBarContent}
+      <div class=""UppyStatusBar-actions"">
+        ${props.newFiles ? UploadBtn(props) : ''}
+        ${props.error ? RetryBtn(props) : ''}
+      </div>
     </div>
   `
 }
 
+const UploadBtn = (props) => {
+  return html`<button type=""button""
+                      class=""UppyStatusBar-actionBtn UppyStatusBar-actionBtn--upload""
+                      aria-label=""${props.i18n('uploadXFiles', { smart_count: props.newFiles })}""
+                      onclick=${props.startUpload}>
+                ${props.inProgress
+                  ? props.i18n('uploadXNewFiles', { smart_count: props.newFiles })
+                  : props.i18n('uploadXFiles', { smart_count: props.newFiles })
+                }
+              </button>`
+}
+
+const RetryBtn = (props) => {
+  return html`<button type=""button""
+                      class=""UppyStatusBar-actionBtn UppyStatusBar-actionBtn--retry""
+                      aria-label=""${props.i18n('retryUpload')}""
+                      onclick=${props.retryAll}>
+                ${props.i18n('retry')}
+              </button>`
+}","I wonder if we could pass these actions in as an option somehow? for a standalone StatusBar, not inside the Dashboard, having the upload button is a bit strange.

maybe so that the dashboard can do something like

```js
this.core.use(StatusBar, {
  id: `${this.id}-StatusBar`,
  actions (state) {
    return [ hasNewFiles && UploadBtn({ /* xyz */ }), hasError && RetryBtn({ /* xyz */ }) ]
  }
})
```",I don't think we need
301,"@@ -106,24 +106,58 @@ module.exports = (props) => {
   }
 
   const width = typeof progressValue === 'number' ? progressValue : 100
+  const isHidden = uploadState === STATE_WAITING && !props.newFiles > 0
 
   return html`
     <div class=""UppyStatusBar is-${uploadState}""
-                aria-hidden=""${uploadState === STATE_WAITING}""
-                title="""">
-      <progress style=""display: none;"" min=""0"" max=""100"" value=${progressValue}></progress>
+         aria-hidden=""${isHidden}"">
       <div class=""UppyStatusBar-progress ${progressMode ? `is-${progressMode}` : ''}""
-           style=""width: ${width}%""></div>
+           style=""width: ${width}%""
+           role=""progressbar""
+           aria-valuemin=""0""
+           aria-valuemax=""100""
+           aria-valuenow=""${progressValue}""></div>
       ${progressBarContent}
+      <div class=""UppyStatusBar-actions"">
+        ${props.newFiles ? UploadBtn(props) : ''}
+        ${props.error ? RetryBtn(props) : ''}
+      </div>
     </div>
   `
 }
 
+const UploadBtn = (props) => {
+  return html`<button type=""button""
+                      class=""UppyStatusBar-actionBtn UppyStatusBar-actionBtn--upload""
+                      aria-label=""${props.i18n('uploadXFiles', { smart_count: props.newFiles })}""
+                      onclick=${props.startUpload}>
+                ${props.inProgress
+                  ? props.i18n('uploadXNewFiles', { smart_count: props.newFiles })
+                  : props.i18n('uploadXFiles', { smart_count: props.newFiles })
+                }
+              </button>`
+}
+
+const RetryBtn = (props) => {
+  return html`<button type=""button""
+                      class=""UppyStatusBar-actionBtn UppyStatusBar-actionBtn--retry""
+                      aria-label=""${props.i18n('retryUpload')}""
+                      onclick=${props.retryAll}>
+                ${props.i18n('retry')}
+              </button>`
+}
+
 const ProgressBarProcessing = (props) => {
+  const value = Math.round(props.value * 100)
   return html`
     <div class=""UppyStatusBar-content"">
-      ${props.mode === 'determinate' ? `${Math.round(props.value * 100)}%・` : ''}
-      ${props.message}
+      <div role=""progressbar""
+           aria-valuemin=""0""
+           aria-valuemax=""100""
+           aria-valuenow=""${value}"">","when `props.mode` is 'indeterminate', we should not add the `aria-valuenow` attribute",I don't think we need
302,"@@ -106,24 +106,59 @@ module.exports = (props) => {
   }
 
   const width = typeof progressValue === 'number' ? progressValue : 100
+  const isHidden = (uploadState === STATE_WAITING && props.hideUploadButton) ||
+    (uploadState === STATE_WAITING && !props.newFiles > 0)
 
   return html`
     <div class=""UppyStatusBar is-${uploadState}""
-                aria-hidden=""${uploadState === STATE_WAITING}""
-                title="""">
-      <progress style=""display: none;"" min=""0"" max=""100"" value=${progressValue}></progress>
+         aria-hidden=""${isHidden}"">
       <div class=""UppyStatusBar-progress ${progressMode ? `is-${progressMode}` : ''}""
-           style=""width: ${width}%""></div>
+           style=""width: ${width}%""
+           role=""progressbar""
+           aria-valuemin=""0""
+           aria-valuemax=""100""
+           aria-valuenow=""${progressValue}""></div>","here `progressValue` can be null or undefined if we are processing and the processing progress is `'indeterminate'`, we should not add the valuenow attribute in that case",I don't think we need
303,"@@ -107,17 +107,22 @@ function toArray (list) {
 }
 
 /**
- * Takes a fileName and turns it into fileID, by converting to lowercase,
- * removing extra characters and adding unix timestamp
+ * Takes a file object and turns it into fileID, by converting file.name to lowercase,
+ * removing extra characters and adding type, size and lastModified
  *
- * @param {String} fileName
+ * @param {Object} file
+ * @return {String} the fileID
  *
  */
 function generateFileID (file) {
-  let fileID = file.name.toLowerCase()
-  fileID = fileID.replace(/[^A-Z0-9]/ig, '')
-  fileID = fileID + file.data.lastModified
-  return fileID
+  // filter is needed to not join empty values with `-`
+  return [
+    'uppy',
+    file.name ? file.name.toLowerCase().replace(/[^A-Z0-9]/ig, '') : '',
+    file.type,","Is this definitely a string at this point? Asking because files in state have a `{general, specific}` object as their type",I don't think you nee
304,"@@ -1076,6 +1076,7 @@ class Uppy {
       const currentProgress = this.getFile(file.id).progress
       this.setFileState(file.id, {
         progress: Object.assign({}, currentProgress, {
+          postprocess: this.postProcessors.length > 0,","`postprocess` is normally an object, not a boolean, so we should prob do something like:

```suggestion
          postprocess: this.postProcessors.length > 0 ? {
            mode: 'indeterminate'
          } : null,
```","postprocess: this.postProcessors.length > 0,"
305,"@@ -108,7 +108,7 @@ exports.getRequestPath = (item) => {
   } else if (item.file_type) {
     return `${encodeURIComponent(item.meeting_id)}?recordingId=${encodeURIComponent(item.id)}`
   }
-  return `${encodeURIComponent(item.uuid)}`
+  return `${encodeURIComponent(encodeURIComponent(item.uuid))}`",what kind of files does the `uuid` case match? Can we just always send `item.id` instead?,Why did you change this?
306,"@@ -108,7 +111,8 @@
     ""url-parse"": ""1.1.9"",
     ""whatwg-fetch"": ""2.0.3"",
     ""yo-yo"": ""1.4.0"",
-    ""yo-yoify"": ""3.7.2""
+    ""yo-yoify"": ""3.7.2"",
+    ""webdriverio"": ""^4.8.0""",should this be a devDependency?,This should be `^4.8.0`
307,"@@ -1084,8 +1084,14 @@ class Uppy {
           waitingFileIDs.push(file.id)
         }
       })
-
-      const uploadID = this._createUpload(waitingFileIDs)
+      const { currentUploads } = this.getState()
+
+      // get a list of files that are currently assigned to uploads
+      const currentlyUploadingFiles = Object.keys(currentUploads).reduce((prev, curr) => prev.concat(currentUploads[curr].fileIDs), [])
+      // files the list of files that are waiting to be uploaded against ones that are assigned to uploads. This should give us a list of files that have not been
+      // assigned to an upload yet
+      const filesToUpload = waitingFileIDs.filter((fileId) => currentlyUploadingFiles.indexOf(fileId) < 0)","Can we do this check a few lines up, here?

https://github.com/richardwillars/uppy/blob/0717ee8117a36510d582e960e223674cf98205a7/src/core/Core.js#L1083

`waitingFiles` was already supposed to be the list of files to upload. maybe we can just replace the `!file.uploadStarted` check on that line with `currentlyUploadingFiles.indexOf(fileId) === -1`?",I think this should be `currentUploadingFile
308,"@@ -1090,35 +1078,31 @@ class Uppy {
       this.log('No uploader type plugins are used', 'warning')
     }
 
-    const isMinNumberOfFilesReached = this._checkMinNumberOfFiles()
-    if (!isMinNumberOfFilesReached) {
-      return Promise.reject(new Error('Minimum number of files has not been reached'))
-    }
-
-    const beforeUpload = Promise.resolve()
+    return Promise.resolve()
       .then(() => this.opts.onBeforeUpload(this.getState().files))
+      .then(() => this._checkMinNumberOfFiles())
+      .then(() => {","This is mostly a whitespace change starting at this line, and ending…",I don't think this is the right place to do 
309,"@@ -1090,35 +1078,31 @@ class Uppy {
       this.log('No uploader type plugins are used', 'warning')
     }
 
-    const isMinNumberOfFilesReached = this._checkMinNumberOfFiles()
-    if (!isMinNumberOfFilesReached) {
-      return Promise.reject(new Error('Minimum number of files has not been reached'))
-    }
-
-    const beforeUpload = Promise.resolve()
+    return Promise.resolve()
       .then(() => this.opts.onBeforeUpload(this.getState().files))
+      .then(() => this._checkMinNumberOfFiles())
+      .then(() => {
+        const { currentUploads } = this.getState()
+        // get a list of files that are currently assigned to uploads
+        const currentlyUploadingFiles = Object.keys(currentUploads).reduce((prev, curr) => prev.concat(currentUploads[curr].fileIDs), [])
+
+        const waitingFileIDs = []
+        Object.keys(this.getState().files).forEach((fileID) => {
+          const file = this.getFile(fileID)
+          // if the file hasn't started uploading and hasn't already been assigned to an upload..
+          if ((!file.progress.uploadStarted) && (currentlyUploadingFiles.indexOf(fileID) === -1)) {
+            waitingFileIDs.push(file.id)
+          }
+        })
 
-    return beforeUpload.catch((err) => {
-      const message = typeof err === 'object' ? err.message : err
-      this.info(message, 'error', 5000)
-      return Promise.reject(new Error(`onBeforeUpload: ${message}`))
-    }).then(() => {
-      const { currentUploads } = this.getState()
-      // get a list of files that are currently assigned to uploads
-      const currentlyUploadingFiles = Object.keys(currentUploads).reduce((prev, curr) => prev.concat(currentUploads[curr].fileIDs), [])
-
-      const waitingFileIDs = []
-      Object.keys(this.getState().files).forEach((fileID) => {
-        const file = this.getFile(fileID)
-        // if the file hasn't started uploading and hasn't already been assigned to an upload..
-        if ((!file.progress.uploadStarted) && (currentlyUploadingFiles.indexOf(fileID) === -1)) {
-          waitingFileIDs.push(file.id)
-        }
+        const uploadID = this._createUpload(waitingFileIDs)
+        return this._runUpload(uploadID)
+      })",…and ending on this line.,Why are we removing this error handling?
310,"@@ -1099,8 +1087,6 @@ class Uppy {
 
       const result = currentUploads[uploadID].result
       this.emit('complete', result)
-      // Compatibility with pre-0.21
-      this.emit('success', fileIDs)",:dancer: ,Why was this removed?
311,"@@ -11,17 +11,21 @@ class ActionBrowseTagline extends Component {
   }
 
   render () {
+    const browse = (
+      <button type=""button"" class=""uppy-Dashboard-browse"" onclick={this.handleClick}>
+        {this.props.i18n('browse')}
+      </button>
+    )
+
     // empty value="""" on file input, so that the input is cleared after a file is selected,
     // because Uppy will be handling the upload and so we can select same file
     // after removing — otherwise browser thinks it’s already selected
     return (
       <span>
         {this.props.acquirers.length === 0
-          ? this.props.i18n('dropPaste')
-          : this.props.i18n('dropPasteImport')
-        } <button type=""button"" class=""uppy-Dashboard-browse"" onclick={this.handleClick}>
-          {this.props.i18n('browse')}
-        </button>
+          ? this.props.i18nArray('dropPaste', { browse })
+          : this.props.i18nArray('dropPasteImport', { browse })
+        }",Wicked! 🎉 ,I don't think you need to pass `{ browse }` 
312,"@@ -11,6 +11,20 @@ module.exports = class FileItem extends Component {
     return !shallowEqual(this.props, nextProps)
   }
 
+  componentDidMount () {
+    const file = this.props.file
+    if (!file.preview && this.props.handleRequestThumbnail) {
+      this.props.handleRequestThumbnail(file)
+    }
+  }
+
+  componentWillUnmount () {
+    const file = this.props.file
+    if (!file.preview && this.props.handleCancelThumbnail) {",I think we don't need the `this.props.handleCancelThumbnail` check,Why do we need to check for `handleCancelThu
313,"@@ -11,6 +11,7 @@
   ""devDependencies"": {
     ""@babel/cli"": ""^7.4.4"",
     ""@babel/core"": ""^7.4.4"",
+    ""@babel/plugin-proposal-class-properties"": ""^7.4.4"",",Kinda breaking my own rule here in terms of not adding things that are not standardised…but node.js and chrome already ship implementations,"""@babel/plugin-proposal-class-properties"": """
314,"@@ -11,8 +12,7 @@ export class RequestClient {
   delete (path: string, data: object): Promise<any>;
 }
 
-export interface ProviderOptions {
-  serverUrl: string;
+export interface ProviderOptions extends RequestClientOptions {",:+1: ,Why do we need this?
315,"@@ -110,6 +111,74 @@ module.exports = class DragDrop extends Plugin {
     })
   }
 
+  style () {
+    // these will be global styles variables,
+    // with an option to override them to support themes
+    const settings = {
+      fontSizes: {
+        normal: '1.2em'
+      },
+      colors: {
+        gray: '#ccc'
+      }
+    }
+
+    css`","Wonder why Github isn't highlighting this, I thought it also did that for `css` tags 😕 ",I don't think we need this.
316,"@@ -111,32 +104,34 @@ module.exports = class DragDrop extends Plugin {
   }
 
   onBrowseClick (ev) {
-    const input = this.el.querySelector('.uppy-DragDrop-input')
-    input.click()
+    this.input.click()
   }
 
   render (state) {
-    return html`
-      <div class=""Uppy UppyTheme--default uppy-DragDrop-container ${this.isDragDropSupported ? 'is-dragdrop-supported' : ''}""
-           style=""width: ${this.opts.width}; height: ${this.opts.height};"">
-        <form class=""uppy-DragDrop-inner"" onsubmit=${(ev) => ev.preventDefault()}>
-          <svg class=""UppyIcon uppy-DragDrop-arrow"" aria-hidden=""true"" width=""16"" height=""16"" viewBox=""0 0 16 16"" xmlns=""http://www.w3.org/2000/svg"">
+    return (
+      <div class={`Uppy UppyTheme--default uppy-DragDrop-container ${this.isDragDropSupported ? 'is-dragdrop-supported' : ''}`}
+           style={`width: ${this.opts.width}; height: ${this.opts.height};`}",do you have any opinions for or against using style objects here?,Why is this change needed?
317,"@@ -111,7 +115,11 @@ class AddFiles extends Component {
 
   renderAcquirer = (acquirer) => {
     return (
-      <div class=""uppy-DashboardTab"" role=""presentation"">
+      <div
+        class=""uppy-DashboardTab""
+        role=""presentation""
+        data-acquirer-id={acquirer.id}","```suggestion
        data-uppy-acquirer-id={acquirer.id}
```",I think this should be `data-acquirer-id`
318,"@@ -112,18 +112,23 @@ class Drive extends Provider {
       .request()
   }
 
-  _getGsuiteFileMeta (id, token, mimeType, onDone) {
-    logger.info(`calling Gsuite file meta for ${id}`, 'provider.drive.export.meta')
-    return this.client
-      .query()
-      .head(`files/${id}/export`)
-      .qs({ supportsAllDrives: true, mimeType })
-      .auth(token)
-      .request(onDone)
+  _waitForFailedResponse (resp) {
+    return new Promise((resolve, reject) => {
+      let data = ''
+      resp.on('data', (chunk) => {
+        data += chunk
+      }).on('end', () => {
+        try {
+          resolve(JSON.parse(data.toString()))
+        } catch (error) {
+          reject(error)
+        }
+      })",We need to handle `.on('error')` here too,"I don't think you need the `.on('data', ...)"
319,"@@ -112,7 +112,12 @@ module.exports = function Buttons (props) {
           i18n={i18n}
           info={props.info}
           log={props.log}
-          onClick={() => removeFile(file.id)}
+          onClick={() => {
+            removeFile(file.id)
+            // So that developers can distinguish when users manually removed
+            // files in the UI, vs uppy.reset() (see #2301)
+            this.props.emit('dashboard:file-removed-ui', file)",If we do this I think we should wrap the `removeFile()` function in the Dashboard plugin and do the emit there instead of threading the `emit` function through all these layers.,I'm not sure if this is the best way to do t
320,"@@ -112,7 +115,12 @@ module.exports = function Buttons (props) {
         onClick={() => toggleFileCard(file.id)}
       />
       {showLinkToFileUploadResult && file.uploadURL ? (
-        <CopyLinkButton i18n={i18n} />","Props for `file` were missing, so it was not possible to copy the link, //cc @goto-bus-stop just for reference",<CopyLinkButton
321,"@@ -113,3 +117,18 @@ exports.cors = (options = {}) => (req, res, next) => {
     exposedHeaders: exposedHeaders.join(','),
   })(req, res, next)
 }
+
+exports.metrics = () => {
+  const metricsMiddleware = promBundle({ includeMethod: true })
+  // @ts-ignore Not in the typings, but it does exist
+  const { promClient } = metricsMiddleware
+  const { collectDefaultMetrics } = promClient
+  collectDefaultMetrics({ register: promClient.register })
+
+  // Add version as a prometheus gauge
+  const versionGauge = new promClient.Gauge({ name: 'companion_version', help: 'npm version as an integer' })
+  // @ts-ignore
+  const numberVersion = version.replace(/\D/g, '') * 1","(Unrelated to the PR but maybe we can use parseInt here instead of casting with `*1`, then we can also remove the `//@ts-ignore`)",I'm not sure if
322,"@@ -1135,6 +1135,14 @@ class Uppy {
         isPaused: false
       })
 
+      // Remote providers sometimes don't tell us the file size,
+      // but we can know how many bytes we uploaded once the upload is complete.
+      if (file.size == null) {
+        this.setFileState(file.id, {
+          size: currentProgress.bytesTotal || uploadResp.bytesUploaded","I think there is a chance that `currentProgress.bytesTotal` is not going to be the actual size of the file because some events can be lost due to throttling, I think that I should always use `uploadResp.bytesUploaded`. It could look like

```javascript
if (uploadResp.bytesUploaded) {
 ...
 size: uploadResp.bytesUploaded
 ...
}
```",I don't think t
323,"@@ -114,12 +114,6 @@ function getArrayBuffer (chunk) {
 
 function getFileType (file) {
   const fileExtension = file.name ? getFileNameAndExtension(file.name).extension : null
-
-  if (file.isRemote) {
-    // some remote providers do not support file types
-    return file.type ? file.type : mimeTypes[fileExtension]
-  }
-",this check is now redundant. The rest of the function downwards basically does the same thing but with safer checks.,I don't think w
324,"@@ -114,28 +116,28 @@ Alternatively, you can also use a pre-built bundle from Transloadit's CDN: Edgly
 - ⓒ [`Google Drive`](https://uppy.io/docs/google-drive/)
 - ⓒ [`Dropbox`](https://uppy.io/docs/dropbox/)
 - ⓒ [`Instagram`](https://uppy.io/docs/instagram/)
-- ⓒ [`Import From URL`](https://uppy.io/docs/url/) — support picking files from remote providers or direct URLs from anywhere on the web
+- ⓒ [`Import From URL`](https://uppy.io/docs/url/) — supports picking files from remote providers or direct URLs from anywhere on the web","“support” was meant like a call to action here, as in “support picking files from anywhere on your website”.",- ⓒ [`Import Fr
325,"@@ -114,49 +141,64 @@ module.exports = class GoldenRetriever extends Plugin {
     })
 
     const { currentUploads } = this.uppy.getState()
+
     this.MetaDataStore.save({
       currentUploads,
-      files: filesToSave,
+      files: filesToSaveWithoutData,
       pluginData,
     })
   }
 
   loadFileBlobsFromServiceWorker () {
-    this.ServiceWorkerStore.list().then((blobs) => {
+    if (!this.ServiceWorkerStore) {
+      return Promise.resolve({})
+    }
+
+    return this.ServiceWorkerStore.list().then((blobs) => {
+      const files = this.uppy.getFiles()
+      const localFilesOnly = files.filter((file) => {
+        // maybe && !file.progress.uploadComplete
+        return !file.isRemote
+      })
+
       const numberOfFilesRecovered = Object.keys(blobs).length
-      const numberOfFilesTryingToRecover = this.uppy.getFiles().length
+      const numberOfFilesTryingToRecover = localFilesOnly.length
+
       if (numberOfFilesRecovered === numberOfFilesTryingToRecover) {
         this.uppy.log(`[GoldenRetriever] Successfully recovered ${numberOfFilesRecovered} blobs from Service Worker!`)
-        this.uppy.info(`Successfully recovered ${numberOfFilesRecovered} files`, 'success', 3000)
-        return this.onBlobsLoaded(blobs)
+        return blobs
       }
       this.uppy.log('[GoldenRetriever] No blobs found in Service Worker, trying IndexedDB now...')
-      return this.loadFileBlobsFromIndexedDB()
+      return {}",nice refactors here 👍🏻 ,Why do we need 
326,"@@ -115,7 +115,7 @@ module.exports = function getIconByMime (fileType) {
   }
 
   // Archive
-  const archiveTypes = ['zip', 'x-7z-compressed', 'x-rar-compressed', 'x-gtar', 'x-apple-diskimage', 'x-diskcopy']",Could you clarifty why some of those are removed?,const archiveTy
327,"@@ -116,33 +120,46 @@ module.exports = class Webcam extends Plugin {
     return !!this.mediaDevices
   }
 
-  getConstraints () {
+  getConstraints (deviceId) {
     const acceptsAudio = this.opts.modes.indexOf('video-audio') !== -1 ||
       this.opts.modes.indexOf('audio-only') !== -1
     const acceptsVideo = this.opts.modes.indexOf('video-audio') !== -1 ||
       this.opts.modes.indexOf('video-only') !== -1 ||
       this.opts.modes.indexOf('picture') !== -1
 
+    const videoConstraints = deviceId ? { deviceId: deviceId } : { facingMode: this.opts.facingMode }
+
     return {
       audio: acceptsAudio,
-      video: acceptsVideo ? { facingMode: this.opts.facingMode } : false
+      video: acceptsVideo ? videoConstraints : false
     }
   }
 
-  start () {
+  start (deviceId = null) {","I would prefer if this took an options object with a deviceId property:
```js
this.start({ deviceId: deviceId })
```

especially if we might want to add more options in the future.",Why do we need 
328,"@@ -117,11 +117,14 @@ uppy.use(Transloadit, {
 })
 ```
 
-You can also set `fields: true` to send all global metadata along to the Assembly. Global metadata is set using the [`meta` option](/docs/uppy/#meta) in the Uppy constructor, or using the [`setMeta` method](/docs/uppy/#uppy-setMeta-data). The [Form](/docs/form) plugin also sets global metadata, providing a handy way to use values from HTML form fields:
+You can also pass an array of field names to send global or file metadata along to the Assembly. Global metadata is set using the [`meta` option](/docs/uppy/#meta) in the Uppy constructor, or using the [`setMeta` method](/docs/uppy/#uppy-setMeta-data). File metadata is set using the [`setFileMeta`](/docs/uppy/#uppy-setFileMeta-fileID-data) method. The [Form](/docs/form) plugin also sets global metadata based on the values of `<input />`s in the form, providing a handy way to use values from HTML form fields:
 
 ```js
 uppy.use(Form, { target: 'form#my-form', getMetaFromForm: true })","getMetaFromForm is true by default, but it doesn’t make a difference really.",I don't think t
329,"@@ -119,11 +123,11 @@ module.exports = (props) => {
   const isHidden = (uploadState === STATE_WAITING && props.hideUploadButton) ||
     (uploadState === STATE_WAITING && !props.newFiles > 0)
 ","Could we re-use `isHidden` constant we already have in place here, instead of adding a new `hiddenClass ` css class? Perhaps by adding one extra condition, like so (haven’t tested this):

```js
const isHidden = (uploadState === STATE_WAITING && props.hideUploadButton) ||
  (uploadState === STATE_WAITING && !props.newFiles > 0) ||
  (uploadState === STATE_COMPLETE && props.hideAfterFinish)
```

 ",const isLoading
330,"@@ -119,7 +160,7 @@ module.exports = class Multipart extends Plugin {
     filesForUpload.forEach((file, i) => {
       const current = parseInt(i, 10) + 1
       const total = filesForUpload.length
-      this.upload(file, current, total)
+      file.isRemote ? this.uploadRemote(file, current, total) : this.upload(file, current, total)",Please write this as a full `if (...) { } else { }` statement,Why do we need 
331,"@@ -12,160 +12,104 @@ export default class Modal extends Plugin {
 
     // set default options
     const defaultOptions = {
-      defaultTabIcon: `
-        <svg class=""UppyModalTab-icon"" width=""28"" height=""28"" viewBox=""0 0 101 58"" xmlns=""http://www.w3.org/2000/svg"">
+      defaultTabIcon: yo`
+        <svg class=""UppyModalTab-icon"" width=""28"" height=""28"" viewBox=""0 0 101 58"">
           <path d=""M17.582.3L.915 41.713l32.94 13.295L17.582.3zm83.333 41.414L67.975 55.01 84.25.3l16.665 41.414zm-48.998 5.403L63.443 35.59H38.386l11.527 11.526v5.905l-3.063 3.32 1.474 1.36 2.59-2.806 2.59 2.807 1.475-1.357-3.064-3.32v-5.906zm16.06-26.702c-3.973 0-7.194-3.22-7.194-7.193 0-3.973 3.222-7.193 7.193-7.193 3.974 0 7.193 3.22 7.193 7.19 0 3.974-3.22 7.194-7.195 7.194zM70.48 8.682c-.737 0-1.336.6-1.336 1.337 0 .736.6 1.335 1.337 1.335.738 0 1.338-.598 1.338-1.336 0-.74-.6-1.338-1.338-1.338zM33.855 20.415c-3.973 0-7.193-3.22-7.193-7.193 0-3.973 3.22-7.193 7.195-7.193 3.973 0 7.192 3.22 7.192 7.19 0 3.974-3.22 7.194-7.192 7.194zM36.36 8.682c-.737 0-1.336.6-1.336 1.337 0 .736.6 1.335 1.337 1.335.738 0 1.338-.598 1.338-1.336 0-.74-.598-1.338-1.337-1.338z""/>
         </svg>
       `,
       panelSelectorPrefix: 'UppyModalContent-panel'
     }
 
-    this.tabPanels = []
-
-    this.isModalVisible = false
-
     // merge default options with the ones set by user
     this.opts = Object.assign({}, defaultOptions, opts)
 
-    this.initTabs = this.initTabs.bind(this)
+    this.progressindicators = {}
+
     this.hideModal = this.hideModal.bind(this)
     this.showModal = this.showModal.bind(this)
-    this.install = this.install.bind(this)
   }
 
-  prepareTarget (callerPlugin) {
+  update (state) {
+    var newEl = this.render(state)
+    yo.update(this.el, newEl)
+  }
+
+  addTarget (callerPlugin, el) {
     const callerPluginId = callerPlugin.constructor.name
     const callerPluginName = callerPlugin.name || callerPluginId
     const callerPluginIcon = callerPlugin.icon || this.opts.defaultTabIcon
+    const callerPluginType = callerPlugin.type
+
+    if (callerPluginType !== 'acquirer' &&
+        callerPluginType !== 'progressindicator' &&
+        callerPluginType !== 'presenter') {
+      let msg = 'Error: Modal can only be used by plugins of types: acquirer, progressindicator, presenter'
+      this.core.log(msg)
+      return
+    }
 
-    switch (callerPlugin.type) {
-      case 'progressindicator':
-        return '.UppyModal-progressBarContainer'
-      case 'presenter':
-        return '.UppyModal-presenter'
-      case 'acquirer':
-
-        // add tab panel, where plugin will render
-        const modalContent = document.querySelector('.UppyModalContent')
-        const nodeForPlugin = document.createElement('div')
-
-        modalContent.appendChild(nodeForPlugin)
-        nodeForPlugin.outerHTML = `
-          <div class=""UppyModalContent-panel ${this.opts.panelSelectorPrefix}--${callerPluginId}""
-               role=""tabpanel""
-               aria-hidden=""true"">
-          </div>`
-
-        // add tab switch button
-        const modalTabs = document.querySelector('.UppyModalTabs')
-        const modalTab = document.createElement('div')
-
-        modalTabs.appendChild(modalTab)
-        modalTab.outerHTML = `
-          <li class=""UppyModalTab"">
-            <button class=""UppyModalTab-btn""
-                    role=""tab""
-                    aria-controls=""${callerPluginId}""
-                    data-open=""${this.opts.panelSelectorPrefix}--${callerPluginId}"">
-              ${callerPluginIcon}
-              <span class=""UppyModalTab-name"">${callerPluginName}</span>
-            </button>
-          </li>`
-
-        return `.${this.opts.panelSelectorPrefix}--${callerPluginId}`
-      default:
-        let msg = 'Error: Modal can only be used by plugins of types: acquirer, progressindicator'
-        this.core.log(msg)
-        break
+    const target = {
+      id: callerPluginId,
+      name: callerPluginName,
+      icon: callerPluginIcon,
+      type: callerPluginType,
+      el: el,
+      isHidden: true
     }
-  }
 
-  allDone () {
-    this.hideAllTabPanels()
+    const modal = this.core.getState().modal
+    modal.targets.push(target)
+    this.core.setState({modal: modal})
   }
 
-  render () {
-    // http://dev.edenspiekermann.com/2016/02/11/introducing-accessible-modal-dialog
-
-    return `
-      <div class=""UppyModal""
-           aria-hidden=""true""
-           aria-labelledby=""modalTitle""
-           aria-describedby=""modalDescription""
-           role=""dialog"">
-        <div class=""UppyModal-overlay js-UppyModal-close"" tabindex=""-1""></div>
-        <div class=""UppyModal-inner"">
-          <button class=""UppyModal-close js-UppyModal-close"" title=""Close Uppy modal"">×</button>
-
-          <ul class=""UppyModalTabs"" role=""tablist""></ul>
-
-          <div class=""UppyModalContent"">
-            <div class=""UppyModal-presenter""></div>
-            <div class=""UppyModal-progress"">
-              <button class=""UppyModal-next js-UppyModal-next"">${this.core.i18n('upload')}</button>
-              <div class=""UppyModal-progressBarContainer""></div>
-            </div>
-          </div>
+  showTabPanel (id) {
+    const modal = this.core.getState().modal
+
+    // hide all panels, except the one that matches current id
+    modal.targets.forEach((target) => {
+      if (target.type === 'acquirer') {
+        if (target.id === id) {
+          target.isHidden = false
+          return
+        }
+        target.isHidden = true
+      }
+    })
 
-        </div>
-      </div>
-    `
+    this.core.setState({modal: modal})
   }
 
   hideModal () {
-    this.isModalVisible = false
-    this.modalEl.setAttribute('aria-hidden', 'true')
-    this.core.emitter.emit('reset')
-  }
-
-  showModal () {
-    this.isModalVisible = true
-    this.modalEl.removeAttribute('aria-hidden')
-    this.initTabs()
-  }
+    const modal = this.core.getState().modal
+    modal.isHidden = true
+    this.core.setState({modal: modal})
 
-  hideAllTabPanels () {
-    this.tabPanels.forEach((tabPanel) => tabPanel.setAttribute('aria-hidden', true))
-    this.tabs.forEach((tab) => tab.removeAttribute('aria-selected'))
+    document.body.style.overflow = 'visible'
   }
 
-  showTabPanel (pluginSelector, pluginName) {
-    this.hideAllTabPanels()
+  showModal () {
+    // this.core.emitter.emit('modal-open')
 
-    const tab = document.querySelector(`[aria-controls=""${pluginName}""]`)
-    const tabPanel = document.querySelector(`.${pluginSelector}`)
+    const modal = this.core.getState().modal
+    modal.isHidden = false
 
-    tabPanel.removeAttribute('aria-hidden')
-    tab.setAttribute('aria-selected', 'true')
+    // Show first acquirer plugin when modal is open
+    modal.targets.some((target) => {
+      if (target.type === 'acquirer') {
+        target.isHidden = false
+        return true
+      }
+    })
 
-    this.core.log(pluginName)
-    this.core.getPlugin(pluginName).focus()
+    this.core.setState({modal: modal})
 
-    // Remove `next` buttons provided by plugins, since Modal has its own
-    // document.querySelector('.UppyNextBtn').remove()
+    document.body.style.overflow = 'hidden'","I'd prefer if we could toggle a class on the body to control this, rather than adding an inline style, but it's not a big deal.
",Why did you rem
332,"@@ -12,41 +12,51 @@ module.exports = (props) => {
   }
 
   return html`
-    <div class=""Browser"">
-      <header>
-        <input
-          type=""text""
-          class=""Browser-search""
-          placeholder=""Search Drive""
-          onkeyup=${props.filterQuery}
-          value=${props.filterInput}/>
+    <div class=""Browser Browser-viewType--${props.defaultViewType}"">
+      <header class=""Browser-header"">",would it make sense to refactor this into a `Header` component? So it is easier to follow?,Why do we need 
333,"@@ -12,41 +12,51 @@ module.exports = (props) => {
   }
 
   return html`
-    <div class=""Browser"">
-      <header>
-        <input
-          type=""text""
-          class=""Browser-search""
-          placeholder=""Search Drive""
-          onkeyup=${props.filterQuery}
-          value=${props.filterInput}/>
+    <div class=""Browser Browser-viewType--${props.defaultViewType}"">
+      <header class=""Browser-header"">
+        <div class=""Browser-search"" aria-hidden=""${!props.isSearchVisible}"">
+          <input type=""text"" class=""Browser-searchInput"" placeholder=""Search""
+                 onkeyup=${props.filterQuery} value=""${props.filterInput}""/>
+          <button type=""button"" class=""Browser-searchClose"" 
+                  onclick=${props.toggleSearch}>
+            <svg class=""UppyIcon"" viewBox=""0 0 19 19"">
+              <path d=""M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z""/>
+            </svg>
+          </button>
+        </div>
+        <div class=""Browser-headerBar"">
+          <button type=""button"" class=""Browser-searchToggle""
+                  onclick=${props.toggleSearch}>
+            <svg class=""UppyIcon"" viewBox=""0 0 100 100"">
+              <path d=""M87.533 80.03L62.942 55.439c3.324-4.587 5.312-10.207 5.312-16.295 0-.312-.043-.611-.092-.908.05-.301.093-.605.093-.922 0-15.36-12.497-27.857-27.857-27.857-.273 0-.536.043-.799.08-.265-.037-.526-.08-.799-.08-15.361 0-27.858 12.497-27.858 27.857 0 .312.042.611.092.909a5.466 5.466 0 0 0-.093.921c0 15.36 12.496 27.858 27.857 27.858.273 0 .535-.043.8-.081.263.038.524.081.798.081 5.208 0 10.071-1.464 14.245-3.963L79.582 87.98a5.603 5.603 0 0 0 3.976 1.647 5.621 5.621 0 0 0 3.975-9.597zM39.598 55.838c-.265-.038-.526-.081-.8-.081-9.16 0-16.612-7.452-16.612-16.612 0-.312-.042-.611-.092-.908.051-.301.093-.605.093-.922 0-9.16 7.453-16.612 16.613-16.612.272 0 .534-.042.799-.079.263.037.525.079.799.079 9.16 0 16.612 7.452 16.612 16.612 0 .312.043.611.092.909-.05.301-.094.604-.094.921 0 9.16-7.452 16.612-16.612 16.612-.274 0-.536.043-.798.081z""/>
+            </svg>
+          </button>
+          ${Breadcrumbs({
+            getFolder: props.getFolder,
+            directories: props.directories,
+            title: props.title
+          })}
+          <button type=""button"" onclick=${props.logout} class=""Browser-userLogout"">Log out</button>
+        </div>
       </header>
-      <div class=""Browser-subHeader"">
-        ${Breadcrumbs({
-          getFolder: props.getFolder,
-          directories: props.directories
-        })}
-        <button onclick=${props.logout} class=""Browser-userLogout"">Log out</button>
-      </div>
       <div class=""Browser-body"">
-        <main class=""Browser-content"">
-          ${Table({
-            columns: [{
-              name: 'Name',
-              key: 'title'
-            }],
-            folders: filteredFolders,
-            files: filteredFiles,
-            activeRow: props.isActiveRow,
-            sortByTitle: props.sortByTitle,
-            sortByDate: props.sortByDate,
-            handleFileClick: props.addFile,
-            handleFolderClick: props.getNextFolder,
-            getItemName: props.getItemName,
-            getItemIcon: props.getItemIcon,
-            handleScroll: props.handleScroll
-          })}
-        </main>
+        ${Table({
+          columns: [{
+            name: 'Name',
+            key: 'title'
+          }],
+          folders: filteredFolders,
+          files: filteredFiles,
+          isGrid: false,",it seems this attribute is never used,Why do we need 
334,"@@ -12,6 +12,39 @@ Best used together with a simple file source plugin, such as [FileInput][] or [D
 
 ## Options
 
+```js","This could perhaps use an: ""All of the options, and their defaults"" intro?",
335,"@@ -12,7 +12,6 @@ module.exports = class Provider extends RequestClient {
     super(uppy, opts)
     this.provider = opts.provider
     this.id = this.provider
-    this.authProvider = opts.authProvider || this.provider",I realised that this is not used anywhere,Why was this re
336,"@@ -12,9 +12,14 @@ module.exports = class Multipart extends Plugin {
     // Default options
     const defaultOptions = {
       fieldName: 'files[]',
+      fields: null,","May need a better name, this option indicates which file `meta` properties should be sent along as FormData fields. If null everything is sent along. It's necessary because S3 rejects requests that contain form fields it doesn't recognise.",
337,"@@ -12,9 +12,14 @@ module.exports = class Multipart extends Plugin {
     // Default options
     const defaultOptions = {
       fieldName: 'files[]',
+      fields: null,
       responseUrlFieldName: 'url',
       bundle: true,
-      headers: {}
+      headers: {},
+      getUploadUrl (xhr) {
+        const resp = JSON.parse(xhr.response)
+        return resp[this.responseUrlFieldName]
+      }",This option allows the S3 plugin to take the uploaded url from S3's XML response,W
338,"@@ -120,8 +120,10 @@ module.exports = class Transloadit extends Plugin {
       signature: options.signature
     }).then((assembly) => {
       // Store the list of assemblies related to this upload.
-      const uploadsAssemblies = Object.assign({}, this.state.uploadsAssemblies)
-      uploadsAssemblies[uploadID] = (uploadsAssemblies[uploadID] || []).concat([ assembly.assembly_id ])
+      const assemblyList = this.state.uploadsAssemblies[uploadID]
+      const uploadsAssemblies = Object.assign({}, this.state.uploadsAssemblies, {
+        [uploadID]: assemblyList.concat([ assembly.assembly_id ])
+      })
 ",Should this be `this.state.transloadit.uploadsAssemblies`? If `assemblies` are transloadit-related-only.,`
339,"@@ -121,8 +122,10 @@ module.exports = class AwsS3Multipart extends Plugin {
 
     const filename = encodeURIComponent(key)
     const uploadIdEnc = encodeURIComponent(uploadId)
-    return this.client.post(`s3/multipart/${uploadIdEnc}/complete?key=${filename}`, { parts })
-      .then(assertServerError)
+    return this.client.post(`s3/multipart/${uploadIdEnc}/complete?key=${filename}`, {
+      parts,
+      metadata: file.meta","S3 multipart uploads need metadata to be assigned when the upload is _created_, not when it's complete. it should not be necessary to send it in this request",W
340,"@@ -122,13 +122,15 @@ function getFileType (file) {
     'mp3': 'audio/mp3'
   }
 
-  // no smart detection for remote files, just trust the provider
+  const fileExtension = getFileNameAndExtension(file.name)[1]
+
   if (file.isRemote) {
-    return Promise.resolve(file.type.split('/'))
+    // some providers do not support for file types
+    let mime = file.type ? file.type : extensionsToMime[fileExtension]
+    const type = mime ? mime.split('/') : emptyFileType
+    return Promise.resolve(type)","Was going to suggest this when I read the mime type comment below, but you already did it :D ",I
341,"@@ -122,28 +122,17 @@ Even though bundled in this repo, the website is regarded as a separate project.
 
 ### Local previews
 
-It is recommended to exclude `./website/public/` from your editor if you want efficient searches.
-
-To install the required node modules, type:
-
-```bash
-npm install && cd website && npm install && cd ..
-```
-
-For local previews on http://localhost:4000, type:
-
-```bash
-npm run web:start # that gets you just the website. if you need companion, etc. you can use `npm start` instead
-```
-
-This will watch the website, as well as Uppy, as the examples, and rebuild everything and refresh your browser as files change.
+1. `npm install`
+2. `cd website && npm install && cd ..` (even if you ran `npm run bootstrap` before)","after a root npm install you need to npm run bootstrap again, so this could read

```
1. `npm install`
1. `npm run bootstrap`
1. `cd website && npm install && cd -`
...
```",I
342,"@@ -123,9 +139,9 @@ module.exports = class Multipart extends Plugin {
           'Content-Type': 'application/json'
         },
         body: JSON.stringify(Object.assign({}, file.remote.body, {
-          endpoint: this.opts.endpoint,
+          endpoint: opts.endpoint,
           size: file.data.size,
-          fieldname: this.opts.fieldName
+          fieldname: opts.fieldName
         }))",Should add support for `meta` and FormData-less uploads to uppy-server too.,S
343,"@@ -125,10 +122,8 @@ Even though bundled in this repo, the website is regarded as a separate project.
 ### Local previews
 
 1. `npm install`
-2. `npm run bootstrap`
-3. `cd website && npm install && cd ..`
-4. `npm start`
-5. Go to http://localhost:4000. Your changes in `/website` and `/packages/@uppy` will be watched, your browser will refresh as files change.
+2. `npm start`
+3. Go to http://localhost:4000. Your changes in `/website` and `/packages/@uppy` will be watched, your browser will refresh as files change.","This got automatically overwritten for me, I think, we have to change the `.github/CONTRIBUTING.md` instead, as it says on the top of this file.",W
344,"@@ -125,21 +149,36 @@ class AddFiles extends Component {
     )
   }
 
+  renderAcquirers = (acquirers) => {
+    // Group last two buttons in <nobr>, so we don’t end up with
+    // just one button on a new line
+    const acquirersWithoutLastTwo = [...acquirers]
+    const lastTwoAcquirers = acquirersWithoutLastTwo.splice(acquirers.length - 2, acquirers.length)
+
+    return (
+      <div class=""uppy-DashboardTabs-list"" role=""tablist"">
+        {this.renderMyDeviceAcquirer()}
+        {acquirersWithoutLastTwo.map((acquirer) => this.renderAcquirer(acquirer))}
+        <nobr role=""presentation"">","MDN is not a fan of nobr: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/nobr
should we use a span with `white-space: nowrap` instead?",n
345,"@@ -127,3 +127,7 @@ exports.getSize = (item) => {
   }
   return item.total_size
 }
+
+exports.getItemTopic = (item) => {
+  return item.topic","Is it always available, or should we check for undefined?",e
346,"@@ -128,40 +128,51 @@ module.exports = function FileItem (props) {
           onPauseResumeCancelRetry={onPauseResumeCancelRetry}
           file={file}
           error={error}
+          isUploaded={isUploaded}
           {...props} />","Great, spent about an hour trying to figure out why the progress indicator remained a `<button>` on master, but turned into a `<div>` in your PR, if the PR is not touching the logic of that component 🙀 😂 ",I
347,"@@ -128,9 +128,9 @@ class Uppy {
    */
   setState (stateUpdate) {
     const newState = Object.assign({}, this.state, stateUpdate)
-    this.emit('core:state-update', this.state, newState, stateUpdate)
 
     this.state = newState
+    this.emit('core:state-update', this.state, newState, stateUpdate)","`this.state` is the same as `newState ` at this point, so if we go this route, we have to save previous state, something like:

```js
const prevState = Object.assign({}, this.state)
this.state = newState
...
```",W
348,"@@ -129,5 +129,15 @@
     ""prepare"": ""lerna bootstrap --hoist"",
     ""contributors"": ""githubcontrib --owner transloadit --repo uppy --cols 6 $([ \""${GITHUB_TOKEN:-}\"" == \""\"" ] && echo \""\"" || echo \""--authToken ${GITHUB_TOKEN}\"") --showlogin true --sortOrder desc"",
     ""contributors:save"": ""replace-x -m '<!--contributors-->[\\s\\S]+<!--/contributors-->' \""<!--contributors-->\n## Contributors\n\n$(npm run --silent contributors)\n<!--/contributors-->\"" README.md""
+  },
+  ""jest"": {
+    ""automock"": false,
+    ""collectCoverage"": true,
+    ""collectCoverageFrom"": [
+      ""packages/**/src/**""
+    ],
+    ""testMatch"": [
+      ""**/packages/**/*.test.js""
+    ]",Wouldn’t a separate [`jest.config.js`](https://jestjs.io/docs/en/configuration.html) be better since that’s how we are doing it with all other build tools?,W
349,"@@ -13,19 +13,22 @@ const { defaultTabIcon } = require('./icons')
 // MIT licence, https://github.com/ghosh/micromodal/blob/master/LICENSE.md
 // Copyright (c) 2017 Indrashish Ghosh
 const FOCUSABLE_ELEMENTS = [
-  'a[href]',
-  'area[href]',
-  'input:not([disabled]):not([type=""hidden""]):not([aria-hidden])',
-  'select:not([disabled]):not([aria-hidden])',
-  'textarea:not([disabled]):not([aria-hidden])',
-  'button:not([disabled]):not([aria-hidden])',
-  'iframe',
-  'object',
-  'embed',
-  '[contenteditable]',
-  '[tabindex]:not([tabindex^=""-""])'
+  'a[href]:not([tabindex^=""-""]):not([inert]):not([aria-hidden])',
+  'area[href]:not([tabindex^=""-""]):not([inert]):not([aria-hidden])',
+  'input:not([disabled]):not([inert]):not([aria-hidden])',
+  'select:not([disabled]):not([inert]):not([aria-hidden])',
+  'textarea:not([disabled]):not([inert]):not([aria-hidden])',
+  'button:not([disabled]):not([inert]):not([aria-hidden])',
+  'iframe:not([tabindex^=""-""]):not([inert]):not([aria-hidden])',
+  'object:not([tabindex^=""-""]):not([inert]):not([aria-hidden])',
+  'embed:not([tabindex^=""-""]):not([inert]):not([aria-hidden])',
+  '[contenteditable]:not([tabindex^=""-""]):not([inert]):not([aria-hidden])',
+  '[tabindex]:not([tabindex^=""-""]):not([inert]):not([aria-hidden])'","good improvements :+1: Does the `:not([inert])` thing actually do anything? I thought any children of `[inert]` elements should also not be interactive, that's not possible to do with CSS selectors though.",I
350,"@@ -1304,11 +1311,10 @@ class Uppy {
         return this._runUpload(uploadID)
       })
       .catch((err) => {
-        const message = typeof err === 'object' ? err.message : err
-        const details = typeof err === 'object' ? err.details : null
-        this.log(`${message} ${details}`)
-        this.info({ message: message, details: details }, 'error', 4000)
-        return Promise.reject(typeof err === 'object' ? err : new Error(err))
+        if (err.isRestriction) {
+          this.emit('restriction-failed', null, err)","@goto-bus-stop not too weird, `null, err`? I guess `err` should have been the first argument when this event was added originally, but that’s what we have now.",I
351,"@@ -1317,11 +1309,18 @@ class Uppy {
         return this._runUpload(uploadID)
       })
       .catch((err) => {
+        const message = typeof err === 'object' ? err.message : err
+        const details = (typeof err === 'object' && err.details) ? err.details : ''
+
         if (err.isRestriction) {
           this.emit('restriction-failed', null, err)
-          return onError(err)
+          this.log(`${message} ${details}`, 'info')
+          this.info({ message: message, details: details }, 'info', 5000)",Do we not need to `throw` the error in case of restriction too (so that the promise rejects)?,W
352,"@@ -1318,8 +1319,9 @@ class Uppy {
       .catch((err) => {
         if (err.isRestriction) {
           this.emit('restriction-failed', null, err)
+          return onError(err)","`return` isn't needed here (we should either `return Promise.reject(...)`, or `throw new Error(...)`).

I'd move the `onError()` function here, and manage `type` by assigning it to either `'info'` or `'error'`. What do you think, could that be easier to read?",Shouldn't this be `return onError(err)`?
353,"@@ -132,7 +133,13 @@ module.exports.addProviderOptions = (options, grantConfig) => {
     if (grantConfig[authProvider]) {
       // explicitly add providerOptions so users don't override other providerOptions.
       grantConfig[authProvider].key = providerOptions[authProvider].key
-      grantConfig[authProvider].secret = providerOptions[authProvider].secret
+
+      // only read and override a secret from file if such a file is not undefined
+      if (typeof providerOptions[authProvider].secretFile === 'string') {","I don't think there's a need for this check here. There's no such property as `secretFile`. Also, at this point, the value of `.secret` is only available in memory (and was probably loaded with [this](https://github.com/transloadit/uppy/blob/a8e17bee5fc6a93fb2298cfca6ee45c9cc0cb7bc/packages/%40uppy/companion/src/standalone/helper.js#L35)), so there's no need to read from file anymore.",Why do we need this check?
354,"@@ -134,7 +134,9 @@ module.exports = class Plugin {
     }
 
     this.uppy.log(`Not installing ${callerPluginName}`)
-    throw new Error(`Invalid target option given to ${callerPluginName}`)
+    throw new Error(`Invalid target option given to ${callerPluginName}. Please make sure that the element 
+      exists on the page, or that the plugin you are targeting has been installed. Check that the <script> tag initializing Uppy 
+      comes at the bottom of the page, before the </body> (see https://github.com/transloadit/uppy/issues/1042).`)","could be misread as `<body>`, maybe something redundant but very clear like ""before the closing `</body>` tag""?",I think this should be `<script>` instea
355,"@@ -134,8 +134,8 @@
         background-color: $color-cornflower-blue;
         color: $color-white;
 
-        &:hover { 
-          background-color: darken($color-cornflower-blue, 20%); 
+        &:hover {","Should I to remove this change? I don't know how it happend, maybe Atom removed whitespace at line end when I saved it on previous commits.",Why did you remove the darken?
356,"@@ -135,13 +135,21 @@ module.exports = class AwsS3 extends Plugin {
     const valid = typeof params === 'object' && params &&
       typeof params.url === 'string' &&
       (typeof params.fields === 'object' || params.fields == null) &&","woops my bad, applying those caused this line to become wrong.
```suggestion
      (typeof params.fields === 'object' || params.fields == null)
```",(typeof params.fields === 'object' || pa
357,"@@ -135,13 +135,23 @@ module.exports = class AwsS3 extends Plugin {
     const valid = typeof params === 'object' && params &&
       typeof params.url === 'string' &&
       (typeof params.fields === 'object' || params.fields == null) &&
-      (params.method == null || /^(put|post)$/i.test(params.method))
+      params.method == null;","based on my other comment, I think we can remove this line completely",Why is this change needed?
358,"@@ -135,13 +135,23 @@ module.exports = class AwsS3 extends Plugin {
     const valid = typeof params === 'object' && params &&
       typeof params.url === 'string' &&
       (typeof params.fields === 'object' || params.fields == null) &&
-      (params.method == null || /^(put|post)$/i.test(params.method))
+      params.method == null;
 
     if (!valid) {
       const err = new TypeError(`AwsS3: got incorrect result from 'getUploadParameters()' for file '${file.name}', expected an object '{ url, method, fields, headers }' but got '${JSON.stringify(params)}' instead.\nSee https://uppy.io/docs/aws-s3/#getUploadParameters-file for more on the expected format.`)
       console.error(err)
       throw err
     }
+
+    const methodIsValid = /^(put|post)$/i.test(params.method);","this will fail if `params.method` is `null`. I think it should be:

```suggestion
    const methodIsValid = params.method == null || /^(put|post)$/i.test(params.method)
```",I think this should be `params.method ==
359,"@@ -135,13 +135,23 @@ module.exports = class AwsS3 extends Plugin {
     const valid = typeof params === 'object' && params &&
       typeof params.url === 'string' &&
       (typeof params.fields === 'object' || params.fields == null) &&
-      (params.method == null || /^(put|post)$/i.test(params.method))
+      params.method == null;
 
     if (!valid) {
       const err = new TypeError(`AwsS3: got incorrect result from 'getUploadParameters()' for file '${file.name}', expected an object '{ url, method, fields, headers }' but got '${JSON.stringify(params)}' instead.\nSee https://uppy.io/docs/aws-s3/#getUploadParameters-file for more on the expected format.`)
       console.error(err)
       throw err
     }
+
+    const methodIsValid = /^(put|post)$/i.test(params.method);
+
+    if (!methodIsValid) {
+      const err = new TypeError(`AwsS3: got incorrect method from 'getUploadParameters()' for file '${file.name}', expected  'put,post' but got '${params.method}' instead.\nSee https://uppy.io/docs/aws-s3/#getUploadParameters-file for more on the expected format.`)
+      console.error(err)
+      throw err
+    }
+
+","```suggestion
```",I think this should be `params.method ==
360,"@@ -135,13 +135,23 @@ module.exports = class AwsS3 extends Plugin {
     const valid = typeof params === 'object' && params &&
       typeof params.url === 'string' &&
       (typeof params.fields === 'object' || params.fields == null) &&
-      (params.method == null || /^(put|post)$/i.test(params.method))
+      params.method == null;
 
     if (!valid) {
       const err = new TypeError(`AwsS3: got incorrect result from 'getUploadParameters()' for file '${file.name}', expected an object '{ url, method, fields, headers }' but got '${JSON.stringify(params)}' instead.\nSee https://uppy.io/docs/aws-s3/#getUploadParameters-file for more on the expected format.`)
       console.error(err)
       throw err
     }
+
+    const methodIsValid = params.method == null || /^(put|post)$/i.test(params.method)
+
+    if (!methodIsValid) {
+      const err = new TypeError(`AwsS3: got incorrect method from 'getUploadParameters()' for file '${file.name}', expected  'put,post' but got '${params.method}' instead.\nSee https://uppy.io/docs/aws-s3/#getUploadParameters-file for more on the expected format.`)","little phrasing nit
```suggestion
      const err = new TypeError(`AwsS3: got incorrect method from 'getUploadParameters()' for file '${file.name}', expected  'put' or 'post' but got '${params.method}' instead.\nSee https://uppy.io/docs/aws-s3/#getUploadParameters-file for more on the expected format.`)
```",I think this should be `params.method.to
361,"@@ -135,65 +139,6 @@ module.exports.app = (options = {}) => {
   return app
 }
 
-/**
- * the socket is used to send progress events during an upload
- *
- * @param {object} server
- */
-module.exports.socket = (server) => {
-  const wss = new SocketServer({ server })
-  const redisClient = redis.client()
-
-  // A new connection is usually created when an upload begins,
-  // or when connection fails while an upload is on-going and,
-  // client attempts to reconnect.
-  wss.on('connection', (ws, req) => {
-    // @ts-ignore
-    const fullPath = req.url
-    // the token identifies which ongoing upload's progress, the socket
-    // connection wishes to listen to.
-    const token = fullPath.replace(/^.*\/api\//, '')
-    logger.info(`connection received from ${token}`, 'socket.connect')
-
-    /**
-     *
-     * @param {{action: string, payload: object}} data
-     */
-    function sendProgress (data) {
-      ws.send(jsonStringify(data), (err) => {
-        if (err) logger.error(err, 'socket.progress.error', shortenToken(token))
-      })
-    }
-
-    // if the redisClient is available, then we attempt to check the storage
-    // if we have any already stored progress data on the upload.
-    if (redisClient) {
-      redisClient.get(`${STORAGE_PREFIX}:${token}`, (err, data) => {
-        if (err) logger.error(err, 'socket.redis.error', shortenToken(token))
-        if (data) {
-          const dataObj = JSON.parse(data.toString())
-          if (dataObj.action) sendProgress(dataObj)
-        }
-      })
-    }
-
-    emitter().emit(`connection:${token}`)
-    emitter().on(token, sendProgress)
-
-    ws.on('message', (jsonData) => {
-      const data = JSON.parse(jsonData.toString())
-      // whitelist triggered actions
-      if (['pause', 'resume', 'cancel'].includes(data.action)) {
-        emitter().emit(`${data.action}:${token}`)
-      }
-    })
-
-    ws.on('close', () => {
-      emitter().removeListener(token, sendProgress)
-    })
-  })
-}
-",this was moved into a [separate file](https://github.com/transloadit/uppy/blob/c5e3d8171281d5fce60dc8e59f32a564b4ef4668/packages/%40uppy/companion/src/server/socket.js) to reduce rowdiness,why was this removed?
362,"@@ -136,14 +136,34 @@ describe('validate upload data', () => {
       .then((res) => expect(res.body.error).toBe('unsupported HTTP METHOD specified'))
   })
 
-  test('valid upload data is allowed', () => {
+  test('valid upload data is allowed - tus', () => {
     return request(authServer)
       .post('/drive/get/README.md')
       .set('uppy-auth-token', token)
       .set('Content-Type', 'application/json')
       .send({
         endpoint: 'http://master.tus.com/files',
         protocol: 'tus',
+        httpMethod: 'POST',
+        headers: {
+          customheader: 'header value'
+        },
+        metadata: {
+          mymetadata: 'matadata value'
+        },
+        fieldname: 'uploadField'
+      })
+      .expect(200)
+  })
+
+  test('valid upload data is allowed - s3-multipart', () => {
+    return request(authServer)
+      .post('/drive/get/README.md')
+      .set('uppy-auth-token', token)
+      .set('Content-Type', 'application/json')
+      .send({
+        endpoint: 'http://master.tus.com/files',",Is that endpoint correct?,I think this should be `s3-multipart`
363,"@@ -136,16 +170,16 @@ const ProgressBarUploading = (props) => {
           ? html`<div title=""Uploading"">${pauseResumeButtons(props)} Uploading... ${throttledProgressDetails(props)}</div>`
           : html`<div title=""Paused"">${pauseResumeButtons(props)} Paused・${props.totalProgress}%</div>`
         : null
-        }
+      }
     </div>
   `
 }
 
 const ProgressBarComplete = ({ totalProgress, i18n }) => {
   return html`
-    <div class=""UppyStatusBar-content"">
+    <div class=""UppyStatusBar-content"" role=""alert"">","`alert` is a role for very important information, i think the progress is not _that_ important—would `status` be more appropriate?",Why is this needed?
364,"@@ -136,7 +136,8 @@ class MarkdownTextarea {
         'url',
         'instagram',
         'google-drive',
-        'dropbox'
+        'dropbox',
+        'box'","excluding from examples in the meantime
```suggestion
        'dropbox'
```",Why is this needed?
365,"@@ -137,7 +137,7 @@ class OneDrive extends Provider {
   _error (err, resp) {
     if (resp) {
       const fallbackMsg = `request to ${this.authProvider} returned ${resp.statusCode}`
-      const errMsg = resp.body.error ? resp.body.error.message : fallbackMsg
+      const errMsg = (resp.body || {}).error ? resp.body.error.message : fallbackMsg",this change can be ignored. I accidentally checked out of [this branch](https://github.com/transloadit/uppy/pull/2264/files),`resp.body || {}`
366,"@@ -137,8 +137,8 @@
     ""build:lib"": ""babel --version && node ./bin/build-lib.js"",
     ""build"": ""npm-run-all --parallel build:js build:css --serial build:gzip size"",
     ""clean"": ""rm -rf lib && rm -rf dist"",
-    ""lint:fix"": ""eslint src test website/scripts website/build-examples.js website/update.js website/themes/uppy/source/js/common.js --fix"",
-    ""lint"": ""eslint src test website/scripts website/build-examples.js website/update.js website/themes/uppy/source/js/common.js"",
+    ""lint:fix"": ""npm run lint -- --fix"",
+    ""lint"": ""eslint packages/*/src packages/@uppy/*/src test website/scripts website/build-examples.js website/update.js website/themes/uppy/source/js/common.js"",","As opposed to whitelisting dirs here, may i propose doing `eslint .` and adding a blacklist in `.eslintignore`? While setting it up, if it takes very long, `env DEBUG=eslint:cli-engine eslint .` will show you what files it is crunching on that you'll likely also want to blacklist.

Two reasons for doing it:
- those with eslint-enabled editors won't get warnings about files that we don't care about (.eslintignore is parsed while this npm script is not)
- when we add new things, we'll have to opt-out of linting, vs opting-in, which feels safer",Why is this change needed?
367,"@@ -14,12 +14,17 @@ function upload (files, opts = {}) {
   addTransloaditPlugin(uppy, opts)
 
   files.forEach((file) => {
-    uppy.addFile({
-      data: file,
-      type: file.type,
-      name: file.name,
-      meta: file.meta || {}
-    })","Not sure about this one, should it be wrapped in try/catch, @goto-bus-stop?",Why was this removed?
368,"@@ -14,6 +14,7 @@
     <li><label for=""opts-ScreenCapture""><input type=""checkbox"" id=""opts-ScreenCapture"" checked/> Screen Capture</label></li>
     <li><label for=""opts-GoogleDrive""><input type=""checkbox"" id=""opts-GoogleDrive"" checked/> Google Drive</label></li>
     <li><label for=""opts-Dropbox""><input type=""checkbox"" id=""opts-Dropbox"" checked/> Dropbox</label></li>
+    <li><label for=""opts-Box""><input type=""checkbox"" id=""opts-Box"" checked/> Box</label></li>","excluding from examples in the meantime
```suggestion
```","<li><input type=""checkbox"" id=""opts-Box"" checked/> Box</li>"
369,"@@ -14,7 +14,7 @@
   ""rules"": {
     ""jsx-quotes"": [""error"", ""prefer-double""],
     ""compat/compat"": [""error""],
-    ""react/jsx-handler-names"": [""warn""], // maybe we want to do this in the future?
+    ""react/jsx-handler-names"": [""off""],","Disabled because we don't really follow the rule anywhere, and following it would conflict with our convention of using `_`-prefixed names for private class methods.","""react/jsx-quotes"": [""error"", ""prefer-double""],"
370,"@@ -14,7 +14,7 @@ exports.config = Object.assign(base.config, {
     { browserName: 'chrome', version: '50.0', platform: 'Windows 7' },
     { browserName: 'MicrosoftEdge', version: '14.14393', platform: 'Windows 10' },
     // { browserName: 'safari', version: '11.0', platform: 'macOS 10.12' },
-    { browserName: 'safari', version: '11.0', platformName: 'iOS', platformVersion: '10.0', deviceOrientation: 'portrait', deviceName: 'iPhone 6 Simulator', appiumVersion: '1.7.1' },
+    { browserName: 'safari', version: '10.0', platformName: 'iOS', platformVersion: '10.0', deviceOrientation: 'portrait', deviceName: 'iPhone 6 Simulator', appiumVersion: '1.7.1' },
     { browserName: 'chrome', platformName: 'Android', platformVersion: '6.0', deviceOrientation: 'portrait', deviceName: 'Android Emulator', appiumVersion: '1.7.1' }","🥇wow, thanks!",Why was this changed?
371,"@@ -14,9 +14,9 @@ function defaultGetAssemblyOptions (file, options) {
   }
 }
 
-const UPPY_SERVER = 'https://api2.transloadit.com/uppy-server'
-// Regex used to check if an uppy-server address is run by Transloadit.
-const TL_UPPY_SERVER = /https?:\/\/api2(?:-\w+)?\.transloadit\.com\/uppy-server/
+const COMPANION = 'https://api2.transloadit.com/companion'
+// Regex used to check if an companion address is run by Transloadit.
+const TL_COMPANION = /https?:\/\/api2(?:-\w+)?\.transloadit\.com\/companion/",Would be nice to throw an error if anyone uses the old URL maybe. breakage because of this change would be very hard to debug for users I think,I don't think we need this anymore.
372,"@@ -141,16 +215,15 @@
     ""web:build-examples"": ""cd website && node build-examples.js"",
     ""web:build"": ""npm-run-all web:inject-bundles-misc web:generate web:build-examples web:inject-frontpagecodesample"",
     ""web:bundle-watch-inject"": ""onchange 'packages/uppy/dist/**/*.css' 'packages/uppy/dist/**/*.js' --initial --verbose -- npm run web:inject-bundles-misc"",
-    ""web:clean"": ""cd website && touch db.json && ./node_modules/.bin/hexo clean"",
+    ""web:clean"": ""cd website && touch db.json && ../node_modules/.bin/hexo clean"",",Don’t we run these `web:` scripts from root? Why `..`?,Why is this change needed?
373,"@@ -141,7 +141,6 @@ fi_FI.strings = {
   streamActive: 'Jako aktiivinen',
   streamPassive: 'Jako passiivinen',
   micDisabled: 'Käyttäjä on estänyt mikrofonin',
-  micIsOn: 'Mikrofoni on päällä',",Intended @arturi?,"micIsOn: 'Mikrofoni on päällä',"
374,"@@ -142,4 +142,4 @@ function defaultStore () {
 
 A pattern like this, where users can pass options via a function call if necessary, is recommended.
 
-See the [./src/store](https://github.com/transloadit/uppy/tree/master/src/store) folder in the repository for more inspiration.
+See the [./src/store](https://github.com/transloadit/uppy/tree/master/packages/%40uppy/store-default) folder in the repository for more inspiration.","```suggestion
See the [@uppy/store-default](https://github.com/transloadit/uppy/tree/master/packages/%40uppy/store-default) package for more inspiration.
````",I think this should be `/packages/uppy/store`
375,"@@ -142,6 +142,7 @@ module.exports = class DragDrop extends Plugin {
     const restrictions = this.uppy.opts.restrictions
     return (
       <input
+        id={'input-' + this.id}",Should it be `'uppy-input-`?,const inputId = 'input-' + this.id;
376,"@@ -142,6 +142,7 @@ module.exports = class DragDrop extends Plugin {
     const restrictions = this.uppy.opts.restrictions
     return (
       <input
+        id={'uppy-input-' + this.id}",we might want to do `this.uppy.id + this.id` in case someone has two instances of uppy with drag-drop,const inputId = `uppy-input-${this.id}`;
377,"@@ -142,8 +147,25 @@ class Drive extends Provider {
           .request()
       }
 
+      let stopDataTransfer = false
       requestStream
-        .on('data', (chunk) => onData(null, chunk))
+        .on('response', (resp) => {
+          if (resp.statusCode !== 200) {
+            stopDataTransfer = true","Nit/A possible simplification: perhaps we could add the `.on('data')` handler inside this function, only if the response status was 200, instead of keeping this separate variable?
```js
requestStream.on('response', (resp) => {
  if (resp.statusCode === 200) {
    requestStream.on('data', chunk => onData(null, chunk))
  } else {
    // handle error
  }
})
```",Why do we need this?
378,"@@ -144,59 +144,63 @@ class Uppy {
   }
 
   addFile (file) {
-    const updatedFiles = Object.assign({}, this.state.files)
-
-    const fileName = file.name || 'noname'
-    const fileType = Utils.getFileType(file)
-    const fileTypeGeneral = fileType[0]
-    const fileTypeSpecific = fileType[1]
-    const fileExtension = Utils.getFileNameAndExtension(fileName)[1]
-    const isRemote = file.isRemote || false
-
-    const fileID = Utils.generateFileID(fileName)
-
-    const newFile = {
-      source: file.source || '',
-      id: fileID,
-      name: fileName,
-      extension: fileExtension || '',
-      meta: {
-        name: fileName
-      },
-      type: {
-        general: fileTypeGeneral,
-        specific: fileTypeSpecific
-      },
-      data: file.data,
-      progress: {
-        percentage: 0,
-        uploadComplete: false,
-        uploadStarted: false
-      },
-      size: file.data.size || 'N/A',
-      isRemote: isRemote,
-      remote: file.remote || '',
-      preview: file.preview
-    }
+    Utils.getFileType(file).then((fileType) => {
+      const updatedFiles = Object.assign({}, this.state.files)
+      const fileName = file.name || 'noname'
+      const fileExtension = Utils.getFileNameAndExtension(fileName)[1]
+      const isRemote = file.isRemote || false
+
+      const fileID = Utils.generateFileID(fileName)
+      const fileTypeGeneral = fileType[0]
+      const fileTypeSpecific = fileType[1]
+
+      const newFile = {
+        source: file.source || '',
+        id: fileID,
+        name: fileName,
+        extension: fileExtension || '',
+        meta: {
+          name: fileName
+        },
+        type: {
+          general: fileTypeGeneral,
+          specific: fileTypeSpecific
+        },
+        data: file.data,
+        progress: {
+          percentage: 0,
+          uploadComplete: false,
+          uploadStarted: false
+        },
+        size: file.data.size || 'N/A',
+        isRemote: isRemote,
+        remote: file.remote || '',
+        preview: file.preview
+      }
 
-    if (fileTypeGeneral === 'image' && !isRemote) {
-      newFile.preview = Utils.getThumbnail(file)
-    }
+      if (Utils.isPreviewReady(fileTypeSpecific) && !isRemote) {
+        newFile.preview = Utils.getThumbnail(file)
+      }
 
-    updatedFiles[fileID] = newFile
-    this.setState({files: updatedFiles})
+      updatedFiles[fileID] = newFile
+      this.setState({files: updatedFiles})
 
-    this.bus.emit('file-added', fileID)
-    this.log(`Added file: ${fileName}, ${fileID}, mime type: ${fileType}`)
+      this.bus.emit('file-added', fileID)
+      this.log(`Added file: ${fileName}, ${fileID}, mime type: ${fileType}`)
 
-    if (this.opts.autoProceed && !this.scheduledAutoProceed) {
-      this.scheduledAutoProceed = setTimeout(() => {
-        this.scheduledAutoProceed = null
-        this.upload().catch((err) => {
-          console.error(err.stack || err.message)
-        })
-      }, 4)
-    }
+      if (!fileType) {
+        console.log('well, yeah, file type is fucking empty')",h*cking empty!,Why do we need this change?
379,"@@ -144,6 +150,52 @@ module.exports = class Url extends Plugin {
       })
   }
 
+  handleDrop (e) {
+    e.preventDefault()
+    if (e.dataTransfer.items) {
+      const items = toArray(e.dataTransfer.items)
+      items.forEach((item) => {
+        if (item.kind === 'string' && item.type.match('^text/uri-list')) {",does this need to be a `.match()`? can't we just do `item.type === 'text/uri-list'`?,Why do we need this?
380,"@@ -144,6 +150,52 @@ module.exports = class Url extends Plugin {
       })
   }
 
+  handleDrop (e) {
+    e.preventDefault()
+    if (e.dataTransfer.items) {
+      const items = toArray(e.dataTransfer.items)
+      items.forEach((item) => {
+        if (item.kind === 'string' && item.type.match('^text/uri-list')) {
+          item.getAsString((url) => {
+            this.uppy.log(`[URL] Adding file from dropped url: ${url}`)
+            this.addFile(url)
+          })
+        }
+      })
+    }
+  }
+
+  handleDragOver (e) {
+    e.preventDefault()
+    this.el.classList.add('drag')
+  }
+
+  handleDragLeave (e) {
+    e.preventDefault()
+    this.el.classList.remove('drag')
+  }
+
+  handlePaste (e) {
+    if (e.clipboardData.items) {
+      const items = toArray(e.clipboardData.items)
+
+      // When a file is pasted, it appears as two items: file name string, then
+      // the file itself; Url then treats file name string as URL, which is wrong.
+      // This makes sure Url ignores paste event if it contains an actual file
+      const hasFiles = items.filter(item => item.kind === 'file').length > 0
+      if (hasFiles) return",great comment!,I think it would be better to use `.filter(item => item.kin
381,"@@ -144,6 +150,52 @@ module.exports = class Url extends Plugin {
       })
   }
 
+  handleDrop (e) {
+    e.preventDefault()
+    if (e.dataTransfer.items) {
+      const items = toArray(e.dataTransfer.items)
+      items.forEach((item) => {
+        if (item.kind === 'string' && item.type.match('^text/uri-list')) {
+          item.getAsString((url) => {
+            this.uppy.log(`[URL] Adding file from dropped url: ${url}`)
+            this.addFile(url)
+          })
+        }
+      })
+    }
+  }
+
+  handleDragOver (e) {
+    e.preventDefault()
+    this.el.classList.add('drag')
+  }
+
+  handleDragLeave (e) {
+    e.preventDefault()
+    this.el.classList.remove('drag')
+  }
+
+  handlePaste (e) {
+    if (e.clipboardData.items) {
+      const items = toArray(e.clipboardData.items)
+
+      // When a file is pasted, it appears as two items: file name string, then
+      // the file itself; Url then treats file name string as URL, which is wrong.
+      // This makes sure Url ignores paste event if it contains an actual file
+      const hasFiles = items.filter(item => item.kind === 'file').length > 0
+      if (hasFiles) return
+
+      items.forEach((item) => {
+        if (item.kind === 'string' && item.type.match('text/plain')) {",same q re `item.type === 'text/plain'`,I think it would be better to use `.filter(item => item.kin
382,"@@ -145,14 +145,17 @@ class Drive {
       modifiedDate: adapter.getItemModifiedDate(item),
       size: adapter.getItemSize(item),
       custom: {
-        isTeamDrive: adapter.isTeamDrive(item)
+        // @todo isTeamDrive is left for backward compatibility. We should remove it in the next
+        // major release.
+        isTeamDrive: adapter.isSharedDrive(item),",:+1: ,I don't think we should remove it in the next major release
383,"@@ -146,57 +146,40 @@ module.exports = class StatusBar extends Plugin {
 
     // TODO: move this to Core, to share between Status Bar and Dashboard
     // (and any other plugin that might need it, too)
-    const newFiles = Object.keys(files).filter((file) => {
-      return !files[file].progress.uploadStarted &&
-        !files[file].progress.preprocess &&
-        !files[file].progress.postprocess
-    })
-
-    const uploadStartedFiles = Object.keys(files).filter((file) => {
-      return files[file].progress.uploadStarted
-    })
-
-    const pausedFiles = uploadStartedFiles.filter((file) => {
-      return files[file].isPaused
-    })
 
-    const completeFiles = Object.keys(files).filter((file) => {
-      return files[file].progress.uploadComplete
-    })
+    const filesArray = Object.keys(files).map(file => files[file])
 
-    const erroredFiles = Object.keys(files).filter((file) => {
-      return files[file].error
+    const newFiles = filesArray.filter((file) => {
+      return !file.progress.uploadStarted &&
+        !file.progress.preprocess &&
+        !file.progress.postprocess
     })
 
-    const inProgressFiles = Object.keys(files).filter((file) => {
-      return !files[file].progress.uploadComplete &&
-             files[file].progress.uploadStarted
-    })
+    const uploadStartedFiles = filesArray.filter(file => file.progress.uploadStarted)
+    const pausedFiles = uploadStartedFiles.filter(file => file.isPaused)
+    const completeFiles = filesArray.filter(file => file.progress.uploadComplete)
+    const erroredFiles = filesArray.filter(file => file.error)
 
-    const inProgressNotPausedFiles = inProgressFiles.filter((file) => {
-      return !files[file].isPaused
+    const inProgressFiles = filesArray.filter((file) => {
+      return !file.progress.uploadComplete &&
+             file.progress.uploadStarted
     })
 
-    const startedFiles = Object.keys(files).filter((file) => {
-      return files[file].progress.uploadStarted ||
-        files[file].progress.preprocess ||
-        files[file].progress.postprocess
-    })
+    const inProgressNotPausedFiles = inProgressFiles.filter(file => !file.isPaused)
 
-    const processingFiles = Object.keys(files).filter((file) => {
-      return files[file].progress.preprocess || files[file].progress.postprocess
+    const startedFiles = filesArray.filter((file) => {
+      return file.progress.uploadStarted ||
+        file.progress.preprocess ||
+        file.progress.postprocess
     })","I guess I can just use `startedFiles` in place of `uploadStarted`, since the first supersedes the last?",I don't think you need the `map` here. `files` is already a
384,"@@ -146,6 +146,8 @@ module.exports.addProviderOptions = (options, grantConfig) => {
       if (server.implicitPath) {
         // no url builder is used for this because grant internally adds the path
         grantConfig[authProvider].callback = `${server.implicitPath}${grantConfig[authProvider].callback}`
+      } else if (server.path) {
+        grantConfig[authProvider].callback = `${server.path}${grantConfig[authProvider].callback}`","callback to an explicit `path` is already handled internally by [grant.js](https://github.com/simov/grant/) so there's no need to add this condition here. This is why we are passing the `path` into the config [here](https://github.com/transloadit/uppy/blob/master/packages/%40uppy/companion/src/server/provider/index.js#L123-L127).

Were you facing any issues with something that might be related to this behaviour? Otherwise I would say the existing implementation is fine as is.",I'm not sure if this is the best way to do this. I think it would be better to use the `server.url` property instead of `server.path`.
385,"@@ -147,5 +147,7 @@
       ""**/packages/**/*.test.js""
     ]
   },
-  ""dependencies"": {}
+  ""dependencies"": {
+    ""lodash.debounce"": ""^4.0.8""
+  }
 }",This should be in `@uppy/dashboard` dependencies probably?,I think this should be `^4.0.9`
386,"@@ -147,8 +146,46 @@ function runPromiseSequence (functions, ...args) {
 //   return (!f && 'not a function') || (s && s[1] || 'anonymous')
 // }
 
+function isPreviewReady (fileTypeSpecific) {
+  // list of images that browsers can preview
+  if (/^(jpeg|gif|png|svg|bmp)$/.test(fileTypeSpecific)) {
+    return true
+  }
+  return false
+}
+
+function getArrayBuffer (file) {
+  return new Promise(function (resolve, reject) {
+    var reader = new FileReader()
+    reader.addEventListener('load', function (e) {
+      // e.target.result is an ArrayBuffer
+      var arr = new Uint8Array(e.target.result)
+      resolve(arr)
+    })
+    reader.addEventListener('error', function (err) {
+      console.error('FileReader error' + err)
+      reject(err)
+    })
+    const chunk = file.data.slice(0, 4100)
+    reader.readAsArrayBuffer(chunk)
+  })
+}
+
 function getFileType (file) {
-  return file.type ? file.type.split('/') : ['', '']
+  if (file.type) {
+    return Promise.resolve(file.type.split('/'))
+  }
+
+  return getArrayBuffer(file).then((buffer) => {","I don't know in what situation `FileReader` would error, but it can—perhaps we should fall back to `['', '']` here if the file couldn't be read for some reason?",Why not just `return file.type.split('/')`?
387,"@@ -147,82 +125,118 @@ module.exports = class AwsS3Multipart extends Plugin {
 
   uploadFile (file) {
     return new Promise((resolve, reject) => {
-      const upload = new Uploader(file.data, Object.assign({
-        // .bind to pass the file object to each handler.
-        createMultipartUpload: this.limitRequests(this.opts.createMultipartUpload.bind(this, file)),
-        listParts: this.limitRequests(this.opts.listParts.bind(this, file)),
-        prepareUploadPart: this.opts.prepareUploadPart.bind(this, file),
-        completeMultipartUpload: this.limitRequests(this.opts.completeMultipartUpload.bind(this, file)),
-        abortMultipartUpload: this.limitRequests(this.opts.abortMultipartUpload.bind(this, file)),
-
-        limit: this.opts.limit || 5,
-        onStart: (data) => {
-          const cFile = this.uppy.getFile(file.id)
-          this.uppy.setFileState(file.id, {
-            s3Multipart: Object.assign({}, cFile.s3Multipart, {
-              key: data.key,
-              uploadId: data.uploadId,
-              parts: []
-            })
-          })
-        },
-        onProgress: (bytesUploaded, bytesTotal) => {
-          this.uppy.emit('upload-progress', file, {
-            uploader: this,
-            bytesUploaded: bytesUploaded,
-            bytesTotal: bytesTotal
-          })
-        },
-        onError: (err) => {
-          this.uppy.log(err)
-          this.uppy.emit('upload-error', file, err)
-          err.message = `Failed because: ${err.message}`
-
-          this.resetUploaderReferences(file.id)
-          reject(err)
-        },
-        onSuccess: (result) => {
-          const uploadResp = {
-            uploadURL: result.location
+      const onStart = (data) => {
+        const cFile = this.uppy.getFile(file.id)
+        this.uppy.setFileState(file.id, {
+          s3Multipart: {
+            ...cFile.s3Multipart,
+            key: data.key,
+            uploadId: data.uploadId,
+            parts: []
           }
+        })
+      }
 
-          this.resetUploaderReferences(file.id)
+      const onProgress = (bytesUploaded, bytesTotal) => {
+        this.uppy.emit('upload-progress', file, {
+          uploader: this,
+          bytesUploaded: bytesUploaded,
+          bytesTotal: bytesTotal
+        })
+      }
 
-          this.uppy.emit('upload-success', file, uploadResp)
+      const onError = (err) => {
+        this.uppy.log(err)
+        this.uppy.emit('upload-error', file, err)
+        err.message = `Failed because: ${err.message}`
 
-          if (result.location) {
-            this.uppy.log('Download ' + upload.file.name + ' from ' + result.location)
-          }
+        this.resetUploaderReferences(file.id)
+        reject(err)
+      }
 
-          resolve(upload)
-        },
-        onPartComplete: (part) => {
-          // Store completed parts in state.
-          const cFile = this.uppy.getFile(file.id)
-          if (!cFile) {
-            return
-          }
-          this.uppy.setFileState(file.id, {
-            s3Multipart: Object.assign({}, cFile.s3Multipart, {
-              parts: [
-                ...cFile.s3Multipart.parts,
-                part
-              ]
-            })
-          })
-
-          this.uppy.emit('s3-multipart:part-uploaded', cFile, part)
+      const onSuccess = (result) => {
+        const uploadResp = {
+          uploadURL: result.location
         }
-      }, file.s3Multipart))
+
+        this.resetUploaderReferences(file.id)
+
+        this.uppy.emit('upload-success', file, uploadResp)
+
+        if (result.location) {
+          this.uppy.log('Download ' + upload.file.name + ' from ' + result.location)
+        }
+
+        resolve(upload)
+      }
+
+      const onPartComplete = (part) => {
+        // Store completed parts in state.
+        const cFile = this.uppy.getFile(file.id)
+        if (!cFile) {
+          return
+        }
+        this.uppy.setFileState(file.id, {
+          s3Multipart: {
+            ...cFile.s3Multipart,
+            parts: [
+              ...cFile.s3Multipart.parts,
+              part
+            ]
+          }
+        })
+
+        this.uppy.emit('s3-multipart:part-uploaded', cFile, part)
+      }
+
+      const upload = new Uploader(file.data, {
+        // .bind to pass the file object to each handler.
+        createMultipartUpload: this.requests.wrapPromiseFunction(
+          this.opts.createMultipartUpload.bind(this, file)),
+        listParts: this.requests.wrapPromiseFunction(
+          this.opts.listParts.bind(this, file)),
+        prepareUploadPart: this.opts.prepareUploadPart.bind(this, file),
+        completeMultipartUpload: this.requests.wrapPromiseFunction(
+          this.opts.completeMultipartUpload.bind(this, file)),
+        abortMultipartUpload: this.requests.wrapPromiseFunction(
+          this.opts.abortMultipartUpload.bind(this, file)),
+
+        onStart,
+        onProgress,
+        onError,
+        onSuccess,
+        onPartComplete,
+
+        limit: this.opts.limit || 5,
+        ...file.s3Multipart
+      })
 
       this.uploaders[file.id] = upload
-      this.uploaderEvents[file.id] = createEventTracker(this.uppy)
+      this.uploaderEvents[file.id] = new EventTracker(this.uppy)
+
+      const queuedRequest = this.requests.run(() => {
+        if (!file.isPaused) {
+          upload.start()
+        }
+        // Don't do anything here, the caller will take care of cancelling the upload itself
+        // using resetUploaderReferences(). This is because resetUploaderReferences() has to be
+        // called when this request is still in the queue, and has not been started yet, too. At
+        // that point this cancellation function is not going to be called.
+        return () => {}
+      })
 
       this.onFileRemove(file.id, (removed) => {
+        queuedRequest.abort()
         this.resetUploaderReferences(file.id, { abort: true })
         resolve(`upload ${removed.id} was removed`)
       })
 
+      this.onCancelAll(file.id, () => {
+        queuedRequest.abort()
+        this.resetUploaderReferences(file.id)","Should it not be `this.resetUploaderReferences(file.id, { abort: true })` here too?",Why do we need to reset uploader references here?
388,"@@ -147,9 +149,73 @@ function runPromiseSequence (functions, ...args) {
 //   return (!f && 'not a function') || (s && s[1] || 'anonymous')
 // }
 
+function isPreviewSupported (fileTypeSpecific) {
+  // list of images that browsers can preview
+  if (/^(jpeg|gif|png|svg|svg\+xml|bmp)$/.test(fileTypeSpecific)) {
+    return true
+  }
+  return false
+}
+
+function getArrayBuffer (file) {
+  return new Promise(function (resolve, reject) {
+    var reader = new FileReader()
+    reader.addEventListener('load', function (e) {
+      // e.target.result is an ArrayBuffer
+      resolve(e.target.result)
+    })
+    reader.addEventListener('error', function (err) {
+      console.error('FileReader error' + err)
+      reject(err)
+    })
+    // file-type only needs the first 4100 bytes
+    const chunk = file.data.slice(0, 4100)","It's a bit strange that the function called `getArrayBuffer` only returns 4100 bytes. maybe it could take a `Blob` object instead of an Uppy file object, and let the caller slice it?

```js
const chunk = file.data.slice(0, 4100)
getArrayBuffer(chunk).then(...)
```",I don't think we need this function.
389,"@@ -147,9 +149,73 @@ function runPromiseSequence (functions, ...args) {
 //   return (!f && 'not a function') || (s && s[1] || 'anonymous')
 // }
 
+function isPreviewSupported (fileTypeSpecific) {
+  // list of images that browsers can preview
+  if (/^(jpeg|gif|png|svg|svg\+xml|bmp)$/.test(fileTypeSpecific)) {
+    return true
+  }
+  return false
+}
+
+function getArrayBuffer (file) {
+  return new Promise(function (resolve, reject) {
+    var reader = new FileReader()
+    reader.addEventListener('load', function (e) {
+      // e.target.result is an ArrayBuffer
+      resolve(e.target.result)
+    })
+    reader.addEventListener('error', function (err) {
+      console.error('FileReader error' + err)
+      reject(err)
+    })
+    // file-type only needs the first 4100 bytes
+    const chunk = file.data.slice(0, 4100)
+    reader.readAsArrayBuffer(chunk)
+  })
+}
+
 function getFileType (file) {
-  return file.type ? file.type.split('/') : ['', '']
-  // return mime.lookup(file.name)
+  const emptyFileType = ['', '']
+  const extensionsToMime = {
+    'md': 'text/markdown',
+    'markdown': 'text/markdown',
+    'mp4': 'video/mp4',
+    'mp3': 'audio/mp3'
+  }
+
+  const fileExtension = getFileNameAndExtension(file.name)[1]
+
+  // 1. try to determine file type from magic bytes with file-type module
+  // this should be the most trustworthy way
+  return getArrayBuffer(file)
+    .then((buffer) => {
+      const type = fileType(buffer)
+      if (type && type.mime) {
+        return type.mime.split('/')
+      }
+
+      // 2. if that’s no good, check if mime type is set in the file object
+      if (file.type) {
+        return Promise.resolve(file.type.split('/'))","Tiniest of nits, but this `Promise.resolve` isn't strictly necessary",I don't think you need the `console.error`
390,"@@ -149,6 +149,82 @@ uppy-server uses POST uploads by default, but you can also use them with your ow
    })
    ```
 
+## S3 Alternatives
+
+Many other object storage providers have an identical API to S3, so you can use the AwsS3 plugin with them. To use them with Uppy Server, you can set the `UPPYSERVER_AWS_ENDPOINT` variable to the endpoint of your preferred service.
+
+### DigitalOcean Spaces
+
+For example, with DigitalOcean Spaces, you could do something like this:
+
+```","It would be nice to specify the `bash` language for all the code blocks that export environment variables, to syntax-highlight them, just like the `uppy-server` documentation does.",I'm not sure if this is the right way to do it. I think it would be better to have an example of how to use the S3 plugin.
391,"@@ -149,6 +150,16 @@ module.exports = class Dashboard extends Plugin {
     this.install = this.install.bind(this)
   }
 
+  removeTarget (plugin) {
+    const pluginState = this.getPluginState()
+    // filter out the one we want to remove
+    const newTargets = pluginState.targets.filter(target => target.id !== plugin.id)
+
+    this.setPluginState({
+      targets: newTargets
+    })
+  }",good :ok_hand: ,I'm not sure if this is the best way to do this. I think it would be better to do this in the `setPluginState` method.
392,"@@ -149,7 +164,57 @@ class MultipartUploader {
     }
 
     candidates.forEach((index) => {
-      this._uploadPart(index)
+      this._uploadPartRetryable(index).catch((err) => {
+        this._onError(err)
+      })
+    })
+  }
+
+  _retryable ({ before, attempt, after }) {
+    const { retryDelays } = this.options
+    const { signal } = this.abortController
+
+    if (before) before()
+
+    function shouldRetry (err) {
+      if (err.source && typeof err.source.status === 'number') {
+        const { status } = err.source
+        // 0 probably indicates network failure
+        return status === 0 || status === 409 || status === 423 || (status >= 500 && status < 600)
+      }
+      return false
+    }
+
+    const doAttempt = (retryAttempt) =>
+      attempt().catch((err) => {
+        if (this._aborted()) throw createAbortError()
+
+        if (shouldRetry(err) && retryAttempt < retryDelays.length) {
+          return delay(retryDelays[retryAttempt], { signal })
+            .then(() => doAttempt(retryAttempt + 1))
+        } else {
+          throw err
+        }
+      })
+
+    return doAttempt(0).then((result) => {
+      if (after) after()
+      return result
+    }, (err) => {
+      if (after) after()
+      throw err
+    })","not actually an issue, but is there a reason we are not using `.catch(...)` here instead? I feel like it might make it more readable",I don't think we need to check for `err.source.status` here. If `err.source.status` is `undefined` or `err.source.status === 'undefine
393,"@@ -15,6 +15,29 @@
   </div>
 </section>
 
+<section class=""IndexLogos"">
+  <div class=""IndexLogos-container"">
+    <h2 class=""IndexLogos-title"">Used by:</h2>
+    <div class=""IndexLogos-logos"">
+      <a href=""https://www.coursera.org/"" class=""IndexLogos-item IndexLogos-item--coursera"">
+        <%- inline_svg('/images/featured-customers/coursera.svg') %>
+      </a>
+      <a href=""https://www.photobox.com/"" class=""IndexLogos-item IndexLogos-item--photobox"">
+        <%- inline_svg('/images/featured-customers/photobox.svg') %>
+      </a>
+      <a href=""https://issuu.com/"" class=""IndexLogos-item IndexLogos-item--issuu"">
+        <%- inline_svg('/images/featured-customers/issuu.svg') %>
+      </a>
+      <a href=""https://zulipchat.com/"" class=""IndexLogos-item IndexLogos-item--zulip"">
+        <%- inline_svg('/images/featured-customers/zulip.svg') %>
+      </a>
+    </div>
+    <div class=""IndexLogos-join"">
+      Use Uppy in your project? <a href=""https://github.com/transloadit/uppy/issues/769"" rel=""noreferrer noopener"" target=""_blank"">Let us know ›</a>","I think using is better in this case, yes
```suggestion
      Using Uppy in your project? <a href=""https://github.com/transloadit/uppy/issues/769"" rel=""noreferrer noopener"" target=""_blank"">Let us know ›</a>
```",I think this should be `<%- inline_svg('/images/featured-customers/coursera.svg') %>`
394,"@@ -15,6 +15,7 @@ const redis = require('./redis')
 const PROTOCOLS = Object.freeze({
   multipart: 'multipart',
   s3Multipart: 's3-multipart',
+  b2Multipart: 'b2-multipart',","where is the `b2Multipart` protocol being handled in this uploader? I don't see it anywhere. I mean something like the way it is [handled for s3Multipart](https://github.com/transloadit/uppy/blob/647bb6497c473a8497a06912a83342fa06d8f6e7/packages/%40uppy/companion/src/server/Uploader.js#L240-L241). The point of implementing this is so that people can import files from Google Drive (or Dropbox, Instagram, etc) and upload to S3, or B2 in this case",I don't think we need to freeze this.
395,"@@ -15,6 +15,8 @@
     ""jsx-quotes"": [""error"", ""prefer-double""],
     ""compat/compat"": [""error""],
 
+    ""no-unused-vars"": [""warn"", { ""vars"": ""all"", ""args"": ""after-used"", ""ignoreRestSiblings"": false }],","But it’s [part of Standard](https://github.com/standard/eslint-config-standard/blob/master/eslintrc.json#L157) config, so here you are changing it to also not allow arguments.

@goto-bus-stop any preference here?

But changing from `error` to `warn` is a bigger deal, cause it will now allow commits with unused vars, which I’m not a fan of.","""no-unused-vars"": [""warn"", { ""vars"": ""all"", ""args"": ""after-used"" }],"
396,"@@ -150,12 +154,22 @@ const ProgressBarComplete = ({ totalProgress }) => {
   `
 }
 
-const ProgressBarError = ({ error }) => {
+const ProgressBarError = (props) => {
+  // const { error } = props
   return html`
     <div class=""UppyStatusBar-content"">
-      <span>
-        ${error.message}
-      </span>
+      <div title=""Error"">
+        <button title=""Retry upload"" aria-label=""Retry upload"" class=""UppyStatusBar-action"" type=""button"" onclick=${props.retryAll}>
+          <svg class=""UppyIcon"" width=""28"" height=""31"" viewBox=""0 0 16 19"" xmlns=""http://www.w3.org/2000/svg"">
+            <path d=""M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z""/>
+            <path d=""M7.9 3H10v2H7.9z""/><path d=""M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z""/><path d=""M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z""/>
+          </svg>
+        </button>
+        Upload failed. 
+        <button class=""UppyStatusBar-button"" type=""button"" onclick=${props.retryAll}>","Can we squeeze the `error.message` in here somewhere stll?

Also `""Upload failed.""` and `""Retry?""` should probably be localisable (I guess the StatusBar doesn't localise anything so far)",Can we remove this?
397,"@@ -150,28 +147,27 @@ function checkForUnused (fileContents, pluginName, localePack) {
 }
 
 function sortObjectAlphabetically (obj, sortFunc) {
-  return Object.keys(obj).sort(sortFunc).reduce(function (result, key) {
+  return Object.keys(obj).sort(sortFunc).reduce((result, key) => {
     result[key] = obj[key]
     return result
   }, {})
 }
 
 function createTypeScriptLocale (plugin, pluginName) {
   const allowedStringTypes = Object.keys(plugin.defaultLocale.strings)
-    .map(key => `  | '${key}'`)
+    .map((key) => `  | '${key}'`)
     .join('\n')
 
   const pluginClassName = pluginName === 'core' ? 'Core' : plugin.id
   const localePath = path.join(__dirname, '..', 'packages', '@uppy', pluginName, 'types', 'generatedLocale.d.ts')
 
-  const localeTypes =
-    'import Uppy = require(\'@uppy/core\')\n' +
-    '\n' +
-    `type ${pluginClassName}Locale = Uppy.Locale` + '<\n' +
-    allowedStringTypes + '\n' +
-    '>\n' +
-    '\n' +
-    `export = ${pluginClassName}Locale\n`
+  const localeTypes =    `${'import Uppy = require(\'@uppy/core\')\n'
+    + '\n'
+    + `type ${pluginClassName}Locale = Uppy.Locale` + '<\n'}${
+    allowedStringTypes}\n`
+    + '>\n'
+    + '\n'
+    + `export = ${pluginClassName}Locale\n`","wow what happened here :joy:

We can keep it like this in this PR and clean it up afterward using strip-indent or something.",Why is this change needed?
398,"@@ -150,6 +150,8 @@ class MultipartUploader {
       return result
     }).then(({ url }) => {
       this._uploadPartBytes(index, url)
+    }).catch((err) => {","This is an extremely small nit and I almost feel bad for bringing it up: I think this might be a little clearer using the second argument to `.then()`. The `._uploadPartBytes()` call is conceptually the next step after the Promise chain ends, having another `.catch()` _reads_ like it is part of the chain. Basically, I could see myself reading this in the future and thinking the `this._uploadPartBytes()` call is missing a return statement.

I would prefer doing this:
```js
.then(({ url }) => {
  this._uploadPartBytes(index, url)
}, (err) => {
  this._onError(err)
})
```

Then it's clear that this is the end of the chain and that we have two ways of handling the ""final"" promise state, if that makes sense.",Shouldn't this be `catch(err)`?
399,"@@ -151,24 +178,66 @@ module.exports = class Webcam extends Plugin {
     this.streamSrc = null
   }
 
+  oneTwoThreeSmile () {
+    return new Promise((resolve, reject) => {
+      let count = this.opts.countdown
+
+      let countDown = setInterval(() => {
+        if (!this.webcamActive) {
+          clearInterval(countDown)
+          this.captureInProgress = false
+          return Promise.reject('Webcam is not active')",This `return` is inside a closure so it doesn't reject the outer Promise,I don't think you need to set `this.webcamActive` here.
400,"@@ -151,24 +178,66 @@ module.exports = class Webcam extends Plugin {
     this.streamSrc = null
   }
 
+  oneTwoThreeSmile () {
+    return new Promise((resolve, reject) => {
+      let count = this.opts.countdown
+
+      let countDown = setInterval(() => {
+        if (!this.webcamActive) {
+          clearInterval(countDown)
+          this.captureInProgress = false
+          return Promise.reject('Webcam is not active')
+        }
+
+        if (count > 0) {
+          this.core.emit('informer', `${count}...`, 'warning', 800)
+          count--
+        } else {
+          clearInterval(countDown)
+          this.core.emit('informer', this.i18n('smile'), 'success', 1500)
+          setTimeout(() => resolve(), 1500)
+        }
+      }, 1000)
+    })
+  }
+
+  justSmile () {
+    return new Promise((resolve, reject) => {
+      setTimeout(() => this.core.emit('informer', this.i18n('smile'), 'success', 1000), 1500)
+      setTimeout(() => resolve(), 2000)
+    })","Waiting 2s by default if no countdown is configured seems long to me…I thought the old way where ""Smile"" appears on focus and snapshotting is immediate was pretty good. Don't feel strongly tho.",Why do we need this?
401,"@@ -151,24 +178,66 @@ module.exports = class Webcam extends Plugin {
     this.streamSrc = null
   }
 
+  oneTwoThreeSmile () {
+    return new Promise((resolve, reject) => {
+      let count = this.opts.countdown
+
+      let countDown = setInterval(() => {
+        if (!this.webcamActive) {
+          clearInterval(countDown)
+          this.captureInProgress = false
+          return Promise.reject('Webcam is not active')
+        }
+
+        if (count > 0) {
+          this.core.emit('informer', `${count}...`, 'warning', 800)
+          count--
+        } else {
+          clearInterval(countDown)
+          this.core.emit('informer', this.i18n('smile'), 'success', 1500)
+          setTimeout(() => resolve(), 1500)
+        }
+      }, 1000)
+    })
+  }
+
+  justSmile () {
+    return new Promise((resolve, reject) => {
+      setTimeout(() => this.core.emit('informer', this.i18n('smile'), 'success', 1000), 1500)
+      setTimeout(() => resolve(), 2000)
+    })
+  }
+
   takeSnapshot () {
     const opts = {
       name: `webcam-${Date.now()}.jpg`,
       mimeType: 'image/jpeg'
     }
 
-    const video = this.target.querySelector('.UppyWebcam-video')
+    this.videoEl = this.target.querySelector('.UppyWebcam-video')
 
-    const image = this.webcam.getImage(video, opts)
+    if (this.captureInProgress) return
+    this.captureInProgress = true
 
-    const tagFile = {
-      source: this.id,
-      name: opts.name,
-      data: image.data,
-      type: opts.mimeType
-    }
+    this.opts.onBeforeSnapshot().catch((err) => {
+      this.emit('informer', err, 'error', 5000)
+      return Promise.reject(`onBeforeSnapshot: ${err}`)
+    }).then(() => {
+      const video = this.target.querySelector('.UppyWebcam-video')
+      if (!video) return Promise.reject('No video element found, likely due to the Webcam tab being closed.')",I think `captureInProgress` should also be reset before this return,`this.videoEl` is ne
402,"@@ -151,6 +151,7 @@ class Uppy {
     this.addFile = this.addFile.bind(this)
     this.removeFile = this.removeFile.bind(this)
     this.pauseResume = this.pauseResume.bind(this)
+    this.passesRestrictions = this.passesRestrictions.bind(this)",Mb change it to 'doesPassRestrictions()'? Doesn't sound enough like a boolean-returning method to me.,I don't think we nee
403,"@@ -151,7 +151,7 @@ module.exports = class AwsS3Multipart extends Plugin {
       const onError = (err) => {
         this.uppy.log(err)
         this.uppy.emit('upload-error', file, err)
-        err.message = `Failed because: ${err.message}`
+        err.message = `${err.message}`",I guess this assignment is now redundant?,I don't think we nee
404,"@@ -152,7 +152,7 @@ uppy.use(AwsS3, {
       },
       body: JSON.stringify({
         filename: file.name,
-        contentType: file.type
+        type: file.type","This example belongs to this PHP file: https://github.com/transloadit/uppy/blob/master/examples/aws-presigned-url/s3-sign.php, which uses `contentType`.",Why did you change t
405,"@@ -153,7 +153,9 @@ module.exports = class Transloadit extends Plugin {
     // Add Assembly-specific Tus endpoint.
     const tus = {
       ...file.tus,
-      endpoint: status.tus_url
+      endpoint: status.tus_url,
+      // Include X-Request-ID headers for better debugging.
+      addRequestId: true","is there any reason we are not adding this to companion as well? 🤔 There are no CORS concerns there, so adding probably shouldn't be a problem, no?

**One question about the requestId;** Are the request Ids unique to each tus-js-client request, or are they unique to an upload instance instead?",I think this should 
406,"@@ -154,7 +154,11 @@ module.exports = class Tus extends Plugin {
       }
 
       optsTus.onSuccess = () => {
-        this.uppy.emit('upload-success', file, upload, upload.url)
+        const uploadResp = {
+          uploadURL: upload.url
+        }
+
+        this.uppy.emit('upload-success', file, uploadResp)
 ",Do we need to pass `upload` instance?,`uploadResp` -> `upl
407,"@@ -154,7 +154,7 @@ module.exports = class Tus extends Plugin {
       }
 
       optsTus.onSuccess = () => {
-        this.uppy.emit('upload-success', file, upload, upload.url)
+        this.uppy.emit('upload-success', file, null, upload.url)",we can drop the upload.urls here and instead pass an object that contains the `uploadURL` like in xhrupload,I don't think we nee
408,"@@ -156,28 +162,34 @@ Should probably be called UI.
 
 - **Metadata** — allows adding custom metadata fields, data from each field is then added to a file
 
+---
+
 ## Questions about the future
 
 Things work the way they are. Not everything is optimal, though. We would like to improve our architecture and APIs to solve a few issues:
 
-We want Uppy to work well with React and React Native (and other frameworks, like Angular, Ember, Vue, Choo). Currently state and view rendering are tied with Core and Plugins, which is a problem for React. There are few options:
+We want Uppy to work well with React and React Native (and other frameworks, like Angular, Ember, Vue, Choo). Currently state and view rendering are all tied together in Core and Plugins, which is a problem for React or other libs that handle views. There are few options:
+
+A. The simplest is to go the “Black Hole way” and just tell React users to wrap Uppy in a dumb component with `shouldComponentUpdate: false`, and give them no control, but that’s not a good way — they can’t alter anything, this feels like a band-aid solution.",", or use time travel
",I'm not sure this is
409,"@@ -156,28 +162,34 @@ Should probably be called UI.
 
 - **Metadata** — allows adding custom metadata fields, data from each field is then added to a file
 
+---
+
 ## Questions about the future
 
 Things work the way they are. Not everything is optimal, though. We would like to improve our architecture and APIs to solve a few issues:
 
-We want Uppy to work well with React and React Native (and other frameworks, like Angular, Ember, Vue, Choo). Currently state and view rendering are tied with Core and Plugins, which is a problem for React. There are few options:
+We want Uppy to work well with React and React Native (and other frameworks, like Angular, Ember, Vue, Choo). Currently state and view rendering are all tied together in Core and Plugins, which is a problem for React or other libs that handle views. There are few options:
+
+A. The simplest is to go the “Black Hole way” and just tell React users to wrap Uppy in a dumb component with `shouldComponentUpdate: false`, and give them no control, but that’s not a good way — they can’t alter anything, this feels like a band-aid solution.
+
+B. Leave things as they are, keep Core. Treat Uppy as an external uploading library, where you subscribe to events and manage React (or other) state yourself: `uppy.on('core:progress', updateMyReactState)`. Simple example: http://codepen.io/arturi/pen/yaZEzz/. Maybe come up with some state-sync solution that will update Redux state in your app, when Uppy’s internal state is updated. Then we only use logic parts of Uppy (see uppy-base https://github.com/hedgerh/uppy-base/tree/master/src) and re-create UI components for each environment. Or optimize and abstract the ones we have, perhaps by switching to JSX and even more environment agnostic props. Then our UI plugins/views like DragDrop, Dashboard and Google Drive can be used in React.
 
-A. The simplest is to go “Black Hole way” and just tell React users to wrap Uppy in a dumb component with `shouldComponentUpdate: false`, and give them no control, but that’s not a good way — they can’t alter anything, this is like a band-aid.
+Issues with this approach:
 
-B. Leave things as they are, keep Core. Treat Uppy as an external uploading library, where you subscribe to events and manage React state yourself: `uppy.on('core:progress', updateMyReactState)`. Example: http://codepen.io/arturi/pen/yaZEzz/. So we only use logic parts of Uppy (see uppy-base https://github.com/hedgerh/uppy-base/tree/master/src) and re-create UI components, or optimize and abstract the ones we have, , perhaps by switching to JSX and even more env agnostic props. So that our UI like DragDrop, Dashboard and Google Drive views can be used in React.
+* It leaves state in Core (files are still added to it, progress gets updated, previews generated — all inside), and that means state will be kept in multiple places — Uppy’s Core + Redux or React component’s internal state. Might lead to state getting out of sync — if you removed file from Uppy `uppy.removeFile(fileID)`, but forgot to remove it from your Redux state, or something like that. *Unless we solve this by providing some subscription interface or a way to tell Uppy to use your Redux state somehow.*","I feel a variant here is possible where state-handling is hot-swappable. We'd have a Redux compatible state machine inside Uppy by default, but React/Native users could inject an instance of their own Redux, making Uppy store & subscribe there, instead. This would prevent state syncing, there only ever would be one source of truth. It would by default live inside Uppy, but can live inside the developers app, to profit from debugging/extending/timetravel
",I don't think this i
410,"@@ -1564,8 +1572,24 @@ class Uppy {
         return
       }
 
-      const files = currentUpload.fileIDs
-        .map((fileID) => this.getFile(fileID))
+      // Mark postprocessing step as complete if necessary; this addresses a case where we might get
+      // stuck in the postprocessing UI while the upload is fully complete.
+      // If the postprocessing steps do not do any work, they may not emit postprocessing events at
+      // all, and never mark the postprocessing as complete. This is fine on its own but we
+      // introduced code in the @uppy/core upload-success handler to prepare postprocessing progress
+      // state if any postprocessors are registered. That is to avoid a ""flash of completed state""
+      // before the postprocessing plugins can emit events.
+      //
+      // So, just in case an upload with postprocessing plugins *has* completed *without* emitting
+      // postprocessing completion, we do it instead.","To re-iterate, just to make sure I understand and the comment here is sufficient.
This re-emits `postprocess-complete` after `lastStep` of the upload/process chain, in case the event wasn’t emitted by processing plugins? 

I’m missing how this is related to websockets and polling fallback. When falling back to polling we missed `postprocess-complete`?",I don't think this i
411,"@@ -157,10 +166,8 @@ class Uppy {
       this.updateAll(nextState)
     })
 
-    // for debugging and testing
-    // this.updateNum = 0
+    // Exposing uppy object on window for debugging and testing
     if (this.opts.debug && typeof window !== 'undefined') {
-      window['uppyLog'] = ''
       window[this.opts.id] = this",will be good that we'll be forced to get rid of this when we remove `debug: true` :eyes:,Why was this removed
412,"@@ -157,6 +165,13 @@ module.exports = class RequestClient {
           credentials: 'same-origin',
           body: JSON.stringify(data)
         })
+          .catch((err) => {
+            if (err.name === 'AbortError') {
+              throw err
+            } else {
+              throw new NetworkError(err)",do we not need this for the `delete` method as well? 🤔 ,I think this should 
413,"@@ -1571,9 +1574,6 @@ class Uppy {
         const uploadID = this._createUpload(waitingFileIDs)
         return this._runUpload(uploadID)
       })",so errors from this block will no longer be caught? Is this deliberate?,.then(() => {
414,"@@ -158,7 +162,11 @@ module.exports = class Url extends Plugin {
         if (item.kind === 'string' && item.type === 'text/uri-list') {
           item.getAsString((url) => {
             this.uppy.log(`[URL] Adding file from dropped url: ${url}`)
-            this.addFile(url)
+            try {
+              this.addFile(url)","This is a different `addFile` function, it doesn't need the try/catch",Shouldn't this be `}
415,"@@ -159,9 +165,7 @@ class Uppy {
         id: fileID,
         name: fileName,
         extension: fileExtension || '',
-        meta: {
-          name: fileName
-        },
+        meta: Object.assign({}, this.getState().metaData),",`setMeta` sets the `meta` state key but this merges in the `metaData` state key,Why do we need this 
416,"@@ -16,45 +22,62 @@
 var createStream = require('fs').createWriteStream;
 var glob = require('multi-glob').glob;
 var chalk = require('chalk');
+var path = require('path');
+var mkdirp = require('mkdirp');
 var notifier = require('node-notifier');
 var babelify = require('babelify');
 var browserify = require('browserify');
 var watchify = require('watchify');
 
-var src = 'src/js/app.js';
-var dest = 'static/js/app.js';
+var webRoot = __dirname;
+var uppyRoot = path.dirname(webRoot);
 
-var pattern = 'src/examples/**/' + src;
+var srcPattern = webRoot + '/src/examples/**/js/app.es6';
+var dstPattern = webRoot + '/public/examples/**/js/app.js';
+
+var watchifyEnabled = process.argv[2] === 'watch';
+var browserifyPlugins = [];
+if (watchifyEnabled) {
+  browserifyPlugins.push(watchify);
+}
 
-// Find each app.js file with glob.
-// 'website/' glob is for when calling `node website/watch-examples.js` from root.
-glob([pattern, 'website/' + pattern], function(err, files) {
+// Instead of 'watch', build-examples.js can also take a path as cli argument.
+// In this case we'll only bundle the specified path/pattern
+if (!watchifyEnabled && process.argv[2]) {
+  srcPattern = process.argv[2];
+}
+
+// Find each app.es6 file with glob.
+glob(srcPattern, function(err, files) {
   if (err) throw new Error(err);
 
-  console.log('--> Watching examples..');
-  console.log('--> Pre-building ' + files.length + ' files..')
+  if (watchifyEnabled) {
+    console.log('--> Watching examples..');
+  }
 
   var muted = [];
 
   // Create a new watchify instance for each file.
   files.forEach(function(file) {
-    var watcher = browserify(file, {
-      cache: {},
+    var browseFy = browserify(file, {
+      cache       : {},
       packageCache: {},
-      plugin: [watchify]
+      plugin      : browserifyPlugins
     })
-      // Aliasing for using `require('uppy')`, etc.
-      .require('../src/index.js', { expose: 'uppy' })
-      .require('../src/core/index.js', { expose: 'uppy/core' })
-      .require('../src/plugins/index.js', { expose: 'uppy/plugins' })
+
+    // Aliasing for using `require('uppy')`, etc.
+    browseFy
+      .require(uppyRoot + '/src/index.js', { expose: 'uppy' })
+      .require(uppyRoot + '/src/core/index.js', { expose: 'uppy/core' })
+      .require(uppyRoot + '/src/plugins/index.js', { expose: 'uppy/plugins' })
       .transform(babelify);
 
     // Listeners for changes, errors, and completion.
-    watcher
+    browseFy
       .on('update', bundle)
       .on('error', onError)
       .on('log', function(msg) {","Looks like we can get rid of this event listener if its not being used anymore
",Why do we need to check `process.argv[2]`?
417,"@@ -16,6 +16,10 @@ Uppy comes with two state management solutions (stores):
  - `DefaultStore`, a simple object-based store.
  - `ReduxStore`, a store that uses a key in a Redux store.
 
+There are also some third party stores:
+
+ - [uppy-store-ngrx](https://github.com/rimlin/uppy-store-ngrx/), keeping Uppy state in a key in an Ngrx store for use with Angular.
+",Maybe also add a link to Ngrx store?,I think this should be `[uppy-store-ngrx]`
418,"@@ -160,6 +161,16 @@ async function main (packageName, version) {
     ? await getRemoteDistFiles(packageName, version)
     : await getLocalDistFiles(packagePath)
 
+  if (packageName === 'uppy') {
+    // Create downloadable zip archive
+    const zip = new AdmZip()
+    for (const [filename, buffer] of files.entries()) {
+      zip.addFile(filename, buffer, 'entry comment goes here')",is the comment required? would be preferable to omit it instead of having a dummy value :smile: ,I'm not sure if this is the right place to
419,"@@ -1604,6 +1604,34 @@ describe('src/Core', () => {
       }
     })
 
+    it('should enforce the maxTotalFileSize rule', () => {
+      const core = new Core({
+        restrictions: {
+          maxTotalFileSize: 34000
+        }
+      })
+
+      core.addFile({
+        source: 'jest',
+        name: 'foo.jpg',
+        type: 'image/jpeg',
+        data: new File([sampleImage], { type: 'image/jpeg' })
+      })
+
+      try {
+        core.addFile({
+          source: 'jest',
+          name: 'foo1.jpg',
+          type: 'image/jpeg',
+          data: new File([sampleImage], { type: 'image/jpeg' })
+        })
+        throw new Error('should have thrown')",Is there some reason https://jestjs.io/docs/en/expect#tothrowerror wouldn't work?,I think this should be `expect(() => core.
420,"@@ -162,7 +190,7 @@ Yes, there is an S3 plugin, please check out the [docs](https://uppy.io/docs/aws
 
 ### Do I need to install special service/server for Uppy? Can I use it with Rails/Node/Go/PHP?
 
-Yes, whatever you want on the backend will work with `XHRUpload` plugin, since it just does a `POST` or `PUT` request. Here’s a [PHP backend example](https://uppy.io/docs/xhrupload/#Uploading-to-a-PHP-Server).
+Yes, whatever you want on the backend will work with `XHR Upload` plugin, since it just does a `POST` or `PUT` request. Here’s a [PHP backend example](https://uppy.io/docs/xhrupload/#Uploading-to-a-PHP-Server).","here ""the `@uppy/xhr-upload` plugin"" probably makes the most sense. also the URL redirects to xhr-upload",Line is too long. [81/80]
421,"@@ -163,7 +163,8 @@ module.exports = class ProviderView {
         url: `${this.Provider.fileUrl(this.plugin.getItemRequestPath(file))}`,
         body: {
           fileId: this.plugin.getItemId(file)
-        }
+        },
+        provider: this.Provider","This will most likely not work with GoldenRetriever, it needs state to be JSON.stringify-able in most cases",Shouldn't this be `this.provider`?
422,"@@ -164,7 +184,7 @@ describe('download provdier file', () => {
       .set('uppy-auth-token', token)
       .set('Content-Type', 'application/json')
       .send({
-        endpoint: 'http://master.tus.com/files',
+        endpoint: 'http://master.tus.io/files',","Wont it be confusing to see a tus endpoint while this is about s3 multipart? Even if it doesn’t matter for the test, folks will see this and draw bad conclusions or walk away in a confused state",This should be `master.tus.io/files`
423,"@@ -165,6 +165,7 @@
     ""minify-stream"": ""2.0.1"",
     ""minimist"": ""^1.2.5"",
     ""mkdirp"": ""0.5.1"",
+    ""moment-timezone"": ""^0.5.31"",","we were previously relying on moment that was implicitly installed by expo for ""@uppy-example/react-native-expo"" I think (and it only worked because moment is a global object)","""moment-timezone"": ""^0.5.31"","
424,"@@ -166,7 +166,17 @@ module.exports = class Tus extends Plugin {
         this.resetUploaderReferences(file.id)
         resolve(upload)
       }
-      optsTus.metadata = file.meta
+
+      // tusd uses metadata field ""filetype"", not ""type""
+      const meta = Object.assign({}, file.meta)
+      if (
+        Object.prototype.hasOwnProperty.call(meta, 'type') &&
+        !Object.prototype.hasOwnProperty.call(meta, 'filetype')
+      ) {
+        meta.filetype = meta.type
+        delete meta.type
+      }
+      optsTus.metadata = meta
 ","Feels like this complicates everything a bit. If we just add `filetype` (maybe check if it is not already set), it would be simpler.

Also, could you please add `filename` as well? See https://github.com/tus/tus-js-client/commit/ebc5189eac35956c9f975ead26de90c896dbe360 and https://github.com/tus/tusd/blob/5b376141903c1fd64480c06dde3dfe61d191e53d/unrouted_handler.go#L640-L643",I don't think we need to check for `hasOwn
425,"@@ -168,7 +169,9 @@ module.exports = class Webcam extends Plugin {
       })
       return this.getVideo()
     }).then((file) => {
-      return this.uppy.addFile(file)
+      this.uppy.addFile(file)","this no longer waits for the `addFile()` function to complete, is that intentional?",return this.uppy.addFile(file)
426,"@@ -168,7 +169,9 @@ module.exports = class Webcam extends Plugin {
       })
       return this.getVideo()
     }).then((file) => {
-      return this.uppy.addFile(file)
+      this.uppy.addFile(file)
+      const dashboard = this.uppy.getPlugin('Dashboard')
+      if (dashboard) dashboard.hideAllPanels()",why is this done here? i feel like the webcam plugin shouldn't know it's in a panel,Why do we need to hide all panels?
427,"@@ -168,9 +168,12 @@ module.exports = class Webcam extends Plugin {
       this.opts.modes.indexOf('video-only') !== -1 ||
       this.opts.modes.indexOf('picture') !== -1
 
+    const videoConstraints = this.opts.videoConstraints ?? {}
+    videoConstraints.facingMode = this.opts.facingMode",Reading this again it should prob prefer the `videoConstraints.facingMode` value over `facingMode` if the former was already set,Why do we need this?
428,"@@ -169,6 +169,8 @@ class Uppy {
         data: file.data,
         progress: {
           percentage: 0,
+          bytesUploaded: 0,
+          bytesTotal: file.data.size || 0,",Do I have to do anything special here for remote files? or will this Just Work™?,Should this be `|| 0`?
429,"@@ -169,7 +169,7 @@ module.exports = class Webcam extends Plugin {
       })
       return this.getVideo()
     })
-    .then(this.uppy.addFile)
+    .then((file) => this.uppy.addFile(file))
     .then(() => {","And here we are not catching, cause we are actually handling the error?",.then((file) => {
430,"@@ -169,7 +169,7 @@ pushd ""${__root}"" > /dev/null 2>&1
 ",Let's remove this?,Why is this needed?
431,"@@ -17,14 +18,18 @@ module.exports = class Provider extends RequestClient {
     this.tokenKey = `companion-${this.pluginId}-auth-token`
   }
 
-  get defaultHeaders () {
-    return Object.assign({}, super.defaultHeaders, {'uppy-auth-token': this.getAuthToken()})
+  headers () {
+    return new Promise((resolve, reject) => {","```js
return super.headers().then((headers) => {
  return this.getAuthToken().then((token) => {
    return Object.assign({}, headers, { 'uppy-auth-token': token })
  })
})
```",I don't think we need to return a promise 
432,"@@ -17,15 +19,16 @@ module.exports = (props) => {
   return html`
     <table class=""BrowserTable"" onscroll=${props.handleScroll}>
       <tbody role=""listbox"" aria-label=""List of files from ${props.title}"">
-        ${props.folders.map((folder) => {
+        ${props.folders.map(folder => {","aww i like the parentheses there. super nit picky tho, i'll adapt either way :D",Why did you change this?
433,"@@ -17,7 +17,10 @@ cache:
   directories:
   - ~/.npm
 before_install:
+- nvm install-latest-npm",Two times installing npm requires?,- nvm install-latest-npm
434,"@@ -17,7 +17,7 @@
   @include reset-button;
   padding: 10px 15px;
   border: 1px solid $color-primary;
-  background-transition: all .3s;
+  transition: all .2s;",:see_no_evil: :+1: ,background-transition: n
435,"@@ -17,7 +17,7 @@ module.exports = class Provider extends RequestClient {
   }
 
   get defaultHeaders () {
-    return Object.assign({}, super.defaultHeaders, {'uppy-auth-token': localStorage.getItem(this.tokenKey)})
+    return Object.assign(super.defaultHeaders, {'uppy-auth-token': localStorage.getItem(this.tokenKey)})","this change is correct but it looked wrong initially :thinking: maybe add a comment explaining that super.defaultHeaders is a getter, so it's fine to mutably merge things into it? else i'm sure we'll get a PR to add back the `{}, ` in the near future :)

(FWIW i think keeping the `{}, ` is also fine, one or two empty objects don't pressure the GC that much :smile: )",Why is this change neede
436,"@@ -17,8 +38,10 @@ module.exports = (props) => {
     props.handleClick(ev)
   }
 
+  const itemIcon = props.getItemIcon()
+
   return (
-    <li class={'uppy-ProviderBrowserItem' + (props.isChecked ? ' uppy-ProviderBrowserItem--selected' : '')}>
+    <li class={'uppy-ProviderBrowserItem' + (props.isChecked ? ' uppy-ProviderBrowserItem--selected' : '') + (itemIcon === 'video' ? ' uppy-ProviderBrowserItem--noPreview' : '')}>
       <div class=""uppy-ProviderBrowserItem-checkbox"">","this is an Instagram-specific hack, should be replaced",Why do we need the `item
437,"@@ -172,13 +174,12 @@ class Zoom extends Provider {
         const file = resp
           .body
           .recording_files
-          .find(file => file.id === fileId || file.file_type === fileId)
+          .find(file => file.id === fileId || (file.file_type === fileId && file.recording_start === recordingStart))
 
         if (!file) {
           return this._downloadError(resp, done)
         }
-        // timeline files don't have file size, but are typically small json files, should be much less than 1MB
-        const maxExportFileSize = 1024 * 1024
+        const maxExportFileSize = 10 * 1024 * 1024 // 10MB","it looks like cc files are larger than just plain json files, but this information is not provided in the api response so it's hard to tell what the absolute limit on cc file size is. I've used the same limit here as the one set for google drive ",I think this should be `
438,"@@ -173,6 +180,37 @@ module.exports = class Transloadit extends Plugin {
     return this.opts.waitForEncoding || this.opts.waitForMetadata
   }
 
+  /**
+   * Used when `importFromUploadURLs` is enabled: reserves all files in
+   * the assembly.
+   */
+  reserveFiles (fileIDs) {
+    return Promise.all(fileIDs.map((fileID) => {
+      const file = this.core.getState().files[fileID]
+      const assemblyId = file.transloadit.assembly
+      const assemblies = this.state.assemblies
+      return this.client.reserveFile(assemblies[assemblyId], file)
+    }))
+  }
+
+  /**
+   * Used when `importFromUploadURLs` is enabled: adds files to the assembly
+   * once they have been fully uploaded.
+   */
+  onFileUploadURLAvailable (fileID) {
+    const file = this.core.getState().files[fileID]
+    if (!file || !file.transloadit || !file.transloadit.assembly) {
+      return
+    }
+
+    const assembly = this.state.assemblies[file.transloadit.assembly]
+
+    this.client.addFile(assembly, file).catch((err) => {
+      this.core.log(err)
+      this.core.emit('core:upload-error', file.id, err)","Hmm, this happens _after_ `core:upload-success`, it should emit this error in the postprocess step instead.",This should be `this.cor
439,"@@ -175,14 +176,14 @@ module.exports = class DashboardUI extends Plugin {
   }
 
   initEvents () {
-    // const dashboardEl = this.target.querySelector(`${this.opts.target} .UppyDashboard`)
-
     // Modal open button
     const showModalTrigger = findDOMElement(this.opts.trigger)
     if (!this.opts.inline && showModalTrigger) {
       showModalTrigger.addEventListener('click', this.showModal)
-    } else {
-      this.core.log('Modal trigger wasn’t found')
+    }
+
+    if (!this.opts.inline && !showModalTrigger) {
+      console.error('Dashboard modal trigger not found, you won’t be able to select files. Make sure `trigger` is set correctly in Dashboard options')","good error message 👍
can this use `this.core.log` with type error?",This should be `this.cor
440,"@@ -175,6 +172,13 @@ module.exports = class Dashboard extends Plugin {
     this.removeDragOverClassTimeout = null
   }
 
+  i18nInit () {","We may want to override setOptions in these plugins to automatically reinitialize the localization
```js
setOptions (newOpts) {
  super.setOptions(newOpts)
  this.i18nInit()
}
```",this.dragOverClassTimeou
441,"@@ -175,6 +177,11 @@ module.exports = class Tus extends Plugin {
 
       optsTus.onError = (err) => {
         this.uppy.log(err)
+
+        if (isNetworkError(err.originalRequest)) {
+          err = new NetworkError(err)","should this be `err = new NetworkError(err, err.originalRequest)` instead?",Why do we need this?
442,"@@ -175,8 +177,13 @@ module.exports = class Tus extends Plugin {
 
       optsTus.onError = (err) => {
         this.uppy.log(err)
+
+        if (isNetworkError(err.originalRequest)) {
+          err = new NetworkError(err, err.originalRequest)
+        }
+
         this.uppy.emit('upload-error', file, err)
-        err.message = `Failed because: ${err.message}`
+        err.message = `${err.message}`",redundant as well?,I'm not sure if this is 
443,"@@ -176,23 +176,46 @@ function getArrayBuffer (file) {
 
 function getFileType (file) {
   const emptyFileType = ['', '']
-  if (file.type) {
-    return Promise.resolve(file.type.split('/'))
+  const extensionsToMime = {
+    'md': 'text/markdown',
+    'markdown': 'text/markdown',
+    'mp4': 'video/mp4',
+    'mp3': 'audio/mp3'
   }","We should probably have one unified list of extensions/file-types? I need to search it by extension, and the one used in `getFileTypeExtension` is the other way around. But I guess we can just use one list and two different methods, `getFileTypeExtension` and `getExtensionByFileType`, looping through it with Object.keys().forEach? @goto-bus-stop ",Why do we need this?
444,"@@ -176,8 +176,8 @@ module.exports = class Dashboard extends Plugin {
 
     if (callerPluginType !== 'acquirer' &&
         callerPluginType !== 'progressindicator' &&
-        callerPluginType !== 'presenter') {
-      const msg = 'Dashboard: Modal can only be used by plugins of types: acquirer, progressindicator, presenter'
+        callerPluginType !== 'editor') {
+      const msg = 'Dashboard: The Dashboard can only be used by plugins of types: acquirer, progressindicator, editor'","if we're tweaking the wording here anyway 😇 
```suggestion
      const msg = 'Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor'
```",Should this be `Dashboar
445,"@@ -177,9 +170,12 @@ module.exports = class Multipart extends Plugin {
     //   }
   }
 
-  handleUpload () {
+  handleUpload (fileIDs) {
     this.core.log('Multipart is uploading...')
-    const files = this.core.getState().files
+    const files = fileIDs.map(getFile, this)
+    function getFile (fileID) {
+      return this.core.state.files[fileID]
+    }","All changes in this file are because the file IDs to upload are now passed in by `Core`, so the Multipart plugin doesn't have to figure out what it has to upload.",Why do we need this func
446,"@@ -178,7 +178,11 @@ app.use((req, res, next) => {
 if (app.get('env') === 'production') {
   // @ts-ignore
   app.use((err, req, res, next) => {
-    console.error('\x1b[31m', req.id, err, '\x1b[0m')
+    // if the error is as a result of bad request from client, no need
+    //  to flood production logs with this.
+    if (!err.status || err.status !== 400) {",Is this not overly eager?,I'm not sure if this is 
447,"@@ -178,8 +186,9 @@ module.exports = class Tus extends Plugin {
       optsTus.onError = (err) => {
         this.uppy.log(err)
 
-        if (isNetworkError(err.originalRequest)) {
-          err = new NetworkError(err, err.originalRequest)
+        const xhr = err.originalRequest ? err.originalRequest.getUnderlyingObject() : null","tus-js-client v2 introduces a HTTP abstraction layer, so the code to access XHR objects is a bit different now.",Why do we need this chan
448,"@@ -179,9 +201,13 @@ module.exports = class ProviderView {
     } catch (err) {
       // Nothing, restriction errors handled in Core
     }
-    if (!isCheckbox) {
-      this.donePicking()
-    }
+  }
+
+  removeFile (id) {
+    const { currentSelection } = this.plugin.getPluginState()
+    this.plugin.setPluginState({
+      currentSelection: currentSelection.filter((file) => file.id !== id)
+    })","Does this do anything, or is it here in case we might need it? Current solution doesn’t allow removing files from ProviderView, correct?",Why do we need this?
449,"@@ -18,14 +18,14 @@ module.exports = {
             ""port"": 8080
         }
     },
-    ""files"": [ ""examples/cdn/*""],
+    ""files"": [ ""examples/bundle/*""],","This seemed broken to me. Why would browserify only check the (previously `cdn`, now) `bundle` example? And even so, the path is incorrect here. Fixing this is unrelated so should not go into this PR I feel. But when we fix this in master, perhaps that solves the reload issues that you experienced @hedgerh?
",I think this should 
450,"@@ -18,47 +20,74 @@ module.exports.generateToken = (payload, secret) => {
 module.exports.verifyToken = (token, secret) => {
   try {
     // @ts-ignore
-    return { payload: jwt.verify(decrypt(token, secret), secret, {}).data }
+    return { payload: jwt.verify(token, secret, {}).data }
   } catch (err) {
     return { err }
   }
 }
 
 /**
  *
- * @param {object} res
+ * @param {*} payload
+ * @param {string} secret
+ */
+module.exports.generateEncryptedToken = (payload, secret) => {
+  return encrypt(module.exports.generateToken(payload, secret), secret)
+}
+
+/**
+ *
  * @param {string} token
- * @param {object=} companionOptions
- * @param {string} providerName
+ * @param {string} secret
  */
-module.exports.addToCookies = (res, token, companionOptions, providerName) => {
+module.exports.verifyEncryptedToken = (token, secret) => {
+  try {
+    // @ts-ignore
+    return module.exports.verifyToken(decrypt(token, secret), secret)
+  } catch (err) {
+    return { err }
+  }
+}
+
+const addToCookies = (res, token, companionOptions, authProvider, prefix) => {
   const cookieOptions = {
-    maxAge: 1000 * 60 * 60 * 24 * 30, // would expire after 30 days
+    maxAge: 1000 * EXPIRY, // would expire after one day (24 hrs)",no point making this last 30 days when the token itself expires after 24hrs,I don't think you ne
451,"@@ -18,6 +18,8 @@ cache:
 services:
 - docker
 addons:
+  hosts:
+    - companion.test",adding `hosts` is the one work around to have this working on Microsoft edge. Without this socket progress is not working on Edge,I don't think we nee
452,"@@ -18,7 +18,7 @@ Robodog is an Uppy-based library that helps you talk to the Transloadit API. It
 Robodog can be downloaded from npm:
 
 ```shell
-npm install --save @uppy/robodog
+npm install  @uppy/robodog","It seems this leaves two spaces here, perhaps we should replace for `[space]--save` instead?",Why did you remove t
453,"@@ -18,7 +18,7 @@ function FolderIcon () {
 
 function VideoIcon () {
   return (
-    <svg aria-hidden=""true"" focusable=""false"" viewBox=""0 0 58 58"">
+    <svg aria-hidden=""true"" focusable=""false"" style={{ width: 16, marginRight: 4 }} viewBox=""0 0 58 58"">",@arturi does this look good to you?,<div style={{ margin
454,"@@ -18,7 +18,7 @@ function FolderIcon () {
 
 function VideoIcon () {
   return (
-    <svg aria-hidden=""true"" focusable=""false"" viewBox=""0 0 58 58"">
+    <svg aria-hidden=""true"" focusable=""false"" viewBox=""0 0 58 58"" style={{ width: 16, marginRight: 4 }}>",what is the reason for this change? 🤔 ,Why do we need this 
455,"@@ -18,7 +18,7 @@ if (mode === 'build') {
 } else if (mode === 'test') {
   test()
 } else {
-  throw new Error(`First argument must be either 'build' or 'test'`)
+  throw new Error('First argument must be either \'build\' or \'test\'')","This is not better to me personally, you?",I think this should 
456,"@@ -180,16 +180,80 @@ Issues with this approach:
 
 * Some stuff from Core won’t be used in React (or won’t be needed by all users), `updateAll()` for example, that is tied to current UI rendering implementation. *Might not be an issue if it’s just a few methods.*
 
-C. Another approach is to create a separate version of Uppy for React, uppy-react, not use Core in it, re-create Core in form of UppyContainer, manage state in that (and possibly allow for Redux, Mobx or whatever else someone is using), while re-using some parts of current Uppy. This has been explored here: https://github.com/hedgerh/uppy-react.
-
-Ideally we would like to not end up with two separate versions — regular Uppy and React Uppy — that needs to be maintained and both updated each time. Though sometimes that’s exactly what lib authors are doing — creating separate React versions.
-
----
-
 Also, Yo-Yo (Bel) has some issues:
 
 - Local network requests from `<img src="""">` are made on each state update. Not a big deal, but annoying and does not happing with vdom solutions, like Preact.
 - Webcam currently flashes when state is updated (morphdom issue?).
 - When using template strings it might be harder to re-use UI components in React, where JSX is a standard.
 
 We are thinking about trying Preact for more stability and React compatibility, but not sure if it’s worth it.
+
+
+## Harry's Proposal
+---
+My proposal for Uppy's architecture and API address two use cases separately:
+
+1. Uppy when its used without React and state is managed internally
+
+2. Uppy when it's used with React, and the user manages their own state (or we provide a React container component that takes care of it for them.)  I'll refer to them as the ""vanilla/yo-yo"" and ""React"" use cases, respectively.
+
+### Vanilla (using yo-yo) with managed state
+
+So we have a problem. When we decouple rendering from Uppy, and a user is able to make their own custom UI, they'll need to be able to call on plugin methods to do things, like fetch a list of files from Google Drive, for example.  In our current setup, the core creates and holds an instance of every plugin, and outside UIs don't have direct access to these plugin instances.  To get around this, one idea we was to expose a bus/event emitter, and they could emit something like `bus.emit('google-drive:list-files', { directory: 'root' })` when they wanted to fetch a list of files.
+","Yes, this is an issue. Plus you can’t get a response after emitting event, but same with dispatcher. So it only updates state, which I guess is fine and aligns with data down — actions up approach. Instead of long actions like this we could allow accessing methods through core or actions shortcut, [like in FineUploader-React here](https://github.com/FineUploader/react-fine-uploader/blob/master/src/components/delete-button.jsx#L44). Like this: `actions.googleDrive.listFiles({ directory: 'root' })`.
",I don't think this i
457,"@@ -180,16 +180,80 @@ Issues with this approach:
 
 * Some stuff from Core won’t be used in React (or won’t be needed by all users), `updateAll()` for example, that is tied to current UI rendering implementation. *Might not be an issue if it’s just a few methods.*
 
-C. Another approach is to create a separate version of Uppy for React, uppy-react, not use Core in it, re-create Core in form of UppyContainer, manage state in that (and possibly allow for Redux, Mobx or whatever else someone is using), while re-using some parts of current Uppy. This has been explored here: https://github.com/hedgerh/uppy-react.
-
-Ideally we would like to not end up with two separate versions — regular Uppy and React Uppy — that needs to be maintained and both updated each time. Though sometimes that’s exactly what lib authors are doing — creating separate React versions.
-
----
-
 Also, Yo-Yo (Bel) has some issues:
 
 - Local network requests from `<img src="""">` are made on each state update. Not a big deal, but annoying and does not happing with vdom solutions, like Preact.
 - Webcam currently flashes when state is updated (morphdom issue?).
 - When using template strings it might be harder to re-use UI components in React, where JSX is a standard.
 
 We are thinking about trying Preact for more stability and React compatibility, but not sure if it’s worth it.
+
+
+## Harry's Proposal
+---
+My proposal for Uppy's architecture and API address two use cases separately:
+
+1. Uppy when its used without React and state is managed internally
+
+2. Uppy when it's used with React, and the user manages their own state (or we provide a React container component that takes care of it for them.)  I'll refer to them as the ""vanilla/yo-yo"" and ""React"" use cases, respectively.
+
+### Vanilla (using yo-yo) with managed state
+
+So we have a problem. When we decouple rendering from Uppy, and a user is able to make their own custom UI, they'll need to be able to call on plugin methods to do things, like fetch a list of files from Google Drive, for example.  In our current setup, the core creates and holds an instance of every plugin, and outside UIs don't have direct access to these plugin instances.  To get around this, one idea we was to expose a bus/event emitter, and they could emit something like `bus.emit('google-drive:list-files', { directory: 'root' })` when they wanted to fetch a list of files.
+
+I'm not a big fan of this.  The user becomes responsible for knowing the names of every single plugin event, which is prone to typos, and, in my opinion, it's a better pattern to be able to call functions directly to make these things happen vs. emitting events.
+
+My current proposal is to use Redux, or at least take a Redux-like approach, and have each plugin define a reducer and some action creators as an interface.  The core combines each reducer into a single one and holds it, along with a Redux store.
+
+Uppy would then pass down the Redux state, some core methods, and the dispatcher as ""props"" to the component, and the component would decide what to do with it all.
+
+The user code would look something like:
+
+```js
+import Uppy, { Remote, Uploader } from 'uppy'
+import DriveBrowser from 'uppy-ui'
+
+const uppy = new Uppy(someOptions)
+uppy.use(Remote, { source: 'drive' })
+uppy.use(Uploader)
+
+uppy.render(DriveBrowser, document.getElementById('root'))
+```
+
+The DriveBrowser component might look like:
+
+```js
+import { Remote } from 'uppy'
+const googleDrive = new Remote({ source: 'drive' })
+const { actions } = googleDrive
+
+const DriveBrowser = (props) => {
+  return html`
+    <div>
+      <button onclick=${props.dispatch(actions.list('root'))}>Get list of files</button>
+      /* ... */
+    </div>
+  `
+}
+```
+","> props.dispatch(actions.list('root'))

Does this mean it’s including the function, `action.list('root')` in the dispatch?
",I don't think this i
458,"@@ -180,16 +180,80 @@ Issues with this approach:
 
 * Some stuff from Core won’t be used in React (or won’t be needed by all users), `updateAll()` for example, that is tied to current UI rendering implementation. *Might not be an issue if it’s just a few methods.*
 
-C. Another approach is to create a separate version of Uppy for React, uppy-react, not use Core in it, re-create Core in form of UppyContainer, manage state in that (and possibly allow for Redux, Mobx or whatever else someone is using), while re-using some parts of current Uppy. This has been explored here: https://github.com/hedgerh/uppy-react.
-
-Ideally we would like to not end up with two separate versions — regular Uppy and React Uppy — that needs to be maintained and both updated each time. Though sometimes that’s exactly what lib authors are doing — creating separate React versions.
-
----
-
 Also, Yo-Yo (Bel) has some issues:
 
 - Local network requests from `<img src="""">` are made on each state update. Not a big deal, but annoying and does not happing with vdom solutions, like Preact.
 - Webcam currently flashes when state is updated (morphdom issue?).
 - When using template strings it might be harder to re-use UI components in React, where JSX is a standard.
 
 We are thinking about trying Preact for more stability and React compatibility, but not sure if it’s worth it.
+
+
+## Harry's Proposal
+---
+My proposal for Uppy's architecture and API address two use cases separately:
+
+1. Uppy when its used without React and state is managed internally
+
+2. Uppy when it's used with React, and the user manages their own state (or we provide a React container component that takes care of it for them.)  I'll refer to them as the ""vanilla/yo-yo"" and ""React"" use cases, respectively.
+
+### Vanilla (using yo-yo) with managed state
+
+So we have a problem. When we decouple rendering from Uppy, and a user is able to make their own custom UI, they'll need to be able to call on plugin methods to do things, like fetch a list of files from Google Drive, for example.  In our current setup, the core creates and holds an instance of every plugin, and outside UIs don't have direct access to these plugin instances.  To get around this, one idea we was to expose a bus/event emitter, and they could emit something like `bus.emit('google-drive:list-files', { directory: 'root' })` when they wanted to fetch a list of files.
+
+I'm not a big fan of this.  The user becomes responsible for knowing the names of every single plugin event, which is prone to typos, and, in my opinion, it's a better pattern to be able to call functions directly to make these things happen vs. emitting events.
+
+My current proposal is to use Redux, or at least take a Redux-like approach, and have each plugin define a reducer and some action creators as an interface.  The core combines each reducer into a single one and holds it, along with a Redux store.
+
+Uppy would then pass down the Redux state, some core methods, and the dispatcher as ""props"" to the component, and the component would decide what to do with it all.
+
+The user code would look something like:
+
+```js
+import Uppy, { Remote, Uploader } from 'uppy'
+import DriveBrowser from 'uppy-ui'
+
+const uppy = new Uppy(someOptions)
+uppy.use(Remote, { source: 'drive' })
+uppy.use(Uploader)
+
+uppy.render(DriveBrowser, document.getElementById('root'))
+```
+
+The DriveBrowser component might look like:
+
+```js
+import { Remote } from 'uppy'
+const googleDrive = new Remote({ source: 'drive' })
+const { actions } = googleDrive
+
+const DriveBrowser = (props) => {
+  return html`
+    <div>
+      <button onclick=${props.dispatch(actions.list('root'))}>Get list of files</button>
+      /* ... */
+    </div>
+  `
+}
+```
+
+Here is an example of what the plugin itself may look like: https://github.com/transloadit/uppy/blob/master/src/experimental/plugins/Remote.js
+
+Some things to note here:
+1. `Remote` is a generic plugin to interface with any remote provider, like Google Drive, Dropbox, Instagram, etc.
+
+2. Another one of the benefits to this approach is that we do away with all of the boilerplate methods that we currently have: `install`, `focus`, `update`, and `mount`.
+","> we do away with all of the boilerplate methods that we currently have: `install`, `focus`, `update`, and `mount`

Not sure I understand how mounting/updating will work with your solution. Ok, you want the user to call `render` manually, that’s fine. But `update` is still needed for the component to update itself when state changes? `focus` is needed to indicate that component is currently active, so its called after googleDrive tab is selected in Dashboard, for example.
",I don't think this i
459,"@@ -180,16 +180,80 @@ Issues with this approach:
 
 * Some stuff from Core won’t be used in React (or won’t be needed by all users), `updateAll()` for example, that is tied to current UI rendering implementation. *Might not be an issue if it’s just a few methods.*
 
-C. Another approach is to create a separate version of Uppy for React, uppy-react, not use Core in it, re-create Core in form of UppyContainer, manage state in that (and possibly allow for Redux, Mobx or whatever else someone is using), while re-using some parts of current Uppy. This has been explored here: https://github.com/hedgerh/uppy-react.
-
-Ideally we would like to not end up with two separate versions — regular Uppy and React Uppy — that needs to be maintained and both updated each time. Though sometimes that’s exactly what lib authors are doing — creating separate React versions.
-
----
-
 Also, Yo-Yo (Bel) has some issues:
 
 - Local network requests from `<img src="""">` are made on each state update. Not a big deal, but annoying and does not happing with vdom solutions, like Preact.
 - Webcam currently flashes when state is updated (morphdom issue?).
 - When using template strings it might be harder to re-use UI components in React, where JSX is a standard.
 
 We are thinking about trying Preact for more stability and React compatibility, but not sure if it’s worth it.
+
+
+## Harry's Proposal
+---
+My proposal for Uppy's architecture and API address two use cases separately:
+
+1. Uppy when its used without React and state is managed internally
+
+2. Uppy when it's used with React, and the user manages their own state (or we provide a React container component that takes care of it for them.)  I'll refer to them as the ""vanilla/yo-yo"" and ""React"" use cases, respectively.
+
+### Vanilla (using yo-yo) with managed state
+
+So we have a problem. When we decouple rendering from Uppy, and a user is able to make their own custom UI, they'll need to be able to call on plugin methods to do things, like fetch a list of files from Google Drive, for example.  In our current setup, the core creates and holds an instance of every plugin, and outside UIs don't have direct access to these plugin instances.  To get around this, one idea we was to expose a bus/event emitter, and they could emit something like `bus.emit('google-drive:list-files', { directory: 'root' })` when they wanted to fetch a list of files.
+
+I'm not a big fan of this.  The user becomes responsible for knowing the names of every single plugin event, which is prone to typos, and, in my opinion, it's a better pattern to be able to call functions directly to make these things happen vs. emitting events.
+
+My current proposal is to use Redux, or at least take a Redux-like approach, and have each plugin define a reducer and some action creators as an interface.  The core combines each reducer into a single one and holds it, along with a Redux store.
+
+Uppy would then pass down the Redux state, some core methods, and the dispatcher as ""props"" to the component, and the component would decide what to do with it all.
+
+The user code would look something like:
+
+```js
+import Uppy, { Remote, Uploader } from 'uppy'
+import DriveBrowser from 'uppy-ui'
+
+const uppy = new Uppy(someOptions)
+uppy.use(Remote, { source: 'drive' })
+uppy.use(Uploader)
+
+uppy.render(DriveBrowser, document.getElementById('root'))
+```
+
+The DriveBrowser component might look like:
+
+```js
+import { Remote } from 'uppy'
+const googleDrive = new Remote({ source: 'drive' })
+const { actions } = googleDrive
+
+const DriveBrowser = (props) => {
+  return html`
+    <div>
+      <button onclick=${props.dispatch(actions.list('root'))}>Get list of files</button>
+      /* ... */
+    </div>
+  `
+}
+```
+
+Here is an example of what the plugin itself may look like: https://github.com/transloadit/uppy/blob/master/src/experimental/plugins/Remote.js
+
+Some things to note here:
+1. `Remote` is a generic plugin to interface with any remote provider, like Google Drive, Dropbox, Instagram, etc.
+
+2. Another one of the benefits to this approach is that we do away with all of the boilerplate methods that we currently have: `install`, `focus`, `update`, and `mount`.
+
+3. The `Remote` plugin example linked above extends `Remote` from a module I created called `uppy-base`. I created `uppy-base` while trying to figure out how to make Uppy work with React.  I took the bare functionality of Uppy that could be used universally (vanilla, React, Angular, anywhere) and put it into its own module.  The `uppy-base` plugins are stateless and not concerned with the UI.  Here is the `Remote` plugin from `uppy-base`: https://github.com/hedgerh/uppy-base/blob/master/src/plugins/Remote.js
+
+## React
+I'd like to give React users the freedom to manage their own Uppy state, whether they use internal state, or a state management lib like Redux.  The proposed solution of syncing the user's state to Uppy's internal state via event listeners, ie. `uppy.on('file-added', (file) => this.props.dispatch({ type: 'ADD_FILE', payload: file }))` is problematic because it violates the ""single source of truth"" principal, in that our state exists in two separate locations.  If we add a file, then roll back the add file action with time-travel debugging, the file will be removed from Redux's state, but still present in Uppy's state, causing de-synchronization between the two.
+
+The easiest solution I've found is to just use the `uppy-base` plugins directly in React, without Uppy's core.  Here is a comparison of core vs. no core: https://gist.github.com/hedgerh/9ad63f467ce816246044f3f9e83bd7e7
+
+For ease of use, we'd write a React container/wrapper component that abstracted away all of that from the user.  I've started on something like that here (bear in mind it's a bit messy):  https://github.com/hedgerh/uppy-react/blob/master/src/containers/UppyContainer.js
+
+and started on an example usage here: https://github.com/hedgerh/uppy-react/tree/master/examples/modal
+","React proposal here seems cool! Downsides and critique are missing though, to me they are:
- Not clear how everything operates: each user comes up with his/her own method names, event names, file shapes.
- If there is no Core, what calculates total progress, watches for internet connection going online/offline, knows about capabilities? What adds metadata to files?
- Plugins behave differently (which might be fine if their base version has the same API), but seems like we’ll have Tus plugin for Vanilla Uppy and then another Tus for React Uppy.

Basically, the problem is things getting out of sync between two versions and current React version not taking into account things like metadata and file shaping (Core’s [addFile()](https://github.com/transloadit/uppy/blob/master/src/core/Core.js#L109-L157)). _Could be solved by having a shared Utils lib that does all those things and replaces Core in that sense_.

In [Core vs no-Core](https://gist.github.com/hedgerh/9ad63f467ce816246044f3f9e83bd7e7#file-uppyreduxcontainernocore-js) example you are effectively replacing Core with Uploader (which might be Tus or Multipart). That example probably shows our argument/discussion best — should we keep files in Core or manage them ourselves and pass to uploader plugin.

Also is Kevin’s proposal to hot-swap Core’s internal state with Redux state not possible? When you do `uppy.addFile(file)` and it automagically ends up in Redux state instead of Uppy’s internal.
",I don't think this i
460,"@@ -180,23 +184,19 @@ module.exports = class Transloadit extends Plugin {
           endpoint: assembly.tus_url
         })
 
-        // Set uppy server location.
-        // we only add this, if 'file' has the attribute remote, because
-        // this is the criteria to identify remote files. If we add it without
-        // the check, then the file automatically becomes a remote file.
-        // @TODO: this is quite hacky. Please fix this later
-        let remote
-        if (file.remote) {
+        // Set uppy server location. We only add this, if 'file' has the attribute
+        // remote, because this is the criteria to identify remote files.
+        // We only replace the hostname for Transloadit's uppy-servers, so that
+        // people can self-host them while still using Transloadit for encoding.
+        let remote = file.remote
+        if (file.remote && TL_UPPY_SERVER.test(file.remote)) {","Trying to make sense of this in my head. If you are using Transloadit and your own Uppy Server, where does the Transloadit’s Uppy Server come from in the first place? Transloadit plugin forces it, and here we are overwriting it back? This is also tied to `service` option, which is basically “you might want to decide which API endpoint to use yourself, forgoing the load balancer”. I apologize in advance for asking this :)",I don't think this i
461,"@@ -180,8 +180,13 @@ module.exports = class XHRUpload extends Plugin {
       formPost.append(item, file.meta[item])
     })
 
+    // Set `file.data.type` in the blob to `file.meta.type`,
+    // because we might have detected a more accurate file type in Uppy
+    // https://stackoverflow.com/a/50875615
+    file.data = file.data.slice(0, file.data.size, file.meta.type)",maybe we should have a reused `copyWithNewType` function? So that the comment and stackoverflow reference will only live in one place? And also the name is friendlier to read throughout the code,I think this should 
462,"@@ -181,16 +182,16 @@ if (app.get('env') === 'production') {
     // if the error is a URIError from the requested URL we only log the error message
     // to avoid uneccessary error alerts
     if (err.status === 400 && err instanceof URIError) {
-      console.error('\x1b[31m', req.id, err.message, '\x1b[0m')
+      logger.error(err.message, 'root.error', req.id)
     } else {
-      console.error('\x1b[31m', req.id, err, '\x1b[0m')
+      logger.error(err, 'root.error', req.id, true)","this `true` argument is a little unclear to me, maybe `{ logStackTrace: true }` as an option is better?",I don't think we nee
463,"@@ -181,6 +186,8 @@ export COMPANION_UPLOAD_URLS=""http://master.tus.io/files/,https://master.tus.io/
 
 See [env.example.sh](https://github.com/transloadit/uppy/blob/master/env.example.sh) for an example configuration script.
 
+If a `...SECRET_FILE""` environment variable is defined, the according `secret` will be overridden by the file's content.","I think this note should be added as a comment above the `COMPANION_AWS_SECRET_FILE` (and others) option itself. I fear a lot of users will find the `...SECRET_FILE""` notation confusing, and it also doesn't follow the current pattern of the documentation",
464,"@@ -182,25 +196,35 @@ module.exports = class Tus10 extends Plugin {
         isPaused ? upload.abort() : upload.start()
       })
 
-      this.onPauseAll(file.id, () => {
+      this.onRetry(file.id, () => {
         upload.abort()
+        upload.start()
       })
 
-      this.onResumeAll(file.id, () => {
+      this.onRetryAll(file.id, () => {
+        upload.abort()
         upload.start()
       })
 
-      this.core.on('core:retry-started', () => {
-        const files = this.core.getState().files
-        if (files[file.id].progress.uploadComplete ||
-          !files[file.id].progress.uploadStarted ||
-          files[file.id].isPaused
-            ) {
-          return
-        }
+      this.onPauseAll(file.id, () => {
+        upload.abort()
+      })
+
+      this.onResumeAll(file.id, () => {
         upload.start()
       })","I guess this is made a bit ""simpler"" by attaching the handlers using these `onResumeAll` helper methods. You're right that it's a bit confusing tho. We could inline them here, I don't think it hurts readability much, and it's just one more line each.",Shouldn't this be `onRetry`?
465,"@@ -182,8 +177,14 @@ function getFileTypeExtension (mimeType) {
   return mimeToExtensions[mimeType] || null
 }
 
-// returns [fileName, fileExt]
+/**
+* Takes a full filename string and returns an array of [fileName, fileExt]
+*
+* @param {string} fullFileName
+* @return {array} [fileName, fileExt]
+*/
 function getFileNameAndExtension (fullFileName) {
+  if (!fullFileName) return","is this still necessary now that we check the `file.name` before calling this function? if this sometimes returns an array and sometimes returns `undefined`, we may have to check the result type whenever we use it.",I don't think you need the `
466,"@@ -183,16 +183,18 @@ module.exports = class AwsS3Multipart extends Plugin {
         onPartComplete: (part) => {
           // Store completed parts in state.
           const cFile = this.uppy.getFile(file.id)
-          this.uppy.setFileState(file.id, {
-            s3Multipart: Object.assign({}, cFile.s3Multipart, {
-              parts: [
-                ...cFile.s3Multipart.parts,
-                part
-              ]
+          if (cFile) {","Thanks! Maybe we could return early here, something like `if (!cFile) return`, then we don’t need deep nesting.",Why do we need to check for 
467,"@@ -183,7 +183,7 @@ class DropBox extends Provider {
       .auth(token)
       .request((err, resp) => {
         if (err || resp.statusCode !== 200) {
-          logger.error(err, 'provider.dropbox.size.error')
+          logger.error(err, 'provider.dropbox.logout.error')",👍 ,This should be `provider.dro
468,"@@ -185,105 +208,96 @@ module.exports = class AwsS3 extends Plugin {
           xhrOpts.headers = headers
         }
 
-        const updatedFile = {
-          ...file,
+        this.uppy.setFileState(file.id, {
           meta: { ...file.meta, ...fields },
           xhrUpload: xhrOpts
-        }
-
-        updatedFiles[id] = updatedFile
-      })
-
-      const { files } = this.uppy.getState()
-      this.uppy.setState({
-        files: {
-          ...files,
-          ...updatedFiles
-        }
-      })
+        })
 
-      fileIDs.forEach((id) => {
-        const file = this.uppy.getFile(id)
-        this.uppy.emit('preprocess-complete', file)
+        return this._uploader.uploadFile(file.id, index, numberOfFiles)
+      }).catch((error) => {
+        delete paramsPromises[id]
+        this.uppy.emit('upload-error', file, error)
       })
+    })).then((settled) => {
+      // cleanup.
+      this.uppy.off('file-removed', onremove)
+      return settled
     })
   }
 
   install () {
-    const { log } = this.uppy
-    this.uppy.addPreProcessor(this.prepareUpload)
-
-    let warnedSuccessActionStatus = false
-    const xhrUploadOpts = {
-      fieldName: 'file',
-      responseUrlFieldName: 'location',
-      timeout: this.opts.timeout,
-      __queue: this.requests,
-      responseType: 'text',
-      // Get the response data from a successful XMLHttpRequest instance.
-      // `content` is the S3 response as a string.
-      // `xhr` is the XMLHttpRequest instance.
-      getResponseData (content, xhr) {
-        const opts = this
-
-        // If no response, we've hopefully done a PUT request to the file
-        // in the bucket on its full URL.
-        if (!isXml(content, xhr)) {
-          if (opts.method.toUpperCase() === 'POST') {
-            if (!warnedSuccessActionStatus) {
-              log('[AwsS3] No response data found, make sure to set the success_action_status AWS SDK option to 201. See https://uppy.io/docs/aws-s3/#POST-Uploads', 'warning')
-              warnedSuccessActionStatus = true
-            }
-            // The responseURL won't contain the object key. Give up.
-            return { location: null }
-          }
-
-          // responseURL is not available in older browsers.
-          if (!xhr.responseURL) {
-            return { location: null }
+    const uppy = this.uppy
+    this.uppy.addUploader(this.handleUpload)
+
+    // Get the response data from a successful XMLHttpRequest instance.
+    // `content` is the S3 response as a string.
+    // `xhr` is the XMLHttpRequest instance.
+    function defaultGetResponseData (content, xhr) {
+      const opts = this
+
+      // If no response, we've hopefully done a PUT request to the file
+      // in the bucket on its full URL.
+      if (!isXml(content, xhr)) {
+        if (opts.method.toUpperCase() === 'POST') {
+          if (!warnedSuccessActionStatus) {
+            uppy.log('[AwsS3] No response data found, make sure to set the success_action_status AWS SDK option to 201. See https://uppy.io/docs/aws-s3/#POST-Uploads', 'warning')
+            warnedSuccessActionStatus = true
           }
-
-          // Trim the query string because it's going to be a bunch of presign
-          // parameters for a PUT request—doing a GET request with those will
-          // always result in an error
-          return { location: xhr.responseURL.replace(/\?.*$/, '') }
+          // The responseURL won't contain the object key. Give up.
+          return { location: null }
         }
 
-        return {
-          // Some S3 alternatives do not reply with an absolute URL.
-          // Eg DigitalOcean Spaces uses /$bucketName/xyz
-          location: resolveUrl(xhr.responseURL, getXmlValue(content, 'Location')),
-          bucket: getXmlValue(content, 'Bucket'),
-          key: getXmlValue(content, 'Key'),
-          etag: getXmlValue(content, 'ETag')
-        }
-      },
-
-      // Get the error data from a failed XMLHttpRequest instance.
-      // `content` is the S3 response as a string.
-      // `xhr` is the XMLHttpRequest instance.
-      getResponseError (content, xhr) {
-        // If no response, we don't have a specific error message, use the default.
-        if (!isXml(content, xhr)) {
-          return
+        // responseURL is not available in older browsers.
+        if (!xhr.responseURL) {
+          return { location: null }
         }
-        const error = getXmlValue(content, 'Message')
-        return new Error(error)
+
+        // Trim the query string because it's going to be a bunch of presign
+        // parameters for a PUT request—doing a GET request with those will
+        // always result in an error
+        return { location: xhr.responseURL.replace(/\?.*$/, '') }
+      }
+
+      return {
+        // Some S3 alternatives do not reply with an absolute URL.
+        // Eg DigitalOcean Spaces uses /$bucketName/xyz
+        location: resolveUrl(xhr.responseURL, getXmlValue(content, 'Location')),
+        bucket: getXmlValue(content, 'Bucket'),
+        key: getXmlValue(content, 'Key'),
+        etag: getXmlValue(content, 'ETag')
       }
     }
 
-    // Replace getResponseData() with overwritten version.
-    if (this.opts.getResponseData) {
-      xhrUploadOpts.getResponseData = this.opts.getResponseData
+    // Get the error data from a failed XMLHttpRequest instance.
+    // `content` is the S3 response as a string.
+    // `xhr` is the XMLHttpRequest instance.
+    function defaultGetResponseError (content, xhr) {
+      // If no response, we don't have a specific error message, use the default.
+      if (!isXml(content, xhr)) {
+        return
+      }
+      const error = getXmlValue(content, 'Message')
+      return new Error(error)
     }
 
-    this.uppy.use(XHRUpload, xhrUploadOpts)
+    const xhrOptions = {
+      fieldName: 'file',
+      responseUrlFieldName: 'location',
+      timeout: this.opts.timeout,
+      // Share the rate limiting queue with XHRUpload.
+      __queue: this.requests,","curious, so this options is prefixed with `__` because it's meant for internal use only?",I don't think this is needed
469,"@@ -185,13 +187,13 @@ class Zoom extends Provider {
   }
 
   _initializeData (body, initialEnd = null) {
-    let end = initialEnd || moment()
-    const accountCreation = adapter.getAccountCreationDate(body)
-    const defaultLimit = end.clone().subtract(DEFAULT_RANGE_MOS, 'months').date(1)
+    let end = initialEnd || moment.utc().tz(body.timezone || 'UTC')","we convert `cursor` and `end` (and everything that relies on it) to local time. this was done this way (rather than just adjusting display in adapter) because we need to show the information in local time anyways, and we need access to from / to dates in local timezone to correctly filter out extra results in the `/provider/list` call once a user clicks into a date range.   I couldn't think of a better way to do it that would retain this from/to local times",I don't think we need the `|
470,"@@ -186,9 +186,11 @@ module.exports = class ThumbnailGenerator extends Plugin {
       return this.createThumbnail(file, this.opts.thumbnailWidth)
         .then(preview => {
           this.setPreviewURL(file.id, preview)
+          this.uppy.emit('thumbnail:generated', this.uppy.getFile(file.id), preview)
         })
         .catch(err => {
           console.warn(err.stack || err.message)
+          this.uppy.emit('thumbnail:error', this.uppy.getFile(file.id), err)","So `thumbnail:ready` is when all are ready, and `thumbnail:generated` is for single? Maybe add `all-` to it then, `thumbnail:all-ready` or `thumbnail:all-generated`?",`this.uppy.emit('thumbnail:e
471,"@@ -188,16 +188,18 @@ class Zoom extends Provider {
     let start = end.clone().date(1)
 
     const accountCreation = adapter.getAccountCreationDate(body)
-    const defaultLimit = end.clone().subtract(DEFAULT_RANGE_MOS, 'months')
-    const limit = accountCreation > defaultLimit ? accountCreation : defaultLimit
+    const defaultLimit = end.clone().subtract(DEFAULT_RANGE_MOS, 'months').date(1)
+    const allResultsShown = accountCreation > defaultLimit
+    const limit = allResultsShown ? accountCreation : defaultLimit
 
     const data = {
       items: [],
       username: adapter.getUserEmail(body)
     }
 
-    while (start > limit) {
-      start = end.clone().date(1)
+    while (start.isSameOrAfter(limit, 'month')) {
+      start = end.isSame(limit, 'month') ? limit.clone() : end.clone().date(1)","maybe we should add a comment here, hinting at what date scenarios this ternary is catching? It took me some time to figure what it was about.",Why do we need to clone here
472,"@@ -189,104 +177,6 @@ function isObjectURL (url) {
   return url.indexOf('blob:') === 0
 }
 
-function getProportionalHeight (img, width) {
-  const aspect = img.width / img.height
-  return Math.round(width / aspect)
-}
-
-/**
- * Create a thumbnail for the given Uppy file object.
- *
- * @param {{data: Blob}} file
- * @param {number} width
- * @return {Promise}
- */
-function createThumbnail (file, targetWidth) {
-  const originalUrl = URL.createObjectURL(file.data)
-  const onload = new Promise((resolve, reject) => {
-    const image = new Image()
-    image.src = originalUrl
-    image.onload = () => {
-      URL.revokeObjectURL(originalUrl)
-      resolve(image)
-    }
-    image.onerror = () => {
-      // The onerror event is totally useless unfortunately, as far as I know
-      URL.revokeObjectURL(originalUrl)
-      reject(new Error('Could not create thumbnail'))
-    }
-  })
-
-  return onload.then((image) => {
-    const targetHeight = getProportionalHeight(image, targetWidth)
-    const canvas = resizeImage(image, targetWidth, targetHeight)
-    return canvasToBlob(canvas, 'image/png')
-  }).then((blob) => {
-    return URL.createObjectURL(blob)
-  })
-}
-","@goto-bus-stop fine to remove this, right?",Why is this removed?
473,"@@ -189,12 +189,13 @@ class Uppy {
       this.addThumbnail(newFile.id)
     }
 
-    if (this.opts.autoProceed) {
-      this.upload()
-        .catch((err) => {
+    if (this.opts.autoProceed && !this.scheduledAutoProceed) {
+      this.scheduledAutoProceed = setTimeout(() => {
+        this.scheduledAutoProceed = null
+        this.upload().catch((err) => {
           console.error(err.stack || err.message)
         })
-      // this.bus.emit('core:upload')
+      }, 4)","This timeout is to debounce uploads being started. Previously this would start a new upload for each individual file that was added, if `autoProceed` is enabled. Eg, dropping 5 files would call upload() 5 times. Since the Transloadit plugin creates an assembly for all files when an upload is started, it's best if it can grab all new files in a single upload() call. With this timeout dropping 5 files calls upload() a single time.",Why do we need a setTimeout 
474,"@@ -189,7 +197,11 @@ module.exports = class Url extends Plugin {
         if (item.kind === 'string' && item.type === 'text/plain') {
           item.getAsString((url) => {
             this.uppy.log(`[URL] Adding file from pasted url: ${url}`)
-            this.addFile(url)
+            try {
+              this.addFile(url)",ditto,Shouldn't this be `} catch {
475,"@@ -19,10 +19,26 @@ const renderFileSource = (props) => (
   </div>
 )
 
-const renderFileName = (props) =>
-  <div class=""uppy-DashboardItem-name"">
-    {truncateString(props.file.meta.name, props.currentWidth > 606 ? 35 : 60)}
-  </div>
+const renderFileName = (props) => {
+  // Take up at most 2 lines on any screen
+  let maxNameLength
+  // For very small mobile screens
+  if (props.containerWidth < 352) {
+    maxNameLength = 35
+  // For regular mobile screens
+  } else if (props.containerWidth < 577) {
+    maxNameLength = 60
+  // For desktops
+  } else {
+    maxNameLength = 35
+  }","This works 👍 but I wonder if those need to be in sync with:

```js
{ 'uppy-size--md': props.containerWidth > 576 },
{ 'uppy-size--lg': props.containerWidth > 700 },
{ 'uppy-size--xl': props.containerWidth > 900 },
```

I’m not a fan of using arbitrary numbers.

🤔 ",I'm not sure if this is the 
476,"@@ -19,29 +23,28 @@ module.exports = (props) => {
     `
   }
 
-  const input = html`
-    <input class=""UppyDashboard-input""
-          hidden=""true""
-          aria-hidden=""true"" 
-          tabindex=""-1"" 
-          type=""file"" 
-          name=""files[]"" 
-          multiple=""true""
-          onchange=${props.handleInputChange} />`
-
   return html`<div class=""UppyDashboardTabs"">
       <ul class=""UppyDashboardTabs-list"" role=""tablist"">
         <li class=""UppyDashboardTab"" role=""presentation"">
-          <button type=""button"" class=""UppyDashboardTab-btn""
+          <button type=""button"" 
+                  class=""UppyDashboardTab-btn""
                   role=""tab""
                   tabindex=""0""
-                  onclick=${(ev) => {
-                    input.click()
-                  }}>
+                  onclick=${ev => inputEl.click()}>
             ${localIcon()}
             <h5 class=""UppyDashboardTab-name"">${props.i18n('myDevice')}</h5>
           </button>
-          ${input}
+          <input class=""UppyDashboard-input""
+                 hidden=""true""
+                 aria-hidden=""true"" 
+                 tabindex=""-1"" 
+                 type=""file"" 
+                 name=""files[]"" 
+                 multiple=""true""
+                 onchange=${props.handleInputChange} 
+                 ref=${(input) => {
+                   inputEl = input
+                 }} />","oh nice, you already inlined the `<input>` here :D ",Why do we need this ref?
477,"@@ -19,6 +21,10 @@ function buildResponseError (xhr, error) {
     error = Object.assign(new Error('Upload error'), { data: error })
   }
 
+  if (isNetworkError(xhr)) {
+    error = new NetworkError(error)","for consistent behaviour, would it make sense to pass xhr to `NetworkError` and return early like so:

```js
if (isNetworkError(xhr)) {
    error = new NetworkError(error, xhr)
    return error
}
```

and then change [this field](https://github.com/transloadit/uppy/pull/2110/files#diff-dcd2ff4fc4c4c209bccb7194f0206d8fR6) from `originalRequest` to `request`.  Changing the field will make it consistent with how it's done in `xhr-upload` already.

Returning early will prevent any unintended changes on the NetworkError object which may be added after the `if(...)` block. This will make the `NetworkError` class consistent. 

If we agree with this suggestion, we can do the same for `MiniXhrUpload`",if (isNetworkError(xhr)) {
478,"@@ -19,7 +19,7 @@ module.exports = class Plugin {
     this.opts = opts || {}
 
     // clear everything inside the target selector
-    this.opts.replaceTargetContent === this.opts.replaceTargetContent || true
+    this.opts.replaceTargetContent = this.opts.replaceTargetContent !== undefined ? this.opts.replaceTargetContent : true",good catch! strange that the linter didn't catch this!,Why not just `this.opts.repl
479,"@@ -190,6 +190,7 @@
     .use(Uppy.GoogleDrive, { target: Uppy.Dashboard, companionUrl: COMPANION_ENDPOINT })
     .use(Uppy.Instagram, { target: Uppy.Dashboard, companionUrl: COMPANION_ENDPOINT })
     .use(Uppy.Dropbox, { target: Uppy.Dashboard, companionUrl: COMPANION_ENDPOINT })
+    .use(Uppy.Box, { target: Uppy.Dashboard, companionUrl: COMPANION_ENDPOINT })","excluding from example in the mean time
```suggestion
```",".use(Uppy.Box, { target: Upp"
480,"@@ -190,6 +190,8 @@ export COMPANION_AWS_SECRET=""YOUR AWS SECRET""
 export COMPANION_AWS_SECRET_FILE=""PATH/TO/AWS/SECRET/FILE""
 export COMPANION_AWS_BUCKET=""YOUR AWS S3 BUCKET""
 export COMPANION_AWS_REGION=""AWS REGION""
+# to enable S3 Transfer Acceleration (default: false)
+export export COMPANION_AWS_USE_ACCELERATE_ENDPOINT=""false""","```suggestion
export COMPANION_AWS_USE_ACCELERATE_ENDPOINT=""false""
```",
481,"@@ -190,6 +195,11 @@ module.exports = class XHRUpload extends Plugin {
   }
 
   createBareUpload (file, opts) {
+    // Set `file.data.type` in the blob to `file.meta.type`,
+    // because we might have detected a more accurate file type in Uppy
+    // https://stackoverflow.com/a/50875615
+    file.data = file.data.slice(0, file.data.size, file.meta.type)","This doesn't have any effect for bare uploads, those only send the raw bytes",I
482,"@@ -196,27 +243,31 @@ module.exports = class Transloadit extends Plugin {
     })
   }
 
-  prepareUpload (fileIDs) {
-    const filesToUpload = fileIDs.map(getFile, this).reduce(intoFileMap, {})
-    function getFile (fileID) {
-      return this.core.state.files[fileID]
-    }
-    function intoFileMap (map, file) {
-      map[file.id] = file
-      return map
-    }
+  getFile (fileID) {
+    return this.core.state.files[fileID]
+  }
 
+  prepareUpload (fileIDs) {
     fileIDs.forEach((fileID) => {
       this.core.emit('core:preprocess-progress', fileID, {
         mode: 'indeterminate',
         message: this.opts.locale.strings.creatingAssembly
       })
     })
-    return this.createAssembly(filesToUpload).then(() => {
-      fileIDs.forEach((fileID) => {
-        this.core.emit('core:preprocess-complete', fileID)
+
+    const createAssembly = ({ fileIDs, options }) => {
+      return this.createAssembly(fileIDs, options).then(() => {
+        fileIDs.forEach((fileID) => {
+          this.core.emit('core:preprocess-complete', fileID)
+        })
       })
-    })
+    }
+
+    return this.getAssemblyOptions(fileIDs)
+      .then(this.dedupeAssemblyOptions, this)",Uh. that should be an arrow function,W
483,"@@ -196,6 +196,8 @@ Even with these CORS rules in place, you browser might still encounter HTTP stat
 
 It will list general *Public access settings for this bucket*, which can override the rules imposed by your CORS settings. Click on *edit* to manage these settings. Under *Manage public access control lists (ACLs) for this bucket*, make sure that *Block new public ACLs and uploading public objects (Recommended)* is unchecked, and *Save* these settings.
 
+If you are using an IAM policy to allow access to the S3 bucket (which we recommend), the policy must have at least the s3:PutObject and s3:PutObjectAcl permissions scoped to the bucket in question.","```suggestion
If you are using an IAM policy to allow access to the S3 bucket, the policy must have at least the `s3:PutObject` and `s3:PutObjectAcl` permissions scoped to the bucket in question.
```",I
484,"@@ -196,9 +178,21 @@ module.exports = class Tus extends Plugin {
 
       const upload = new tus.Upload(file.data, optsTus)
       this.uploaders[file.id] = upload
-      this.uploaderEvents[file.id] = createEventTracker(this.uppy)
+      this.uploaderEvents[file.id] = new EventTracker(this.uppy)
+
+      const queuedRequest = this.requests.run(() => {
+        if (!file.isPaused) {
+          upload.start()
+        }
+        // Don't do anything here, the caller will take care of cancelling the upload itself
+        // using resetUploaderReferences(). This is because resetUploaderReferences() has to be
+        // called when this request is still in the queue, and has not been started yet, too. At
+        // that point this cancellation function is not going to be called.
+        return () => {}",Question: so we have to call `this.resetUploaderReferences(file.id)` before `queuedRequest.abort()`?,I
485,"@@ -2,10 +2,10 @@
 . ./env.sh
 
 env \
-  UPPYSERVER_DATADIR=""./output"" \
-  UPPYSERVER_DOMAIN=""localhost:3020"" \
-  UPPYSERVER_PROTOCOL=""http"" \
-  UPPYSERVER_PORT=3020 \
+  COMPANION_DATADIR=""./output"" \
+  COMPANION_DOMAIN=""localhost:3020"" \
+  COMPANION_PROTOCOL=""http"" \
+  COMPANION_PORT=3020 \
   UPPY_ENDPOINTS="""" \",this would be a nice opportunity to namespace this env var name too,T
486,"@@ -2,11 +2,19 @@
 * General Uppy styles that apply to everything inside the .Uppy container
 */
 
-.Uppy {
+.uppy {",why this caps change?,W
487,"@@ -2,12 +2,17 @@ import Uppy = require('@uppy/core');
 
 declare module Tus {
   export interface TusOptions extends Uppy.PluginOptions {
-    limit: number;
-    endpoint: string;
-    uploadUrl: string;
-    useFastRemoteRetry: boolean;
     resume: boolean;
+    removeFingerprintOnSuccess: boolean;
+    endpoint: string;
+    headers: object;
+    chunkSize: number;
+    withCredentials: booleans;","small typo:
```suggestion
    withCredentials: boolean;
```",W
488,"@@ -2,6 +2,14 @@
 
 echo ""Preparing for end to end test: copying static HTML and CSS, building JS""
 rm -rf ./test/endtoend/dist && mkdir ./test/endtoend/dist
-cp ./dist/uppy.min.css ./test/endtoend/dist 
-cp ./test/endtoend/src/index.html ./test/endtoend/dist 
+rm -rf ./test/endtoend/node_modules
+
+UPPY_VERSION=$(cat package.json | grep version | head -1 | awk -F= ""{ print $2 }"" | sed 's/[version:,\"",]//g' | tr -d '[[:space:]]')","How about `node -e 'console.log(require(""./package.json"").version)'` ?",W
489,"@@ -2,6 +2,14 @@
 
 echo ""Preparing for end to end test: copying static HTML and CSS, building JS""
 rm -rf ./test/endtoend/dist && mkdir ./test/endtoend/dist
-cp ./dist/uppy.min.css ./test/endtoend/dist 
-cp ./test/endtoend/src/index.html ./test/endtoend/dist 
+rm -rf ./test/endtoend/node_modules
+
+UPPY_VERSION=$(cat package.json | grep version | head -1 | awk -F= ""{ print $2 }"" | sed 's/[version:,\"",]//g' | tr -d '[[:space:]]')
+# archive the uppy package
+npm pack","I think we should also run the `npm run prepublishOnly` script first here, so that the package is exactly the same as the published one (I thought this would happen automatically inside `npm pack` but it doesn't seem to)",W
490,"@@ -2,6 +2,15 @@ const yo = require('yo-yo')
 // const nanoraf = require('nanoraf')
 
 /**
+ * Check if an object is a DOM element. Duck-typing based on `nodeType`.
+ *
+ * @param {*} obj
+ */
+function isDOMElement (obj) {
+  return obj && typeof obj === 'object' && obj.nodeType === Node.ELEMENT_NODE
+}
+
+/**
  * Boilerplate that all Plugins share - and should not be used","Maybe we should move this function to a shared `helpers` folder. Like we currently have `Utils`, but I’d like to refactor that and have them as individual modules there.",I
491,"@@ -2,7 +2,7 @@
 <link rel=""stylesheet"" href=""/uppy/uppy.min.css"">
 
 <div class=""UppyForm"">
-  <form action=""//api2.transloadit.com"">
+  <form action=""https://upload-endpoint.uppy.io/upload"">","This doesn't work if we disable Uppy js btw, but it will work if we add `<form action=""https://upload-endpoint.uppy.io/upload"" method=""POST"" enctype=""multipart/form-data"">`.

However, I think that in 2019 having the form tag in an example may be more confusing than helpful ??? (I did get confused there for a second about whether we need the form tag).
What do you think about removing `<form/>`, and just leaving `<div class=""UppyInput""/>`?",I
492,"@@ -2,7 +2,7 @@ const Plugin = require('../../core/Plugin')
 const Translator = require('../../core/Translator')
 const { toArray } = require('../../core/Utils')
 const dragDrop = require('drag-drop')
-const html = require('yo-yo')
+const preact = require('preact') // eslint-disable-line",can we tell eslint about what JSX is being compiled down to somehow? `/** @jsx preact.h */` at the top of the file would work but maybe there's an eslint rule option that we can use?,W
493,"@@ -2,7 +2,7 @@ const moment = require('moment')
 
 const MIMETYPES = {
   MP4: 'video/mp4',
-  M4A: 'audio/mp4',
+  M4A: 'audio/m4a',","I think this should be audio/mp4. audio/m4a is not officially recognised by IANA as far as i can tell https://www.iana.org/assignments/media-types/media-types.xhtml

the linked RFC https://tools.ietf.org/html/rfc4337#section-3.2 mentions audio/mp4 for audio-only MP4 files, which `.m4a` files are",/
494,"@@ -2,7 +2,7 @@ module.exports = function getSocketHost (url) {
   // get the host domain
   var regex = /^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?(?:www\.)?([^\n]+)/
   var host = regex.exec(url)[1]
-  var socketProtocol = location.protocol === 'https:' ? 'wss' : 'ws'
+  var socketProtocol = /^http:\/\//.test(url) ? 'ws' : 'wss'",Could use a `/<regex>/i` maybe?,W
495,"@@ -2,7 +2,8 @@ const request = require('request')
 // @ts-ignore
 const purest = require('purest')({ request })
 const logger = require('../logger')
-
+const DRIVE_FILE_FIELDS = 'kind,id,name,mimeType,ownedByMe,permissions(role,emailAddress),size,modifiedTime,iconLink,thumbnailLink'",why do we need to explicitly declare these fields?,W
496,"@@ -20,12 +20,11 @@ module.exports = (props) => {
       <div class=""uppy-Provider-breadcrumbsIcon"">{props.breadcrumbsIcon}</div>
       {
         props.directories.map((directory, i) => (
-          <Breadcrumb",@goto-bus-stop Breadcrumb seemed to be broken from [this change](https://github.com/transloadit/uppy/commit/733de659da17ee77afba9882633477fb7cd778dd#diff-3a8b11d5620b3d342e81e97925b37113L18). Is there a different way you would have fixed this?,"<div class=""uppy-Provider-breadcrumbs"">"
497,"@@ -20,12 +20,16 @@ mv ./kubectl ${HOME}/.local/bin/
 docker build -t transloadit/companion:latest -t transloadit/companion:$TRAVIS_COMMIT -f packages/@uppy/companion/Dockerfile packages/@uppy/companion;
 docker login -u=""$DOCKER_USERNAME"" -p=""$DOCKER_PASSWORD"";
 
-if [[ -z ""${TRAVIS_TAG}"" ]]; then
-  docker push transloadit/companion:$TRAVIS_COMMIT;
-else
+# Push the commit tagged docker image.
+docker push transloadit/companion:$TRAVIS_COMMIT;","This looks great, Thank you. ",Why did you remove the `if`?
498,"@@ -20,12 +20,16 @@ mv ./kubectl ${HOME}/.local/bin/
 docker build -t transloadit/companion:latest -t transloadit/companion:$TRAVIS_COMMIT -f packages/@uppy/companion/Dockerfile packages/@uppy/companion;
 docker login -u=""$DOCKER_USERNAME"" -p=""$DOCKER_PASSWORD"";
 
-if [[ -z ""${TRAVIS_TAG}"" ]]; then
-  docker push transloadit/companion:$TRAVIS_COMMIT;
-else
+# Push the commit tagged docker image.
+docker push transloadit/companion:$TRAVIS_COMMIT;
+
+# If this build includes a git tag, tag the image with the git version tag and push the version.
+if [[ ! -z ""${TRAVIS_TAG}"" ]]; then
+  docker tag transloadit/companion:$TRAVIS_COMMIT transloadit/companion:$TRAVIS_TAG;","This one looks great, thanks. ","I think this should be `if [[ -z ""${TRA"
499,"@@ -20,12 +20,16 @@ mv ./kubectl ${HOME}/.local/bin/
 docker build -t transloadit/companion:latest -t transloadit/companion:$TRAVIS_COMMIT -f packages/@uppy/companion/Dockerfile packages/@uppy/companion;
 docker login -u=""$DOCKER_USERNAME"" -p=""$DOCKER_PASSWORD"";
 
-if [[ -z ""${TRAVIS_TAG}"" ]]; then
-  docker push transloadit/companion:$TRAVIS_COMMIT;
-else
+# Push the commit tagged docker image.
+docker push transloadit/companion:$TRAVIS_COMMIT;
+
+# If this build includes a git tag, tag the image with the git version tag and push the version.
+if [[ ! -z ""${TRAVIS_TAG}"" ]]; then
+  docker tag transloadit/companion:$TRAVIS_COMMIT transloadit/companion:$TRAVIS_TAG;
   docker push transloadit/companion:$TRAVIS_TAG;
 fi
 
+# Lastly, update the pointer to latest.",Thank you for the extra comment. ,I'm not sure if this is the right way t
500,"@@ -20,17 +20,18 @@ for t in $tests; do
   cp ""${__root}/test/endtoend/$t/index.html"" ""${__root}/test/endtoend/$t/dist""
   browserify ""${__root}/test/endtoend/$t/main.js"" \
     -o ""${__root}/test/endtoend/$t/dist/bundle.js"" \
+    -t envify \
     -t babelify
 done
 
 # Speeecial tests that need custom builds.
 pushd ""${__root}/test/endtoend/create-react-app""
   npm install
-  npm run build
+  REACT_APP_ON_TRAVIS=""${TRAVIS:-}"" npm run build
 popd
 pushd ""${__root}/test/endtoend/typescript""
   mkdir -p dist
   cp ""${__root}/packages/uppy/dist/uppy.min.css"" dist/
   cp index.html dist/
-  browserify main.ts -p [ tsify --target ES3 ] -o dist/bundle.js
+  browserify main.ts -t envify -p [ tsify --target ES3 ] -o dist/bundle.js",`envify` is needed for that `REACT_APP_ON_TRAVIS` above?,Why is this needed?
501,"@@ -20,6 +20,14 @@ uppy.use(Tus, {
 
 The Tus plugin supports all of [tus-js-client][]’s options. Additionally:
 
+### `resume: true`
+
+A boolean indicating whether tus should attempt to resume the upload if the upload has been started in the past. This includes storing the file’s upload url. Use false to force an entire reupload.
+
+Note that this opition is about resuming when you start an upload again with the same file, or when using [Golden Retriever](/docs/golden-retriever/), which will attempt to restore upload state to what it was before page refresh / browser crash. Even if you set `resume: false` when using Tus uploader, users will still be able to pause/resume an ongoing upload.",opition → option,I don't think we need to mention this i
502,"@@ -20,6 +20,7 @@ export { default as StatusBar } from '@uppy/status-bar'
 
 // Acquirers
 export { default as Dropbox } from '@uppy/dropbox'
+export { default as Box } from '@uppy/box'","excluding box from global module for now as it will initially be released as beta
```suggestion
```",export { default as Box } from '@uppy/b
503,"@@ -20,8 +20,8 @@ exports.config = Object.assign(base.config, {
     { browserName: 'MicrosoftEdge', version: '14', platform: 'Windows 10' },
     { browserName: 'MicrosoftEdge', version: '17', platform: 'Windows 10' },
     // { browserName: 'safari', version: '11.0', platform: 'macOS 10.12' },
-    { browserName: 'safari', version: '10.0', platformName: 'iOS', platformVersion: '10.0', deviceOrientation: 'portrait', deviceName: 'iPhone 6 Simulator', appiumVersion: '1.7.1' },
-    { browserName: 'chrome', platformName: 'Android', platformVersion: '6.0', deviceOrientation: 'portrait', deviceName: 'Android Emulator', appiumVersion: '1.7.1' }
+    { browserName: 'safari', version: '10.0', platformName: 'iOS', platformVersion: '12.2', deviceOrientation: 'portrait', deviceName: 'iPhone 6 Simulator', recordScreenshots: false },
+    { browserName: 'chrome', platformName: 'Android', platformVersion: '6.0', deviceOrientation: 'portrait', deviceName: 'Android Emulator' }","So iOS version `12.2`, but Safari still `10.0`? 🤔 

This is the config I get from the [Platform Configurator](https://wiki.saucelabs.com/display/DOCS/Platform+Configurator#/):

```
caps['browserName'] = 'Safari';
caps['deviceName'] = 'iPhone 6 Simulator';
caps['deviceOrientation'] = 'portrait';
caps['platformVersion'] = '12.2';
caps['platformName'] = 'iOS';
```

Also, why `recordScreenshots: false`, cause we have video?",I don't think we want to record screens
504,"@@ -201,17 +201,19 @@
     ""watchify"": ""3.11.1"",
     ""webdriverio"": ""5.18.6"",
     ""webpack"": ""4.44.1"",
-    ""whatwg-fetch"": ""3.0.0""
+    ""whatwg-fetch"": ""3.0.0"",
+    ""vue-template-compiler"": ""^2.6.11""
   },
   ""scripts"": {
     ""bootstrap"": ""lerna bootstrap"",
     ""build:bundle"": ""node ./bin/build-bundle.js"",
     ""build:clean"": ""rm -rf packages/*/lib packages/@uppy/*/lib packages/*/dist packages/@uppy/*/dist"",
     ""build:companion"": ""cd ./packages/@uppy/companion && npm run build"",
     ""build:css"": ""node ./bin/build-css.js"",
-    ""build:js"": ""npm-run-all build:lib build:companion build:locale-pack build:bundle"",
+    ""build:js"": ""npm-run-all build:lib build:companion build:vue build:locale-pack build:bundle"",
     ""build:lib"": ""node ./bin/build-lib.js"",
     ""build:locale-pack"": ""node ./bin/locale-packs.js build"",
+    ""build:vue"": ""cd ./packages/@uppy/vue && npm run build"",",rename to test? or do we actually build something here?,This should be `^2.6.11`
505,"@@ -201,6 +201,20 @@ module.exports = class Dashboard extends Plugin {
     }
   }
 
+  scrollBehaviour (toggle) {
+    if (!this.opts.disablePageScrollWhenModalOpen) return
+    const body = document.querySelector('body')",could be just `document.body` i think?,This should be `const body = document.b
506,"@@ -201,6 +201,20 @@ module.exports = class Dashboard extends Plugin {
     }
   }
 
+  scrollBehaviour (toggle) {
+    if (!this.opts.disablePageScrollWhenModalOpen) return
+    const body = document.querySelector('body')
+    switch (toggle) {
+      case 'enable':
+        Object.assign(body.style, { overflow: 'initial', height: 'initial' })","not sure about the implications of doing this…eg if i have set `overflow: hidden` on the body for some reason in my own css, this might change it once the modal closes. I feel like adding and removing a CSS class with `!important` rules from the body might be more reliable?",Why do we need this?
507,"@@ -201,6 +201,20 @@ module.exports = class Dashboard extends Plugin {
     }
   }
 
+  scrollBehaviour (toggle) {
+    if (!this.opts.disablePageScrollWhenModalOpen) return
+    const body = document.querySelector('body')
+    switch (toggle) {
+      case 'enable':
+        Object.assign(body.style, { overflow: 'initial', height: 'initial' })
+        break
+      case 'disable':
+        Object.assign(body.style, { overflow: 'hidden', height: '100vh' })
+        break","this looks a bit odd to me, could we just have two separate methods, eg `enableScrollBehavior` and `disableScrollBehavior`, instead?",Why is this needed?
508,"@@ -202,6 +203,8 @@ module.exports = class XHRUpload extends Plugin {
       const xhr = new XMLHttpRequest()
       const id = cuid()
 
+      xhr.withCredentials = this.opts.withCredentials
+      ",There is some trailing whitespace here (Do `npm run lint` to check),
509,"@@ -202,6 +271,13 @@ class MultipartUploader {
 
   _uploadPartBytes (index, url, headers) {
     const body = this.chunks[index]
+    const { signal } = this.abortController
+
+    let defer
+    const promise = new Promise((resolve, reject) => {
+      defer = { resolve, reject }","so one downside I see to this approach is that if any unhandled error occurs anywhere in this function, it will not be caught by the Promise, and it will remain unhandled, and possibly unseen. But if we instead house the entire function inside the body of the promise:

```js
return new Promise((resolve, reject) => {
  // entire function body here
  ...
})
```
It would always catch any unforeseen errors that may be thrown.
",Why do we need a promise here?
510,"@@ -204,7 +203,7 @@ See [env.example.sh](https://github.com/transloadit/uppy-server/blob/master/env.
   - protocol - `http | https`
   - host(required) - your server host (e.g localhost:3020, mydomain.com)
   - path - the server path to where the uppy app is sitting (e.g if uppy server is at `mydomain.com/uppy`, then the path would be `/uppy`).
-  - oauthDoamin - if you have multiple instances of uppy server with different(and maybe dynamic) subdomains, you can set a master domain(e.g `sub1.mydomain.com`) to handle your oauth authentication for you. This would then redirect to the slave subdomain with the required credentials on completion.
+  - oauthDoamin - if you have multiple instances of uppy server with different (and maybe dynamic) subdomains, you can set a master domain (e.g `sub1.mydomain.com`) to handle your oauth authentication for you. This would then redirect to the slave subdomain with the required credentials on completion.",there's also an `oauthDoamin` at the start of this line that should be `oauthDomain`,E501 line too long (116 > 115 character
511,"@@ -204,8 +206,11 @@ const ProgressBarProcessing = (props) => {
 const ProgressDetails = (props) => {
   return <div class=""uppy-StatusBar-statusSecondary"">
     { props.numUploads > 1 && props.i18n('filesUploadedOfTotal', { complete: props.complete, smart_count: props.numUploads }) + ' \u00B7 ' }
-    { props.i18n('dataUploadedOfTotal', { complete: props.totalUploadedSize, total: props.totalSize }) + ' \u00B7 ' }
-    { props.i18n('xTimeLeft', { time: props.totalETA }) }
+    { props.i18n('dataUploadedOfTotal', {
+      complete: prettyBytes(props.totalUploadedSize),
+      total: prettyBytes(props.totalSize)
+    }) + ' \u00B7 ' }
+    { props.i18n('xTimeLeft', { time: prettyETA(props.totalETA) }) }","> Do bytes and ETA formatting as late as possible

Why as late as possible?",I think this should be `prettyBytes(pro
512,"@@ -209,9 +211,15 @@ class Zoom extends Provider {
         modifiedDate: adapter.getDateFolderModified(end),
         size: null
       })
+
+      if (end.isSame(limit, 'month')) {","is this always the condition at which the loop will stop? If so, should we simply change the while loop to ` while (end.isAfter(limit, 'month')) {` or something similar instead?","This should be `if (end.isSame(limit, 'month'))`"
513,"@@ -209,9 +211,15 @@ class Zoom extends Provider {
         modifiedDate: adapter.getDateFolderModified(end),
         size: null
       })
+
+      if (end.isSame(limit, 'month')) {
+        break
+      }
+
       end = start.clone().subtract(1, 'days')
     }
-    data.nextPagePath = adapter.getDateNextPagePath(start)
+
+    data.nextPagePath = adapter.getDateNextPagePath(start.clone(), allResultsShown)","I think we can just do:

```js
data.nextPagePath = allResultsShown ? null : adapter.getDateNextPagePath(start.clone())
```

and leave `getDateNextPagePath` as it was before this PR",Why do we need to clone here?
514,"@@ -21,10 +21,15 @@ module.exports = function sendToken (req, res, next) {
   const state = (req.session.grant || {}).state
   if (state) {
     const origin = oAuthState.getFromState(state, 'origin', req.uppy.options.secret)
+    const clientVersion = oAuthState.getFromState(
+      state,
+      'clientVersion',
+      req.uppy.options.secret
+    )
     const allowedClients = req.uppy.options.clients
     // if no preset clients then allow any client
     if (!allowedClients || hasMatch(origin, allowedClients) || hasMatch(parseUrl(origin).host, allowedClients)) {
-      return res.send(htmlContent(uppyAuthToken, origin))
+      return res.send(clientVersion ? htmlContent(uppyAuthToken, origin) : oldHtmlContent(uppyAuthToken, origin))","This works but we should add a todo to the changelog to use https://www.npmjs.com/package/semver for these checks, especially if we're going to have more breaking changes.",I don't think we need to check for `clientVersio
515,"@@ -21,14 +16,12 @@ module.exports = function FileItem (props) {
   const isPaused = file.isPaused || false
   const error = file.error || false
 
-  const fileName = getFileNameAndExtension(file.meta.name).name
-  const truncatedFileName = props.isWide ? truncateString(fileName, 30) : fileName
-
   const showRemoveButton = props.individualCancellation
     ? !isUploaded
     : !uploadInProgress && !isUploaded
 
   const dashboardItemClass = classNames(
+    'uppy-u-reset',","Same here, is it beneficial to add it to the container?",I'm not sure if this is the right place to put t
516,"@@ -21,19 +21,16 @@ function buildUppyBundle (minify) {
   var bundleFile = minify ? 'uppy.min.js' : 'uppy.js'
 
   var b = browserify(src, { debug: true, standalone: 'Uppy' })
-  if (minify) {
-    b.plugin('minifyify', {
-      map: bundleFile + '.map',
-      output: path.join(distPath, bundleFile + '.map')
-    })
-  }
-  // b.transform(yoyoify)
+  b.plugin(commonShakeify)
+  b.plugin(packFlat)
   b.transform(babelify)
   b.on('error', handleErr)
 
   return new Promise(function (resolve, reject) {
     if (minify) {
       b.bundle()
+      .pipe(uglify())","Minifying the final result instead of the individual modules … common-shakeify only comments things, so minification needs to happen after common-shakeify.",Why do we need to do this?
517,"@@ -21,6 +16,7 @@
     ""cors"": ""^2.8.4"",
     ""formidable"": ""^1.2.1"",
     ""npm-run-all"": ""^4.1.3"",
-    ""rimraf"": ""^2.6.2""
+    ""rimraf"": ""^2.6.2"",
+    ""uppy"": ""^0.30.4""
   }","I wonder if we need to add each individual uppy module instead of a bundle thing. So like `@uppy/core`, `@uppy/xhr-upload` etc.","This should be `^0.30.4`, right?"
518,"@@ -21,6 +21,17 @@ import ProgressBar from '@uppy/react/lib/ProgressBar'
 import { ProgressBar } from '@uppy/react'
 ```
 
+## CSS
+
+The `ProgressBar` plugin requires the following CSS for styling:
+
+```js
+import '@uppy/core/dist/style.css'
+import '@uppy/progress-bar/dist/style.css'
+```
+
+Import general Core styles from `@uppy/core/dist/style.css` first, then add the Informer styles from `@uppy/progress-bar/dist/style.css`. A minified version is also available as `style.min.css` at the same path. The way to do import depends on your build system.","```suggestion
Import general Core styles from `@uppy/core/dist/style.css` first, then add the Progress Bar styles from `@uppy/progress-bar/dist/style.css`. A minified version is also available as `style.min.css` at the same path. The way to do import depends on your build system.
```",I don't think this is the right way to do this.
519,"@@ -21,6 +21,17 @@ import StatusBar from '@uppy/react/lib/StatusBar'
 import { StatusBar } from '@uppy/react'
 ```
 
+## CSS
+
+The `StatusBar` component requires the following CSS for styling:
+
+```js
+import '@uppy/core/dist/style.css'
+import '@uppy/status-bar/dist/style.css'
+```
+
+Import general Core styles from `@uppy/core/dist/style.css` first, then add the Informer styles from `@uppy/status-bar/dist/style.css`. A minified version is also available as `style.min.css` at the same path. The way to do import depends on your build system.","```suggestion
Import general Core styles from `@uppy/core/dist/style.css` first, then add the Status Bar styles from `@uppy/status-bar/dist/style.css`. A minified version is also available as `style.min.css` at the same path. The way to do import depends on your build system.
```",I don't think this is the right way to do this.
520,"@@ -21,6 +21,7 @@ const XHRUpload = require('@uppy/xhr-upload/src')
 const Transloadit = require('@uppy/transloadit/src')
 const Form = require('@uppy/form/src')
 const ImageEditor = require('@uppy/image-editor/src')
+const DomTarget = require('@uppy/dom-target/src')","```suggestion
const DropTarget = require('@uppy/drop-target/src')
```
(and below)",Why do we need this?
521,"@@ -210,30 +212,43 @@ class Zoom extends Provider {
         modifiedDate: adapter.getDateFolderModified(end),
         size: null
       })
-      end = start.clone().subtract(1, 'days')
-      // if the limit is mid-month, keep that exact date
-      start = (end.isSame(limit, 'month') && limit.date() !== 1) ? limit.clone() : end.clone().date(1)
+      end = start.clone().subtract(1, 'days').endOf('day')
+      start = (end.isSame(limit, 'month') && limit.date() !== 1) ? limit.clone() : end.clone().date(1).startOf('day')
     }
-    data.nextPagePath = allResultsShown ? null : adapter.getDateNextPagePath(end.clone())
+    data.nextPagePath = allResultsShown ? null : adapter.getDateNextPagePath(end)
     return data
   }
 
-  _adaptData (userResponse, results) {
+  _adaptData (userResponse, results, query) {
     if (!results) {
       return { items: [] }
     }
 
+    // convert start limit from local time to UTC
+    const utcFrom = moment.tz(query.from, userResponse.timezone || 'UTC').startOf('day').tz('UTC')
+    const utcTo = moment.tz(query.to, userResponse.timezone || 'UTC').endOf('day').tz('UTC')
+
     const data = {
       nextPagePath: adapter.getNextPagePath(results),
       items: [],
       username: adapter.getUserEmail(userResponse)
     }
-    const items = results.meetings || results.recording_files.filter(file => file.file_type !== 'TIMELINE')
+
+    let items = []
+    if (results.meetings) {
+      items = results.meetings
+        .map(item => { return { ...item, utcStart: moment.utc(item.start_time) } })
+        .filter(item => moment.utc(item.start_time).isAfter(utcFrom) && moment.utc(item.start_time).isBefore(utcTo))","This filters out extra results, should account for cases below:

case 1: user in PST (UTC-07:00) --> wants 08-01 to 08-31 (PST), API call for 08-01 to 09-01 (UST), filter out items starting after 09-01 06:59 UST (08-31 23:59 PST)
case 2: user in KST (UTC+09:00) --> wants 08-01 to 08-31 (KST), API call for 07-31 to 08-31 (UST), filter out items starting before 07-31 15:00 UST (08-01 00:00 JST)",I'm not sure if this is the best way to do this.
522,"@@ -210,9 +210,12 @@ module.exports = class DashboardUI extends Plugin {
     document.body.classList.add('is-UppyDashboard-open')
     document.body.style.top = `-${this.savedDocumentScrollPosition}px`
 
+    this.updateDashboardElWidth()
+    this.setFocusToFirstNode()
+
     // timeout is needed because yo-yo/morphdom/nanoraf; not needed without nanoraf",lets get rid of this outdated comment! might be confusing otherwise,Why do we need this?
523,"@@ -211,10 +211,9 @@ module.exports = class Dashboard extends Plugin {
     // save active element, so we can restore focus when modal is closed
     this.savedActiveElement = document.activeElement
 
-    // add class to body that sets position fixed, move everything back
-    // to scroll position
-    document.body.classList.add('uppy-Dashboard-isOpen')
-    document.body.style.top = `-${this.savedScrollPosition}px`
+    if (!this.opts.disablePageScrollWhenModalOpen) {
+      document.body.classList.remove('uppy-Dashboard-isOpen')",I think this should be `.add`? :),I don't think we should remove the class if it's
524,"@@ -212,25 +212,31 @@ const getOptionsMiddleware = (options) => {
   if (options.providerOptions.s3) {
     const S3 = require('aws-sdk/clients/s3')
     const AWS = require('aws-sdk')
-    const config = options.providerOptions.s3
+    const s3ProviderOptions = options.providerOptions.s3
+
+    if (s3ProviderOptions.accessKeyId || s3ProviderOptions.secretAccessKey) {
+      throw new Error('Found `providerOptions.s3.accessKeyId` or `providerOptions.s3.secretAccessKey` configuration, but Companion requires `key` and `secret` option names instead. Please use the `key` property instead of `accessKeyId` and the `secret` property instead of `secretAccessKey`.')
+    }
+
+    const s3ClientOptions = Object.assign({
+      signatureVersion: 'v4',
+      // backwards compat
+      useAccelerateEndpoint: s3ProviderOptions.useAccelerateEndpoint
+    }, s3ProviderOptions.awsClientOptions)
+
     // Use credentials to allow assumed roles to pass STS sessions in.
     // If the user doesn't specify key and secret, the default credentials (process-env)
     // will be used by S3 in calls below.
-    let credentials
-    if (config.key && config.secret) {
-      credentials = new AWS.Credentials(config.key, config.secret, config.sessionToken)
+    if (s3ProviderOptions.key && s3ProviderOptions.secret && !s3ClientOptions.credentials) {
+      s3ClientOptions.credentials = new AWS.Credentials(
+        s3ProviderOptions.key,
+        s3ProviderOptions.secret,
+        s3ProviderOptions.sessionToken)
     }
-    s3Client = new S3({
-      region: config.region,
-      endpoint: config.endpoint,
-      credentials,
-      signatureVersion: 'v4',
-      useAccelerateEndpoint: config.useAccelerateEndpoint
-    })
+    s3Client = new S3(s3ClientOptions)",what happens if a user sets `accessKeyId` and `secretAccessKey` as part of `s3ClientOptions`? Will it override `credentials` created with `s3ProviderOptions.key` and `s3ProviderOptions.secret`? Is this a desired behaviour?,I think this should be `s3ProviderOptions.awsCli
525,"@@ -212,25 +212,33 @@ const getOptionsMiddleware = (options) => {
   if (options.providerOptions.s3) {
     const S3 = require('aws-sdk/clients/s3')
     const AWS = require('aws-sdk')
-    const config = options.providerOptions.s3
+    const s3ProviderOptions = options.providerOptions.s3
+    const s3Options = Object.assign({",should we rather introduce a field that covers these options in `providerOptions.s3` itself? So maybe `providerOptions.s3.awsClientOptions` (or something better)?,Why do we need this change?
526,"@@ -212,25 +212,33 @@ const getOptionsMiddleware = (options) => {
   if (options.providerOptions.s3) {
     const S3 = require('aws-sdk/clients/s3')
     const AWS = require('aws-sdk')
-    const config = options.providerOptions.s3
+    const s3ProviderOptions = options.providerOptions.s3
+    const s3Options = Object.assign({
+      signatureVersion: 'v4'
+    }, s3ProviderOptions)
+    // delete options intended for Companion, not S3:
+    delete s3Options.key
+    delete s3Options.secret
+    delete s3Options.conditions
+    delete s3Options.getKey
+
+    if (s3ProviderOptions.accessKeyId || s3ProviderOptions.secretAccessKey) {","should we support both instead? 🤔 So when `accessKeyId` and `secretAccessKey` are supplied, we set the values to `key` and `secret`?",Why do we need to delete these?
527,"@@ -213,9 +213,10 @@ module.exports = class GoldenRetriever extends Plugin {
       this.IndexedDBStore.delete(fileID)
     })
 
-    this.core.on('core:success', (fileIDs) => {
+    this.core.on('core:complete', ({ successful }) => {
+      const fileIDs = successful.map((file) => file.id)
       this.deleteBlobs(fileIDs).then(() => {
-        this.core.log(`[GoldenRetriever] removed ${fileIDs.length} files that finished uploading`)
+        this.core.log(`RestoreFiles: removed ${successful.length} files that finished uploading`)","Unsure why this is `RestoreFiles` now vs `GoldenRetriever`, thought we deprecated the first?",`[GoldenRetriever]` -> `[RestoreFiles]`
528,"@@ -215,7 +215,7 @@ class DropBox extends Provider {
   _error (err, resp) {
     if (resp) {
       const fallbackMessage = `request to ${this.authProvider} returned ${resp.statusCode}`
-      const errMsg = resp.body.error_summary ? resp.body.error_summary : fallbackMessage
+      const errMsg = (resp.body || {}).error_summary ? resp.body.error_summary : fallbackMessage",this change can be ignored. I accidentally checked out of [this branch](https://github.com/transloadit/uppy/pull/2264/files),`resp.body || {}`
529,"@@ -218,7 +218,7 @@ class Uppy {
     this.uploaders.push(fn)
   }
 
-  removeUploader (fn) {
+  _removeUploader (fn) {","`removeUploader` is used in upload plugins, so it should be public (similar to `removePreProcessor`)",`<msg>`_removeUpl
530,"@@ -218,7 +233,7 @@ const getOptionsMiddleware = (options) => {
       options,
       s3Client,
       authToken: req.header('uppy-auth-token') || req.query.uppyAuthToken,
-      clientVersion: req.header('uppy-versions') || req.query.uppyVersions,
+      clientVersion: req.header('uppy-versions') || decodeURIComponent(req.query.uppyVersions) || '1.0.0',","This still resolves to `undefined` instead of `1.0.0` in my tests, because, I think:

`typeof req.header('uppy-versions')` returns `undefined`
`typeof decodeURIComponent(req.query.uppyVersions)` returns `string` 😱
`console.log(decodeURIComponent(req.query.uppyVersions))` returns `undefined`",I think this shou
531,"@@ -219,12 +218,18 @@ class Uploader {
     if (chunk === null) {
       this.writeStream.on('finish', () => {
         this.streamsEnded = true
-        if (this.options.endpoint && protocol === PROTOCOLS.multipart) {
-          this.uploadMultipart()
-        }
-
-        if (protocol === PROTOCOLS.tus && !this.tus) {
-          return this.uploadTus()
+        switch (protocol) {
+          case PROTOCOLS.multipart:
+            if (this.options.endpoint) {
+              this.uploadMultipart()
+            }
+            break
+          case PROTOCOLS.s3Multipart:
+            this.uploadS3Multipart()
+            break
+          case PROTOCOLS.tus:
+            this.uploadTus()",should we be extra cautious and keep the `if (!this.tus) {...}` conditional? Same for `if (!this. s3Upload) {...}` That way the class will not have to rely on trusting the downloader to not mess things up by calling `handleChunk(null)` twice.,Why do we need to
532,"@@ -22,41 +16,75 @@ export default class ProgressDrawer extends Plugin {
 
     // merge default options with the ones set by user
     this.opts = Object.assign({}, defaultOptions, opts)
+
+    this.el = this.render(this.core.state)
   }
 
-  render (state) {
-    return hx`<div>
-      ${state.bla}
-    </div>`
+  update (state) {
+    const newEl = this.render(state)
+    yo.update(this.el, newEl)
   }
 
-  // all actions should be in core, I guess
-  events () {
-    this.core.emitter.on('progress', function () {
-      this.updateState({ progress: loop.state.clickedTimes + 1 })
-    })
+  render (state) {
+    const selectedFiles = state.selectedFiles
+    const selectedFileCount = Object.keys(selectedFiles).length
+    const isSomethingSelected = selectedFileCount > 0
+    const autoProceed = this.core.opts.autoProceed","You can destructure here with `const { autoProceed } = this.core.opts` to make this a little less long.  Same with `selectedFiles`, if you'd like.
",Why do we need to
533,"@@ -22,6 +22,20 @@ describe('Test Provider options', () => {
     expect(grantConfig.instagram.secret).toBe('instagram_secret')
   })
 
+  test('adds provider options for secret files', () => {
+    process.env.COMPANION_DROPBOX_SECRET_FILE = process.env.PWD + '/test/resources/dropbox_secret_file'
+    process.env.COMPANION_GOOGLE_SECRET_FILE = process.env.PWD + '/test/resources/google_secret_file'
+    process.env.COMPANION_INSTAGRAM_SECRET_FILE = process.env.PWD + '/test/resources/instagram_secret_file'",maybe we should test that it truly overrides by setting values for `COMPANION_INSTAGRAM_SECRET` (and others) as well?,I think this shou
534,"@@ -22,6 +22,7 @@ exports.StatusBar = require('@uppy/status-bar')
 
 // Acquirers
 exports.Dropbox = require('@uppy/dropbox')
+exports.Box = require('@uppy/box')","excluding box from global module for now as it will initially be released as beta

```suggestion
```",exports.Box = req
535,"@@ -220,7 +221,7 @@ class Uppy {
     this.setState({meta: newMeta})
   }
 
-  updateMeta (data, fileID) {
+  setFileMeta (fileID, data) {","should we add an error like this for one release?

```js
updateMeta (data, fileID) {
  throw new Error('The Uppy#updateMeta(data, fileID) method has been renamed to setFileMeta(fileID, data)')
}
```",`setFileMeta` -> 
536,"@@ -22034,7 +22035,6 @@
       ""version"": ""1.18.1"",
       ""resolved"": ""https://registry.npmjs.org/http-proxy/-/http-proxy-1.18.1.tgz"",
       ""integrity"": ""sha512-7mz/721AbnJwIVbnaSv1Cz3Am0ZLT/UBwkC92VlxhXv/k/BBQfM2fXElQNC27BVGr0uwUpplYPQM9LnaBMR5NQ=="",
-      ""dev"": true,","I'm not sure why this is no longer ""dev"": true, as this wasn't changed. Please let me know if I should omit this change (likewise below)",Why is this remov
537,"@@ -225,41 +170,6 @@ const interceptGrantErrorResponse = interceptor((req, res) => {
  * @param {object} options
  */
 const getOptionsMiddleware = (options) => {
-  let s3Client = null
-  if (options.providerOptions.s3) {
-    const S3 = require('aws-sdk/clients/s3')
-    const AWS = require('aws-sdk')
-    const s3ProviderOptions = options.providerOptions.s3
-
-    if (s3ProviderOptions.accessKeyId || s3ProviderOptions.secretAccessKey) {
-      throw new Error('Found `providerOptions.s3.accessKeyId` or `providerOptions.s3.secretAccessKey` configuration, but Companion requires `key` and `secret` option names instead. Please use the `key` property instead of `accessKeyId` and the `secret` property instead of `secretAccessKey`.')
-    }
-
-    const rawClientOptions = s3ProviderOptions.awsClientOptions
-    if (rawClientOptions && (rawClientOptions.accessKeyId || rawClientOptions.secretAccessKey)) {
-      throw new Error('Found unsupported `providerOptions.s3.awsClientOptions.accessKeyId` or `providerOptions.s3.awsClientOptions.secretAccessKey` configuration. Please use the `providerOptions.s3.key` and `providerOptions.s3.secret` options instead.')
-    }
-
-    const s3ClientOptions = Object.assign({
-      signatureVersion: 'v4',
-      endpoint: s3ProviderOptions.endpoint,
-      region: s3ProviderOptions.region,
-      // backwards compat
-      useAccelerateEndpoint: s3ProviderOptions.useAccelerateEndpoint
-    }, rawClientOptions)
-
-    // Use credentials to allow assumed roles to pass STS sessions in.
-    // If the user doesn't specify key and secret, the default credentials (process-env)
-    // will be used by S3 in calls below.
-    if (s3ProviderOptions.key && s3ProviderOptions.secret && !s3ClientOptions.credentials) {
-      s3ClientOptions.credentials = new AWS.Credentials(
-        s3ProviderOptions.key,
-        s3ProviderOptions.secret,
-        s3ProviderOptions.sessionToken)
-    }
-    s3Client = new S3(s3ClientOptions)
-  }
-",this was moved to a [separate file](https://github.com/transloadit/uppy/blob/c5e3d8171281d5fce60dc8e59f32a564b4ef4668/packages/%40uppy/companion/src/server/s3-client.js),Why is this being
538,"@@ -225,7 +226,7 @@ class Zoom extends Provider {
       items: [],
       username: adapter.getUserEmail(userResponse)
     }
-    const items = results.meetings || results.recording_files
+    const items = results.meetings || results.recording_files.filter(file => file.file_type !== 'TIMELINE')","timeline files are json files that are intended for programmatic use, so we should omit them from the user's view (the same way that zoom omits these files from the their recording files list in zoom.us/recordings).",const results = {
539,"@@ -229,21 +263,27 @@ class Uploader {
     emitter().emit(this.token, dataToEmit)
   }
 
-  uploadTus () {
+  /**
+   *
+   * @param {boolean} deferLength
+   */
+  uploadTus (deferLength) {
     const fname = path.basename(this.options.path)
     const ftype = this.options.metadata.type
     const metadata = Object.assign({ filename: fname, filetype: ftype }, this.options.metadata || {})
-    const file = fs.createReadStream(this.options.path)
+    const file = deferLength ? this.duplexStream : fs.createReadStream(this.options.path)
     const uploader = this
 
     // @ts-ignore
     this.tus = new tus.Upload(file, {
       endpoint: this.options.endpoint,
       uploadUrl: this.options.uploadUrl,
+      // @ts-ignore
+      uploadLengthDeferred: deferLength,
       resume: true,
-      uploadSize: this.options.size || fs.statSync(this.options.path).size,
+      uploadSize: deferLength ? null : (this.options.size || fs.statSync(this.options.path).size),",You might want to avoid using statSync on the server side :),I don't think thi
540,"@@ -23,12 +25,15 @@ module.exports = class RequestClient {
   get defaultHeaders () {
     return {
       'Accept': 'application/json',
-      'Content-Type': 'application/json'
+      'Content-Type': 'application/json',
+      'Uppy-Versions': '@uppy/companion-client=1.0.3'","We’ve now added `Plugin.VERSION` property available on all plugins, including `RequestClient`, so we should send that instead of the hardcoded value.",This should be `@
541,"@@ -23,18 +23,27 @@ const getFingerprint = require('./getFingerprint')
  */
 const tusDefaultOptions = {
   endpoint: '',
-  resume: true,
+","Pulled in the latest default options. Two notable changes:
- the resume option has been removed (see comments below)
- the retryDelays option is enabled by default",Why do we need th
542,"@@ -23,6 +23,40 @@ uppy.use(FileInput, {
 
 The `@uppy/xhr-upload` example uses `@uppy/file-input` with the [`pretty`](#pretty-true) option enabled.
 
+## Custom file input","In the S3 plugins, we have additional sections below the `Options` one:
![image](https://user-images.githubusercontent.com/1006268/62628981-9c178f00-b92c-11e9-8fa8-bf5d81f62193.png)
for consistency, it might be best to move this to the end as well",
543,"@@ -23,6 +23,7 @@ module.exports = class Form extends Plugin {
       resultName: 'uppyResult',
       getMetaFromForm: true,
       addResultToForm: true,
+      replaceResultInFormWithNew: true,",":bike: :derelict_house: , but  maybe the default option should be `multipleResults: false` or `combineMultipleResults: false`? i feel like `replaceResultInFormWithNew` is very verbose but also doesn't immediately clarify what it's for.",I think this shou
544,"@@ -23,7 +23,7 @@ const renderInnerPanel = (props) => {
 }
 
 const poweredByUppy = (props) => {
-  return <a href=""https://uppy.io"" rel=""noreferrer noopener"" target=""_blank"" class=""uppy-Dashboard-poweredBy"">Powered by <svg aria-hidden=""true"" class=""UppyIcon uppy-Dashboard-poweredByIcon"" width=""11"" height=""11"" viewBox=""0 0 11 11"" xmlns=""http://www.w3.org/2000/svg"">
+  return <a tabindex=""-1"" href=""https://uppy.io"" rel=""noreferrer noopener"" target=""_blank"" class=""uppy-Dashboard-poweredBy"">Powered by <svg aria-hidden=""true"" class=""UppyIcon uppy-Dashboard-poweredByIcon"" width=""11"" height=""11"" viewBox=""0 0 11 11"" xmlns=""http://www.w3.org/2000/svg"">","Tiniest nit but this can be `tabindex={-1}`, `width={11}`, `height={11}`","tabindex=""-1"" href=""https://uppy.io"" rel=""noreferrer noopener"">"
545,"@@ -23,9 +23,9 @@ function isReactNative () {
 // For React Native and Cordova, we let tus-js-client’s default
 // fingerprint handling take charge.
 module.exports = function getFingerprint (uppyFileObj) {
-  return function (file, options, callback) {
+  return function (file, options) {",The fingerprint methods are now not callback-based but use Promises instead.,Why did you remove the callback?
546,"@@ -230,32 +230,23 @@ module.exports = class XHRUpload extends Plugin {
           const body = opts.getResponseData(xhr.responseText, xhr)
           const uploadURL = body[opts.responseUrlFieldName]
 
-          const response = {
+          const uploadResp = {
             status: ev.target.status,
             body,
             uploadURL
           }
 
-          this.uppy.setFileState(file.id, { response })
-
-          this.uppy.emit('upload-success', file, body, uploadURL)
+          this.uppy.emit('upload-success', file, uploadResp)
 
           if (uploadURL) {
             this.uppy.log(`Download ${file.name} from ${file.uploadURL}`)
           }
 
           return resolve(file)
         } else {
-          const body = opts.getResponseData(xhr.responseText, xhr)
+          // const body = opts.getResponseData(xhr.responseText, xhr)","the response data was added intentionally in #612, i think we could keep the `setFileState` stuff here as a special case, at least for now…",Can we remove this line?
547,"@@ -230,6 +235,22 @@ module.exports = class Dashboard extends Plugin {
     })
   }
 
+  openFileEditor = (file) => {
+    const { targets } = this.getPluginState()
+
+    this.setPluginState({
+      showFileEditor: true,
+      activeOverlayType: 'FileEditor'
+    })
+
+    const editors = this._getEditors(targets)
+    editors.forEach((editor) => {
+      const editorPlugin = this.uppy.getPlugin(editor.id)
+      editorPlugin.selectFile(file)
+      setTimeout(editorPlugin.initEditor, 4)
+    })","❓Questionable way of looping through editors and calling `selectFile` + `initEditor`, with the latter requiring “next tick”.",Why do we need this timeout?
548,"@@ -232,14 +238,18 @@ class Uploader {
     }
 
     this.writeStream.write(chunk, () => {
-      logger.debug(`${this.bytesWritten} bytes`, 'uploader.download.progress', this.shortToken)
+      // logger.debug(`${this.bytesWritten} bytes`, 'uploader.download.progress', this.shortToken)",leftover?,Can we remove this line?
549,"@@ -233,9 +233,11 @@ module.exports = class Webcam extends Plugin {
       return this.getImage()
     }).then((tagFile) => {
       this.captureInProgress = false
-      this.uppy.addFile(tagFile)
       const dashboard = this.uppy.getPlugin('Dashboard')
       if (dashboard) dashboard.hideAllPanels()
+      return this.uppy.addFile(tagFile).catch(() => {
+        // Ignore
+      })","But here we are also handling the error later, catching nonetheless.",Why is this needed?
550,"@@ -234,12 +234,28 @@ const ProgressBarProcessing = (props) => {
 
 const ProgressDetails = (props) => {
   return <div class=""uppy-StatusBar-statusSecondary"">
-    { props.numUploads > 1 && props.i18n('filesUploadedOfTotal', { complete: props.complete, smart_count: props.numUploads }) + ' \u00B7 ' }
-    { props.i18n('dataUploadedOfTotal', {
-      complete: prettyBytes(props.totalUploadedSize),
-      total: prettyBytes(props.totalSize)
-    }) + ' \u00B7 ' }
-    { props.i18n('xTimeLeft', { time: prettyETA(props.totalETA) }) }
+    {
+      props.numUploads > 1 &&
+      props.i18n('filesUploadedOfTotal', {
+        complete: props.complete,
+        smart_count: props.numUploads
+      }) + ' \u00B7 '
+    }
+    <span class=""uppy-StatusBar--onlyForDesktop"">","Nitpick: I would maybe call this `uppy-StatusBar--additionalInfo` or something, so that the desktop/mobile abstraction is hidden. Then devs using Uppy can hide this additional info based on a preference or custom condition. And we can later decide to show this on mobile, on a second/third line for instance, while still keeping the class name.",I think this should be `props.numUploads > 1 &&`
551,"@@ -234,3 +234,96 @@ h1 {
   width: 940px;
 }
 ```
+
+## Adding a new integration
+
+Before opening a pull request for the new integration, open an issue to discuss said integration with the Uppy team. After discussing the integration, you can get started on it. First off, you need to construct the basic components for your integration. The following components are the current standard:
+
+- `Dashboard`: Inline Dashboard (`inline: true`)
+- `DashboardModal`: Dashboard as a modal
+- `DragDrop`
+- `ProgressBar`
+- `StatusBar`
+
+All of these components should function as references to the normal component. Depending on how the framework you're using handles references to the DOM, your approach to creating these may be different. For example, in React, you can assign a property of the component to the reference of a component ([see here](https://github.com/transloadit/uppy/blob/425f9ecfbc8bc48ce6b734e4fc14fa60d25daa97/packages/%40uppy/react/src/Dashboard.js#L47-L54)). This may differ in your framework, but from what we've found, the concepts are generally pretty similar.
+
+If you're familiar with React, Vue or soon Svelte, it might be useful to read through the code of those integrations, as they lay out a pretty good structure. After the basic components have been built, there are a few more important tasks to get done:
+
+- Add TypeScript support in some capacity (if possible)
+- Write documentation
+- Add an example
+- Configuring the build system
+
+### Common issues
+
+Before going into these tasks, there are a few common gotchas that you should be aware of.
+
+#### Dependencies
+
+Your `package.json` should resemble something like this:
+```json
+{
+  ""name"": ""@uppy/framework"",
+  ""dependencies"": {
+    ""@uppy/dashboard"": ""file:../dashboard"",
+    ""@uppy/drag-drop"": ""file:../drag-drop"",
+    ""@uppy/progress-bar"": ""file:../progress-bar"",
+    ""@uppy/status-bar"": ""file:../status-bar"",
+    ""@uppy/utils"": ""file:../utils"",
+    ""prop-types"": ""^15.6.1""
+  },
+  ""peerDependencies"": {
+    ""@uppy/core"": ""^1.0.0""
+  }
+}","Let’s add the 
```
""publishConfig"": {
  ""access"": ""public""
}
```
bit ;-)",I think this should be `@uppy/utils`
552,"@@ -234,3 +234,96 @@ h1 {
   width: 940px;
 }
 ```
+
+## Adding a new integration
+
+Before opening a pull request for the new integration, open an issue to discuss said integration with the Uppy team. After discussing the integration, you can get started on it. First off, you need to construct the basic components for your integration. The following components are the current standard:
+
+- `Dashboard`: Inline Dashboard (`inline: true`)
+- `DashboardModal`: Dashboard as a modal
+- `DragDrop`
+- `ProgressBar`
+- `StatusBar`
+
+All of these components should function as references to the normal component. Depending on how the framework you're using handles references to the DOM, your approach to creating these may be different. For example, in React, you can assign a property of the component to the reference of a component ([see here](https://github.com/transloadit/uppy/blob/425f9ecfbc8bc48ce6b734e4fc14fa60d25daa97/packages/%40uppy/react/src/Dashboard.js#L47-L54)). This may differ in your framework, but from what we've found, the concepts are generally pretty similar.
+
+If you're familiar with React, Vue or soon Svelte, it might be useful to read through the code of those integrations, as they lay out a pretty good structure. After the basic components have been built, there are a few more important tasks to get done:
+
+- Add TypeScript support in some capacity (if possible)
+- Write documentation
+- Add an example
+- Configuring the build system
+
+### Common issues
+
+Before going into these tasks, there are a few common gotchas that you should be aware of.
+
+#### Dependencies
+
+Your `package.json` should resemble something like this:
+```json
+{
+  ""name"": ""@uppy/framework"",
+  ""dependencies"": {
+    ""@uppy/dashboard"": ""file:../dashboard"",
+    ""@uppy/drag-drop"": ""file:../drag-drop"",
+    ""@uppy/progress-bar"": ""file:../progress-bar"",
+    ""@uppy/status-bar"": ""file:../status-bar"",
+    ""@uppy/utils"": ""file:../utils"",
+    ""prop-types"": ""^15.6.1""
+  },
+  ""peerDependencies"": {
+    ""@uppy/core"": ""^1.0.0""
+  }
+}
+```
+
+The most important part about this is that `@uppy/core` is a peer dependency. If you're framework complains about `@uppy/core` not being resolved, you can also add it as a dev dependency
+
+### Adding TypeScript Support
+
+This section won't be too in-depth, because TypeScript depends on your framework. As general advice, prefer using `d.ts` files and vanilla JavaScript over TypeScript files. This is of course circumstantial, but it makes handling the build system a lot easier when TypeScript doesn't have to transpiled. The version of typescript in the monorepo is `3.7.5`, so features like `import type` will not work at build time. For upcoming integrations, like Angular, this may be updated.
+
+### Writing docs
+
+Generally, documentation for integrations can be broken down into a few pieces that apply to every component, and then documentation for each component. The structure should look something like this:
+
+- Installation
+- Initializing Uppy (may vary depending on how the framework handles reactivity)
+- Usage
+- *For each component*
+  - Loading CSS
+  - Props
+
+It may be easier to copy the documentation of earlier integrations and change the parts that need to be changed rather than writing this from scratch. Preferably, keep the documentation to one page. For the front-matter, write something like:
+```markdown
+---
+title: Framework Name
+type: docs
+module: ""@uppy/framework""
+order: 0
+category: ""Other Integrations""
+---
+```
+
+This data is used to generate Uppy's website. Refer to [the section about running the website locally](#website-previews) if you'd like to see how the docs look on the website.
+
+### Adding an example
+
+This is pretty simple to do, as you can likely use whatever code generation tool for your framework (ex. `create-react-app`) to create this example. Make sure you add the same version of `@uppy/core` to this as your peer dependency required, or you may run into strange issues. Try to include all of the components are some of their functionality. [The React example](https://github.com/transloadit/uppy/blob/master/examples/react-example/App.js) is a great... well example of how to do this well.
+
+### Integrating the build system
+
+The biggest part of this is understanding Uppy's build system. The high level description is basically `babel` goes through almost all of the packages and transpiles all the Javascript files in the `src` directory to more compatible JavaScript in the `lib` folder. If you're using vanilla JavaScript for your integration (like React and Vue do), then you can just use this build system and use the files generated as your entry points. 
+
+If you're using some kind of more abstract file format (like Svelte), then you probably want do to a few things: add the directory name to [this `IGNORE` regex](https://github.com/transloadit/uppy/blob/425f9ecfbc8bc48ce6b734e4fc14fa60d25daa97/bin/build-lib.js#L15); add all of your build dependencies to the root `package.json` (try to keep this small); add a new `build:framework` script to the root `package.json`. This script usually looks something like this:
+
+```json
+{
+  ""scripts"": {
+    ""build:framework"": ""cd framework && npm run build""","Do we want to run build scripts from root ideally, even if configs are in `packages/@uppy/my-integration/conf.js` or something? @goto-bus-stop what do you think?",I think this should be `@uppy/utils`
553,"@@ -239,23 +243,43 @@ module.exports = class Dashboard extends Plugin {
     this.savedActiveElement = document.activeElement
 
     if (this.opts.disablePageScrollWhenModalOpen) {
-      document.body.classList.add('uppy-Dashboard-isOpen')
+      document.body.classList.add('uppy-Dashboard-isFixed')
     }
 
+    // handle ESC and TAB keys in modal dialog
+    document.addEventListener('keydown', this.onKeydown)
+
     this.rerender(this.uppy.getState())
     this.updateDashboardElWidth()
     this.setFocusToBrowse()
   }
 
   closeModal () {
-    this.setPluginState({
-      isHidden: true
-    })
-
     if (this.opts.disablePageScrollWhenModalOpen) {
-      document.body.classList.remove('uppy-Dashboard-isOpen')
+      document.body.classList.remove('uppy-Dashboard-isFixed')
+    }
+
+    if (this.opts.animateOpenClose) {
+      this.setPluginState({
+        isClosing: true
+      })
+      const handler = () => {
+        this.setPluginState({
+          isHidden: true,
+          isClosing: false
+        })
+        this.el.removeEventListener('animationend', handler, false)
+      }
+      this.el.addEventListener('animationend', handler, false)",What happens if the modal is opened again within the 300ms of the animation? ,Why do we need to set `isClosing` here?
554,"@@ -24,25 +29,28 @@ module.exports = class Multipart extends Plugin {
   }
 
   upload (file, current, total) {
+    const opts = Object.assign({}, this.opts, file.multipart || {})
+
     this.core.log(`uploading ${current} of ${total}`)
     return new Promise((resolve, reject) => {
       // turn file into an array so we can use bundle
-      // if (!this.opts.bundle) {
+      // if (!opts.bundle) {
       //   files = [files[current]]
       // }
 
       // for (let i in files) {
-      //   formPost.append(this.opts.fieldName, files[i])
+      //   formPost.append(opts.fieldName, files[i])
       // }
 
       const formPost = new FormData()
-      formPost.append(this.opts.fieldName, file.data)
 
-      Object.keys(file.meta).forEach((item) => {
-        // console.log(file.meta, file.meta[item])
+      const fields = Array.isArray(opts.fields) ? opts.fields : Object.keys(file.meta)
+      fields.forEach((item) => {
         formPost.append(item, file.meta[item])
       })
 
+      formPost.append(opts.fieldName, file.data)",Moved this one to the end because S3 requires the `file` to be the last parameter … hopefully nothing else requires it to be first! :/,"`Object.assign({}, this.opts, file.multipart || {})`"
555,"@@ -24,6 +24,29 @@ uppy.use(Transloadit, {
 
 As of Uppy 0.24 the Transloadit plugin includes the [Tus](/docs/tus) plugin to handle the uploading, so you no longer have to add it manually.
 
+## Properties
+
+### `Transloadit.UPPY_SERVER`
+
+The main endpoint for Transloadit's hosted uppy-servers. You can use this constant in remote provider options, like so:
+
+```js
+const Dropbox = require('uppy/lib/plugins/Dropbox')
+const Transloadit = require('uppy/lib/plugins/Transloadit')
+
+uppy.use(Dropbox, {
+  host: Transloadit.UPPY_SERVER",❤️ ,I'm not sure if this is the best way to do this. I think it wou
556,"@@ -24,66 +24,80 @@ class Drive {
   list (options, done) {
     const directory = options.directory || 'root'
     const query = options.query || {}
-    const teamDrive = query.teamDrive
-    let listDone = false
-    let teamDrivesDone = false
-    let teamDrives
-    let listResponse
-    let reqErr
-    const finishReq = () => {
-      if (reqErr || listResponse.statusCode !== 200) {
-        const err = this._error(reqErr, listResponse)
-        logger.error(err, 'provider.drive.list.error')
-        done(err)
-      } else {
-        done(null, this.adaptData(listResponse.body, teamDrives ? teamDrives.body : null, options.uppy))
-      }
+    const teamDriveId = query.teamDriveId
+
+    let teamDrivesPromise = Promise.resolve(undefined)
+
+    const shouldListTeamDrives = directory === 'root' && !teamDriveId && !query.nextPageToken
+    if (shouldListTeamDrives) {
+      teamDrivesPromise = new Promise((resolve) => {
+        this.client
+          .query()
+          .get('teamdrives')
+          .where({ fields: TEAM_DRIVE_FIELDS })
+          .auth(options.token)
+          .request((err, resp) => {
+            if (err) {
+              logger.error(err, 'provider.drive.teamDrive.error')
+              return
+            }
+            resolve(resp)
+          })
+      })
+    }
+
+    let where = {
+      fields: DRIVE_FILES_FIELDS,
+      pageToken: query.nextPageToken,",maybe we should make the nextPage query name the same for all providers? so each provider would use it as it requires internally. But between companion and uppy client it will be the same query name. For instagram we are already using `max_id` but we can change it and still support `max_id` for backward compatibility.,`shouldListTeamDrives` -> `shouldListTeamDrives`
557,"@@ -243,6 +242,7 @@ module.exports = class Tus extends Plugin {
 
   connectToServerSocket (file) {
     const token = file.serverToken
+    console.log('123', token)",stray console.log? :),
558,"@@ -244,19 +249,33 @@ describe('uploader/ThumbnailGeneratorPlugin', () => {
     })
   })
 
-  describe('getProportionalHeight', () => {
-    it('should calculate the resized height based on the specified width of the image whilst keeping aspect ratio', () => {
-      const core = new MockCore()
-      const plugin = new ThumbnailGeneratorPlugin(core)
-      expect(
-        plugin.getProportionalHeight({ width: 200, height: 100 }, 50)
-      ).toEqual(25)
-      expect(
-        plugin.getProportionalHeight({ width: 66, height: 66 }, 33)
-      ).toEqual(33)
-      expect(
-        plugin.getProportionalHeight({ width: 201.2, height: 198.2 }, 47)
-      ).toEqual(46)
+  describe('getProportionalDimensions', () => {
+    const core = new MockCore()
+    const plugin = new ThumbnailGeneratorPlugin(core)
+
+    function resize (image, width, height) {
+      return plugin.getProportionalDimensions(image, width, height)
+    }
+
+    it('should calculate the thumbnail dimensions based on the width whilst keeping aspect ratio', () => {
+      expect(resize({ width: 200, height: 100 }, 50)).toEqual({ width: 50, height: 25 })
+      expect(resize({ width: 66, height: 66 }, 33)).toEqual({ width: 33, height: 33 })
+      expect(resize({ width: 201.2, height: 198.2 }, 47)).toEqual({ width: 47, height: 46 })
+    })
+
+    it('should calculate the thumbnail dimensions based on the height whilst keeping aspect ratio', () => {
+      expect(resize({ width: 200, height: 100 }, null, 50)).toEqual({ width: 100, height: 50 })
+      expect(resize({ width: 66, height: 66 }, null, 33)).toEqual({ width: 33, height: 33 })
+      expect(resize({ width: 201.2, height: 198.2 }, null, 47)).toEqual({ width: 48, height: 47 })
+    })
+
+    it('should calculate the thumbnail dimensions based on the default width if no custom width is given', () => {
+      plugin.defaultThumbnailDimension = 50","I think we should use a separate instance here to avoid this mutation leaking into other tests, if we add more later. Right now the remaining tests don't depend on this value but who knows what will change in the future!",Why are we setting the width to null here?
559,"@@ -248,15 +249,83 @@ function getFileNameAndExtension (fullFileName) {
   return [fileName, fileExt]
 }
 
-function getThumbnail (file) {
-  return URL.createObjectURL(file.data)
-}
-
 function supportsMediaRecorder () {
   return typeof MediaRecorder === 'function' && !!MediaRecorder.prototype &&
     typeof MediaRecorder.prototype.start === 'function'
 }
 
+/**
+ * Check if a URL string is an object URL from `URL.createObjectURL`.
+ *
+ * @param {string} url
+ * @return {boolean}
+ */
+function isObjectURL (url) {
+  return url.indexOf('blob:') === 0
+}
+
+function getProportionalHeight (img, width) {
+  const aspect = img.width / img.height
+  return Math.round(width / aspect)
+}
+
+/**
+ * Create a thumbnail for the given Uppy file object.
+ *
+ * @param {{data: Blob}} file
+ * @param {number} width
+ * @return {Promise}
+ */
+function createThumbnail (file, width) {
+  const originalUrl = URL.createObjectURL(file.data)
+
+  const onload = new Promise((resolve, reject) => {
+    const image = new Image()
+    image.src = originalUrl
+    image.onload = () => {
+      URL.revokeObjectURL(originalUrl)
+      resolve(image)
+    }
+    image.onerror = () => {
+      // The onerror event is totally useless unfortunately, as far as I know
+      URL.revokeObjectURL(originalUrl)
+      reject(new Error('Could not create thumbnail'))
+    }
+  })
+
+  return onload.then((image) => {
+    const height = getProportionalHeight(image, width)
+
+    const canvas = html`<canvas></canvas>`","Could we just use `document.createElement` here, so that Utils are not dependent on `yo-yo`?",Why not just `return url.indexOf('blob:') === 0`?
560,"@@ -248,19 +257,23 @@ module.exports = class XHRUpload extends Plugin {
   }
 
   uploadFiles (files) {
-    const promises = files.map((file, i) => {
+    const actions = files.map((file, i) => {
       const current = parseInt(i, 10) + 1
       const total = files.length
 
       if (file.error) {
-        return Promise.reject(new Error(file.error))
+        return () => Promise.reject(new Error(file.error))
       } else if (file.isRemote) {
-        return this.uploadRemote(file, current, total)
+        return this.uploadRemote.bind(this, file, current, total)
       } else {
-        return this.upload(file, current, total)
+        return this.upload.bind(this, file, current, total)
       }
     })
 
+    const promises = actions
+      .map(this.limitUploads)
+      .map((action) => action())","alternative via @ifedapoolarewaju:

```js
const promises = actions.map((action) => {
  const limitedAction = this.limitUploads(action)
  return limitedAction()
})
```",Why do we need `bind` here?
561,"@@ -248,32 +248,26 @@ module.exports = class XHRUpload extends Plugin {
           this.uploaderEvents[file.id] = null
         }
 
-        if (opts.validateStatus(ev.target.status, xhr.responseText, xhr)) {
-          const body = opts.getResponseData(xhr.responseText, xhr)
-          const uploadURL = body[opts.responseUrlFieldName]
+        const body = opts.getResponseData(xhr.responseText, xhr)
+        const uploadURL = body[opts.responseUrlFieldName]","If there was an error, there may not be any response data—this was why it was initially separate. There can't really be an `uploadURL` if the upload failed :) we can do a check like this though:
```suggestion
        const uploadURL = body != null ? body[opts.responseUrlFieldName] : null
```",Why did you remove this che
562,"@@ -249,15 +248,129 @@ function getFileNameAndExtension (fullFileName) {
   return [fileName, fileExt]
 }
 
-function getThumbnail (fileData) {
-  return URL.createObjectURL(fileData)
-}
-
 function supportsMediaRecorder () {
   return typeof MediaRecorder === 'function' && !!MediaRecorder.prototype &&
     typeof MediaRecorder.prototype.start === 'function'
 }
 
+/**
+ * Check if a URL string is an object URL from `URL.createObjectURL`.
+ *
+ * @param {string} url
+ * @return {boolean}
+ */
+function isObjectURL (url) {
+  return url.indexOf('blob:') === 0
+}
+
+function getProportionalHeight (img, width) {
+  const aspect = img.width / img.height
+  return Math.round(width / aspect)
+}
+
+/**
+ * Create a thumbnail for the given Uppy file object.
+ *
+ * @param {{data: Blob}} file
+ * @param {number} width
+ * @return {Promise}
+ */
+function createThumbnail (file, targetWidth) {
+  const originalUrl = URL.createObjectURL(file.data)
+
+  const onload = new Promise((resolve, reject) => {
+    const image = new Image()
+    image.src = originalUrl
+    image.onload = () => {
+      URL.revokeObjectURL(originalUrl)
+      resolve(image)
+    }
+    image.onerror = () => {
+      // The onerror event is totally useless unfortunately, as far as I know
+      URL.revokeObjectURL(originalUrl)
+      reject(new Error('Could not create thumbnail'))
+    }
+  })
+
+  return onload.then((image) => {
+    const targetHeight = getProportionalHeight(image, targetWidth)
+    let sourceWidth = image.width
+    let sourceHeight = image.height
+
+    if (targetHeight < image.height / 2) {
+      const steps = Math.floor(Math.log(image.width / targetWidth) / Math.log(2))
+      ;({",";{{{

nitpicking of course, but is there a way to write this differently? :)",I'm not sure if this is the
563,"@@ -25,14 +24,12 @@ uppy.use(FileInput, {
 })
 ```
 
+> Note that certain [restrictions set in Uppy’s main options](/docs/uppy#restrictions), namely `maxNumberOfFiles` and `allowedFileTypes`, affect the system file picker dialog. If `maxNumberOfFiles: 1`, users will only be able to select one file, and `allowedFileTypes: ['image/*, .jpg']` means only image or files with `.jpg` extension will be selectable.",ditto re: overlapping file types,
564,"@@ -25,51 +18,6 @@ function browserSupportsChooseFile (capabilities) {
          capabilities.platformName !== 'Android'
 }","This `browserSupportsChooseFile ` is not needed here, if we have `supportsChooseFile`?",{
565,"@@ -25,7 +90,7 @@
     ""jsdoc/check-types"": [""warn""],
     ""jsdoc/newline-after-description"": [""warn""],
     ""jsdoc/valid-types"": [""warn""],
-    ""jsdoc/check-indentation"": [""off""]
+    ""jsdoc/check-indentation"": 0","i think ""off"" is clearer 😇 ","""jsdoc/check-indentation"": "
566,"@@ -25,8 +25,10 @@ module.exports = class RequestClient {
     }
   }
 
-  get headers () {
-    return Object.assign({}, this.defaultHeaders, this.opts.serverHeaders || {})
+  headers () {
+    return new Promise((resolve, reject) => {
+      resolve(Object.assign({}, this.defaultHeaders, this.opts.serverHeaders || {}))",This can be `return Promise.resolve(Object.assign(...))`,Why not just `return this.d
567,"@@ -251,6 +254,42 @@ module.exports = class Transloadit extends Plugin {
     })
   }
 
+  _createAssemblyWatcher (assemblyID, fileIDs, uploadID) {
+  // AssemblyWatcher tracks completion states of all Assemblies in this upload.
+    const watcher = new AssemblyWatcher(this.uppy, assemblyID)
+
+    watcher.on('assembly-upload', (id) => {","When I try it with this PR and `waitForEncoding: true`, the postprocessing step is never entered. I think it's because the `assembly-upload` event is not actually fired anywhere right now.",I don't think you need to p
568,"@@ -252,6 +252,33 @@ It gets passed `({value, onChange}, h)` where `value` is the current value of th
 })
 ```
 
+If you want the meta fields to be dynamically assigned depending on the file type, pass a function:","```suggestion
If you’d like the meta fields to be dynamically assigned depending on, for instance, the file type, pass a function:
```",```
569,"@@ -252,6 +252,33 @@ It gets passed `({value, onChange}, h)` where `value` is the current value of th
 })
 ```
 
+You can also specify a function that takes a [File Object](https://uppy.io/docs/uppy/#File-Objects) and returns an array of UI field objects:","Maybe add “instead of an array” or similar? Not sure if it’s clear right now that this is about `metaFields`, because the example above refers to `render`. ",Can you add a `.. versionad
570,"@@ -253,6 +254,27 @@ module.exports = class View {
     })
   }
 
+  handleAuth () {
+    let urlId = Math.floor(Math.random() * 999999) + 1
+    let redirect = `${location.href}${location.search ? '&' : '?'}id=${urlId}`
+
+    const authState = btoa(JSON.stringify({ redirect }))
+    const link = `${this.plugin.opts.host}/connect/${this.Provider.authProvider}?state=${authState}`
+
+    let authWindow = window.open(link, '_blank')
+
+    let checkAuth = () => {","I’d probably prefer to use `let` only if we need to set/reset later, `const` would seem more appropriate here.",This should be `const`.
571,"@@ -256,7 +256,7 @@ module.exports = class Tus extends Plugin {
         }
       }
 
-      /** @type {{ [name: string]: string }} */
+      /** @type {Record<string, string>} */",Working around a possible limitation in the JSDoc plugin's typescript syntax checking. This means the same thing,Why did you change this?
572,"@@ -259,7 +271,7 @@ module.exports = class DashboardUI extends Plugin {
   }
 
   handleDrop (files) {
-    this.core.log('All right, someone dropped something...')
+    this.core.log('[Dashboard] Files were droppeded')",tiniest nit: 'droppeded' → 'dropped',this.core.log('[Dashboard] 
573,"@@ -26,6 +26,7 @@ const Uppy = require('@uppy/core')
 const Dashboard = require('@uppy/dashboard')
 const GoogleDrive = require('@uppy/google-drive')
 const Dropbox = require('@uppy/dropbox')
+const Box = require('@uppy/box')","excluding from examples in the meantime
```suggestion
```",Why do we need this?
574,"@@ -26,7 +26,10 @@ Unit tests are using Jest and can be run with:
 
 For acceptance (or end to end) tests, we use [Webdriverio](http://webdriver.io). For it to run locally, you need to install selenium standalone server, just follow [the guide](http://webdriver.io/guide.html) to do so. You can also install Selenium Standalone server from NPM:
 
-`npm install selenium-standalone`
+```bash
+npm install selenium-standalone
+selenium-standalone install
+```",I wonder if it’s better to do `npm install selenium-standalone -g` as suggested on https://www.npmjs.com/package/selenium-standalone,I think this should be `npm
575,"@@ -265,9 +289,9 @@ module.exports = class Dashboard extends Plugin {
 
   onKeydown (event) {
     // close modal on esc key press
-    if (event.keyCode === 27) this.requestCloseModal(event)
+    if (event.keyCode === ESC_KEY) this.requestCloseModal(event)
     // maintainFocus on tab key press
-    if (event.keyCode === 9) this.maintainFocus(event)
+    if (event.keyCode === TAB_KEY) this.maintainFocus(event)",yay nice,Why did you change this?
576,"@@ -267,28 +273,31 @@ module.exports = class DashboardUI extends Plugin {
       showModalTrigger.forEach(trigger => trigger.removeEventListener('click', this.openModal))
     }
 
-    this.removeDragDropListener()
-
     if (!this.opts.inline) {
       document.removeEventListener('keydown', this.onKeydown)
     }
-  }
 
-  actions () {
-    this.core.on('dashboard:file-card', this.handleFileCard)
+    this.removeDragDropListener()
 
-    window.addEventListener('resize', this.updateDashboardElWidth)
+    this.uppy.off('dashboard:file-card', this.handleFileCard)
+    this.uppy.off('file-added', this.addDashboardMetaToNewFile)
+
+    window.removeEventListener('resize', this.updateDashboardElWidth)
   }
 
-  removeActions () {
-    this.core.off('dashboard:file-card', this.handleFileCard)
+  addDashboardMetaToNewFile (file) {","I kinda feel like the dashboard as a UI plugin shouldn't be setting initial file metadata, maybe the `metaFields` option should only contain the placeholder and name data, and not a default value. then the `meta: {}` option to Core can be used to specify defaults. what's your thoughts on that?
",Why do we need to remove the listener here?
577,"@@ -27,14 +27,14 @@ Object {
       ""name"": ""foo.jpg"",
       ""preview"": undefined,
       ""progress"": Object {
-        ""bytesTotal"": 0,
+        ""bytesTotal"": null,
         ""bytesUploaded"": 0,
         ""percentage"": 0,","Should all those be `null` then? Otherwise `bytesTotal` is `null`, but `bytesUploaded` is `0`?",Why is this change needed?
578,"@@ -27,17 +27,18 @@
 
   <textarea id=""console-log"" class=""Console""></textarea>
   <script>
-  console.log = (function (old_function, div_log) {
-    return function (text) {
-      old_function(text);
-
-      if (text !== (text + '')) {
-        text = JSON.stringify(text);
-      }
-
-      div_log.value = text + ""\n"" + div_log.value;
-    };
-  } (console.log.bind(console), document.getElementById(""console-log"")));
+    console.log = (function (log, container) {
+      return function (text) {
+        log(text);
+
+        if (text !== (text + '')) {
+          text = JSON.stringify(text);
+        }
+
+        container.value += text;
+        container.scrollTop = container.scrollHeight + '\n';
+      };",isn’t `scrollTop` a number? how does `container.scrollHeight + '\n'` work?,Why do we need to do this?
579,"@@ -27,21 +29,39 @@ module.exports = (props) => {
         // making <ul> not focusable for firefox
         tabindex=""-1""
       >
-        {props.folders.map(folder =>
-          Item({
+        {props.folders.map(folder => {
+          return Item({
             ...getSharedProps(folder, props),
             type: 'folder',
             isDisabled: props.isChecked(folder) ? props.isChecked(folder).loading : false,
             handleFolderClick: () => props.handleFolderClick(folder)
           })
-        )}
-        {props.files.map(file =>
-          Item({
-            ...getSharedProps(file, props),
+        })}
+        {props.files.map(file => {
+          console.log(file)",`console.log()` 💛 ,Remove this line?
580,"@@ -27,21 +29,39 @@ module.exports = (props) => {
         // making <ul> not focusable for firefox
         tabindex=""-1""
       >
-        {props.folders.map(folder =>
-          Item({
+        {props.folders.map(folder => {
+          return Item({
             ...getSharedProps(folder, props),
             type: 'folder',
             isDisabled: props.isChecked(folder) ? props.isChecked(folder).loading : false,
             handleFolderClick: () => props.handleFolderClick(folder)
           })
-        )}
-        {props.files.map(file =>
-          Item({
-            ...getSharedProps(file, props),
+        })}
+        {props.files.map(file => {
+          console.log(file)
+          const passesRestrictions = props.passesRestrictions(
+            remoteFileObjToLocal(file)
+          )
+          const sharedProps = getSharedProps(file, props)
+          let restrictionReason = passesRestrictions.reason
+          if (!props.canSelectMore && !sharedProps.isChecked) {
+            if (props.maxNumberOfFiles) {
+              restrictionReason = sharedProps.i18n('youCanOnlyUploadX', { smart_count: props.maxNumberOfFiles })","If we have both restrictions enabled & `!props.canSelectMore && !sharedProps.isChecked` is true, then we'll always get `'youCanOnlyUploadX'` restrictionReason.

Example: getting `'You can only upload 80 files'` titles with `{ restrictions: { maxTotalFileSize: 291000, maxNumberOfFiles: 80 } }`
![image](https://user-images.githubusercontent.com/7578559/98650401-a65be080-235a-11eb-8919-e4e32c2efda6.png)
",remove this console.log
581,"@@ -27,6 +26,8 @@ uppy.use(DragDrop, {
 })
 ```
 
+> Note that certain [restrictions set in Uppy’s main options](/docs/uppy#restrictions), namely `maxNumberOfFiles` and `allowedFileTypes`, affect the system file picker dialog. If `maxNumberOfFiles: 1`, users will only be able to select one file, and `allowedFileTypes: ['image/*, .jpg']` means only image or files with `.jpg` extension will be selectable.","It might be clearer to have non overlapping example here, eg ""`allowedFileTypes: ['image/*', '.pdf']` means only images and PDFs will be selectable""",
582,"@@ -27,7 +27,7 @@ function logout (req, res, next) {
       }
 
       delete companion.providerTokens[providerName]
-      tokenService.removeFromCookies(res, companion.options, companion.provider.authProviderName)
+      tokenService.removeFromCookies(res, companion.options, companion.provider.authProvider)",spotted a bug.,} else {
583,"@@ -27,8 +28,9 @@ class ActionBrowseTagline extends Component {
           tabindex=""-1""
           type=""file""
           name=""files[]""
-          multiple=""true""
+          multiple={this.props.maxNumberOfFiles !== 1 || !this.props.maxNumberOfFiles}","not sure what the '|| !this.props.maxNumberOfFiles' is for, according to the left side of the condition, it can be simplified to `!1` which is always false.",`multiple={this.props.maxNumberOfFiles !== 
584,"@@ -277,48 +303,82 @@ module.exports = class Tus extends Plugin {
     })
   }
 
+  /**
+   * See the comment on the upload() method.
+   *
+   * Additionally, when an upload is removed, completed, or cancelled, we need to close the WebSocket connection. This is handled by the resetUploaderReferences() function, so the same guidelines apply as in upload().
+   */
   connectToServerSocket (file) {
     return new Promise((resolve, reject) => {
       const token = file.serverToken
       const host = getSocketHost(file.remote.companionUrl)
-      const socket = new Socket({ target: `${host}/api/${token}` })
+      const socket = new Socket({ target: `${host}/api/${token}`, autoOpen: false })
       this.uploaderSockets[file.id] = socket
-      this.uploaderEvents[file.id] = createEventTracker(this.uppy)
+      this.uploaderEvents[file.id] = new EventTracker(this.uppy)
 
       this.onFileRemove(file.id, () => {
+        queuedRequest.abort()
         socket.send('pause', {})
+        this.resetUploaderReferences(file.id)
         resolve(`upload ${file.id} was removed`)
       })
 
       this.onPause(file.id, (isPaused) => {
-        isPaused ? socket.send('pause', {}) : socket.send('resume', {})
+        if (isPaused) {
+          // Remove this file from the queue so another file can start in its place.
+          queuedRequest.abort()
+          socket.send('pause', {})
+        } else {
+          // Resuming an upload should be queued, else you could pause and then resume a queued upload to make it skip the queue.
+          queuedRequest.abort()
+          queuedRequest = this.requests.run(() => {
+            socket.send('resume', {})
+            return () => {}
+          })
+        }
       })
 
-      this.onPauseAll(file.id, () => socket.send('pause', {}))
+      this.onPauseAll(file.id, () => {
+        queuedRequest.abort()
+        socket.send('pause', {})
+      })
 
-      this.onCancelAll(file.id, () => socket.send('pause', {}))
+      this.onCancelAll(file.id, () => {
+        queuedRequest.abort()
+        socket.send('pause', {})
+        this.resetUploaderReferences(file.id)
+        resolve(`upload ${file.id} was canceled`)
+      })
 
       this.onResumeAll(file.id, () => {
+        queuedRequest.abort()
         if (file.error) {
           socket.send('pause', {})
         }
-        socket.send('resume', {})
+        queuedRequest = this.requests.run(() => {
+          socket.send('resume', {})","We forgot to `return () => {}`, now we get this error:
![image](https://user-images.githubusercontent.com/7578559/63730302-32800600-c884-11e9-8d5a-f745eb03ada3.png)

To reproduce:
1. select some instagram images
2. stop all - resume all - stop all (<--- aand here is the error)",Why do we need to abort the request here?
585,"@@ -277,6 +277,8 @@ module.exports = class Dashboard extends Plugin {
         name: file.name,
         type: file.type,
         data: blob
+      }).catch(() => {","> UI plugins swallow rejection errors so they don't end up in the console with no way to fix

But it will still catch upstream in `addFile` and restrictions to show the informer?.. 🤔",}).then(() => {
586,"@@ -278,9 +278,7 @@ describe('src/Core', () => {
       plugins: {},
       totalProgress: 0
     })
-    expect(core.plugins.acquirer[0].mocks.uninstall.mock.calls.length).toEqual(
-      1
-    )
+    expect(core.plugins[Object.keys(core.plugins)[0]].length).toEqual(0)",Can we keep the other assertion too? I think it's helpful to ensure that the uninstall function was called too,Why did this change?
587,"@@ -28,6 +28,14 @@ Even though bundled in this repo, the website is regarded as a separate project.
 
 It's recommended to exclude `./website/public/` from your editor if you want efficient searches.
 
+To install the required node modules, type:
+```bash
+npm install
+cd website
+npm install
+cd ..
+```
+","Maybe combine it like:
```bash
npm install && cd website && npm install && cd ..
```
?",I think this should be `npm install website
588,"@@ -28,6 +28,7 @@
     ""@uppy/thumbnail-generator"": ""0.29.1"",
     ""@uppy/utils"": ""0.29.1"",
     ""classnames"": ""^2.2.6"",
+    ""cuid"": ""^2.1.1"",
     ""drag-drop"": ""2.13.3"",","In other places we are using uuid, I think, is there a reason to use different packages? I was actually gonna suggest we switch to https://github.com/ai/nanoid everywhere, it’s smaller and ids are smaller.","This should be `^2.1.0`, right?"
589,"@@ -28,7 +28,7 @@ class Zoom extends Provider {
     return 'zoom'
   }
 
-  list (options, done) {
+  async list (options, done) {","for consistency with other providers, can this be achieved without explicit `async-await`?",async function
590,"@@ -28,7 +28,8 @@ module.exports.verifyToken = (token, secret) => {
  *
  * @param {object} res
  * @param {string} token
- * @param {object=} companionOptions
+ * @param {object} companionOptions
+ * @param {string=} companionOptions.cookieDomain","```suggestion
```",I think this should be `companionOptions.co
591,"@@ -281,6 +304,191 @@ module.exports = class Transloadit extends Plugin {
     })
   }
 
+  getPersistentData (setData) {
+    const state = this.getPluginState()
+    const assemblies = state.assemblies
+    const uploadsAssemblies = state.uploadsAssemblies
+    const uploads = Object.keys(state.files)
+    const results = state.results.map((result) => result.id)
+
+    setData({
+      [this.id]: {
+        assemblies,
+        uploadsAssemblies,
+        uploads,
+        results
+      }
+    })
+  }
+
+  /**
+   * Emit the necessary events that must have occured to get from the `prevState`,
+   * to the current state.
+   * For completed uploads, `transloadit:upload` is emitted.
+   * For new results, `transloadit:result` is emitted.
+   * For completed or errored assemblies, `transloadit:complete` or `transloadit:assembly-error` is emitted.
+   */
+  emitEventsDiff (prevState) {
+    const opts = this.opts
+    const state = this.getPluginState()
+
+    const emitMissedEvents = () => {
+      // Emit events for completed uploads and completed results
+      // that we've missed while we were away.
+      const newUploads = Object.keys(state.files).filter((fileID) => {
+        return !prevState.files.hasOwnProperty(fileID)
+      }).map((fileID) => state.files[fileID])
+      const newResults = state.results.filter((result) => {
+        return !prevState.results.some((prev) => prev.id === result.id)
+      })
+
+      this.uppy.log('[Transloadit] New fully uploaded files since restore:', newUploads)
+      newUploads.forEach(({ assembly, uploadedFile }) => {","The way `uppy.log()` currently works, you need to call it with the object separately for it to show it, like:

```js
this.uppy.log('[Transloadit] New fully uploaded files since restore:')
this.uppy.log(newUploads)
```

Not ideal, I know :)",I'm not sure if this is the best way to do 
592,"@@ -287,9 +281,17 @@ module.exports = class XHRUpload extends Plugin {
           this.uploaderEvents[file.id].remove()
           this.uploaderEvents[file.id] = null
         }
+        const body = opts.getResponseData(xhr.responseText, xhr)","I don't think this should be done in the `error` handler. AFAIK the response is always null here, so there is no data to retrieve. It's the same for the `status` value below: it would always be 0 in this code path. Having the `response` object is not really useful in that case.",const body = xhr.responseText.trim()
593,"@@ -289,6 +289,10 @@ module.exports = class Tus extends Plugin {
 
     socket.on('progress', (progressData) => emitSocketProgress(this, progressData, file))
 
+    socket.on('error', (errData) => {
+      this.core.emitter.emit('core:upload-error', file.id, new Error(errData.error))","nitpick, but its better if we are consistent: `this.core.emitter.emit` --> `this.core.emit`.",I think this should be `core:upload-
594,"@@ -29,11 +29,11 @@ class FileCard extends Component {
     }
   }
 
-  tempStoreMeta = (ev, name) => {
+  updateMeta = (newVal, name) => {","I can add back the old function if needed, but felt kinda useless now :)",I think this should be `updateMeta =
595,"@@ -29,11 +29,13 @@ class FileCard extends Component {
     }
   }
 
-  tempStoreMeta = (ev, name) => {
+  tempStoreMeta = (ev, name, type) => {
+    var value = ev.target.value
+    if (type === 'checkbox') value = ev.target.checked ? 'on' : 'off'",This is an example of why I prefer a flexible custom `render()` solution … 'on'/'off' may not be the right value for every application. You have to make a lot of decisions even for very simple form fields :(,Why do we need this?
596,"@@ -29,21 +27,12 @@
         text-align: right;
         border: 2px solid purple;
       }
-
-      ul {
-        margin: 60px;
-      }
-
-      li {
-        margin: 60px;
-      }
-
-      .foo a {
-        color: purple;
-      }","These were added to test Uppy’s style protection from some styles that might be on a page where Uppy is used. Not sure it’s the best idea, but just noting that there was a reason, maybe we should keep it.",Why is this being removed?
597,"@@ -29,40 +29,40 @@
     ""companion"": ""./bin/companion""
   },
   ""dependencies"": {
-    ""@purest/providers"": ""1.0.0"",
+    ""@purest/providers"": ""1.0.1"",
     ""@uppy/fs-tail-stream"": ""1.2.0"",
-    ""atob"": ""2.1.0"",
-    ""aws-sdk"": ""2.388.0"",
-    ""body-parser"": ""1.18.2"",
+    ""atob"": ""2.1.2"",
+    ""aws-sdk"": ""2.587.0"",
+    ""body-parser"": ""1.19.0"",
     ""chalk"": ""2.4.2"",
     ""common-tags"": ""1.8.0"",
     ""connect-redis"": ""4.0.3"",
-    ""cookie-parser"": ""1.4.3"",
+    ""cookie-parser"": ""1.4.4"",
     ""express"": ""4.17.1"",
     ""express-interceptor"": ""1.2.0"",
     ""express-prom-bundle"": ""3.3.0"",
     ""express-request-id"": ""1.4.1"",
-    ""express-session"": ""1.15.6"",
-    ""grant-express"": ""4.1.2"",
+    ""express-session"": ""1.17.0"",
+    ""grant-express"": ""4.6.5"",","```suggestion
    ""grant-express"": ""4.1.2"",
```",Why is this being changed?
598,"@@ -29,6 +29,12 @@ module.exports = () => {
       transport: 'session',
       scope: ['files.read.all', 'offline_access', 'User.Read'],
       callback: '/onedrive/callback'
+    },
+    zoom: {
+      transport: 'session',
+      authorize_url: 'https://zoom.us/oauth/authorize',
+      access_url: 'https://zoom.us/oauth/token',
+      callback: '/zoom/callback'",we need to add the permission scopes that the API will be using kind of like [this one](https://github.com/transloadit/uppy/blob/e9651443c7eb1eca0de93d98b3d960d7738efd19/packages/%40uppy/companion/src/config/grant.js#L24),I think this should be `/onedrive/ca
599,"@@ -29,6 +33,11 @@ class MockPurest {
       const responses = fixtures[this.opts.providerName].responses
       const url = this._query ? `${this._requestUrl}?${this._query}` : this._requestUrl
       const endpointResponses = responses[url] || responses[this._requestUrl]
+      if (endpointResponses == null || !has(endpointResponses, this._method)) {
+        done(new Error(`No fixture for ${this._method} ${url}`))
+        return
+      }","For debugging: a test failure on CI was due to a missing fixture and it was not super easy to find.

That failure was fixed in https://github.com/transloadit/uppy/pull/2628/files?file-filters%5B%5D=.js&file-filters%5B%5D=.json&file-filters%5B%5D=.ts#diff-230671caf421c053be258aa2c0a54a7086622503a88bf18c87607155f5b08157",I think this should be `if (!has(end
600,"@@ -29,8 +30,8 @@ module.exports = function sendToken (req, res, next) {
     const allowedClients = req.uppy.options.clients
     // if no preset clients then allow any client
     if (!allowedClients || hasMatch(origin, allowedClients) || hasMatch(parseUrl(origin).host, allowedClients)) {
-      // @todo do a more secure client version check, see https://www.npmjs.com/package/semver
-      return res.send(clientVersion ? htmlContent(uppyAuthToken, origin) : oldHtmlContent(uppyAuthToken, origin))
+      const allowsStringMessage = versionCmp.gte(clientVersion, '1.0.2')","```suggestion
      const allowsStringMessage = clientVersion ? versionCmp.gte(clientVersion, '1.0.2') : false
```",I think this should be `clientVersio
601,"@@ -298,28 +298,14 @@ module.exports = class Tus10 extends Plugin {
     })
   }
 
-  selectForUpload (files) {
-    // TODO: replace files[file].isRemote with some logic
-    //
-    // filter files that are now yet being uploaded / haven’t been uploaded
-    // and remote too
-    const filesForUpload = Object.keys(files).filter((file) => {
-      if (!files[file].progress.uploadStarted || files[file].isRemote) {
-        return true
-      }
-      return false
-    }).map((file) => {
-      return files[file]
-    })
-
-    this.uploadFiles(filesForUpload)
-  }
-
-  handleUpload () {
+  handleUpload (fileIDs) {
     this.core.log('Tus is uploading...')
-    const files = this.core.getState().files
+    const filesToUpload = fileIDs.map(getFile, this)
+    function getFile (fileID) {
+      return this.core.state.files[fileID]
+    }
 
-    this.selectForUpload(files)
+    this.uploadFiles(filesToUpload)","All changes in this file are because the file IDs to upload are now passed in by `Core`, so the Tus plugin doesn't have to figure out what it has to upload.",Why not use `this.core.getState().fi
602,"@@ -299,10 +299,6 @@ class Uppy {
           preview: file.preview
         }
 
-        if (Utils.isPreviewSupported(fileTypeSpecific) && !isRemote) {
-          newFile.preview = Utils.getThumbnail(file.data)
-        }",This is moved to the `core:generate-preview` event.,Why was this removed?
603,"@@ -299,5 +299,6 @@ module.exports = class AwsS3 extends Plugin {
 
   uninstall () {
     this.uppy.removePreProcessor(this.handleUpload)
+    this.uppy.removeUploader(this.handleUpload)","```suggestion
    this.uppy.removeUploader(this.handleUpload)
```",this.uppy.removePostProcessor(this.h
604,"@@ -3,6 +3,7 @@ const has = require('@uppy/utils/lib/hasProperty')
 
 const remoteProviders = {
   dropbox: require('@uppy/dropbox'),
+  box: require('@uppy/box'),","excluding box from global module for now as it will initially be released as beta
```suggestion
```",
605,"@@ -3,6 +3,7 @@ const has = require('@uppy/utils/lib/hasProperty')
 const TransloaditResults = require('./TransloaditResultsPlugin')
 
 const transloaditOptionNames = [
+  'id',
   'service',","```suggestion
  'service',
```
`id` is intentionally\* not passed in because there isn't really a reason to rename plugin instances with Robodog

<small>\* at least that was my undocumented intent!</small>",Why do we need this?
606,"@@ -3,7 +3,8 @@
   ""name"": ""uppy-build"",
   ""description"": ""Extensible JavaScript file upload widget with support for drag&drop, resumable uploads, previews, restrictions, file processing/encoding, remote providers like Instagram, Dropbox, Google Drive, S3 and more :dog:"",
   ""lint-staged"": {
-    ""*.js"": ""eslint""","Not really related, but may I ask you to add [bin config](https://docs.npmjs.com/files/package.json#bin) like so?

```json
...
""bin"": {
  ""companion"" : ""./lib/standalone/start-server.js""
},
...
```

or similar?

That way a `companion` file would be dropped in `node_modules/.bin` and folks & machines could just run `companion` (if they have it in their PATH, or start it from npm scripts), vs having to do some research to get at `./lib/standalone/start-server.js`","""version"": ""1.0.0"","
607,"@@ -30,14 +30,14 @@
 }
 
 // http://tympanus.net/codrops/2015/09/15/styling-customizing-file-inputs-smart-way/
-.uppy-DragDrop-input {
-  width: 0.1px;
-  height: 0.1px;
-  opacity: 0;
-  overflow: hidden;
-  position: absolute;
-  z-index: -1;
-}
+// .uppy-DragDrop-input {
+//   width: 0.1px;
+//   height: 0.1px;
+//   opacity: 0;
+//   overflow: hidden;
+//   position: absolute;
+//   z-index: -1;
+// }
 ",let's delete?,Can we remove these?
608,"@@ -30,34 +30,34 @@
   },
   ""dependencies"": {
     ""@purest/providers"": ""1.0.0"",
-    ""@uppy/fs-tail-stream"": ""^1.2.0"",
+    ""@uppy/fs-tail-stream"": ""1.2.0"",","I think we need to pin these versions to the versions we had in `package-lock.json`, otherwise, we will effectively be downgrade some libraries to these pinned versions","""@uppy/fs-tail-stream"": ""^1.2.0"","
609,"@@ -30,7 +30,6 @@
     ""hexo-include-markdown"": ""^1.0.2"",
     ""hexo-renderer-ejs"": ""^1.0.0"",
     ""hexo-renderer-marked"": ""2.0.0"",
-    ""hexo-renderer-scss"": ""^1.2.0"",",Replaced with a simple custom implementation https://github.com/transloadit/uppy/pull/2661/files#diff-62cdb2e4aadebffa495eadc250549237f9e5a08ebbb55d90ac1e3ea79027823d,"""hexo-renderer-scss"": ""^1.2.0"","
610,"@@ -30,7 +30,7 @@ class Uppy {
   /**
    * Instantiate Uppy
    *
-   * @param {Object} opts — Uppy options
+   * @param {object} opts — Uppy options",I thought the new jsdoc rule set actually wanted these capitalized? 🤔 ,* @param {Object} opts Uppy optio
611,"@@ -302,7 +309,7 @@ module.exports = class ThumbnailGenerator extends Plugin {
     }
   }
 
-  onRestored () {
+  onRestored = () => {","I'm not familiar with this syntax, will this still be an instance method? If not, what becomes of `this` within the `function`?",Why is this change needed?
612,"@@ -303,12 +312,25 @@ module.exports = class ThumbnailGenerator extends Plugin {
 
   onFileAdded = (file) => {
     if (!file.preview && isPreviewSupported(file.type) && !file.isRemote) {
-      this.addToQueue(file)
+      this.addToQueue(file.id)
     }
   }
 
+  /**
+   * Cancel a lazy request for a thumbnail if the thumbnail has not yet been generated.
+   */
+  onCancelRequest = (file) => {
+    const index = this.queue.indexOf(file.id)
+    if (index !== -1) {
+      this.queue.splice(index, 1)
+    }
+  }
+
+  /**
+   * Clean up the thumbnail for a file. Cancel lazy requests and free the thumbnail URL.
+   */
   onFileRemoved = (file) => {
-    const index = this.queue.indexOf(file)
+    const index = this.queue.indexOf(file.id)","Storing file IDs in the `this.queue` array now because of this: previously items would not be removed from the queue because the file object could be different (eg. metadata was changed or upload progress has happened), and then `indexOf()` would not find it.",I think this should be `if (index
613,"@@ -308,6 +313,51 @@ module.exports = class View {
     return this.plugin.core.getState()[this.plugin.stateId].activeRow === this.plugin.getItemId(file)
   }
 
+  isChecked (file) {
+    return (this.fileToId(file) in this.plugin.core.getState().files)
+  }
+
+  toggleCheckbox (e, file) {
+    e.stopPropagation()
+    e.preventDefault()
+    let {folders, files, filterInput} = this.plugin.core.getState()[this.plugin.stateId]
+    let items = folders.concat(files)
+    if (filterInput !== '') {
+      items = this.filterItems(items)
+    }
+    let itemsToToggle = [file]
+    if (this.lastCheckbox && e.shiftKey) {
+      let prevIndex = items.indexOf(this.lastCheckbox)
+      let currentIndex = items.indexOf(file)
+      if (prevIndex < currentIndex) {
+        itemsToToggle = items.slice(prevIndex, currentIndex + 1)
+      } else {
+        itemsToToggle = items.slice(currentIndex, prevIndex + 1)
+      }
+    }
+    this.lastCheckbox = file
+    if (this.isChecked(file)) {
+      for (let item of itemsToToggle) {
+        const itemId = this.fileToId(item)
+        if (itemId in this.plugin.core.getState().files) {
+          this.plugin.core.removeFile(itemId)
+        }
+      }
+    } else {
+      for (let item of itemsToToggle) {
+        this.addFile(item, true)
+      }
+    }
+  }
+
+  fileToId (file) {","@sadovnychyi what is the need for the `fileToId` method? Why not just use `this.plugin.getItemId(file)`?

Nice work btw 😉 ",`e.shiftKey` is not defined in th
614,"@@ -31,13 +31,13 @@ module.exports = class RequestClient {
 
   onReceiveResponse (response) {
     const state = this.uppy.getState()
-    const uppyServer = state.uppyServer || {}
+    const companion = state.companion || {}
     const host = this.opts.serverUrl
     const headers = response.headers
-    // Store the self-identified domain name for the uppy-server we just hit.
-    if (headers.has('i-am') && headers.get('i-am') !== uppyServer[host]) {
+    // Store the self-identified domain name for the companion we just hit.",Doesn't matter a lot for the readability of this comment but something like 'Companion instance' or 'Companion server' here would be slightly more correct (very nitpicky lol sorry),I don't think we need to check fo
615,"@@ -31,13 +31,20 @@ if (app.get('env') !== 'test') {
 // log server requests.
 app.use(morgan('combined'))
 morgan.token('url', (req, res) => {
-  // don't log access_tokens in urls
-  if (req.query && req.query.access_token) {
+  const mask = (key) => {
+    // don't log access_tokens in urls
     const query = Object.assign({}, req.query)
     // replace logged access token with xxxx character
-    query.access_token = 'x'.repeat(req.query.access_token.length)
+    query[key] = 'x'.repeat(req.query[key].length)
     return `${req.path}?${qs.stringify(query)}`
   }
+
+  if (req.query && req.query['access_token']) {
+    return mask('access_token')
+  } else if (req.query && req.query['uppyAuthToken']) {
+    return mask('uppyAuthToken')
+  }",Is there any chance of req.query containing _both_ `access_token` and `uppyAuthToken`?,I don't think we need to check fo
616,"@@ -31,31 +38,34 @@ module.exports = class RequestClient {
   }
 
   get (path) {
-    return fetch(`${this.hostname}/${path}`, {
+    return fetch(this._getUrl(path), {
       method: 'get',
-      credentials: 'include',
-      headers: {
-        'Accept': 'application/json',
-        'Content-Type': 'application/json'
-      }
+      headers: this.defaultHeaders
     })
       // @todo validate response status before calling json
       .then(this.onReceiveResponse)
       .then((res) => res.json())
   }
 
   post (path, data) {
-    return fetch(`${this.hostname}/${path}`, {
+    return fetch(this._getUrl(path), {
       method: 'post',
-      credentials: 'include',
-      headers: {
-        'Accept': 'application/json',
-        'Content-Type': 'application/json'
-      },
+      headers: this.defaultHeaders,
       body: JSON.stringify(data)
     })
       .then(this.onReceiveResponse)
-      // @todo validate response status before calling json
-      .then((res) => res.json())
+      .then((res) => {
+        if (res.status < 200 || res.status > 300) {
+          throw new Error(res.statusText)
+        }
+        return res.json()
+      })
+  }
+
+  _getUrl (url) {
+    if (url.startsWith('http:') || url.startsWith('https:')) {",nice refactor :+1: `.startsWith` is not available in IE so a regex is probably preferable,Shouldn't this be `res.status >= 
617,"@@ -31,6 +31,7 @@
     ""@uppy/core"": ""file:../core"",
     ""@uppy/dashboard"": ""file:../dashboard"",
     ""@uppy/dropbox"": ""file:../dropbox"",
+    ""@uppy/box"": ""file:../box"",","excluding box from global module for now as it will initially be released as beta
```suggestion
```","""@uppy/box"": ""file:../box"","
618,"@@ -31,6 +33,35 @@ Whether to wait for all assemblies to complete before completing the upload.
 Whether to wait for metadata to be extracted from uploaded files before completing the upload.
 If `waitForEncoding` is enabled, this has no effect.
 
+### `importFromUploadURLs`
+
+Instead of uploading to Transloadit's servers directly, allow another plugin to upload files, and then import those files into the Transloadit assembly.
+Default `false`.
+
+When enabling this option, Transloadit will *not* configure the Tus plugin to upload to Transloadit.
+Instead, a separate upload plugin must be used.
+Once the upload completes, the Transloadit plugin adds the uploaded file to the assembly.
+
+For example, to upload files to an S3 bucket and then transcode them:
+
+```js
+uppy.use(AwsS3, {
+  getUploadParameters (file) {
+    return { /* upload parameters */ }
+  }
+})
+uppy.use(Transloadit, {
+  importFromUploadURLs: true,
+  params: {
+    auth: { key: /* secret */ },
+    template_id: /* secret */
+  }
+})
+```
+
+In order for this to work, the upload plugin must assign a publically accessible `uploadURL` property to the uploaded file object.
+The Tus and S3 plugins both do this—for the XHRUpload plugin, you may have to specify a custom `getUploadResponse` function.",Should add Tus/XHRUpload docs so this can be a link.,I'm not sure if this is the best 
619,"@@ -31,7 +19,7 @@ class AddFiles extends Component {
     event.target.value = null
   }
 
-  renderPoweredByUppy () {
+  renderPoweredByUppy = () => {","Are all these changes necessary? :thinking: 

e; ah, I guess it's because it allows removing the `.bind()` calls in the constructor. I think some of these don't really need to be bound…",Why is this change needed?
620,"@@ -31,7 +31,12 @@ module.exports = class ThumbnailGenerator extends Plugin {
     const defaultOptions = {
       thumbnailWidth: null,
       thumbnailHeight: null,
-      waitForThumbnailsBeforeUpload: false
+      waitForThumbnailsBeforeUpload: false,
+      lazy: false
+    }
+
+    if (defaultOptions.lazy && defaultOptions.waitForThumbnailsBeforeUpload) {",Should be `this.opts` instead of `defaultOptions`,Why do we need to check for `defa
621,"@@ -31,7 +31,7 @@ export default class Spinner extends Plugin {
   }
 
   initEvents () {
-    this.core.emitter.on('progress', (data) => {
+    this.core.emitter.on('upload-progress', (data) => {
       const percentage = data.percentage
       const plugin = data.plugin","`const { plugin, percentage } = data`
",I think this should be `upload-pr
622,"@@ -31,7 +31,7 @@ exports.getDateName = (start, end) => {
 }
 
 exports.getAccountCreationDate = (results) => {
-  return moment(results.created_at)
+  return moment.utc(results.created_at)",zoom api timestamps are in UTC but it looks like `moment()` uses the local server time by default. this fixes that - see https://momentjs.com/docs/#/parsing/,This should be `moment.utc(result
623,"@@ -315,15 +322,43 @@ module.exports = class ThumbnailGenerator extends Plugin {
     })
   }
 
+  waitUntilAllProcessed = (fileIDs) => {
+    fileIDs.forEach((fileID) => {
+      const file = this.uppy.getFile(fileID)
+      this.uppy.emit('preprocess-progress', file, {
+        mode: 'indeterminate',
+        message: this.i18n('generatingThumbnails')
+      })
+    })
+
+    return new Promise((resolve, reject) => {
+      if (this.queueProcessing) {
+        this.uppy.on('thumbnail:all-generated', () => {",should this be `this.uppy.once` instead? Is it possible that this specific listener will always be triggered for every future thumbnail generations that will happen through out the lifetime of the Uppy instance?,This should be `this.uppy.on('thu
624,"@@ -316,7 +316,7 @@ module.exports = class Webcam extends Plugin {
     const webcamState = this.getPluginState()
 
     if (!webcamState.cameraReady) {
-      return PermissionsScreen(webcamState)
+      return PermissionsScreen(Object.assign({}, { icon: WebcamIcon }))",No need for `Object.assign` (`PermissionsScreen({ icon: WebcamIcon })`),Why do we need this change?
625,"@@ -318,6 +318,36 @@ Subscribe to an uppy-event. See below for the full list of events.
 
 Uppy exposes events that you can subscribe to in your app:
 
+### `file-added`
+
+Fired each time file is added.
+
+```javascript
+uppy.on('file-added', (fileID) => {
+  console.log('Added file', uppy.getFile(fileID))","This one should actually be:

```js
uppy.on('file-added', (file) => {
  console.log('Added file', file)
})
```",This should be `uppy.on('fi
626,"@@ -32,19 +32,19 @@ const getConfigFromEnv = () => {
     providerOptions: {
       google: {
         key: process.env.COMPANION_GOOGLE_KEY,
-        secret: process.env.COMPANION_GOOGLE_SECRET
+        secret: typeof process.env.COMPANION_GOOGLE_SECRET_FILE === 'string' ? fs.readFileSync(process.env.COMPANION_GOOGLE_SECRET_FILE).toString() : process.env.COMPANION_GOOGLE_SECRET",can we pull this into a function instead? And reuse it for others too?,I'm not sure if this is the
627,"@@ -32,22 +51,34 @@ module.exports = (props) => {
     cancelUpload: props.cancelUpload,
     toggleFileCard: props.toggleFileCard,
     removeFile: props.removeFile,
-    handleRequestThumbnail: props.handleRequestThumbnail
+    handleRequestThumbnail: props.handleRequestThumbnail,
+    handleCancelThumbnail: props.handleCancelThumbnail
   }
 
-  function renderItem (fileID) {
+  const rows = chunks(Object.keys(props.files), props.itemsPerRow)
+
+  function renderRow (row) {
     return (
-      <FileItem
-        key={fileID}
-        {...fileProps}
-        file={props.files[fileID]}
-      />
+      // Use the first file ID as the key—this should not change across rerenders
+      <div role=""presentation"" key={row[0]}>","I think we should put all the `presentation`-roles and `list`-roles in one place, and add a comment about why we're doing this.

E.g.:
1. Move `<VirtualList role=""list""`/> prop inside the `<VirtualList/>`.
2. Instead of `props.renderRow` - pass `props.renderItem` and `props.getRowKey`.
3. Add a comment in `VirtualList` about what `presentation` is supposed to be doing here.

What do you think?",I think this should be `<di
628,"@@ -32,48 +32,46 @@
     ""eslint"": ""^3.19.0"",
     ""eslint-config-standard"": ""^10.2.1"",","standard v11 has been out for a while but it has a different indent rule which requires some code changes, didn't want to do any in this pr","""eslint"": ""^3.19.0"","
629,"@@ -32,48 +32,46 @@
     ""eslint"": ""^3.19.0"",
     ""eslint-config-standard"": ""^10.2.1"",
     ""eslint-config-standard-preact"": ""^1.1.6"",
-    ""eslint-plugin-compat"": ""^2.3.0"",
-    ""eslint-plugin-import"": ""^2.8.0"",
-    ""eslint-plugin-jest"": ""^21.6.2"",
+    ""eslint-plugin-compat"": ""^2.4.0"",
+    ""eslint-plugin-import"": ""^2.13.0"",
+    ""eslint-plugin-jest"": ""^21.17.0"",
     ""eslint-plugin-node"": ""^4.2.3"",
-    ""eslint-plugin-promise"": ""^3.6.0"",
-    ""eslint-plugin-standard"": ""^3.0.1"",
-    ""exorcist"": ""^1.0.0"",
+    ""eslint-plugin-promise"": ""^3.8.0"",
+    ""eslint-plugin-standard"": ""^3.1.0"",
+    ""exorcist"": ""^1.0.1"",
     ""fakefile"": ""0.0.9"",
     ""github-contributors-list"": ""1.2.3"",
     ""glob"": ""^7.1.2"",
     ""isomorphic-fetch"": ""2.2.1"",
-    ""jest"": ""^22.0.6"",
+    ""jest"": ""^22.4.4"",","jest 23 is out but tests failed with it, so i kept it at 22 for now.",This should be `^21.17.0`
630,"@@ -32,6 +40,7 @@ const ReduxDevTools = require('./plugins/ReduxDevTools')
 
 module.exports = {
   Core,
+  lib,","not sure how else to expose this. Happy to get suggestions here. I thought about adding it to core, but I didn't go that route because of the future idea of breaking some parts of uppy to its own npm package. If it were in core then it would be against that future idea.

In any case, I think it is important to expose these modules to allow users write their own custom plugins with these helpers. If there's an understanding I am missing, please let me know.",
631,"@@ -322,8 +322,20 @@ class Uppy {
 
     if (allowedFileTypes) {
       const isCorrectFileType = allowedFileTypes.filter((type) => {
-        if (!file.type) return false
-        return match(file.type, type)
+        // if (!file.type) return false
+
+        // is this is a mime-type
+        if (type.indexOf('/') > -1) {
+          if (!file.type) return false
+          return match(file.type, type)
+        }
+
+        // otherwise this is likely an extension
+        if (type.startsWith('.') > -1) {",`.startsWith()` returns a bool but is also not available in some older browsers—`type[0] === '.'` would work,I'm not sure if this is the
632,"@@ -323,6 +331,30 @@ uppy.upload().then((result) => {
 })
 ```
 
+### `uppy.pauseResume(fileID)`
+
+Toggle pause/resume on an upload. Will only work if resumable upload plugin, such as [Tus](/docs/tus/), is used.
+
+### `uppy.pauseAll()`
+
+Pause all uploads. Will only work if resumable upload plugin, such as [Tus](/docs/tus/), is used.",a resumable upload plugin,I don't think we need this 
633,"@@ -323,6 +331,30 @@ uppy.upload().then((result) => {
 })
 ```
 
+### `uppy.pauseResume(fileID)`
+
+Toggle pause/resume on an upload. Will only work if resumable upload plugin, such as [Tus](/docs/tus/), is used.
+
+### `uppy.pauseAll()`
+
+Pause all uploads. Will only work if resumable upload plugin, such as [Tus](/docs/tus/), is used.
+
+### `uppy.resumeAll()`
+
+Resume all uploads. Will only work if resumable upload plugin, such as [Tus](/docs/tus/), is used.
+
+### `uppy.retryUpload(fileID)`
+
+Retry an upload (after an error, for example).
+
+### `uppy.retryAll()`
+
+Retry all uploads (after an error, for example).
+
+### `uppy.cancelAll()`
+
+Cancel all uploads, resets progress and removes all files.","Tenses: Cancel all, *reset* progress, *remove* all files :)",I don't think we need to sa
634,"@@ -326,7 +337,7 @@ module.exports = class DashboardUI extends Plugin {
     }
 
     const pauseUpload = (fileID) => {
-      this.core.emit.emit('core:upload-pause', fileID)
+      this.core.emit('core:upload-pause', fileID)",whelp! good catch :D,Why this change?
635,"@@ -327,7 +331,11 @@ module.exports = class Tus extends Plugin {
       })
 
       socket.on('success', (data) => {
-        this.uppy.emit('upload-success', file, data, data.url)
+        const uploadResp = {
+          uploadURL: data.url
+        }
+
+        this.uppy.emit('upload-success', file, uploadResp)
         this.resetUploaderReferences(file.id)",Should `data` be passed as `body` here? 🤔,Why do we need this change?
636,"@@ -329,10 +331,7 @@ class Uploader {
    * start the tus upload
    */
   uploadTus () {
-    const fname = path.basename(this.options.path)
-    const ftype = this.options.metadata.type
-    const metadata = Object.assign({ filename: fname, filetype: ftype }, this.options.metadata || {})","hah ok, so we did already do it here!",Why is this removed?
637,"@@ -329,5 +329,38 @@ describe('uploader/ThumbnailGeneratorPlugin', () => {
         getContext: canvas.getContext
       })
     })
+
+    it('should upsize if original image is smaller than target size', () => {
+      const core = {}
+      const plugin = new ThumbnailGeneratorPlugin(core)
+      const image = {
+        width: 100,
+        height: 80
+      }
+      plugin.downScaleInSteps = jest.fn().mockReturnValue({
+        image: {
+          height: 160,
+          width: 200
+        },
+        sourceWidth: 200,
+        sourceHeight: 160
+      })",the `downScaleInSteps` method was removed recently so I don't think it's necessary to mock it here—we should also remove it from the other tests,Why do we need this?
638,"@@ -33,7 +33,9 @@ const Tus = require('@uppy/tus')
 
 const uppy = Uppy({ autoProceed: false })
   .use(Dashboard, { trigger: '#select-files' })
-  .use(GoogleDrive, { target: Dashboard, companionUrl: 'https://companion.uppy.io' })
+  .use(GoogleDrive, { target: Dashboard, companion","The option name is actually `companionUrl`, we can’t change that here :) See https://uppy.io/docs/facebook/#Options",".use(GoogleDrive, { target:"
639,"@@ -330,7 +330,9 @@ module.exports = class Webcam extends Plugin {
       recording: webcamState.isRecording,
       mirror: this.opts.mirror,
       src: this.stream
-    }))
+    })
+
+    return <CameraScreen {...CameraScreenProps} />","We could also only use JSX spread here instead of object.assign:

```js
<CameraScreen
  {...webcamState}
  onSnapshot={this.takeSnapshot}
  /* ... etc ... */
  src={this.stream}
/>
```",Why do we need this?
640,"@@ -333,7 +336,9 @@ module.exports = class DashboardUI extends Plugin {
     totalSize = prettyBytes(totalSize)
     totalUploadedSize = prettyBytes(totalUploadedSize)
 
-    const isAllComplete = state.totalProgress === 100
+    const isAllComplete = state.totalProgress === 100 &&
+      completeFiles.length === Object.keys(files).length &&
+      processingFiles.length === 0","This needed some additional checks, because `totalProgress` refers to upload progress, but doesn't tell if postprocessing completed. I'm actually not sure if the `completeFiles.length === ` check is still necessary, it may be a leftover of my first shot at this, I can look into that tomorrow.","I don't think we need to check for `completeFiles.length === Object.keys(files).length` here. If `completeFiles.length === 0`, then `processingFiles.length === 0`."
641,"@@ -338,6 +338,8 @@ class Uppy {
           },
           size: file.data.size || 'N/A',
           isRemote: isRemote,
+          isCheckbox: file.isCheckbox || false,
+          isFolder: file.isFolder || false,
           remote: file.remote || '',","Not sure how I feel about adding `isCheckbox` to a file object. It seems it’s only used to not close the provider panel when a checkbox is selected. I think we could separate the file name and checkbox is the markup and have two different click handlers for those cases. 

Or maybe it’s better to not show checkboxes at all do multiselect on click, and then submit only when “done” is pressed?",Shouldn't this be `file.isFolder`?
642,"@@ -339,14 +369,17 @@ module.exports = class View {
       addFile: this.addFile,
       filterItems: this.filterItems,
       filterQuery: this.filterQuery,
+      toggleSearch: this.toggleSearch,
       sortByTitle: this.sortByTitle,
       sortByDate: this.sortByDate,
       logout: this.logout,
       demo: this.plugin.opts.demo,
       isActiveRow: this.isActiveRow,
       getItemName: this.plugin.getItemName,
       getItemIcon: this.plugin.getItemIcon,
-      handleScroll: this.handleScroll
+      handleScroll: this.handleScroll,
+      title: this.plugin.title,
+      defaultViewType: this.opts.defaultViewType","should we just call this `viewType`? Seems more apt that `defaultViewType`. The default view type might be 'list', but regardless of what this value is overridden to, the attribute name remains.

*I'm not sure if I articulated this well, but hopefully you get what I mean*
 🙂",Why do we need this?
643,"@@ -339,9 +339,11 @@ uppy.addFile({
 
 `addFile` gives an error if the file cannot be added, either because `onBeforeFileAdded(file)` gave an error, or because `uppy.opts.restrictions` checks failed.
 
+If you try to add a file that already exists, `addFile` will throw an error. Unless that duplicate file was dropped/selected from a folder — duplicate files from different folders are allowed, when selected with that folder. This is because we add `file.meta.relativePath` to the `file.id`.","When we select files from different folders there is no `.relativePath`, we only have `.relativePath` on drop.","I think it would be better to say something like: > If you try to add a file that already exists, `addFile` will throw an error. If you try to add a file that alre"
644,"@@ -34,6 +34,8 @@ function assertServerError (res) {
 }
 
 module.exports = class AwsS3Multipart extends Plugin {
+  static VERSION = require('../package.json').version","Is there an advantage to this vs setting `this.version` in the constructor? Cleaner this way, at the top?",
645,"@@ -344,7 +342,13 @@ class Uploader {
       resume: true,
       retryDelays: [0, 1000, 3000, 5000],
       uploadSize: this.bytesWritten,
-      metadata,
+      metadata: Object.assign(
+        {
+          // file name and type as specified by tus protocol","Nitpicking, but is it defined by the protocol, or just the tusd implementation? I didn’t find it in the protocol, so maybe linking here: https://github.com/tus/tusd/blob/5b376141903c1fd64480c06dde3dfe61d191e53d/unrouted_handler.go#L614-L646?","nit: `Object.assign({}, metadata, {`"
646,"@@ -346,8 +409,24 @@ module.exports = class Tus extends Plugin {
 
         this.uppy.emit('upload-success', file, uploadResp)
         this.resetUploaderReferences(file.id)
+        queuedRequest.done()","![image](https://user-images.githubusercontent.com/7578559/63731836-0451f480-c88b-11e9-93f0-d6828b155b9c.png)

I got this error here once, but I'm not sure why, and I don't seem to be able to reproduce it.",Why do we need to call done here?
647,"@@ -35,12 +30,181 @@ export default class Core {
 
     this.translator = new Translator({locales: this.opts.locales})
     this.i18n = this.translator.translate.bind(this.translator)
-    // console.log(this.i18n('filesChosen', {smart_count: 3}))
 
     // Set up an event EventEmitter
     this.emitter = new ee.EventEmitter()
 
-    this.totalFilesSelectedCount = 0
+    this.defaultState = {
+      selectedFiles: {},
+      uploadedFiles: {},
+      modal: {
+        isHidden: true,
+        targets: []
+      }
+    }
+
+    this.state = Object.assign({}, this.state, this.defaultState)
+  }
+
+  /**
+   * Iterate on all plugins and run `update` on them. Called when state changes
+   *
+   */
+  updateAll () {
+    Object.keys(this.plugins).forEach((pluginType) => {
+      this.plugins[pluginType].forEach((plugin) => {
+        plugin.update(this.state)
+      })
+    })
+  }
+
+  /**
+   * Reset state to defaultState, used when Modal is closed, for example
+   *
+   */
+  resetState () {
+    this.setState(this.defaultState)
+  }
+
+  /**
+   * Updates state
+   *
+   * @param {newState} object
+   */
+  setState (newState) {
+    this.log(`Update state with: ${newState}`)
+    this.state = Object.assign({}, this.state, newState)
+    this.updateAll()
+  }
+
+  /**
+   * Gets current state, making sure to make a copy of the state object and pass that,
+   * instead of an actual reference to `this.state`
+   *
+   */
+  getState () {
+    return Object.assign({}, this.state)","I'm a little concerned it won't be clear that we're returning a copy of the state, rather than the actual state object to someone writing plugins.
",Why do we need this?
648,"@@ -35,20 +35,21 @@ module.exports = class ThumbnailGenerator extends Plugin {
    */
   createThumbnail (file, targetWidth) {
     const originalUrl = URL.createObjectURL(file.data)
+    const revoke = () => URL.revokeObjectURL(originalUrl)
     const onload = new Promise((resolve, reject) => {
       const image = new Image()
       image.src = originalUrl
       image.onload = () => {
-        URL.revokeObjectURL(originalUrl)
         resolve(image)
       }
       image.onerror = () => {
         // The onerror event is totally useless unfortunately, as far as I know
-        URL.revokeObjectURL(originalUrl)
         reject(new Error('Could not create thumbnail'))
       }
     })
 
+    onload.then(revoke, revoke)
+","revoke, then revoke? 🤔",I'm not sure if this is the best way to do this. I think it would be better to use a `Promise.all` instead.
649,"@@ -35,6 +35,11 @@
         color: purple;
       }
     </style>
+
+    <!-- polyfills for IE11 -->
+    <script src=""https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.min.js""></script>
+    <script src=""https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.min.js""></script>","1. I don’t think both promise files are needed, we used to recommend just `es6-promise.auto.min.js`, and I think it worked in our tests: https://github.com/transloadit/uppy/pull/1576/files. I could be wrong.
2. We have these polyfills included in the website examples, like https://uppy.io/examples/dashboard/. Maybe that’s enough for testing, and we could keep `dev` smaller/faster? On the one hand, it’s not too big of an addition, on the other it’s external resources just for IE testing.","I think this should be `<script type=""text/javascript"">`"
650,"@@ -35,7 +35,7 @@ A site-wide unique ID for the instance.
 If multiple Uppy instances are being used, for example on two different pages, an `id` should be specified.
 This allows Uppy to store information in `localStorage` without colliding with other Uppy instances.
 
-Note that this ID should be persistent across page reloads and navigation—it shouldn't be a random number that's different every time Uppy is loaded.
+Note that this ID should be persistent across page reloads and navigation — it shouldn't be a random number that's different every time Uppy is loaded.","IIRC em dashes do not require spaces around them, do they?",Note that this ID should be persistent across page reloads and navigation should not be a random number that's different every time Uppy is loaded.
651,"@@ -353,6 +354,30 @@ function findDOMElement (element) {
   }
 }
 
+function getSocketHost (url) {
+  // get the host domain
+  var regex = /^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?(?:www\.)?([^\n]+)/
+  var host = regex.exec(url)[1]
+  var socketProtocol = location.protocol === 'https:' ? 'wss' : 'ws'
+
+  return `${socketProtocol}://${host}`
+}
+
+function _emitSocketProgress (uppyInstance, progressData, file) {","Can you rename `uppyInstance` to something like `uploader`? I think that's a bit clearer, I thought it was referring to a `Core` instance first.",I don't think you need the `_` in the function name.
652,"@@ -355,7 +355,8 @@ describe('src/Core', () => {
         })
         .then(() => {
           const fileId = Object.keys(core.state.files)[0]
-          core.emit('preprocess-progress', fileId, {
+          const file = core.state.files[fileId]",`core.getFile(fileId)`?,Why is this change needed?
653,"@@ -358,14 +358,14 @@ module.exports = class ProviderView {
       state = this.plugin.getPluginState()
       state.selectedFolders[folderId] = { loading: false, files: files }
       this.plugin.setPluginState({ selectedFolders: folders })
-      const dashboard = this.plugin.uppy.getPlugin('Dashboard')","I think we have to keep this as a fallback for now, else it's a small breaking change :(","const { folders, files } = this.plugin"
654,"@@ -36,6 +36,12 @@ In the [CDN package](/docs/#With-a-script-tag), it is available on the `Uppy` gl
 const GoogleDrive = Uppy.GoogleDrive
 ```
 
+## CSS
+
+Dashboard plugin is recommended as a container to all Provider plugins, including Google Drive. If you are using Dashboard, it [comes with all the nessesary styles](/docs/dashboard/#CSS) for Dropbox as well.
+
+⚠️ If you are feeling adventerous, and want to use Google Drive plugin separately, without Dashboard, make sure to include `@uppy/provider-views/dist/style.css` (or `style.min.css`) CSS file. This is experimental, not officialy supported and not recommened.",:point_up: ,I don't think we need to mention Dropbox here.
655,"@@ -36,6 +36,13 @@ In the [CDN package](/docs/#With-a-script-tag), it is available on the `Uppy` gl
 const Dropbox = Uppy.Dropbox
 ```
 
+## CSS
+
+Dashboard plugin is recommended as a container to all Provider plugins, including Dropbox. If you are using Dashboard, it [comes with all the nessesary styles](/docs/dashboard/#CSS) for Dropbox as well.
+
+⚠️ If you are feeling adventerous, and want to use Dropbox plugin separately, without Dashboard, make sure to include `@uppy/provider-views/dist/style.css` (or `style.min.css`) CSS file. This is experimental, not officialy supported and not recommened.","adventerous → adventurous
recommened → recommended

Same in a few other places:",I don't think we need the `.min.css` file.
656,"@@ -36,6 +36,17 @@ In the [CDN package](/docs/#With-a-script-tag), it is available on the `Uppy` gl
 const Url = Uppy.Url
 ```
 
+## CSS
+
+The `@uppy/url` plugin requires the following CSS for styling:
+
+```js
+import '@uppy/core/dist/style.css'
+import '@uppy/url/dist/style.css'
+```
+
+Import general Core styles from `@uppy/core/dist/style.css` first, then add the Informer styles from `@uppy/url/dist/style.css`. A minified version is also available as `style.min.css` at the same path. The way to do import depends on your build system.","```suggestion
Import general Core styles from `@uppy/core/dist/style.css` first, then add the Url styles from `@uppy/url/dist/style.css`. A minified version is also available as `style.min.css` at the same path. The way to do import depends on your build system.
```",I don't think we need the `@uppy/` prefix here.
657,"@@ -36,6 +36,17 @@ In the [CDN package](/docs/#With-a-script-tag), it is available on the `Uppy` gl
 const Webcam = Uppy.Webcam
 ```
 
+## CSS
+
+The `@uppy/webcam` plugin requires the following CSS for styling:
+
+```js
+import '@uppy/core/dist/style.css'
+import '@uppy/webcam/dist/style.css'
+```
+
+Import general Core styles from `@uppy/core/dist/style.css` first, then add the Informer styles from `@uppy/webcam/dist/style.css`. A minified version is also available as `style.min.css` at the same path. The way to do import depends on your build system.","some plugin docs refer to Informer instead of the actual plugin name

```suggestion
Import general Core styles from `@uppy/core/dist/style.css` first, then add the Webcam styles from `@uppy/webcam/dist/style.css`. A minified version is also available as `style.min.css` at the same path. The way to do import depends on your build system.
```",I'm not sure this is the best way to do this.
658,"@@ -36,61 +36,65 @@ Returns current state.
 
 #### setState({itemToUpdate: data})
 
-Updates state with new state (Object.assign({}, this.state, newState)) and runs `updateAll()`.
+Updates state with new state (Object.assign({}, this.state, newState)) and then runs `updateAll()`.
 
 #### updateAll()
 
-Iterates over all `plugins` and runs `update` on each of them.
+Iterates over all `plugins` and runs `update()` on each of them.
 
 #### updateMeta(data, fileID)
 
-Given `{size: 1200}` adds that metadata to a file.
+Given `{ size: 1200 }` adds that metadata to a file.
 
 #### addFile(file)
 
-Adds a new file to `state`, method used by `acquirer` plugins like Drag & Drop and Google Drive,
-or can be called by the user on uppy instance directly.
+Adds a new file to `state`. This method is used by `acquirer` plugins like Drag & Drop, Webcam and Google Drive,
+or can be called by the user on uppy instance directly: `uppy.addFile(myFile)`.
 
-Normalizes that file: tries to figure out file type by extension if mime is missing, use noname if name is missing and so on.
+Normalizes that file too: tries to figure out file type by extension if mime is missing, use noname if name is missing, sets progress: 0  and so on.
 
 #### removeFile(fileID)
 
 Removes file from `state`.
 
 #### addThumbnail(fileID)
 
-Reads image from file’s data object in base64 and resizes that, using canvas. Then `state` is updated with a file that has thumbnail it it. Thumbnails are used for file previews by plugins like Dashboard.
+Reads image from file’s data object in base64 and resizes that, using canvas. Then `state` is updated with a file that has thumbnail in it. Thumbnails are used for file previews by plugins like Dashboard.
 
 #### state.capabilities
 
-Core (or plugins) check and set capabilities, like: `resumable: true`, `touch: false`, `dragdrop: true` that could possibly be used by all plugins.
+Core (or plugins) check and set capabilities, like: `resumable: true` (this is set by Tus Plugin), `touch: false`, `dragdrop: true`, that could possibly be used by all plugins.
 
 #### log(msg)
 
 Logs stuff to console only if user specified `debug: true`, silent in production.
 
 #### core.on('event', action), core.emit('event'), core.emitter
 
-An event emitter embedded into Core that is passed to plugins and can be used directly on the instance. Event emitter is used for plugins to communicate with other plugins and Core.
+An event emitter embedded into Core that is passed to Plugins, and can be used directly on the instance. Used by Plugins for communicating with other Plugins and Core.
 
 For example:
 
-- Core listens for `core:upload-progress` event and calculates speed and ETA for one file, that the event was about, and for all files currently in progress.
+- Core listens for `core:upload-progress` event and calculates speed & ETA for all files currently in progress. *Uploader plugins could just call core.updateProgress().*
 - Core checks if browser in offline or online and emits `core:is-offline` or `core:is-online` that other plugins can listen to.
-- Any plugin can emit `informer` event that `Informer` plugin can use to display info bubbles. Currently only used in the Dashboard plugin. Example: `core.emitter.emit('informer', 'Connected!', 'success', 3000)`. (Should this be a Core method instead of plugin?).
-- Uploader plugins listen to `core:upload` event (can be emitted after a file has been added or when upload button has been pressed), get files via `core.getState().files`, filter those that are not marked as complete and upload them, emitting progress events.
+- Any plugin can emit `informer` event that `Informer` plugin can use to display info bubbles. Currently only used in the Dashboard plugin. Example: `core.emitter.emit('informer', 'Connected!', 'success', 3000)`. (Should this be a Core method instead of Plugin?). *Could be replaced by core.inform(info) method that will just update state with info.*
+- Uploader plugins listen to `core:upload` event (can be emitted after a file has been added or when upload button has been pressed), get files via `core.getState().files`, filter those that are not marked as complete and upload them, emitting progress events. *This could be replaced by core.upload() method that will loop through all `uploaders` and run `upload()` on them, or we could only allow one uploader.*
+
+*Should most or all of the events from the above be replaced with method calls? Should event-emitter be used for internal communication or just for the user to hook on to, like `uppy.on(core:upload:complete, doStuff)`? Right now its both, same event-emitter serves as a communication bus inside Uppy + its exposed to the user outside. Inspiration for using it as a bus came from Substack’s example here https://github.com/substack/training/blob/3041b1e4e3908d4df1b26cf578c34cd4df8fe9b7/web-dev-whirlwind/example/arch/bus/actions.js, and somewhat from Redux and Choo’s send https://github.com/yoshuawuyts/choo/#views.*
 
 *See discussion about Core and Event Emitter: https://github.com/transloadit/uppy/issues/116#issuecomment-247695921*
 
 ## Plugins
 
-Plugins extend the functionality of Core (which itself is very much barebones, does almost nothing).
+Plugins extend the functionality of Core (which itself is very much barebones, does almost nothing). Plugins actually do the work — select files, modify and upload them, and show the UI.
+
+Plugins that have some UI can be mounted anywhere in the dom. With current design you can have a Drag & Drop area in `#dragdrop` and Progressbar in `body`. Plugins can also be mounted into other plugins that support that, like Dashboard.
 
-Each plugin extends `Plugin` class with default methods that can be overwritten:
+Each plugin extends `Plugin` class with default methods that can be overridden:
 
 #### update()
 
-Gets called when state is changes and `updateAll()` is called from Core. Checks if a DOM element (tree) has been created with a reference for it stored in plugin’s `this.el`. If so, crates a new element (tree) `const newEl = this.render(currentState)` on current plugin and then calls `yo.update(this.el, newEl)` to effectively update the existing element to match the new one (morphdom is behind that).
+Gets called when state changes and `updateAll()` is called from Core. Checks if a DOM element (tree) has been created with a reference for it stored in plugin’s `this.el`. If so, crates a new element (tree) `const newEl = this.render(currentState)` for current plugin and then calls `yo.update(this.el, newEl)` to effectively update the existing element to match the new one (morphdom is behind that).","crates-> creates
",I don't think we should remove this line.
659,"@@ -36,7 +29,8 @@ class UrlUI extends Component {
         aria-label={this.props.i18n('enterUrlToImport')}
         placeholder={this.props.i18n('enterUrlToImport')}
         onkeyup={this.handleKeyPress}
-        ref={(input) => { this.input = input }} />
+        ref={(input) => { this.input = input }}
+        data-uppy-super-focusable />",`ref={(input)` not needed here?,Why do we need this?
660,"@@ -36,7 +36,7 @@ function addDashboardPlugin (uppy, opts, overrideOpts) {
   })
 
   const inline = overrideOpts.inline == null ? dashboardOpts.inline : overrideOpts.inline
-  if (inline === false) {
+  if (!inline) {",@arturi this is where we were checking it inside Robodog to determine whether modal options should be passed through,`if (inline === false)`
661,"@@ -361,8 +361,10 @@ data = {
 ```
 
 ```javascript
-uppy.on('upload-progress', (data) => {",the `data` object snippet still has an `id` up here—i think we can probably remove it entirely because you added the object shape in a comment in this code block.,import uppy from 'uppy';
662,"@@ -365,19 +366,27 @@ module.exports = class ThumbnailGenerator extends Plugin {
   }
 
   install () {
-    this.uppy.on('file-added', this.onFileAdded)
     this.uppy.on('file-removed', this.onFileRemoved)
-    this.uppy.on('restored', this.onRestored)
+    if (this.opts.lazy) {
+      this.uppy.on('thumbnail:request', this.onFileAdded)","When scrolling a list of non-image files, this results in queue events like this:

<img width=""1227"" alt=""Screen Shot 2019-11-27 at 19 14 59"" src=""https://user-images.githubusercontent.com/1199054/69740292-399c0600-114a-11ea-9d52-e57bc3696833.png"">

Should we add `isPreviewSupported(file.type)` to `onFileAdded`?",Shouldn't this be `if (!this.opts.lazy)`?
663,"@@ -365,6 +382,23 @@ module.exports = class Webcam extends Plugin {
     }, 1000)
   }
 
+  changeVideoSource (deviceId) {
+    this.stop()
+    this.start(deviceId)
+  }
+
+  getVideoSources () {
+    this.videoSources = []
+    this.mediaDevices.enumerateDevices().then(res => {
+      this.videoSources = []
+      res.forEach((device) => {","We can do `this.videoSources = res.filter()` here, using [Array#filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter).",Why do we need this?
664,"@@ -367,7 +367,7 @@ function copyToClipboard (textToCopy, fallbackString) {
     const magicCopyFailed = (err) => {
       document.body.removeChild(textArea)
       window.prompt(fallbackString, textToCopy)
-      return reject('Oops, unable to copy displayed fallback prompt: ' + err)
+      return reject(new Error('Oops, unable to copy displayed fallback prompt: ' + err))
     }","> unable to copy displayed fallback prompt

does this mean “unable to copy, so displayed fallback prompt instead”? :) should it reject if the prompt is successful shown?",I think this should be `new Error(`
665,"@@ -37,19 +37,6 @@ module.exports = class GoogleDrive extends Plugin {
     this.view = new DriveProviderViews(this, {
       provider: this.provider
     })
-    // Set default state for Google Drive
-    this.setPluginState({
-      authenticated: false,
-      files: [],
-      folders: [],
-      directories: [],
-      activeRow: -1,
-      filterInput: '',
-      isSearchVisible: false,
-      hasTeamDrives: false,
-      teamDrives: [],
-      teamDriveId: ''","This teamDrive stuff is specific to gdrive, should it be kept so it's still initialised properly? Or added to the DriveProviderViews constructor maybe?",Why is this being removed?
666,"@@ -37,3 +37,7 @@ uppy.use(Instagram, {target: Dashboard, serverUrl: 'http://localhost:3020'})
 const Url = require('@uppy/url')
 uppy.use(Url, {target: Dashboard, serverUrl: 'http://localhost:3020'})
 ```
+
+⚠️ The [Dashboard](/docs/dashboard) plugin is recommended as a universal container to all Provider plugins. It also comes with file previews, progress reporting and more. If you are using the Dashboard, it already [comes with all the nessesary styles](/docs/dashboard/#CSS) and functionality for Providers to work well.
+
+If you are feeling adventerous, you can technically use a Provider plugin separately, without the Dashboard. Make sure to then include `@uppy/provider-views/dist/style.css` (or `style.min.css`) CSS file. But this is experimental, not officialy supported and not recommened.",:point_up: ,I don't think we need the `/` at the end.
667,"@@ -370,6 +370,7 @@ module.exports = class Webcam extends Plugin {
           // eslint-disable-next-line compat/compat
           recordedVideo: URL.createObjectURL(file.data),
         })
+        this.opts.mirror = false",Will this reset if you cancel and then re-record?,Why is this needed?
668,"@@ -370,8 +380,13 @@ module.exports = class XHRUpload extends Plugin {
       files.forEach((file, i) => {
         const opts = this.getOptions(file)
 
+        // Set `file.data.type` in the blob to `file.meta.type`,
+        // because we might have detected a more accurate file type in Uppy
+        // https://stackoverflow.com/a/50875615
+        file.data = file.data.slice(0, file.data.size, file.meta.type)","I would prefer doing `const data = file.data.slice()` here instead of mutating the object, state isn't supposed to be modified outside of setState() calls","I think this should be `file.data.slice(0, file"
669,"@@ -372,6 +372,9 @@ uppy.addFile({
   name: 'my-file.jpg', // file name
   type: 'image/jpeg', // file type
   data: blob, // file blob
+  meta: {
+      relativePath: string, // optional, determines the unique relative path to build the file uppy id","The file ID is kind of a detail. I think the important thing for end-users is that it allows you to add multiple identical files. Maybe we can do something like this?
```suggestion
    // optional, store the directory path of a file so Uppy can tell identical files in different directories apart
    relativePath: webkitFileSystemEntry.relativePath,
```",I don't think we need this.
670,"@@ -379,24 +388,24 @@ module.exports = class DashboardUI extends Plugin {
       .map(attachRenderFunctionToTarget)
 
     const startUpload = (ev) => {
-      this.core.upload().catch((err) => {
+      this.uppy.upload().catch((err) => {
         // Log error.
-        this.core.log(err.stack || err.message || err)
+        this.uppy.log(err.stack || err.message || err)
       })
     }
 
     const cancelUpload = (fileID) => {
-      this.core.emit('core:upload-cancel', fileID)
-      this.core.emit('core:file-remove', fileID)
+      this.uppy.emit('upload-cancel', fileID)
+      this.uppy.removeFile(fileID)",++ nice catch,Why do we need to remove the file here?
671,"@@ -38,11 +38,16 @@ const StatusBar = Uppy.StatusBar
 
 ## CSS
 
-The `@uppy/status-bar` plugin includes a CSS file for styling. If you are using the [`@uppy/dashboard`](/docs/dashboard) plugin, you do not need to include the styles for the StatusBar, because the Dashboard already includes it.
+The `@uppy/status-bar` plugin requires the following CSS for styling:
 
-The CSS file lives at `@uppy/status-bar/dist/style.css`. A minified version can be found at `@uppy/status-bar/dist/style.min.css`.
+```js
+import '@uppy/core/dist/style.css'
+import '@uppy/status-bar/dist/style.css'
+```
+
+Import general Core styles from `@uppy/core/dist/style.css` first, then add the Informer styles from `@uppy/status-bar/dist/style.css`. A minified version is also available as `style.min.css` at the same path. The way to do import depends on your build system.","```suggestion
Import general Core styles from `@uppy/core/dist/style.css` first, then add the Progress Bar styles from `@uppy/status-bar/dist/style.css`. A minified version is also available as `style.min.css` at the same path. The way to do import depends on your build system.
```",I don't think this is the right way to do this.
672,"@@ -38,6 +38,12 @@ In the [CDN package](/docs/#With-a-script-tag), it is available on the `Uppy` gl
 const Instagram = Uppy.Instagram
 ```
 
+## CSS
+
+Dashboard plugin is recommended as a container to all Provider plugins, including Instagram. If you are using Dashboard, it [comes with all the nessesary styles](/docs/dashboard/#CSS) for Dropbox as well.
+
+⚠️ If you are feeling adventerous, and want to use Instagram plugin separately, without Dashboard, make sure to include `@uppy/provider-views/dist/style.css` (or `style.min.css`) CSS file. This is experimental, not officialy supported and not recommened.",:point_up: ,I don't think we need the `.min.css` file
673,"@@ -381,6 +393,7 @@ class Uppy {
       fileName = 'noname'
     }
     const fileExtension = Utils.getFileNameAndExtension(fileName).extension
+    console.log(fileExtension)",forgot to remove this?,Remove this line.
674,"@@ -383,7 +383,50 @@ module.exports = class XHRUpload extends Plugin {
       }).then((res) => {
         const token = res.token
         const host = getSocketHost(file.remote.companionUrl)
-        const socket = new Socket({ target: `${host}/api/${token}` })
+        const socket = new Socket({ target: `${host}/api/${token}`, autoOpen: false })
+
+        this.onFileRemove(file.id, () => {
+          socket.send('pause', {})
+          queuedRequest.abort()
+          resolve(`upload ${file.id} was removed`)
+        })
+
+        this.onPause(file.id, (isPaused) => {","I thought xhr uploads can’t be pause-resumed? Or is this for `aws-s3-multipart` and such, that use xhr-upload?",Shouldn't this be `queuedRequest.abort()`
675,"@@ -385,11 +386,37 @@ class Uppy {
   }
 
   removeFile (fileID) {
-    const updatedFiles = Object.assign({}, this.getState().files)
+    const { files, currentUploads } = this.state
+    const updatedFiles = Object.assign({}, files)
     const removedFile = updatedFiles[fileID]
     delete updatedFiles[fileID]
 
-    this.setState({files: updatedFiles})
+    // Remove this file from its `currentUpload`.
+    const updatedUploads = Object.assign({}, currentUploads)
+    const removeUploads = []
+    Object.keys(updatedUploads).forEach((uploadID) => {
+      const newFileIDs = currentUploads[uploadID].fileIDs.filter((uploadFileID) => uploadFileID !== fileID)
+      // Remove the upload if no files are associated with it anymore.
+      if (newFileIDs.length === 0) {
+        removeUploads.push(uploadID)
+        return
+      }
+
+      updatedUploads[uploadID] = Object.assign({}, currentUploads[uploadID], {
+        fileIDs: newFileIDs
+      })
+    })
+
+    this.setState({
+      currentUploads: updatedUploads,
+      files: updatedFiles
+    })
+
+    removeUploads.forEach((uploadID) => {
+      this.removeUpload(uploadID)
+    })
+
+    this.calculateTotalProgress()
     this._calculateTotalProgress()",Accidental duplicate `calculateTotalProgress` here.,Why do we need to do this?
676,"@@ -385,7 +389,15 @@ class Uploader {
     const formData = Object.assign(
       {},
       this.options.metadata,
-      { [this.options.fieldname]: file }
+      {
+        [this.options.fieldname]: {
+          value: file,
+          options: {
+            filename: this.uploadFileName,
+            contentType: this.options.metadata.type
+          }
+        }
+      }","Maybe a comment/link here too, as to why `filename` and `contentType`? Stating that it’s conventional and linking to https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Disposition#Directives and https://github.com/request/request?",Why do we need this?
677,"@@ -39,6 +39,37 @@ In the [CDN package](/docs/#With-a-script-tag), it is available on the `Uppy` gl
 const GoogleDrive = Uppy.GoogleDrive
 ```
 
+## Setting  Up
+
+To use the Google Drive provider, you need to configure the Google Drive keys that Companion should use. With the standalone Companion server, specify environment variables:
+```shell
+export COMPANION_GOOGLE_KEY=""Google Drive OAuth client ID""
+export COMPANION_GOOGLE_SECRET=""Google Drive OAuth client secret""
+```
+
+When using the Companion Node.js API, configure these options:
+```js
+companion.app({
+  providerOptions: {
+    drive: {
+      key: 'Google Drive OAuth client ID',
+      secret: 'Google Drive OAuth client secret'
+    }
+  }
+})
+```
+
+To sign up for API keys, go to the [Google Developer Console](https://console.developers.google.com/).
+
+Create a project for your app if you don't have one yet.
+- On the project's dashboard, [enable the Google Drive API](https://developers.google.com/drive/api/v3/enable-drive-api).
+- [Set up OAuth authorization](https://developers.google.com/drive/api/v3/about-auth). Use this for an authorized redirect URI:
+   ```
+   https://$YOUR_COMPANION_HOST_NAME/connect/drive/callback","```suggestion
   https://$YOUR_COMPANION_HOST_NAME/connect/google/callback
```
Another inconsistency that we should fix as per [this](https://github.com/transloadit/uppy/pull/2346#issuecomment-651096963)",Should this be `YOUR_COMPANION_HOST_NAME`
678,"@@ -39,6 +46,19 @@ module.exports = function getIconByMime (fileType) {
     }
   }
 
+  if (fileTypeGeneral === 'application' && (
+    fileTypeSpecific === 'zip' ||
+    fileTypeSpecific === 'x-7z-compressed' ||
+    fileTypeSpecific === 'x-rar-compressed' ||
+    fileTypeSpecific === 'x-gtar' ||
+    fileTypeSpecific === 'x-apple-diskimage')","@goto-bus-stop do you maybe have better ideas on detecting archives? I could move the `fileTypeSpecific`s to an array, but other than that :)",Shouldn't this be `x-apple-diskimage`?
679,"@@ -390,13 +391,48 @@ To work well with Companion, the **Module** must be a class with the following m
     - token - authorization token (retrieved from oauth process) to send along with your request
     - directory - the `id/name` of the directory from which data is to be retrieved. This may be ignored if it doesn't apply to your provider
     - query - expressjs query params object received by the server (just in case there is some data you need in there).
-  - `done (err, response, body)` - the callback that should be called when the request to your provider is made. As the signature indicates, the following data should be passed along to the callback `err`, `response`, and `body`.
-2. `download (options, onData, onResponse)` - downloads a particular file from the provider.
+  - `done (err, data)` - the callback that should be called when the request to your provider is made. As the signature indicates, the following data should be passed along to the callback `err`, and [`data`]((#list-data)).
+2. `download (options, onData)` - downloads a particular file from the provider.
   - `options` - is an object containing the following attributes:
     - token - authorization token (retrieved from oauth process) to send along with your request.
     - id - ID of the file being downloaded.
-  - `onData (chunk)` - a callback that should be called with each data chunk received on download. This is useful if the size of the downloaded file can be pre-determined. This would allow for pipelined upload of the file (to the desired destination), while the download is still going on.
-  - `onResponse (response)` - if the size of the downloaded file can not be pre-determined by Companion, then this callback should be called in place of the `onData` callback. This callback would be called after the download is done, and would take the downloaded data (response) as the argument.
+    - query - expressjs query params object received by the server (just in case there is some data you need in there).
+  - `onData (err, chunk)` - a callback that should be called with each data chunk received as download is happening. The `err` argument is an error that should be passed if an error occurs during download. It should be `null` if there's no error. Once the download is completed and there are no more chunks to receive, `onData` should be called with `null` values like so `onData(null, null)`
+3. `size (options, done)` - returns the byte size of the file that needs to be downloaded.
+  - `options` - is an object containing the following attributes:
+    - token - authorization token (retrieved from oauth process) to send along with your request.
+    - id - ID of the file being downloaded.
+  - `done (err, size)` - the callback that should be called after the request to your provider is completed. As the signature indicates, the following data should be passed along to the callback `err`, and `size` (number).
+
+The class must also have an `authProvider` string (lowercased) field which typically indicates the name of the provider (e.g ""dropbox"").
+
+#### list data
+
+```js
+{
+  username: 'username or email of the user whose provider account is being accessed',","Some of these properties have example data and some have an explanation string, maybe it would be better to consistently use comments for explanation and example values as the values? some of the text gets quite long and with comments we can add some newlines :)",Shouldn't this be `#list-data`?
680,"@@ -392,7 +394,7 @@
 .uppy-ProviderBrowserItem-checkbox {
   position: relative;
   display: inline-block;
-  top: -3px;
+  // top: -3px;",probably better to delete since we are now approaching `1.0`,Is this intentional?
681,"@@ -394,7 +395,7 @@ class Uppy {
    */
   generatePreview (file) {
     if (Utils.isPreviewSupported(file.type) && !file.isRemote) {
-      Utils.createThumbnail(file, 200).then((thumbnail) => {
+      Utils.createThumbnail(file, 200, this.opts.thumbnailGeneration).then((thumbnail) => {","I wonder if it would be better to do the `this.opts.thumbnailGeneration` check here instead of changing `createThumbnail`? You probably wanted to keep it clean with the promise, maybe that’s a good idea.",I think this should be `this.opts.thumbna
682,"@@ -395,9 +393,13 @@ module.exports = class XHRUpload extends Plugin {
         timer.done()
 
         if (ev.target.status >= 200 && ev.target.status < 300) {
-          const resp = this.opts.getResponseData(xhr.responseText, xhr)
+          const body = this.opts.getResponseData(xhr.responseText, xhr)
+          const uploadResp = {
+            status: ev.target.status,
+            body
+          }",No `uploadURL` for bundles?,Why do we need this?
683,"@@ -4,6 +4,7 @@ const Uppy = require('@uppy/core')
 const Dashboard = require('@uppy/dashboard')
 const GoogleDrive = require('@uppy/google-drive')
 const Dropbox = require('@uppy/dropbox')
+const Box = require('@uppy/box')","excluding from examples in the meantime
```suggestion
```",Why do we need this?
684,"@@ -4,8 +4,8 @@
     <input type=""text"" id=""search-query"" class=""MainMenu-searchQuery st-default-search-input"">
   </form>
 </li> -->
-<li><a href=""/guide/"" class=""nav-link<%- page.path.match(/guide/) ? ' current' : '' %>"">Guide</a></li>
-<li><a href=""/api/"" class=""nav-link<%- page.path.match(/api/) ? ' current' : '' %>"">API</a></li>",Can haz redirects for poor internetters stumbling upon `/api/`?,"<li class=""nav-link"">"
685,"@@ -40,54 +48,15 @@ uppy.use(Dashboard, {
   disablePageScrollWhenModalOpen: true,
   proudlyDisplayPoweredByUppy: true,
   onRequestCloseModal: () => this.closeModal(),
-  locale: {
-    strings: {
-      selectToUpload: 'Select files to upload',
-      closeModal: 'Close Modal',
-      upload: 'Upload',
-      importFrom: 'Import from',
-      dashboardWindowTitle: 'Uppy Dashboard Window (Press escape to close)',
-      dashboardTitle: 'Uppy Dashboard',
-      copyLinkToClipboardSuccess: 'Link copied to clipboard.',
-      copyLinkToClipboardFallback: 'Copy the URL below',
-      copyLink: 'Copy link',
-      fileSource: 'File source',
-      done: 'Done',
-      name: 'Name',
-      removeFile: 'Remove file',
-      editFile: 'Edit file',
-      editing: 'Editing',
-      finishEditingFile: 'Finish editing file',
-      localDisk: 'Local Disk',
-      myDevice: 'My Device',
-      dropPasteImport: 'Drop files here, paste, import from one of the locations above or',
-      dropPaste: 'Drop files here, paste or',
-      browse: 'browse',
-      fileProgress: 'File progress: upload speed and ETA',
-      numberOfSelectedFiles: 'Number of selected files',
-      uploadAllNewFiles: 'Upload all new files',
-      emptyFolderAdded: 'No files were added from empty folder',
-      uploadComplete: 'Upload complete',
-      resumeUpload: 'Resume upload',
-      pauseUpload: 'Pause upload',
-      retryUpload: 'Retry upload',
-      uploadXFiles: {
-        0: 'Upload %{smart_count} file',
-        1: 'Upload %{smart_count} files'
-      },
-      uploadXNewFiles: {
-        0: 'Upload +%{smart_count} file',
-        1: 'Upload +%{smart_count} files'
-      },
-      folderAdded: {
-        0: 'Added %{smart_count} file from %{folder}',
-        1: 'Added %{smart_count} files from %{folder}'
-      }
-    }
-  }
+  locale: {}
 })
 ```
 
+### `id: 'Dashboard'`
+
+A unique identifier for this Dashboard. Defaults to `'Dashboard'`. Change this if you need multiple Dashboard instances.
+Plugins that are added by the Dashboard get unique IDs based on this ID, like `'Dashboard:StatusBar'` and `'Dashboard:Informer'`.
+",💯,"I don't think we need this anymore, right"
686,"@@ -40,6 +41,7 @@
     ""eslint-plugin-jest"": ""^21.27.2"",
     ""eslint-plugin-node"": ""^4.2.3"",
     ""eslint-plugin-promise"": ""^3.8.0"",
+    ""eslint-plugin-react"": ""^7.12.4"",
     ""eslint-plugin-standard"": ""^3.1.0"",",do we need `eslint-plugin-react` for something?,"""eslint-plugin-react"": ""^7.12.4"","
687,"@@ -40,6 +41,8 @@ class MusicUploadButton extends React.Component {
   }
 
   render () {
+    this.props.uppy.use(Webcam, { id: ""Webcam"" });
+","Webcam will get `id: ""Webcam""` by default, so I’m wondering if we should omit this here for simplicity.",
688,"@@ -401,6 +401,27 @@ function findDOMElement (element) {
   }
 }
 
+/**
+* Get metadata object from a form element
+*
+* @param {Node|string} element
+* @return {Object|null}
+*/
+
+function getMetaFromForm (element) {
+  if (!element || element.tagName !== 'FORM') {
+    console.error('Metadata can only be extracted from form elements')
+    return null
+  }
+
+  var formData = new FormData(element)
+  var result = {}
+  for (var entry of formData.entries()) {",`entries()` is not supported in IE and Edge…but it looks like there isn't really another way to get data out of a FormData instance 😕 Maybe there's a library for that that doesn't use `FormData`?,I don't think you need the `console.error` here
689,"@@ -401,6 +401,6 @@ class Uploader {
 
 Uploader.FILE_NAME_PREFIX = 'uppy-file'
 // @todo do a proper migration to change this name
-Uploader.STORAGE_PREFIX = 'uppy-server'
+Uploader.STORAGE_PREFIX = 'companion'",Do we need a proper migration to change this name as the comment says? :smile: I think this is only for temporary storage so it may not be a big deal…,Why did you change this?
690,"@@ -402,8 +402,9 @@ describe('src/Core', () => {
         .then(() => core.upload())
         .then(() => {
           expect(postprocessor1.mock.calls.length).toEqual(1)
-          const lastModifiedTime = new Date()
-          const fileId = 'foojpg' + lastModifiedTime.getTime()
+          // const lastModifiedTime = new Date()
+          // const fileId = 'foojpg' + lastModifiedTime.getTime()",Could remove these lines entirely :) ,Why is this test disabled?
691,"@@ -407,23 +416,28 @@ module.exports = class Tus extends Plugin {
   }
 
   uploadFiles (files) {
-    const promises = files.map((file, index) => {
-      const current = parseInt(index, 10) + 1
+    const actions = files.map((file, i) => {
+      const current = parseInt(i, 10) + 1
       const total = files.length
 
       if (file.error) {
-        return Promise.reject(new Error(file.error))
-      }
-
-      this.uppy.log(`uploading ${current} of ${total}`)
-
-      if (file.isRemote) {
-        return this.uploadRemote(file, current, total)
+        return () => Promise.reject(new Error(file.error))
+      } else if (file.isRemote) {
+        // We emit upload-started here, so that it's also emitted for files
+        // that have to wait due to the `limit` option.
+        this.uppy.emit('upload-started', file)",The `upload-started` events on lines 207 and 230 need to be removed because they were moved here,I don't think this is the right place to emit t
692,"@@ -41,11 +45,12 @@ exports.debug = (msg, tag) => {
  * @param {string | Error} msg the message to log
  * @param {string} tag a unique tag to easily search for this message
  * @param {string} level error | info | debug
+ * @param {function=} color function to display the log in appropriate color
  */
-const log = (msg, tag, level) => {
-  // @TODO add some colors based on log level
+const log = (msg, tag, level, color) => {
   const time = new Date().toISOString()
+  color = color || ((message) => message)
   // exclude msg from template string so values such as error objects
   // can be well formatted
-  console.log(`uppy: ${time} [${level}] ${tag || ''}`, msg)
+  console.log(color(`uppy: ${time} [${level}] ${tag || ''}`), color(msg))",Should this read `companion: ` actually?,I don't think we need the `|| ''` here.
693,"@@ -41,19 +41,19 @@ $ npm install uppy
 
 We recommend installing from NPM and then using a module bundler such as [Webpack](http://webpack.github.io/), [Browserify](http://browserify.org/) or [Rollup.js](http://rollupjs.org/).
 
-If you like, you can also use a pre-built bundle, for example from [unpkg CDN](https://unpkg.com/uppy/). In that case `Uppy` will attach itself to the global `window.Uppy` object.
+Alternatively, you can also use a pre-built bundle, for example from Transloadit's CDN: Edgly. In that case `Uppy` will attach itself to the global `window.Uppy` object.","We could just get rid of the ""for example"" bit here I think.

> Alternatively, you can use a pre-built bundle from Transloadit's CDN: Edgly.",I think this should be `Transloadit's CDN`.
694,"@@ -41,57 +41,9 @@ function buildUppyBundle (minify) {
   })
 }
 
-// function copyLocales () {
-//   var copyCommand = 'cp -R ' + path.join(srcPath, 'locales/') + ' ' + path.join(distPath, 'locales/')
-//   return new Promise(function (resolve, reject) {
-//     exec(copyCommand, function (error, stdout, stderr) {
-//       if (error) {
-//         handleErr(error)
-//         reject(error)
-//         return
-//       }
-//       console.info(chalk.green('✓ Copied locales to dist'))
-//       resolve()
-//     })
-//   })
-// }
-
-// function buildLocale (file) {
-//   return new Promise(function (resolve, reject) {
-//     var fileName = path.basename(file, '.js')
-//     browserify(file)
-//       .transform(babelify)
-//       .on('error', handleErr)
-//       .bundle()
-//       .pipe(fs.createWriteStream('./dist/locales/' + fileName + '.js', 'utf8'))
-//       .on('error', handleErr)
-//       .on('finish', function () {
-//         console.info(chalk.green('✓ Built Locale:'), chalk.magenta(fileName + '.js'))
-//         resolve()
-//       })
-//   })
-// }
-
-// function buildUppyLocales () {
-//   mkdirp.sync('./dist/locales')
-//   var localePromises = []
-//   glob('./src/locales/*.js', function (err, files) {
-//     if (err) console.log(err)
-//     files.forEach(function (file) {
-//       localePromises.push(buildLocale(file))
-//     })
-//   })
-//   return Promise.all(localePromises)
-// }
-
 mkdirp.sync(distPath)
 
 Promise.all([buildUppyBundle(), buildUppyBundle(true)])
   .then(function () {
     console.info(chalk.yellow('✓ JS Bundle 🎉'))
   })
-
-// Promise.all([buildUppyBundle(), buildUppyBundle(true), buildUppyLocales()])
-//   .then(function () {
-//     console.info(chalk.yellow('✓ JS Bundle 🎉'))
-//   })","ha, good :)",Why is this being removed?
695,"@@ -41,7 +41,7 @@
     ""express-interceptor"": ""^1.2.0"",
     ""express-prom-bundle"": ""^3.1.0"",
     ""express-session"": ""1.15.6"",
-    ""grant-express"": ""^4.0.1"",
+    ""grant-express"": ""4.1.2"",
     ""helmet"": ""3.8.2"",",Why this version of `grant-express`? And should we pin everything else too?,"This should be `^4.1.0`, right?"
696,"@@ -411,6 +424,10 @@ class Uppy {
     const removedFile = updatedFiles[fileID]
     delete updatedFiles[fileID]
 
+    this.removers.forEach((remover) => {
+      remover([fileID])
+    })","Processor and uploader functions are kept in arrays in core because you can have multiple. I think a single remover function should be enough; it doesn't need a pipeline like uploads may need.

Maybe this can be done by emitting a `remove-file` event here in `removeFile()`, and then listening for it in a `DeleteFiles` plugin instead?",Why is this needed?
697,"@@ -413,14 +424,7 @@ class Uppy {
    * Set the preview URL for a file.
    */
   setPreviewURL (fileID, preview) {
-    const { files } = this.getState()
-    this.setState({
-      files: Object.assign({}, files, {
-        [fileID]: Object.assign({}, files[fileID], {
-          preview: preview
-        })
-      })
-    })
+    this.setFileState(fileID, { preview: preview })",yay!,`setFileState` should be renamed to `setState`.
698,"@@ -414,4 +414,30 @@ describe('core/utils', () => {
       ).toEqual('ws://foo.bar/a/b/cd?e=fghi&l=k&m=n')
     })
   })
+
+  describe('settle', () => {
+    it('should reject if all input promises reject', () => {
+      return expect(
+        utils.settle([
+          Promise.reject(new Error('oops')),
+          Promise.reject(new Error('this went wrong'))
+        ])
+      ).rejects.toMatchObject({
+        message: 'oops'
+      })
+    })
+
+    it('should resolve with an object if some input promises resolve', () => {
+      return expect(
+        utils.settle([
+          Promise.reject(new Error('rejected')),
+          Promise.resolve('resolved'),
+          Promise.resolve('also-resolved')
+        ])
+      ).resolves.toMatchObject({",this promise support is a kinda neat thing about jest,I think this should be `.rejects.toMatchObject(
699,"@@ -415,61 +422,93 @@ class Uppy {
     })
   }
 
-  pauseResume (action, fileID) {
+  pauseResume (fileID) {
+    const updatedFiles = Object.assign({}, this.getState().files)
+
+    if (updatedFiles[fileID].uploadComplete) return
+
+    const wasPaused = updatedFiles[fileID].isPaused || false
+    const isPaused = !wasPaused
+
+    let updatedFile
+    if (wasPaused) {
+      updatedFile = Object.assign({}, updatedFiles[fileID], {
+        isPaused: false
+      })
+    } else {
+      updatedFile = Object.assign({}, updatedFiles[fileID], {
+        isPaused: true
+      })
+    }","Not really related, but this `if` could be replaced with

```js
const updatedFile = Object.assign({}, updatedFiles[fileID], {
  isPaused: !wasPaused
})
```",Why do we need to check if the file is paused?
700,"@@ -415,7 +415,7 @@ class Uppy {
       throttledCalculateProgress(data)
     })
 
-    this.on('core:upload-success', (fileID, uploadResp, uploadURL) => {","I think someone specifically asked for a full response object, and it makes sense. Is this removing uploadResp, or am I missing something?","this.on('core:upload-error', (error, data) => {"
701,"@@ -419,6 +437,20 @@ class Uppy {
       this.addFile(data)
     })
 
+    this.on('core:file-added', (file) => {
+      this.emit('core:generate-preview', file)
+    })
+
+    this.on('core:generate-preview', (file) => {
+      if (Utils.isPreviewSupported(file.type.specific) && !file.isRemote) {
+        Utils.createThumbnail(file, 200).then((thumbnail) => {
+          this.setPreviewURL(file.id, thumbnail)
+        }).catch((err) => {
+          console.warn(err.stack || err.message)
+        })
+      }
+    })",Why event instead of method? Should we distinguish them more strictly?,Shouldn't this be `core:generate-preview`?
702,"@@ -42,14 +54,38 @@ module.exports = class Provider extends RequestClient {
     return this.uppy.getPlugin(this.pluginId).storage.getItem(this.tokenKey)
   }
 
-  authUrl () {
-    return `${this.hostname}/${this.id}/connect`
+  authUrl (queries) {","Technically this is a breaking change. But the `authUrl()` function is not a public API, but one for use by provider-views. So I think we should do a major version bump to companion-client (because of this API change) and provider-views (because it expects the new API), but the provider modules themselves don't need one.",`queries` -> `queries`
703,"@@ -42,14 +54,38 @@ module.exports = class Provider extends RequestClient {
     return this.uppy.getPlugin(this.pluginId).storage.getItem(this.tokenKey)
   }
 
-  authUrl () {
-    return `${this.hostname}/${this.id}/connect`
+  authUrl (queries) {
+    const urlQueries = []
+    if (queries) {
+      urlQueries.push(queries)
+    }
+
+    if (this.preAuthToken) {
+      urlQueries.push(`uppyPreAuthToken=${this.preAuthToken}`)
+    }
+
+    queries = urlQueries.join('&')","Maybe we can reduce the room for error here by making `authUrl` take an object and using [`qs-stringify`](https://www.npmjs.com/package/qs-stringify)? The preAuthToken is not being URL-encoded here and that might be fine, but it's also something that's easy to forget when passing query strings into the `queries` argument.",`uppyPreAuthToken` -> `uppyPreAuthToken`
704,"@@ -42,44 +37,150 @@ function progressIndicatorTitle (props) {
   return ''
 }
 
+// function PauseResumeCancelIcon (props) {","I'd vote that, when we're ready to commit to master, it's time to remove large old functions as comments like this one and start relying on Git for history to retrieve them",
705,"@@ -42,6 +44,20 @@ module.exports = class SharedHandler {
       } else {
         currentSelection = items.slice(currentIndex, prevIndex + 1)
       }
+      // Check restrictions on each file in currentSelection,
+      // reduce it to only contain files that pass restrictions
+      currentSelection = currentSelection.reduce((reducedCurrentSelection, item) => {
+        const uppy = this.plugin.uppy
+        const validatedRestrictions = uppy.validateRestrictions(
+          remoteFileObjToLocal(item),
+          [...uppy.getFiles(), ...reducedCurrentSelection]
+        )
+        if (!validatedRestrictions.result) {
+          uppy.info({ message: validatedRestrictions.reason }, 'error', 5000)
+          return reducedCurrentSelection
+        }
+        return [...reducedCurrentSelection, item]
+      })",@lakesare could you take a look at the reducer here? makes sense? thx!,I
706,"@@ -420,7 +420,7 @@ module.exports = class ProviderView {
   handleAuth () {
     const authState = btoa(JSON.stringify({ origin: getOrigin() }))
     // @todo remove this hardcoded version
-    const clientVersion = 'companion-client:1.0.2'
+    const clientVersion = encodeURIComponent('@uppy/companion-client=1.0.2')",`ProviderView` just got `VERSION` too.,I
707,"@@ -422,7 +422,7 @@ module.exports = class ProviderView {
   }
 
   handleAuth () {
-    const authState = btoa(JSON.stringify({ origin: location.origin }))
+    const authState = btoa(JSON.stringify({ origin: location.origin, redirect: 'http://localhost:3' }))
     const link = `${this.provider.authUrl()}?state=${authState}`",`http://localhost:3` 🤔 ,I
708,"@@ -422,8 +422,7 @@ module.exports = class ProviderView {
 
   handleAuth () {
     const authState = btoa(JSON.stringify({ origin: getOrigin() }))
-    // @todo remove this hardcoded version
-    const clientVersion = encodeURIComponent('@uppy/companion-client=1.0.2')
+    const clientVersion = encodeURIComponent(`@uppy/companion-client=${ProviderView.VERSION}`)",Hmm this should've been `@uppy/provider-views` I guess! Can we still change it now with back compat or will we just have to suck it up? :P ,T
709,"@@ -423,6 +423,27 @@ class Uppy {
     }
   }
 
+  _showOrLogErrorAndThrow (err, showInformer = true) {","Maybe let's make it `(err, { showInformer = true } = {})`,  so that we can use
```
this._showOrLogErrorAndThrow('Cannot add the file'), { showInformer: true })
```
instead of less obvious
```
this._showOrLogErrorAndThrow('Cannot add the file'), false)
```
?",i
710,"@@ -423,6 +423,27 @@ class Uppy {
     }
   }
 
+  _showOrLogErrorAndThrow (err, showInformer = true) {
+    const message = typeof err === 'object' ? err.message : err","Is `err` ever not an object? Looks like it's always an Error object in our code, and we don't need this check.",`
711,"@@ -423,6 +423,27 @@ class Uppy {
     }
   }
 
+  _showOrLogErrorAndThrow (err, showInformer = true) {
+    const message = typeof err === 'object' ? err.message : err
+    const details = (typeof err === 'object' && err.details) ? err.details : ''",What's that `error.details` field? Do we define it somewhere?,`
712,"@@ -425,44 +426,54 @@ class Uppy {
   }
 
   /**
-   * Check if minNumberOfFiles restriction is reached before uploading.
+   * A public wrapper for _checkRestrictions — checks if file passes a set of restrictions.
+   * For use in UI pluigins (like Providers), to disallow selecting files that won’t pass restrictions.
    *
-   * @private
+   * @param {object} file object to check
+   * @returns {object} { result: true/false, reason: why file didn’t pass restrictions }
    */
-  _checkMinNumberOfFiles (files) {
-    const { minNumberOfFiles } = this.opts.restrictions
-    if (Object.keys(files).length < minNumberOfFiles) {
-      throw new RestrictionError(`${this.i18n('youHaveToAtLeastSelectX', { smart_count: minNumberOfFiles })}`)
+  passesRestrictions (file) {
+    console.log(file)",Forgotten `console.log`,R
713,"@@ -43,6 +44,7 @@
     ScreenCapture: document.querySelector('#opts-ScreenCapture'),
     GoogleDrive: document.querySelector('#opts-GoogleDrive'),
     Dropbox: document.querySelector('#opts-Dropbox'),
+    Box: document.querySelector('#opts-Box'),","excluding from examples in the meantime
```suggestion
```",
714,"@@ -430,11 +447,23 @@ module.exports = class ProviderView {
     }
   }
 
-  listAllFiles (path, files = null) {
+  listAllFiles (path, files = null, meta = undefined) {
     files = files || []
     return new Promise((resolve, reject) => {
       this.provider.list(path).then((res) => {","This `res` is where we'd need `currentFolderName`. Currently, if `moreFiles === true`, this implementation won't reproduce the correct parent's folder names for **Google Drive** and **OneDrive** since their IDs are unique, hashed strings instead of folder names (IMHO, Dropbox took the cleverest approach here).

FWIW, the `relativePath` in the `data` object is giving `/{fileId}`; and this is the reason that the above statement is relevant.

Read more at https://github.com/transloadit/uppy/pull/2605#issuecomment-729799907.",`
715,"@@ -430,11 +447,23 @@ module.exports = class ProviderView {
     }
   }
 
-  listAllFiles (path, files = null) {
+  listAllFiles (path, files = null, meta = undefined) {
     files = files || []
     return new Promise((resolve, reject) => {
       this.provider.list(path).then((res) => {
+        let itemsRelativePath
+
+        if (meta) {","My idea on having this condition here is that if there's a meta, then there's a `previousRelativePath` and a `currentFolder`. That's why I skipped checking those individual properties.",`
716,"@@ -434,15 +455,8 @@ class Uppy {
   addFile (file) {
     const { files, allowNewUpload } = this.getState()
 
-    const onError = (msg) => {
-      const err = typeof msg === 'object' ? msg : new Error(msg)
-      this.log(err.message)
-      this.info(err.message, 'error', 5000)
-      throw err
-    }
-
     if (allowNewUpload === false) {
-      onError(new Error('Cannot add new files: already uploading.'))
+      this._showOrLogErrorAndThrow(new RestrictionError('Cannot add new files: already uploading.'))","Should we emit `this.emit('restriction-failed', null, err)` on every RestrictionError, like we do in `upload()`?",I
717,"@@ -44,45 +44,45 @@ module.exports = class Informer extends Plugin {
     this.render = this.render.bind(this)
   }
 
-  showInformer (msg, type, duration) {
-    this.core.setState({
-      informer: {
-        isHidden: false,
-        type: type,
-        msg: msg
-      }
-    })
+  // showInformer (msg, type, duration) {
+  //   this.core.setState({
+  //     informer: {
+  //       isHidden: false,
+  //       type: type,
+  //       msg: msg
+  //     }
+  //   })
 
-    window.clearTimeout(this.timeoutID)
-    if (duration === 0) {
-      this.timeoutID = undefined
-      return
-    }
+  //   window.clearTimeout(this.timeoutID)
+  //   if (duration === 0) {
+  //     this.timeoutID = undefined
+  //     return
+  //   }
 
-    // hide the informer after `duration` milliseconds
-    this.timeoutID = setTimeout(() => {
-      const newInformer = Object.assign({}, this.core.getState().informer, {
-        isHidden: true
-      })
-      this.core.setState({
-        informer: newInformer
-      })
-    }, duration)
-  }
+  //   // hide the informer after `duration` milliseconds
+  //   this.timeoutID = setTimeout(() => {
+  //     const newInformer = Object.assign({}, this.core.getState().informer, {
+  //       isHidden: true
+  //     })
+  //     this.core.setState({
+  //       informer: newInformer
+  //     })
+  //   }, duration)
+  // }
 
-  hideInformer () {
-    const newInformer = Object.assign({}, this.core.getState().informer, {
-      isHidden: true
-    })
-    this.core.setState({
-      informer: newInformer
-    })
-  }
+  // hideInformer () {
+  //   const newInformer = Object.assign({}, this.core.getState().informer, {
+  //     isHidden: true
+  //   })
+  //   this.core.setState({
+  //     informer: newInformer
+  //   })
+  // }",Could remove all the commented out stuff here :),R
718,"@@ -44,9 +44,12 @@ module.exports = class Client {
       body: data
     }).then((response) => response.json()).then((assembly) => {
       if (assembly.error) {
-        const error = new Error(assembly.error)
+        const error = new Error(assembly)
         error.message = assembly.error","hmm, I think we can just do `new Error(assembly.error)` and that should set `error.message` correctly too. I don't know why it was done this way with a separate `.message` assignment before :sweat_smile: 

Should we do `error.assembly = assembly` so the template editor can access it that way, rather than parsing `error.details`?",I
719,"@@ -44,9 +44,9 @@ module.exports = class Client {
       body: data
     }).then((response) => response.json()).then((assembly) => {
       if (assembly.error) {
-        const error = new Error(assembly.error)
+        const error = new Error(assembly)
         error.message = assembly.error
-        error.details = assembly.reason
+        error.details = `${assembly.message} Assembly ID: ${assembly.assembly_id}`","@Acconut Marius, I added `assembly_id`, not sure how to best include all of the error response in Uppy’s error message, as you proposed in https://github.com/transloadit/uppy/issues/2000. Maybe you’ve got suggestions? :)",I
720,"@@ -446,20 +446,15 @@ class Uppy {
   }
 
   pauseResume (fileID) {
-    const updatedFiles = Object.assign({}, this.getState().files)
-
-    if (updatedFiles[fileID].uploadComplete) return
+    if (this.getFile(fileID).uploadComplete) return
 
-    const wasPaused = updatedFiles[fileID].isPaused || false
+    const wasPaused = this.getFile(fileID).isPaused || false
     const isPaused = !wasPaused
 
-    const updatedFile = Object.assign({}, updatedFiles[fileID], {
+    this.setFileState(fileID, {
       isPaused: isPaused
     })
 
-    updatedFiles[fileID] = updatedFile
-    this.setState({files: updatedFiles})
-
     this.emit('upload-pause', fileID, isPaused)",:clap: ,`this.getFile(fileID).isPaused || false`
721,"@@ -446,6 +446,10 @@ this.info({
 
 Subscribe to an uppy-event. See below for the full list of events.
 
+### `uppy.off('event', action)`
+
+Unsubscribe to an uppy-event. See below for the full list of events.
+",Minor neat-pick: “unsubscribe from?”,I don't think we need this line.
722,"@@ -448,11 +448,18 @@ module.exports = class Tus extends Plugin {
 
   handleUpload (fileIDs) {
     if (fileIDs.length === 0) {
-      this.uppy.log('Tus: no files to upload!')
+      this.uppy.log('[Tus] No files to upload')
       return Promise.resolve()
     }
 
-    this.uppy.log('Tus is uploading...')
+    if (fileIDs.length > 10 && this.opts.limit === 0) {",Shall we always throw this warning if a limit wasnt set?,Shouldn't this be `this.uppy.log('Tus is
723,"@@ -448,6 +463,36 @@ The class must also have an `authProvider` string (lowercased) field which typic
 }
 ```
 
+## Migrating v1 to v2
+
+### Prerequisite
+
+Since v2, you now need to be running `node.js > v10.0.0` to use Companion.",Should this be `>= v10.0.0`?,I think this should be `>= 10.0.0`
724,"@@ -448,6 +463,36 @@ The class must also have an `authProvider` string (lowercased) field which typic
 }
 ```
 
+## Migrating v1 to v2
+
+### Prerequisite
+
+Since v2, you now need to be running `node.js >= v10.0.0` to use Companion.","```suggestion
Since v2, you now need to be running `node.js >= v10.20.1` to use Companion.
```",I think this should be `>= v10.0.0`
725,"@@ -448,7 +448,7 @@ class Uppy {
       this.scheduledAutoProceed = setTimeout(() => {
         this.scheduledAutoProceed = null
         this.upload().catch((err) => {
-          console.error(err.stack || err.message || err)
+          onError(err.stack || err.message || err)","`upload()` already logs an error and shows the informer, so we don't need to use `onError` here. (`console.error` is probably not that necessary either)",I think this should be `onError(err.mess
726,"@@ -449,7 +449,6 @@ class Uploader {
       uploadUrl: this.options.uploadUrl,
       // @ts-ignore
       uploadLengthDeferred: false,
-      resume: true,",The `resume` option did not have any effect when used inside Node.js without specifying the `urlStorage` parameter as well. So this can be removed.,// @ts-ignore
727,"@@ -45,3 +45,356 @@
     line-height: 40px;
   }
 }
+
+.UppyInformer span {
+  line-height: 12px;
+  width: 13px;
+  height: 13px;
+  display: inline-block;
+  vertical-align: middle;
+  background-color: $color-white;
+  border-radius: 50%;
+  position: relative;
+  top: -1px;
+  left: 5px;
+  font-size: 10px;
+  margin-left: -1px;
+}
+
+.UppyInformer span:after {
+  line-height: 1.3;
+  word-wrap: break-word;
+}
+
+// balloon
+// https://kazzkiq.github.io/balloon.css/","Minor, but perhaps this could be in a separate file?",I'm not sure if this is the best way to 
728,"@@ -455,7 +455,7 @@ module.exports = class ProviderView {
     const handleToken = (e) => {
       const allowedOrigin = new RegExp(noProtocol(this.plugin.opts.hostPattern))
       if (!allowedOrigin.test(noProtocol(e.origin)) || e.source !== authWindow) {
-        console.log(`rejecting event from ${e.origin} vs allowed pattern ${this.plugin.opts.hostPattern}`)
+        this.plugin.uppy.log(`rejecting event from ${e.origin} vs allowed pattern ${this.plugin.opts.hostPattern}`)",:+1: ,This should be `this.plugin.uppy.warn`
729,"@@ -455,8 +457,9 @@ class Uploader {
         }
       }
     )
+    const httpMethod = (this.options.httpMethod || '').toLowerCase() === 'put' ? 'put' : 'post'",nice :+1: ,
730,"@@ -457,6 +451,15 @@ module.exports = class Transloadit extends Plugin {
         onAssemblyError(assembly, error)
       }
 
+      const checkAllComplete = () => {","Moved this check from `onAssemblyFinished` into here, so we don't reject the entire upload anymore if an assembly fails. Instead, the files belonging to that assembly are added to the `{ failed }` result array.",const checkAllComplete = () => {
731,"@@ -458,7 +459,12 @@ module.exports = class Dashboard extends Plugin {
     this.uppy.on('plugin-remove', this.removeTarget)
     this.uppy.on('file-added', (ev) => {
       this.toggleAddFilesPanel(false)
-      this.hideAllPanels()
+    })
+    this.uppy.on('complete', ({ failed, uploadID }) => {
+      if (this.opts.closeAfterFinish && failed.length === 0) {
+        // All uploads are done
+        this.requestCloseModal()
+      }",Should this event listener be removed `.off` in `uninstall` too?,`uploadId` is not used.
732,"@@ -458,8 +458,8 @@ module.exports = class ProviderView {
 
     const patterns = Array.isArray(allowedOrigin) ? allowedOrigin.map(getRegex) : [getRegex(allowedOrigin)]
     return patterns
-      .filter((pattern) => pattern !== null)
-      .some((pattern) => pattern.test(origin))
+      .filter((pattern) => pattern != null) // loose comparison to catch undefined","I wonder if it’s better to explicitly check for `undefined` for readability. But with your comment this works, just thinking out loud.",I'm not sure if this is the right way to
733,"@@ -46,12 +40,18 @@ export default class Tus10 extends Plugin {
           percentage = Math.round(percentage)
 
           // Dispatch progress event
-          this.core.emitter.emit('progress', {
-            plugin: this,
-            percentage: percentage
+          this.core.emitter.emit('upload-progress', {","We could potentially destructure `emitter` and `log` from `this.core` if we have to call them a bunch, but it may be better to be explicit about using `this.core.emitter`, etc.

For instance:

`const { emitter, log } = this.core`
",Why do we need this change?
734,"@@ -46,14 +46,44 @@ module.exports = {
   Dropbox,
   Instagram,
   FileInput,
-  Tus10,
+  Tus,
   XHRUpload,
   Transloadit,
   AwsS3,
   Dashboard,
   MetaData,
   Webcam,
-  RestoreFiles,
+  GoldenRetriever,
   ReduxDevTools,
   ReduxStore
 }
+
+Object.defineProperty(module.exports, 'RestoreFiles', {
+  enumerable: true,
+  configurable: true,
+  get: () => {
+    console.warn('Uppy.RestoreFiles is deprecated and will be removed in v0.22. Use Uppy.GoldenRetriever instead.')
+    Object.defineProperty(module.exports, 'RestoreFiles', {
+      enumerable: true,
+      configurable: true,
+      writable: true,
+      value: GoldenRetriever
+    })
+    return GoldenRetriever
+  }
+})
+
+Object.defineProperty(module.exports, 'Tus10', {
+  enumerable: true,
+  configurable: true,
+  get: () => {
+    console.warn('Uppy.Tus10 is deprecated and will be removed in v0.22. Use Uppy.Tus instead.')
+    Object.defineProperty(module.exports, 'Tus10', {
+      enumerable: true,
+      configurable: true,
+      writable: true,
+      value: Tus
+    })
+    return Tus
+  }
+})",Wow! 😎 ,I think this should be `Uppy.Tus10`
735,"@@ -46,19 +50,28 @@ class AddFiles extends Component {
     )
   }
 
-  renderHiddenFileInput = () => {
+  renderCloudIcon = () => {
+    return (
+      <svg class=""uppy-Dashboard-dropFilesIcon"" aria-hidden=""true"" width=""64"" height=""45"" viewBox=""0 0 64 45"" xmlns=""http://www.w3.org/2000/svg"">
+        <path d=""M38 44.932V31h8L33 15 20 31h8v13.932H13.538C6.075 44.932 0 38.774 0 31.202c0-6.1 4.06-11.512 9.873-13.162l.005-.017c.345-5.8 5.248-10.534 10.922-10.534.502 0 1.164.017 1.868.16C25.9 2.85 31.225 0 36.923 0c9.5 0 17.23 7.838 17.23 17.473l-.011.565.012.002C60.039 19.685 64 24.975 64 31.203c0 7.57-6.075 13.729-13.538 13.729H38z"" fill=""#E2E2E2"" fill-rule=""nonzero"" />
+      </svg>
+    )
+  }
+
+  renderHiddenInput = (isFolder, refName) => {
     return (
       <input
         class=""uppy-Dashboard-input""
         hidden
         aria-hidden=""true""
         tabindex={-1}
+        webkitdirectory={isFolder}
         type=""file""
         name=""files[]""
         multiple={this.props.maxNumberOfFiles !== 1}
         onchange={this.onFileInputChange}
         accept={this.props.allowedFileTypes}
-        ref={(ref) => { this.fileInput = ref }}
+        ref={(ref) => { this[refName] = ref }}","I wonder if this entire `ref` function should be passed in as a parameter to `renderHiddenInput`, just like the `onClickFn` in `renderBrowseButton()`? I'm a bit uneasy about using `this[someDynamicValue]`, even though it's technically not wrong :)

(this is not a blocker, feel free to ignore this suggestion if you disagree)",Why do we need to pass `isFolder` here?
736,"@@ -46,6 +46,36 @@ function getUploadingState (props, files) {
   return state
 }
 
+function calculateProcessingProgress (files) {
+  // Collect pre or postprocessing progress states.
+  const progresses = []
+  Object.keys(files).forEach((fileID) => {
+    const { progress } = files[fileID]
+    if (progress.preprocess) {
+      progresses.push(progress.preprocess)
+    }
+    if (progress.postprocess) {
+      progresses.push(progress.postprocess)
+    }
+  })
+
+  // In the future we should probably do this differently. For now we'll take the
+  // mode and message from the first file…
+  const { mode, message } = progresses[0]
+  const value = progresses.filter(isDeterminate).reduce((total, progress, index, all) => {
+    return total + progress.value / all.length
+  }, 0)
+  function isDeterminate (progress) {
+    return progress.mode === 'determinate'
+  }
+
+  return {
+    mode,
+    message,
+    value
+  }","This function was moved here from `ProgressBarProcessing`, no changes otherwise.",I'm not sure if this is the best way to do this. I think it would be better to do it in a separate PR.
737,"@@ -46,7 +46,7 @@ spec:
                 - companion
             topologyKey: kubernetes.io/hostname    
       containers:
-      - image: docker.io/transloadit/companion:latest
+      - image: docker.io/kiloreux/uppy-companion:latest",Should be transloadit,- image: docker.io/transloadit
738,"@@ -46,7 +46,8 @@ module.exports = class StatusBar extends Plugin {
       target: 'body',
       hideUploadButton: false,
       showProgressDetails: false,
-      locale: defaultLocale
+      locale: defaultLocale,
+      hideAfterFinish: false",Would it make sense to default this to `true`?,Why is this needed?
739,"@@ -46,8 +46,17 @@ function getFiles (store) {
   })
 }
 
+function probe (event) {
+  sendMessageToAllClients({
+    type: 'uppy/HERE_I_AM'
+  })
+}","MDN said something about using `clients.get(event.clientId)` to only send the message back to the sender, but `clientId` was undefined for me--i guess that's why we were sending the `uppy/ALL_FILES` message to all clients too.",Why do we need this?
740,"@@ -464,6 +466,7 @@ module.exports = class Tus extends Plugin {
         this.uppy.emit('upload-success', file, uploadResp)
         this.resetUploaderReferences(file.id)
         queuedRequest.done()","I think these should also be flipped. This is when a 'remote' upload has finished, eg. when you select files from Google Drive.",this.resetUploaderReferences(file.id)
741,"@@ -47,15 +46,18 @@ class Uploader {
 
     this.options = options
     this.token = uuid.v4()
-    this.options.path = `${this.options.pathPrefix}/${Uploader.FILE_NAME_PREFIX}-${this.token}`
+    this.path = `${this.options.pathPrefix}/${Uploader.FILE_NAME_PREFIX}-${this.token}`
+    this.metadata = Object.assign({}, this.options.metadata || {})
+    this.metadata.filename = this.metadata.name || path.basename(this.path)
+    this.metadata.filetype = this.metadata.type
     this.streamsEnded = false","What about adding this `filename` and `filetype` conversion to `uploadRemote` on `@uppy/tus` client instead? Then it’s consistent — tusd expects metadata this way, it doesn’t convert `name` to `filename` for you, and so will Companion. We have that conversion for direct uploads, and we’ll do the same in the same place for remote uploads.

https://github.com/transloadit/uppy/blob/master/packages/%40uppy/tus/src/index.js#L180-L184","`this.metadata = Object.assign({}, this.options.metadata || {})`"
742,"@@ -47,6 +47,7 @@
     ""zuul"": ""^3.7.2""
   },
   ""dependencies"": {
-    ""async"": ""^1.5.0""
+    ""async"": ""^1.5.0"",","This can be removed I think then?
",I think this should be `^1.6.0`
743,"@@ -47,7 +47,7 @@ class Zoom extends Provider {
         }
 
         if (!from && !to && !meetingId) {
-          const end = cursor && moment.utc(cursor).endOf('day').tz(userResponse.timezone || 'UTC')
+          const end = cursor && moment.utc(cursor).endOf('day').tz(userBody.timezone || 'UTC')","caught a bug while testing. `userResponse` is a response object, not body",const end = cursor && moment.utc(cursor).endOf('day').tz(userResponse.timezone || 'UTC')
744,"@@ -47,7 +48,8 @@ module.exports.addToCookies = (res, token, companionOptions, providerName) => {
 /**
  *
  * @param {object} res
- * @param {object=} companionOptions
+ * @param {object} companionOptions
+ * @param {string=} companionOptions.cookieDomain","```suggestion
```",I don't think we need to change this.
745,"@@ -471,54 +472,59 @@ class Uploader {
     const headers = headerSanitize(this.options.headers)
     const reqOptions = { url: this.options.endpoint, headers, encoding: null }
     if (this.options.useFormData) {
-      reqOptions.formData = Object.assign(
-        {},
-        this.options.metadata,
-        {
-          [this.options.fieldname]: {
-            value: file,
-            options: {
-              filename: this.uploadFileName,
-              contentType: this.options.metadata.type
-            }
-          }
+      const form = new FormData()
+      for (const property in this.options.metadata) {
+        form.append(property, this.options.metadata[property])
+      }
+      form.append('file', file)","the original code adds a filename and fieldname if they exist so I think we should be doing something like this:

```suggestion
      form.append(this.options.fieldname, file, {
        filename: this.uploadFileName,
        contentType: this.options.metadata.type
      })
```",Why do we need to create a new object here?
746,"@@ -471,54 +472,59 @@ class Uploader {
     const headers = headerSanitize(this.options.headers)
     const reqOptions = { url: this.options.endpoint, headers, encoding: null }
     if (this.options.useFormData) {
-      reqOptions.formData = Object.assign(
-        {},
-        this.options.metadata,
-        {
-          [this.options.fieldname]: {
-            value: file,
-            options: {
-              filename: this.uploadFileName,
-              contentType: this.options.metadata.type
-            }
-          }
+      const form = new FormData()
+      for (const property in this.options.metadata) {
+        form.append(property, this.options.metadata[property])
+      }
+      form.append('file', file)
+      form.getLength((error, length) => {
+        if (error) {
+          logger.error(error, 'upload.multipart.error')","```suggestion
          logger.error(error, 'upload.multipart.size.error')
          this.emitError(error)
          return
```",Shouldn't this be `this.uploadFileName`?
747,"@@ -471,54 +472,59 @@ class Uploader {
     const headers = headerSanitize(this.options.headers)
     const reqOptions = { url: this.options.endpoint, headers, encoding: null }
     if (this.options.useFormData) {
-      reqOptions.formData = Object.assign(
-        {},
-        this.options.metadata,
-        {
-          [this.options.fieldname]: {
-            value: file,
-            options: {
-              filename: this.uploadFileName,
-              contentType: this.options.metadata.type
-            }
-          }
+      const form = new FormData()
+      for (const property in this.options.metadata) {
+        form.append(property, this.options.metadata[property])
+      }
+      form.append('file', file)
+      form.getLength((error, length) => {
+        if (error) {
+          logger.error(error, 'upload.multipart.error')
         }
-      )
+        reqOptions.headers['content-length'] = length
+        const req = request[httpMethod](reqOptions, (error, response, body) => this._handleUploadMultipart(error, response, body, bytesUploaded))
+        // @ts-ignore
+        req._form = form
+      })
     } else {
+      const stats = fs.statSync(this.path)
+      const fileSizeInBytes = stats.size
+      reqOptions.headers['content-length'] = fileSizeInBytes","based on [this comment](https://github.com/transloadit/uppy/pull/2387#issuecomment-678238507), I don't think we need to do anything for the case where `this.options.useFormData` is `false`",I don't think we need this `@ts-ignore`
748,"@@ -471,54 +472,59 @@ class Uploader {
     const headers = headerSanitize(this.options.headers)
     const reqOptions = { url: this.options.endpoint, headers, encoding: null }
     if (this.options.useFormData) {
-      reqOptions.formData = Object.assign(
-        {},
-        this.options.metadata,
-        {
-          [this.options.fieldname]: {
-            value: file,
-            options: {
-              filename: this.uploadFileName,
-              contentType: this.options.metadata.type
-            }
-          }
+      const form = new FormData()
+      for (const property in this.options.metadata) {
+        form.append(property, this.options.metadata[property])
+      }
+      form.append('file', file)
+      form.getLength((error, length) => {
+        if (error) {
+          logger.error(error, 'upload.multipart.error')
         }
-      )
+        reqOptions.headers['content-length'] = length
+        const req = request[httpMethod](reqOptions, (error, response, body) => this._handleUploadMultipart(error, response, body, bytesUploaded))
+        // @ts-ignore
+        req._form = form
+      })
     } else {
+      const stats = fs.statSync(this.path)
+      const fileSizeInBytes = stats.size
+      reqOptions.headers['content-length'] = fileSizeInBytes
       reqOptions.body = file
+      request[httpMethod](reqOptions, (error, response, body) => this._handleUploadMultipart(error, response, body, bytesUploaded))
     }
+  }
 
-    request[httpMethod](reqOptions, (error, response, body) => {
-      if (error) {
-        logger.error(error, 'upload.multipart.error')
-        this.emitError(error)
-        return
-      }
-      const headers = response.headers
-      // remove browser forbidden headers
-      delete headers['set-cookie']
-      delete headers['set-cookie2']
-
-      const respObj = {
-        responseText: body.toString(),
-        status: response.statusCode,
-        statusText: response.statusMessage,
-        headers
-      }
+  _handleUploadMultipart (error, response, body, bytesUploaded) {",should we rename this to `_onMultipartComplete` or something similar?,Why do we need this?
749,"@@ -471,54 +472,64 @@ class Uploader {
     const headers = headerSanitize(this.options.headers)
     const reqOptions = { url: this.options.endpoint, headers, encoding: null }
     if (this.options.useFormData) {
-      reqOptions.formData = Object.assign(
-        {},
-        this.options.metadata,
-        {
-          [this.options.fieldname]: {
-            value: file,
-            options: {
-              filename: this.uploadFileName,
-              contentType: this.options.metadata.type
-            }
-          }
+      const form = new FormData()
+      for (const property in this.options.metadata) {
+        form.append(property, this.options.metadata[property])
+      }
+      form.append(this.options.fieldname, file, {
+        filename: this.uploadFileName,
+        contentType: this.options.metadata.type
+      })
+      form.getLength((error, length) => {
+        if (error) {
+          logger.error(error, 'upload.multipart.size.error')
+          this.emitError(error)
+          return
         }
-      )
+        reqOptions.headers['content-length'] = length
+        const req = request[httpMethod](reqOptions, (error, response, body) => this._onMultipartComplete(error, response, body, bytesUploaded))
+        // @ts-ignore
+        req._form = form
+      })
     } else {
+      const stats = fs.statSync(this.path)
+      const fileSizeInBytes = stats.size
+      reqOptions.headers['content-length'] = fileSizeInBytes
       reqOptions.body = file
+      request[httpMethod](reqOptions, (error, response, body) => this._onMultipartComplete(error, response, body, bytesUploaded))","```suggestion
      fs.stat(this.path, (err, stats) => {
        if (err) {
          logger.error(err, 'upload.multipart.size.error')
          this.emitError(err)
          return
        }

        const fileSizeInBytes = stats.size
        reqOptions.headers['content-length'] = fileSizeInBytes
        reqOptions.body = file
        request[httpMethod](reqOptions, (error, response, body) => this._onMultipartComplete(error, response, body, bytesUploaded))
      })
```",Shouldn't this be `this.emitError(error)`?
750,"@@ -471,6 +478,9 @@ class Uploader {
     const headers = headerSanitize(this.options.headers)
     const reqOptions = { url: this.options.endpoint, headers, encoding: null }
     const httpRequest = request[httpMethod]
+    if (this.options.insecureUpload) {",what is this option for? 🤔 ,I don't think we need this.
751,"@@ -472,6 +472,13 @@ class Uppy {
 
     const fileID = generateFileID(file)
 
+    if (files[fileID]) {
+      this.info(`Not adding duplicate file '${fileName}', it already exists`, 'error', 5000)
+      this.log(`Not adding duplicate file '${fileName}', it already exists`)","Is this causing multiple log statements? If so, is it intended?",I think it would be better to use `this.warn` here.
752,"@@ -473,6 +474,21 @@ class Uppy {
       }
     }
 
+    // We can't check maxTotalFileSize if the size is unknown.
+    if (maxTotalFileSize && file.data.size != null) {
+      let totalFilesSize = 0
+      totalFilesSize += file.size",Should we use `file.data.size` here too?,I think this should be `if (file.data.size) {`
753,"@@ -476,7 +476,11 @@ module.exports = class Webcam extends Plugin {
   }
 
   getVideo () {
-    const mimeType = this.recordingChunks[0].type
+    // Sometimes in iOS Safari, Blobs (especially the first Blob in the recordingChunks Array)
+    // have empty 'type' attributes (e.g. '') so we need to find a Blob that has a defined 'type'
+    // attribute in order to determine the correct MIME type.
+    const mimeType = this.recordingChunks.find(blob => blob.type?.length > 0).type",is it safe for us to use the `blob.type?.length` optional chaining with IE11 support? @goto-bus-stop ,I don't think we need to check for `length` he
754,"@@ -477,7 +477,7 @@ class Uppy {
   retryAll () {
     const updatedFiles = Object.assign({}, this.getState().files)
     const filesToRetry = Object.keys(updatedFiles).filter(file => {
-      return updatedFiles[file].error
+      return updatedFiles[file].error.message","Should we be checking if `error.message` exists first? What if string is returned from somewhere? Though I think we have an Eslint rule for that now, an extra check would not be too bad?",I think this should be `updatedFiles[file].err
755,"@@ -48,6 +48,10 @@ matrix:
       env: COMPANION=true
       addons:
         apt: *APT
+    - node_js: 6
+      env: COMPANION_NODE6=true","We can just reuse the `COMPANION=true` env var again here, I think, similarly to how we have 2 jobs for `UNIT=true` (one on stable node and one on node 10)",This should be `COMPANION_NODE6`
756,"@@ -480,6 +483,16 @@ class Uppy {
         }))
       }
     }
+
+    // We can't check minFileSize if the size is unknown.
+    if (minFileSize && file.data.size != null) {
+      if (file.data.size < minFileSize) {
+        throw new RestrictionError(this.i18n('inferiorSize2', {
+          backwardsCompat: this.i18n('inferiorSize'),
+          size: prettierBytes(minFileSize)
+        }))","```suggestion
        throw new RestrictionError(this.i18n('inferiorSize', {
          size: prettierBytes(minFileSize)
        }))
```",Shouldn't this be `file.data.size < minFileSiz
757,"@@ -480,7 +480,8 @@ class Uploader {
       if (error) {
         this.emitError(error)
       } else {
-        this.emitSuccess(null, {
+        const url = data && data.Location ? data.Location : null;","```suggestion
        const url = data && data.Location ? data.Location : null
```",Why do we need this change?
758,"@@ -486,16 +483,36 @@ class Uppy {
       })
       updatedFiles[file] = updatedFile
     })
-    this.setState({files: updatedFiles})
+    this.setState({
+      files: updatedFiles,
+      error: null
+    })
 
     this.emit('core:retry-all', filesToRetry)
+
+    const uploadID = this.createUpload(filesToRetry)
+    return this.runUpload(uploadID)
+  }
+
+  retryUpload (fileID) {
+    const updatedFiles = Object.assign({}, this.state.files)
+    const updatedFile = Object.assign({}, updatedFiles[fileID],
+      { error: null, isPaused: false }
+    )
+    updatedFiles[fileID] = updatedFile
+    this.setState({
+      files: updatedFiles
+    })
+
+    this.emit('core:upload-retry', fileID)
+
+    const uploadID = this.createUpload([ fileID ])
+    return this.runUpload(uploadID)
   }
 
   reset () {
     this.cancelAll()
     // this.pauseAll()",we might as well delete this one too 😄 ,Why do we need to set the error to null?
759,"@@ -486,6 +707,9 @@ module.exports = class Transloadit extends Plugin {
       this.uppy.on('upload-success', this.onFileUploadURLAvailable)
     }
 
+    this.uppy.on('restore:get-data', this.getPersistentData)
+    this.uppy.on('restored', this.onRestored)
+",So will `restore:` here a goldenretriever-specific event and `restored` a global one?,Why do we need this?
760,"@@ -49,24 +49,35 @@ class FileCard extends Component {
 
   renderMetaFields = () => {
     const metaFields = this.props.metaFields || []
+    const fieldCSSClasses = {
+      text: 'uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input'
+    }
 
     return metaFields.map((field) => {
       const id = `uppy-Dashboard-FileCard-input-${field.id}`
       return (
         <fieldset key={field.id} class=""uppy-Dashboard-FileCard-fieldset"">
           <label class=""uppy-Dashboard-FileCard-label"" for={id}>{field.name}</label>
-          <input
-            class=""uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input""
-            id={id}
-            type=""text""
-            value={this.state.formState[field.id]}
-            placeholder={field.placeholder}
-            onkeyup={this.saveOnEnter}
-            onkeydown={this.saveOnEnter}
-            onkeypress={this.saveOnEnter}
-            oninput={ev => this.tempStoreMeta(ev, field.id)}
-            data-uppy-super-focusable
-          />
+          {field.render !== undefined
+            ? field.render({
+              value: this.state.formState[field.id],
+              onChange: (newVal) => this.updateMeta(newVal, field.id),
+              fieldCSSClasses: fieldCSSClasses
+            }, h)
+            : (
+              <input
+                class={inputCSSClasses.text}","```suggestion
                class={fieldCSSClasses.text}
```",Why do we need to check for `undefined` here?
761,"@@ -49,6 +49,10 @@ Set rules and conditions to limit the type and/or number of files that can be se
 
 Maximum file size in bytes for each individual file.
 
+### `restrictions.minFileSize`
+
+Minimun file size in bytes for each individual file.","Little typo 😇 
```suggestion
Minimum file size in bytes for each individual file.
```",typo: `minimun` -> `minimum`
762,"@@ -49,6 +49,7 @@ class Uppy {
         youCanOnlyUploadFileTypes: 'You can only upload: %{types}',
         companionError: 'Connection with Companion failed',
         companionAuthError: 'Authorization required',
+        companionUnauthorizeHint: 'To unauthorize to your %{provider} account, please go to %{url}',","The link is not clickable and users won't be able to copy it before the bubble disappears, so I'm not sure if this is super useful. Maybe we could make it say something like ""You can now remove the authorization in %{provider}'s settings panel""? Would be nice to actually link to the page but that would require some changes in the info bubbles...",companionUnauthorizeHint: 'To unauthorize to y
763,"@@ -49,62 +49,21 @@ module.exports = class Tus10 extends Plugin {
 
     this.handlePauseAll = this.handlePauseAll.bind(this)
     this.handleResumeAll = this.handleResumeAll.bind(this)
+    this.handleRetryAll = this.handleRetryAll.bind(this)
     this.handleResetProgress = this.handleResetProgress.bind(this)
     this.handleUpload = this.handleUpload.bind(this)
   }
 
-  pauseResume (action, fileID) {
-    const updatedFiles = Object.assign({}, this.core.getState().files)
-    const inProgressUpdatedFiles = Object.keys(updatedFiles).filter((file) => {
-      return !updatedFiles[file].progress.uploadComplete &&
-             updatedFiles[file].progress.uploadStarted
-    })
-
-    switch (action) {
-      case 'toggle':
-        if (updatedFiles[fileID].uploadComplete) return
-
-        const wasPaused = updatedFiles[fileID].isPaused || false
-        const isPaused = !wasPaused
-        let updatedFile
-        if (wasPaused) {
-          updatedFile = Object.assign({}, updatedFiles[fileID], {
-            isPaused: false
-          })
-        } else {
-          updatedFile = Object.assign({}, updatedFiles[fileID], {
-            isPaused: true
-          })
-        }
-        updatedFiles[fileID] = updatedFile
-        this.core.setState({files: updatedFiles})
-        return isPaused
-      case 'pauseAll':
-        inProgressUpdatedFiles.forEach((file) => {
-          const updatedFile = Object.assign({}, updatedFiles[file], {
-            isPaused: true
-          })
-          updatedFiles[file] = updatedFile
-        })
-        this.core.setState({files: updatedFiles})
-        return
-      case 'resumeAll':
-        inProgressUpdatedFiles.forEach((file) => {
-          const updatedFile = Object.assign({}, updatedFiles[file], {
-            isPaused: false
-          })
-          updatedFiles[file] = updatedFile
-        })
-        this.core.setState({files: updatedFiles})
-    }
-  }
-
   handlePauseAll () {
-    this.pauseResume('pauseAll')
+    this.core.pauseResume('pauseAll')
   }
 
   handleResumeAll () {
-    this.pauseResume('resumeAll')
+    this.core.pauseResume('resumeAll')
+  }
+
+  handleRetryAll () {
+    this.core.pauseResume('retryAll')
   }",I guess these pause-all/resume-all/retry-all event handlers could also be moved to core,Why do we need to call `pauseResume` twice?
764,"@@ -49,7 +49,8 @@ class Tabs extends Component {
             tabindex=""-1""
             type=""file""
             name=""files[]""
-            multiple=""true""
+            multiple={this.props.maxNumberOfFiles !== 1 || !this.props.maxNumberOfFiles}",same here,`multiple={this.props.maxNumberOfFiles !== 1}`
765,"@@ -492,18 +502,25 @@ class Uploader {
     })
   }
 
-  /**
-   * Upload the file to S3 while it is still being downloaded.
-   */
-  uploadS3Multipart () {
+  beginTailReadStream () {
     const file = createTailReadStream(this.path, {",we are dropping the use of tail read stream as seen [here](https://github.com/transloadit/uppy/pull/2114). So maybe we should as well do without in this PR?,Why do we need this method?
766,"@@ -492,7 +492,7 @@ function _emitSocketProgress (uploader, progressData, file) {
   const {progress, bytesUploaded, bytesTotal} = progressData
   if (progress) {
     uploader.core.log(`Upload progress: ${progress}`)",I think these `uploader.core` references also need to be changed to `.uppy`,"const {uploader, progressData} = progress"
767,"@@ -496,6 +494,25 @@ module.exports = class ProviderView {
     }
   }
 
+  listAllFiles (path, files = null) {
+    files = files || []
+    return new Promise((resolve) => {
+      this.provider.list(path).then((res) => {",should we add a `catch` for this call. Otherwise what will happen when the call to `this.provider.list` fails?,`files = files || []`
768,"@@ -496,6 +494,25 @@ module.exports = class ProviderView {
     }
   }
 
+  listAllFiles (path, files = null) {
+    files = files || []
+    return new Promise((resolve) => {
+      this.provider.list(path).then((res) => {
+        res.items.forEach((item) => {
+          if (!item.isFolder) {
+            files.push(item)
+          }
+        })
+        let moreFiles = res.nextPagePath || null
+        if (moreFiles) {
+          return this.listAllFiles(moreFiles, files).then((files) => resolve(files))",do we need to add a `catch` here too? 🤔 ,`files = files || []`
769,"@@ -498,7 +498,7 @@ module.exports = class ProviderView {
       }
 
       // split url because chrome adds '#' to redirects
-      if (authWindowUrl && authWindowUrl.split('#')[0] === redirect) {
+      if (authWindowUrl && (authWindowUrl === redirect || authWindowUrl.split('#')[0] === redirect)) {","Hi, what scenario does this solve? Testing in chrome, the current implementation already covers for both scenarios. 

```js
""yahoo.com?redherring=3894"".split('#')
[""yahoo.com?redherring=3894""]
""yahoo.com?redherring=3894#"".split('#')
(2) [""yahoo.com?redherring=3894"", """"]
```

Or does `.split` behave differently in other browsers?
",`authWindowUrl === re
770,"@@ -5,10 +5,10 @@ about: Do you need assistance with building the Uppy client in your bundler, or
 labels: Not Accepted
 ---
 
-Transloadit is providing Uppy free of charge. If you want you can self-host all components and never pay us a dime. There's docs and tests and your Bug Reports and Feature Requests are always welcome on GitHub. 
+Transloadit is providing Uppy free of charge. If you want, you can self-host all of its components and never pay us a dime. There are docs and tests, and your bug reports and feature requests are always welcome on GitHub. 
 
-There is also a different category of support that we'd like to call Integration Help: making things work for you, that are already reported working for the larger community.
+There is also a different category of support that we like to call Integration Help. It means that you will be taking advantage of all the knowledge already available within the Uppy community, to help you with all kinds of things that have already been reported as working.","For the three support categories: Bug Reports, Feature Requests, Integration Help, you keep uppercasing for the latter but ditch for the former 2 @AJvanLoon ?",I don't think this is
771,"@@ -5,11 +5,17 @@
  * @returns {object} {name, extension}
  */
 module.exports = function getFileNameAndExtension (fullFileName) {
-  var re = /(?:\.([^.]+))?$/
-  var fileExt = re.exec(fullFileName)[1]
-  var fileName = fullFileName.replace('.' + fileExt, '')
-  return {
-    name: fileName,
-    extension: fileExt
+  const lastDot = fullFileName.lastIndexOf('.')
+  // these count as no extension: ""no-dot"", ""trailing-dot.""
+  if (lastDot === -1 || lastDot === fullFileName.length - 1) {
+    return {
+      name: fullFileName,
+      extension: undefined","```
declare module '@uppy/utils/lib/getFileNameAndExtension' {
  function getFileNameAndExtension(filename: string): { name: string, extension: string };
  export = getFileNameAndExtension
}
```

Let's make the extension optional in types too?",I think it would be b
772,"@@ -5,15 +5,43 @@ const FooterActions = require('./FooterActions')
 const { h } = require('preact')
 
 const Browser = (props) => {
-  let filteredFolders = props.folders
-  let filteredFiles = props.files
+  const {
+    currentSelection,
+    folders,
+    files,
+    uppyFiles,
+    filterItems,
+    filterInput,
+    maxNumberOfFiles,
+    maxTotalFileSize
+  } = props
 
-  if (props.filterInput !== '') {
-    filteredFolders = props.filterItems(props.folders)
-    filteredFiles = props.filterItems(props.files)
+  let filteredFolders = folders
+  let filteredFiles = files
+
+  if (filterInput !== '') {
+    filteredFolders = filterItems(folders)
+    filteredFiles = filterItems(files)
+  }
+
+  const selected = currentSelection.length
+  let canSelectMore = true
+
+  if (maxNumberOfFiles && (uppyFiles.length + selected >= maxNumberOfFiles)) {
+    canSelectMore = false
   }
 
-  const selected = props.currentSelection.length
+  let totalCurrentSelectionFileSize = 0
+
+  if (currentSelection) {
+    currentSelection.forEach(file => {
+      totalCurrentSelectionFileSize += file.size
+    })
+  }
+
+  if (maxTotalFileSize && totalCurrentSelectionFileSize >= maxTotalFileSize) {",Should this be `uppyFilesSizes + totalCurrentSelectionFileSize >= maxTotalFileSize`?,`canSelectMore = maxN
773,"@@ -5,16 +5,18 @@ const sampleImageDataURI =
 
 describe('core/utils', () => {
   describe('generateFileID', () => {
-    it('should take the filename object and produce a lowercase file id made up of the name and lastModified date', () => {
+    it('should take the filename object and produce a lowercase file id made up of uppy- prefix, file name (cleaned up to be lowercase, letters and numbers only), type, size and lastModified date', () => {
       const fileObj = {
         name: 'fOo0Fi@£$.jpg',
+        type: 'image/jpeg',
         data: {
-          lastModified: '2017-08-31T00:00:00.000Z'
+          lastModified: '2017-08-31T00:00:00.000Z',","Tangential nit, `lastModified` is a number in browsers. Doesn't have to be addressed in this PR but might be best for the test to mimic browser as closely as possible.",Why do we need this c
774,"@@ -5,7 +5,7 @@
 <a href=""https://www.npmjs.com/package/@uppy/aws-s3""><img src=""https://img.shields.io/npm/v/@uppy/aws-s3.svg?style=flat-square""></a>
 <a href=""https://travis-ci.org/transloadit/uppy""><img src=""https://img.shields.io/travis/transloadit/uppy/master.svg?style=flat-square"" alt=""Build Status""></a>
 
-The AwsS3 plugin can be used to upload files directly to an S3 bucket. Uploads can be signed using Uppy Server or a custom signing function.
+The AwsS3 plugin can be used to upload files directly to an S3 bucket. Uploads can be signed using Companion or a custom signing function.","Elsewhere in documentation I've used ""Uppy Companion"". Would be best to pick one and use it consistently",typo: Companion -> Co
775,"@@ -5,7 +5,7 @@
 <script src=""/uppy/uppy.min.js""></script>
 <script>
   var uppy = Uppy.Core({debug: true});
-  uppy.use(Uppy.Tus, {endpoint: '//master.tus.io/files/'});
+  uppy.use(Uppy.Tus, {endpoint: 'https://master.tus.io/files/'});","Question: what is `/examples/bundle/` about, we don't seem to have a link to it on a site anywhere, is it for some local testing? It works, but we need to add `{ autoProceed: true }`, and actually attach ProgressBar somewhere.",Why is this change ne
776,"@@ -5,8 +5,7 @@
 const config = require('@purest/providers')
 const dropbox = require('./dropbox')
 const drive = require('./drive')
-const instagram = require('./instagram')",can we delete any code in the provider implementation? i imagine the entire thing is unused now?,Why was this removed?
777,"@@ -50,6 +20,35 @@
   <a href=""http://hughsk.io/disc/"">disc</a>.
   <hr />
 
+  <h2 id=""bundle-sizes"">Bundle Sizes</h2>
+  <p>
+    Below are the minified and gzipped sizes for each Uppy package. Note that this includes the dependencies for each package, some of which are shared when you install multiple plugins—for example, the `@uppy/dropbox` and `@uppy/instagram` package are both over 11kB including dependencies, but only sum up to about 15kB when they are used together.
+  </p>","Markdown doesn’t work here, so maybe we could wrap package names in `<code>`?",I think this should b
778,"@@ -50,8 +56,12 @@ exports.getItemId = (item) => {
 }
 
 exports.getItemRequestPath = (item) => {
-  // If it's from a Team Drive, add the Team Drive ID as a query param.
+  // If it's from/is a Team Drive, add the Team Drive ID as a query param.",is this a typo?,// If it's a Team Dri
779,"@@ -50,8 +56,12 @@ exports.getItemId = (item) => {
 }
 
 exports.getItemRequestPath = (item) => {
-  // If it's from a Team Drive, add the Team Drive ID as a query param.
+  // If it's from/is a Team Drive, add the Team Drive ID as a query param.
   // The server needs the Team Drive ID to list files in a Team Drive folder.
+  if (exports.isTeamDrive(item)) {",does this mean that we can delete the `if` block that is right under this one?,I don't think this is
780,"@@ -502,29 +524,48 @@ module.exports = class XHRUpload extends Plugin {
   }
 
   uploadFiles (files) {
-    const actions = files.map((file, i) => {
+    const promises = files.map((file, i) => {
       const current = parseInt(i, 10) + 1
       const total = files.length
 
       if (file.error) {
         return () => Promise.reject(new Error(file.error))","#todo - we have this error in master too, this should be `return Promise.reject(new Error(file.error))` instead, otherwise we're getting `.then` is not a function on request fail&retry, with aws-s3 plugin:

![image](https://user-images.githubusercontent.com/7578559/63789337-96e8a700-c910-11e9-89dc-6e82a1eb2c7c.png)
",I don't think we need
781,"@@ -502,6 +504,12 @@ module.exports = class Dashboard extends Plugin {
     }
   }
 
+  disableAllFocusableElements = (disable) => {
+    const focusableNodes = toArray(this.el.querySelectorAll(FOCUSABLE_ELEMENTS))
+    focusableNodes.forEach(node => node.setAttribute('tabindex', disable ? '-1' : '0'))","@goto-bus-stop what do you think of this? I’ve checked and we mostly have `tabindex=0` on FOCUSABLE_ELEMENTS, nothing else is used, so not worth storing the previous value before changing it to `-1`?

P.S. TIL “[The maximum value for tabindex is 32767](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex)”.",Why do we need this?
782,"@@ -51,11 +56,14 @@ module.exports = class Provider extends RequestClient {
   }
 
   logout (redirect = location.href) {
-    return this.get(`${this.id}/logout?redirect=${redirect}`)
-      .then((res) => {
-        this.uppy.getPlugin(this.pluginId).storage.removeItem(this.tokenKey)
-        return res
-      })
+    return new Promise((resolve, reject) => {","this promise chain can also be flattened

```js
return this.get(`${this.id}/logout?redirect=${redirect}`).then((res) => {
  return this.uppy.getPlugin(this.pluginId).storage.removeItem(this.tokenKey)
    .then(() => res)
})
```",I don't think we need
783,"@@ -51,39 +50,23 @@ module.exports = {
   Transloadit,
   AwsS3,
   Dashboard,
-  MetaData,
   Webcam,
   GoldenRetriever,
   ReduxDevTools,
   ReduxStore
 }
 
-Object.defineProperty(module.exports, 'RestoreFiles', {
-  enumerable: true,
-  configurable: true,
-  get: () => {
-    console.warn('Uppy.RestoreFiles is deprecated and will be removed in v0.22. Use Uppy.GoldenRetriever instead.')
-    Object.defineProperty(module.exports, 'RestoreFiles', {
-      enumerable: true,
-      configurable: true,
-      writable: true,
-      value: GoldenRetriever
-    })
-    return GoldenRetriever
-  }
-})
-
-Object.defineProperty(module.exports, 'Tus10', {
-  enumerable: true,
-  configurable: true,
-  get: () => {
-    console.warn('Uppy.Tus10 is deprecated and will be removed in v0.22. Use Uppy.Tus instead.')
-    Object.defineProperty(module.exports, 'Tus10', {
-      enumerable: true,
-      configurable: true,
-      writable: true,
-      value: Tus
-    })
-    return Tus
-  }
-})
+// Object.defineProperty(module.exports, 'Tus10', {",lets get rid of this commented bit too,Can we remove this?
784,"@@ -51,7 +51,10 @@ const getConfigFromEnv = () => {
       },
       zoom: {
         key: process.env.COMPANION_ZOOM_KEY,
-        secret: getSecret('COMPANION_ZOOM_SECRET')
+        secret: getSecret('COMPANION_ZOOM_SECRET'),
+        custom: {
+          verificationToken: getSecret('COMPANION_ZOOM_VERIFICATION_TOKEN')","`verificationToken` is a required option, right? can we put it on the `zoom` options object itself instead of inside `custom`?",I don't think this is needed.
785,"@@ -51,7 +51,7 @@ module.exports = function FileProgress (props) {
   ) {
     return (
       <div class=""uppy-DashboardItem-progress"">
-        <div class=""uppy-DashboardItem-progressIndicator"">
+        <div class=""uppy-u-reset uppy-DashboardItem-progressIndicator"">","Is `uppy-u-reset` supposed to be on a div, instead of a button?",I think this should be `uppy-
786,"@@ -51,8 +51,11 @@
       };
     }
 
+    // IE 10 doesn’t support console.debug
+    var consoleDebug = console.debug || console.log
+
     console.log = customLog(console.log.bind(console), document.getElementById(""console-log""));","I guess we don’t need `console.log =` here then, because `.debug` calls `.log` when needed? But it’s a minor detail, it’s not hurting anything.",Why do we need this?
787,"@@ -514,44 +523,31 @@ class Uppy {
       files: updatedFiles
     })
 
-    this.emit('core:upload-retry', fileID)
+    this.emit('upload-retry', fileID)
 
     const uploadID = this.createUpload([ fileID ])
-    return this.runUpload(uploadID)
+    return this._runUpload(uploadID)
   }
 
   reset () {
     this.cancelAll()
   }
 
-  cancelAll () {
-    this.emit('core:cancel-all')
-    this.setState({ files: {}, totalProgress: 0 })
-  }
-
   calculateProgress (data) {
     const fileID = data.id",can `calculateProgress` and `calculateTotalProgress` also be private?,Why did you remove this?
788,"@@ -516,7 +516,12 @@ function isDOMElement (obj) {
  */
 function findDOMElement (element) {
   if (typeof element === 'string') {
-    return document.querySelector(element)
+    const elements = [].slice.call(document.querySelectorAll(element))
+    if (elements.length > 1) {
+      return elements
+    }
+    return elements[0]
+    // return document.querySelector(element)",Changing this function means other cases (like a `target` option) where the selector exists more than once on the page also return an array. Maybe better to have a separate function that always returns an array?,Can we remove this?
789,"@@ -52,10 +52,15 @@ Optionally provide rules and conditions for which files can be selected.
 
 **Parameters**
 
-- `maxFileSize` *number*
-- `maxNumberOfFiles` *number*
-- `minNumberOfFiles` *number*
-- `allowedFileTypes` *array* of wildcards or exact mime types, like `image/*`
+- `maxFileSize` *null | number*
+- `maxNumberOfFiles` *null | number*
+- `minNumberOfFiles` *null | number*
+- `allowedFileTypes` *null | array* of wildcards `image/*`, exact mime types `image/jpeg`, or file extensions `.jpg`: `['image/*', '.jpg', '.jpeg', '.png', '.gif']`
+
+`maxNumberOfFiles` affects the number of files user is able to select via the system file dialog in UI plugins like `DragDrop`, `FileInput` and `Dashboard`: when set to `1` they will only be able to select a single file, otherwise, when `null` or other number, they will be able to select multiple files.
+
+`allowedFileTypes` array also gets passed to the system file dialog (see [`input[type=file]` accept](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#Limiting_accepted_file_types)), so user will only be able to select images, for example.","imho this is clearer when mentioning the behaviour in general instead of an example:

> `allowedFileTypes` gets passed to the system file dialog via `<input>`'s [`accept` attribute](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#Limiting_accepted_file_types), so only files matching these types will be selectable.

but feel free to ignore if you disagree, this is probably super subjective",I don't think we need the `*n
790,"@@ -52,11 +52,13 @@ class Zoom extends Provider {
         })
     })
 
+    const userResponse = await userPromise
+
     if (from && to) {
       const queryObj = {
         page_size: PAGE_SIZE,
-        from,
-        to
+        from: moment.tz(from, userResponse.body.timezone || 'UTC').startOf('day').tz('UTC').format('YYYY-MM-DD'),
+        to: moment.tz(to, userResponse.body.timezone || 'UTC').endOf('day').tz('UTC').format('YYYY-MM-DD')","example: user in Canada (EDT, (UTC -4)) clicks on a folder for a month (eg 08-01 to 08-31), they're really asking for  files for 08-01 0:00 EDT (08-01 04:00 UTC) to 08-31 23:59 EDT (09-01 03:59 UTC). 

so the incoming request from/to is in local time, we convert to their timezone, set it to start/end of day, convert to UTC, and get just the date portion (because Zoom API only accepts date, not date time)
",Can we use `moment.tz` here?
791,"@@ -52,16 +54,23 @@ module.exports = function fileItem (props) {
                         }""
                   onclick=${(ev) => {
                     if (isUploaded) return
+                    if (error) {
+                      props.retryUpload(file.id)
+                      return
+                    }
                     if (props.resumableUploads) {
                       props.pauseUpload(file.id)
                     } else {
                       props.cancelUpload(file.id)
                     }
                   }}>","Might be good to move these largeish event handlers into a `function onclick (ev) {}` and do `onclick=${onclick}` at some point, a la

```js
function view () {
  function onclick () {
    alert('boo! 👻')
  }
  return html`<button onclick=${onclick}>click</button>`
}
```",I don't think this is the rig
792,"@@ -52,16 +54,23 @@ module.exports = function fileItem (props) {
                         }""
                   onclick=${(ev) => {
                     if (isUploaded) return
+                    if (error) {
+                      props.retryUpload(file.id)
+                      return
+                    }
                     if (props.resumableUploads) {
                       props.pauseUpload(file.id)
                     } else {
                       props.cancelUpload(file.id)
                     }
                   }}>
-            ${FileItemProgress({
-              progress: file.progress.percentage,
-              fileID: file.id
-            })}
+            ${props.file.error",could this also use the `error` variable declared above?,I think this should be `props
793,"@@ -52,4 +52,27 @@ module.exports = class Provider extends RequestClient {
         return res
       })
   }
+
+  static initPlugin (plugin, opts, defaultOpts) {","This static function serves as a place where setups common to all Provider Plugins is done. Please let me know if you have suggestions for a better place where this function can live.

PS: I don't know of a different way to approach this. It's either we do it the way I'm doing it here. Or we have a class called `ProviderPlugin` which all Provider Plugins extend. Otherwise, we would continue to have repetitive code in all providers, which is hard to maintain.",
794,"@@ -52,4 +52,27 @@ module.exports = class Provider extends RequestClient {
         return res
       })
   }
+
+  static initPlugin (plugin, opts, defaultOpts) {
+    plugin.type = 'acquirer'
+    plugin.files = []
+    if (defaultOpts) {
+      plugin.opts = Object.assign({}, defaultOpts, opts)
+    }
+    if (opts.serverPattern) {
+      const pattern = opts.serverPattern
+      // validate serverPattern param
+      if (typeof pattern !== 'string' && !Array.isArray(pattern) && !(pattern instanceof RegExp)) {
+        throw new TypeError('Provider: the option `serverPattern` must be one of string, Array, RegExp')",could we use `${plugin.id}` at the start of this message instead of `Provider` so it shows if it's from GoogleDrive or Dropbox or XYZ?,I don't think we need to chec
795,"@@ -52,6 +55,20 @@ The types of recording modes to allow.
 
 By default, all modes are allowed, and the Webcam plugin will show controls for recording video as well as taking pictures.
 
+### `mirror: true`
+
+Whether to mirror preview image from the camera. This option is useful when taking a selfie with a front camera: when you wave your right hand, you will see your hand on the right on the preview screen, like in the mirror. But when you actually take a picture, it will not be mirrored. This is how smartphone selfie cameras behave.
+
+### `facingMode: 'user'`
+
+Devices sometimes have multiple cameras, front and back, for example. There’s a browser API to set which camera will be used, [facingMode](https://developer.mozilla.org/en-US/docs/Web/API/MediaTrackConstraints/facingMode):
+
+- `user`: The video source is facing toward the user; this includes, for example, the front-facing camera on a smartphone.
+- `environment`:  The video source is facing away from the user, thereby viewing their environment. This is the back camera on a smartphone.
+- `left`: The video source is facing toward the user but to their left, such as a camera aimed toward the user but over their left shoulder.
+- `right`: The video source is facing toward the user but to their right, such as a camera aimed toward the user but over their right shoulder.",sweet!,I don't think we need to ment
796,"@@ -52,7 +52,7 @@
     }
 
     console.log = customLog(console.log.bind(console), document.getElementById(""console-log""));
-    console.debug = customLog(console.log.bind(console), document.getElementById(""console-log""));
+    console.debug = customLog(console.debug.bind(console), document.getElementById(""console-log""));",I think this used console.log for compatibility with IE,console.log = customLog(conso
797,"@@ -521,12 +522,27 @@ module.exports = class Dashboard extends Plugin {
     }
 
     this.startListeningToResize()
+    document.addEventListener('paste', this.handlePasteOnBody)
 
     this.uppy.on('plugin-remove', this.removeTarget)
     this.uppy.on('file-added', this.handleFileAdded)
     this.uppy.on('complete', this.handleComplete)
   }
 
+  // ___Why do we listen to the 'paste' event on a document instead of a civil onPaste={props.handlePaste} prop?
+  //    Because (at least) Chrome doesn't handle paste if focus is on some button, e.g. 'My Device'.
+  //    We could add onPaste to each button; and make each button contentEditable={true} for pastes to work while we're focused on them, but it adds a visible cursor, and requires us to be adding onChange={event.preventDefault()} to each button.
+  //    => Therefore, the best option is to listen to all 'paste' events, and only react to them when we are focused on our particular Uppy instance.
+  // ___Why do we still need onPaste={props.handlePaste} for the DashboardUi!
+  //    Because if we click on the 'Drop files here,', `document.activeElement` will be 'body'. Which means our standard determination of whether we're pasting into our Uppy instance won't work.
+  //    => Therefore, we need a traditional onPaste={props.handlePaste} handler too.
+  handlePasteOnBody (event) {","Love the detailed explanation, really helps, thank you!",`onPaste={props.handlePaste} 
798,"@@ -524,6 +524,17 @@ function findDOMElement (element) {
   }
 }
 
+/**
+ * Find one or more DOM elements.
+ *
+ * @param {string} selector
+ * @return {Array|null}
+ */
+function findAllDOMElements (selector) {
+  const elements = [].slice.call(document.querySelectorAll(selector))
+  return elements.length > 0 ? elements : null","🤔 looking at this now, `trigger:` should also still accept a DOM element being passed in. If it's not a CSS selector string but a DOM element we should return that in an array.",I don't think we need to retu
799,"@@ -527,12 +527,18 @@ function findDOMElement (element) {
 /**
  * Find one or more DOM elements.
  *
- * @param {string} selector
+ * @param {string} element
  * @return {Array|null}
  */
-function findAllDOMElements (selector) {
-  const elements = [].slice.call(document.querySelectorAll(selector))
-  return elements.length > 0 ? elements : null
+function findAllDOMElements (element) {
+  if (typeof element === 'string') {
+    const elements = [].slice.call(document.querySelectorAll(element))
+    return elements.length > 0 ? elements : null
+  }
+
+  if (typeof element === 'object' && isDOMElement(element)) {
+    return element","If we return an array with a single item here (`return [element]`), the code that checks if the result is an array when adding and removing events can be simplified to always assume an array.",I don't think we need the `ty
800,"@@ -53,20 +55,30 @@ describe('Test Provider options', () => {
       ],
       callback: '/drive/callback'
     })
+    expect(grantConfig.zoom).toEqual({
+      key: 'zoom_key',
+      secret: 'zoom_secret',
+      transport: 'session',
+      authorize_url: 'https://zoom.us/oauth/authorize',
+      access_url: 'https://zoom.us/oauth/token',
+      callback: '/zoom/callback'
+    })
   })
 
   test('adds provider options for secret files', () => {
     process.env.COMPANION_DROPBOX_SECRET_FILE = process.env.PWD + '/test/resources/dropbox_secret_file'
     process.env.COMPANION_GOOGLE_SECRET_FILE = process.env.PWD + '/test/resources/google_secret_file'
     process.env.COMPANION_INSTAGRAM_SECRET_FILE = process.env.PWD + '/test/resources/instagram_secret_file'
+    process.env.ZOOM_SECRET_FILE = process.env.PWD + '/test/resources/zoom_secret_file'
 
     companionOptions = getCompanionOptions()
-
     providerManager.addProviderOptions(companionOptions, grantConfig)
 
     expect(grantConfig.dropbox.secret).toBe('xobpord')
     expect(grantConfig.google.secret).toBe('elgoog')
     expect(grantConfig.instagram.secret).toBe('margatsni')
+    // not sure why this is failing...
+    // expect(grantConfig.zoom.secret).toBe('u8Z5ceq')",the reason this is failing is because line 72 is setting ` process.env.ZOOM_SECRET_FILE` instead of ` process.env.COMPANION_ZOOM_SECRET_FILE`,I'm not sure why this is failing...
801,"@@ -53,50 +55,63 @@ module.exports = class RequestClient {
   }
 
   get (path) {
-    return fetch(this._getUrl(path), {
-      method: 'get',
-      headers: this.headers,
-      credentials: 'same-origin'
-    })
-      // @todo validate response status before calling json
-      .then(this.onReceiveResponse)
-      .then((res) => res.json())
-      .catch((err) => {
-        throw new Error(`Could not get ${this._getUrl(path)}. ${err}`)
+    return new Promise((resolve, reject) => {",This promise wrapper should be unnecessary—can `return` the `this.headers().then()` chain instead,Why not just `return this._getUrl(p
802,"@@ -53,50 +55,63 @@ module.exports = class RequestClient {
   }
 
   get (path) {
-    return fetch(this._getUrl(path), {
-      method: 'get',
-      headers: this.headers,
-      credentials: 'same-origin'
-    })
-      // @todo validate response status before calling json
-      .then(this.onReceiveResponse)
-      .then((res) => res.json())
-      .catch((err) => {
-        throw new Error(`Could not get ${this._getUrl(path)}. ${err}`)
+    return new Promise((resolve, reject) => {
+      this.headers().then((headers) => {
+        fetch(this._getUrl(path), {
+          method: 'get',
+          headers: headers,
+          credentials: 'same-origin'
+        })
+          // @todo validate response status before calling json
+          .then(this.onReceiveResponse)
+          .then((res) => res.json().then(resolve))
+          .catch((err) => {
+            reject(new Error(`Could not get ${this._getUrl(path)}. ${err}`))
+          })
       })
+    })
   }
 
   post (path, data) {
-    return fetch(this._getUrl(path), {
-      method: 'post',
-      headers: this.headers,
-      credentials: 'same-origin',
-      body: JSON.stringify(data)
-    })
-      .then(this.onReceiveResponse)
-      .then((res) => {
-        if (res.status < 200 || res.status > 300) {
-          throw new Error(`Could not post ${this._getUrl(path)}. ${res.statusText}`)
-        }
-        return res.json()
-      })
-      .catch((err) => {
-        throw new Error(`Could not post ${this._getUrl(path)}. ${err}`)
+    return new Promise((resolve, reject) => {
+      this.headers().then((headers) => {",ditto about promise chain,Shouldn't this be `reject(new Error
803,"@@ -53,50 +55,63 @@ module.exports = class RequestClient {
   }
 
   get (path) {
-    return fetch(this._getUrl(path), {
-      method: 'get',
-      headers: this.headers,
-      credentials: 'same-origin'
-    })
-      // @todo validate response status before calling json
-      .then(this.onReceiveResponse)
-      .then((res) => res.json())
-      .catch((err) => {
-        throw new Error(`Could not get ${this._getUrl(path)}. ${err}`)
+    return new Promise((resolve, reject) => {
+      this.headers().then((headers) => {
+        fetch(this._getUrl(path), {
+          method: 'get',
+          headers: headers,
+          credentials: 'same-origin'
+        })
+          // @todo validate response status before calling json
+          .then(this.onReceiveResponse)
+          .then((res) => res.json().then(resolve))
+          .catch((err) => {
+            reject(new Error(`Could not get ${this._getUrl(path)}. ${err}`))
+          })
       })
+    })
   }
 
   post (path, data) {
-    return fetch(this._getUrl(path), {
-      method: 'post',
-      headers: this.headers,
-      credentials: 'same-origin',
-      body: JSON.stringify(data)
-    })
-      .then(this.onReceiveResponse)
-      .then((res) => {
-        if (res.status < 200 || res.status > 300) {
-          throw new Error(`Could not post ${this._getUrl(path)}. ${res.statusText}`)
-        }
-        return res.json()
-      })
-      .catch((err) => {
-        throw new Error(`Could not post ${this._getUrl(path)}. ${err}`)
+    return new Promise((resolve, reject) => {
+      this.headers().then((headers) => {
+        fetch(this._getUrl(path), {
+          method: 'post',
+          headers: headers,
+          credentials: 'same-origin',
+          body: JSON.stringify(data)
+        })
+          .then(this.onReceiveResponse)
+          .then((res) => {
+            if (res.status < 200 || res.status > 300) {
+              reject(new Error(`Could not post ${this._getUrl(path)}. ${res.statusText}`))
+              return
+            }
+            res.json().then(resolve)
+          })
+          .catch((err) => {
+            reject(new Error(`Could not post ${this._getUrl(path)}. ${err}`))
+          })
       })
+    })
   }
 
   delete (path, data) {
-    return fetch(`${this.hostname}/${path}`, {
-      method: 'delete',
-      headers: this.headers,
-      credentials: 'same-origin',
-      body: data ? JSON.stringify(data) : null
-    })
-      .then(this.onReceiveResponse)
-      // @todo validate response status before calling json
-      .then((res) => res.json())
-      .catch((err) => {
-        throw new Error(`Could not delete ${this._getUrl(path)}. ${err}`)
+    return new Promise((resolve, reject) => {",This promise wrapper should be unnecessary—can `return` the `this.headers().then()` chain instead,Shouldn't this be `.catch(reject)`?
804,"@@ -53,7 +53,7 @@ describe('React: Dashboard', () => {
     await toggle()
 
     // open GDrive panel
-    const gdriveButton = await $('.uppy-DashboardTab:nth-child(1) button')
+    const gdriveButton = await $('.uppy-DashboardTab[data-acquirer-id=""GoogleDrive""] button')","```suggestion
    const gdriveButton = await $('.uppy-DashboardTab[data-uppy-acquirer-id=""GoogleDrive""] button')
```",// open GDrive panel
805,"@@ -534,10 +535,8 @@ module.exports = class ProviderView {
             pluginName={this.plugin.title}
             pluginIcon={this.plugin.icon}
             demo={this.plugin.opts.demo}
-            checkAuth={this.checkAuth}
             handleAuth={this.handleAuth}
-            handleDemoAuth={this.handleDemoAuth}
-            checkAuthInProgress={checkAuthInProgress} />
+            handleDemoAuth={this.handleDemoAuth} />","Should we remove this, have not been used for a while, right?",Why did you remove `checkAuthInProg
806,"@@ -535,6 +536,15 @@ module.exports = class Dashboard extends Plugin {
     //    To support IE.
     this.el.addEventListener('focus', this.recordIfFocusedOnUppyAtLeastOnce, true)
     this.el.addEventListener('click', this.recordIfFocusedOnUppyAtLeastOnce, true)
+
+    if (this.opts.inline) {
+      document.addEventListener('keydown', this.handleKeyDownInInline)
+    }",Nitpicking: would `this.el.addEventListener` work?,Why do we need this?
807,"@@ -536,12 +584,30 @@ class Uppy {
 
     this.emit('core:upload')
 
+    const waitingFileIDs = Object.keys(this.state.files)
+      .map(getFile, this)
+      .filter(isFileWaiting)
+      .map(toFileID)
+    function getFile (fileID) {
+      return this.state.files[fileID]
+    }
+    function isFileWaiting (file) {
+      // TODO: replace files[file].isRemote with some logic
+      //
+      // filter files that are now yet being uploaded / haven’t been uploaded
+      // and remote too
+      return !file.progress.uploadStarted || file.isRemote
+    }
+    function toFileID (file) {
+      return file.id
+    }","This bunch of code makes sure that each plugin in the pipeline works on the same files. I'm not sure if this is the way to go, perhaps the previous way where plugins pick the files they need to work on is better, if we design the progress state in such a way that plugins can find the right files easily. With this patch there is some implicit state in this function closure…",I don't think you need the `.filter
808,"@@ -537,6 +537,12 @@ module.exports = class XHRUpload extends Plugin {
     const files = fileIDs.map((fileID) => this.uppy.getFile(fileID))
 
     if (this.opts.bundle) {
+      // if bundle: true, we don’t support remote uploads
+      const isSomeFileRemote = files.some(file => file.isRemote)
+      if (isSomeFileRemote) {
+        throw new Error('Can’t bundle remote files when bundle: true is set')",Maybe change it to `'Can’t UPLOAD remote files when bundle: true is set'`?,I don't think we should throw an er
809,"@@ -54,42 +67,40 @@ if (!watchifyEnabled && process.argv[2]) {
 }
 
 // Find each app.es6 file with glob.
-glob(srcPattern, function (err, files) {
+glob(srcPattern, (err, files) => {
   if (err) throw new Error(err)
 
   if (watchifyEnabled) {
     console.log('--> Watching examples..')
   }
 
-  var muted = []
+  const muted = new Set()
 ",TIL about `Set`,Why do we need a Set here?
810,"@@ -54,6 +54,8 @@ class Uppy {
         // TODO: In 2.0 `exceedsSize2` should be removed in and `exceedsSize` updated to use substitution.
         exceedsSize2: '%{backwardsCompat} %{size}',
         exceedsSize: 'This file exceeds maximum allowed size of',
+        inferiorSize2: '%{backwardsCompat} %{size}',
+        inferiorSize: 'This file is smaller than the allowed size of',","```suggestion
        inferiorSize: 'This file is smaller than the allowed size of %{size}',
```",`exceedsSize2` and `inferiorSize` s
811,"@@ -546,7 +546,17 @@ module.exports = class Dashboard extends Plugin {
     })
 
     // 4. Add all dropped files
-    getDroppedFiles(event.dataTransfer)
+    let executedDropErrorOnce = false
+    const logDropError = (error) => {
+      this.uppy.log(error.message, 'error')","Is there a reason for logging `error.message` specifically, maybe log the whole error object?",Why do we need this?
812,"@@ -546,7 +546,17 @@ module.exports = class Dashboard extends Plugin {
     })
 
     // 4. Add all dropped files
-    getDroppedFiles(event.dataTransfer)
+    let executedDropErrorOnce = false
+    const logDropError = (error) => {
+      this.uppy.log(error.message, 'error')
+
+      // In practice all drop errors are most likely the same, so let's just show one to avoid overwhelming the user
+      if (!executedDropErrorOnce) {",👍 ,Why do we need this?
813,"@@ -55,12 +85,13 @@ module.exports = (props) => {
   let progressMode
   let progressBarContent
   if (uploadState === STATE_PREPROCESSING || uploadState === STATE_POSTPROCESSING) {
-    // TODO set progressValue and progressMode depending on the actual pre/postprocess
-    // progress state
-    progressMode = 'indeterminate'
-    progressValue = undefined
+    const progress = calculateProcessingProgress(props.files)
+    progressMode = progress.mode
+    if (progressMode === 'determinate') {
+      progressValue = progress.value * 100
+    }",This implements the TODO,Why do we need to multiply by 100 h
814,"@@ -55,24 +56,22 @@ const uppy = Uppy({
     closeModalOnClickOutside: false,
     locale: {
       strings: {browse: 'browse'}
-    }
+    },
+    metaFields: [
+      { id: 'license', name: 'License', value: 'Creative Commons', placeholder: 'specify license' },
+      { id: 'caption', name: 'Caption', value: '', placeholder: 'describe what the image is about' }
+    ]",we should add docs for the `metaFields` option. could do it here or in a followup pr.,I don't think we need a separate fi
815,"@@ -55,6 +55,12 @@ module.exports = class AwsS3 extends Plugin {
 
     this.opts = { ...defaultOptions, ...opts }
 
+    if (!this.opts.includes('companionUrl')) {","We should only warn if there is no user-provided getUploadParameters function:
```suggestion
    if (!this.opts.companionUrl && !opts.getUploadParameters) {
```

(and check for the `companionUrl` _property_ because it's an object rather than an array)",this.companionUrl =
816,"@@ -55,7 +55,7 @@
 .uppy-StatusBar:not([aria-hidden=true]).is-waiting {
   background-color: $white;
   height: 65px;
-  border-top: 1px solid $gray-200;
+  border-top: 1px solid #eaeaea;
 }","Could we stick to the variables for colors, maybe we should be using a different one? Not sure about the reason for this change.",border-bottom: 1px solid $gray-200;
817,"@@ -55,7 +64,6 @@ module.exports = class Tus extends Plugin {
 
     // set default options
     const defaultOptions = {
-      resume: true,","In tus-js-client v2 the `resume` option has been removed. When previously enabled, the uploader would look into localStorage to see if a file with the same fingerprint has been uploaded before and then resume from that URL. Regardless of whether `resume` is enabled, the retries of errored requests is controlled by the `retryDelays` option.

In v2, the app can now query the previous uploads on its own and ask the user (or determine on its own) which upload should be resumed. The API looks like this:

```js
  upload = new tus.Upload(file, options);
  upload.findPreviousUploads().then((previousUploads) => {
    // Prompt user which upload should be resumed
    const index = askToResumeUpload(previousUploads);
    if (index != null) {
       upload.resumeFromPreviousUpload(previousUploads[index]);
    }

    upload.start();
  });
```

I didn't add the call to findPreviousUploads yet because I don't really know where to fit it. Maybe you can help?","// resume: true,"
818,"@@ -551,6 +568,55 @@ class Uploader {
       this.cleanUp()
     })
   }
+
+  /**
+   * Upload a stream to B2 while it is still being downloaded.
+   */
+  uploadB2 () {
+    if (!this.options.b2) {
+      this.emitError(new Error('The B2 client is not configured on this companion instance.'))
+      return
+    }
+    const filename = this.options.metadata.filename || path.basename(this.path)
+    const fileSize = this.options.size
+    const { client, options } = this.options.b2
+
+    if (!this._b2EndpointPool) {
+      this._b2EndpointPool = client.createEndpointPool(options.bucket)
+    }
+
+    const upload = client.upload({
+      bucketName: options.bucket,
+      path: this.path,
+      fileName: options.getPath(null, filename), // destination
+      fileSize, // expected final size of the file being transferred
+      stream: this.beginTailReadStream(),
+      endpointPool: this._b2EndpointPool
+    })
+
+    this.b2Upload = upload
+
+    upload.onUploadProgress = ({ loaded, total }) => {
+      this.emitProgress(loaded, total)
+    }
+
+    upload.send((error, data) => {
+      this.b2Upload = null
+      if (error) {
+        this.emitError(error)
+      } else {
+        this.emitSuccess('?', {",the first argument to `emitSuccess` is meant to be the [url to the uploaded file](https://github.com/transloadit/uppy/blob/14f5edc715adf05301a5f9330acd12afa8abd97d/packages/%40uppy/companion/src/server/Uploader.js#L370). Is that not available in this case? If not then we should probably be passing the value `null` there instead.,I think it would be better to use `
819,"@@ -553,16 +553,14 @@ class Uppy {
 
     this.setState({
       currentUploads: updatedUploads,
-      files: updatedFiles
+      files: updatedFiles,
+      ...(
+        // If this is the last file we just removed - allow new uploads!
+        Object.keys(updatedFiles).length === 0 &&
+        { allowNewUpload: true }
+      )","Is `...(` necessary because you don’t want to `allowNewUpload: false` if this was not the last file?

I mean, why not:

```js
const isLastFile = Object.keys(updatedFiles).length === 0
setState({
  allowNewUpload: isLastFile
})
```",I don't think you need the `Object.
820,"@@ -555,7 +556,7 @@ module.exports = class View {
     }
 
     if (!authenticated) {
-      return AuthView({
+      return h(AuthView, {","ok, that's not so bad :D","return h(AuthView, {"
821,"@@ -556,6 +556,13 @@ class Uppy {
       files: updatedFiles
     })
 
+    // If nothing is uploading anymore, and if nothing has uploaded yet - allow new uploads!
+    if (Object.keys(updatedFiles).length === 0) {
+      this.setState({
+        allowNewUpload: true","Could we combine this with the `setState` call above, so we don’t have to call it twice?",I think this should be `if (updated
822,"@@ -56,13 +56,30 @@ module.exports = class FileCard extends Component {
   }
 
   render () {
+    if (!this.props.fileCardFor) {
+      return <div class=""uppy-DashboardFileCard"" aria-hidden />
+    }
+
     const file = this.props.files[this.props.fileCardFor]
 
-    return <div class=""uppy-DashboardFileCard"" aria-hidden={!this.props.fileCardFor}>
-      {this.props.fileCardFor &&
+    console.log({
+      what: this.props.i18n('editing', {
+        file: 'test'
+      }),
+      ever: this.props.i18nArray('editing', {
+        file: <span class=""uppy-DashboardContent-titleFile"">{file.meta ? file.meta.name : file.name}</span>
+      })
+    })
+",Forgotten debug console.log?,Can we remove this console log?
823,"@@ -56,29 +70,47 @@ export interface Store {
   subscribe(listener: any): () => void;
 }
 
+interface LocaleObject {
+  [key: string]: string | LocaleObject;","A locale object can only have a `strings` and `pluralize` key, I think it should be:

```ts
interface LocaleStrings {
  [key: string]: string | LocaleStrings;
}
interface Locale {
  strings: LocaleStrings;
  pluralize: (n: number) => number;
}
```",
824,"@@ -56,6 +56,8 @@ module.exports = function fileItem (props) {
         ? props.i18n('retryUpload')
         : props.i18n('cancelUpload')
 
+  console.log('ЕБА', props.showLinkToFileUploadResult)",:point_up: :),Please remove the console.log
825,"@@ -56,9 +56,9 @@ module.exports = class FileCard extends Component {
       {this.props.fileCardFor &&
         <div style=""width: 100%; height: 100%;"">
           <div class=""uppy-DashboardContent-bar"">
-            <h2 class=""uppy-DashboardContent-title"">Editing <span class=""uppy-DashboardContent-titleFile"">{file.meta ? file.meta.name : file.name}</span></h2>
-            <button class=""uppy-DashboardContent-back"" type=""button"" title=""Finish editing file""
-              onclick={this.handleClick}>Done</button>
+            <h2 class=""uppy-DashboardContent-title"">{this.props.i18n('editing')} <span class=""uppy-DashboardContent-titleFile"">{file.meta ? file.meta.name : file.name}</span></h2>","we should have a way to insert components into a i18n string. so that we could define a translation string like `'%{filename} is being edited'`, and inject the filename `<span/>` at the right place. I imagine there must be a language where the `Editing` text should come after the file name. we can think about that later tho.",I think this should be `{this.props
826,"@@ -565,6 +588,10 @@ module.exports = class ProviderView {
       i18n: this.plugin.uppy.i18n
     })
 
-    return <Browser {...browserProps} />
+    return (
+      <CloseWrapper onUnmount={this.clearSelection}>
+        <Browser {...browserProps} />
+      </CloseWrapper>
+    )","👍

`onUnmount` is handy, but a Preact-only thing it seems. Very much not a big deal, but I was trying to keep an open door for React, hence not using `render(state, props)` and other niceties :) But we can always refactor of course, no need to stick to theoretical benefits :) ",Why do we need this wrapper?
827,"@@ -566,17 +579,35 @@ module.exports = class Dashboard extends Plugin {
     })
   }
 
-  afterUpdate () {
-    // If update is connected to showing the Informer - let the screen reader calmly read it.
-    const isInformerPresent = !this.uppy.getState().info.isHidden
+  superFocusOnEachUpdate () {
+    // If we are inline
+    if (this.opts.inline) {
+      const isFocusInUppy = this.el.contains(document.activeElement)
+      const isFocusOnBody = document.activeElement === document.querySelector('body')
 
-    if (isInformerPresent) {
-      this.superFocus.cancel()
+      // Only superFocus() if focus:
+      // - is already inside of Uppy,
+      // - or nowhere (== on body) [this is true when some overlay we were focused on disappeared. this IS NOT true when user is focused on some element on the page other than Uppy]
+      //   BUT we have already, at least once, focused on uppy [this is done to avoid focusing related to the page initialisation]
+      if (isFocusInUppy || (isFocusOnBody && this.ifFocusedOnUppyAtLeastOnce)) {
+        this.superFocus(this.el, this.getPluginState().activeOverlayType)
+      }",Do we need to repeat the `isInformerPresent` logic for inline?,I don't think we need to check for 
828,"@@ -57,6 +57,11 @@ const getConfigFromEnv = () => {
         region: process.env.COMPANION_AWS_REGION,
         useAccelerateEndpoint:
           process.env.COMPANION_AWS_USE_ACCELERATE_ENDPOINT === 'true'
+      },
+      b2: {
+        keyId: process.env.COMPANION_B2_KEY_ID,","This is used as `applicationKeyId` elsewhere:
```suggestion
        applicationKeyId: process.env.COMPANION_B2_KEY_ID,
```",I think this should be `process.env
829,"@@ -57,6 +57,11 @@ const getConfigFromEnv = () => {
         region: process.env.COMPANION_AWS_REGION,
         useAccelerateEndpoint:
           process.env.COMPANION_AWS_USE_ACCELERATE_ENDPOINT === 'true'
+      },
+      b2: {
+        keyId: process.env.COMPANION_B2_KEY_ID,
+        key: getSecret('COMPANION_B2_KEY'),","similarly:
```suggestion
        applicationKey: getSecret('COMPANION_B2_KEY'),
```",I think this should be `process.env
830,"@@ -57,9 +57,11 @@ class FileCard extends Component {
     const metaFields = this.props.metaFields || []
 
     return metaFields.map((field, i) => {
+      const id = `uppy-DashboardFileCard-input-${field.id}`","I wonder if a `field.id` might contain special characters that could make `id` an invalid css selector?

In that case we might be better of using `cuid`, like: https://github.com/transloadit/uppy/blob/fcfdf64d7e058d74f9315d3258dee5aaa8f1af82/packages/%40uppy/dashboard/src/index.js#L40

Not sure, just sharing a thought.

https://stackoverflow.com/questions/448981/which-characters-are-valid-in-css-class-names-selectors",const id = `uppy-DashboardFileCard-
831,"@@ -570,6 +570,21 @@ module.exports = class Dashboard extends Plugin {
       })
   }
 
+  handleRequestThumbnail = (file) => {
+    if (!this.opts.waitForThumbnailsBeforeUpload) {
+      this.uppy.emit('thumbnail:request', file)
+    }
+  }
+
+  /**
+   * We cancel thumbnail requests when a file item component unmounts to avoid clogging up the queue when the user scrolls past many elements.",Really nice ,I'm not sure if this is the best pl
832,"@@ -577,49 +577,143 @@ class Uppy {
         })
       }, 4)
     }
+  }
 
-    return fileID
+  /**
+   * Add a new file to `state.files`. This will run `onBeforeFileAdded`,
+   * try to guess file type in a clever way, check file against restrictions,
+   * and start an upload if `autoProceed === true`.
+   *
+   * @param {object} file object to add
+   * @returns {string} id for the added file
+   */
+  addFile (file) {
+    this._assertNewUploadAllowed(file)
+
+    const { files } = this.getState()
+    const newFile = this._checkAndCreateFileStateObject(files, file)
+
+    this.setState({
+      files: {
+        ...files,
+        [newFile.id]: newFile
+      }
+    })
+
+    this.emit('file-added', newFile)
+    this.log(`Added file: ${newFile.name}, ${newFile.id}, mime type: ${newFile.type}`)
+
+    this._startIfAutoProceed()
+
+    return newFile.id
   }
 
-  removeFile (fileID) {
+  /**
+   * Add multiple files to `state.files`. See the `addFile()` documentation.
+   *
+   * This cuts some corners for performance, so should typically only be used in cases where there may be a lot of files.
+   *
+   * If an error occurs while adding a file, it is logged and the user is notified. This is good for UI plugins, but not for programmatic use. Programmatic users should usually still use `addFile()` on individual files.
+   */
+  addFiles (fileDescriptors) {
+    this._assertNewUploadAllowed()
+
+    // create a copy of the files object only once
+    const files = { ...this.getState().files }
+    const newFiles = []
+    const errors = []
+    for (let i = 0; i < fileDescriptors.length; i++) {
+      try {
+        const newFile = this._checkAndCreateFileStateObject(files, fileDescriptors[i])
+        newFiles.push(newFile)
+        files[newFile.id] = newFile
+      } catch (err) {
+        if (!err.isRestriction) {
+          errors.push(err)
+        }
+      }
+    }
+
+    this.setState({ files })
+
+    newFiles.forEach((newFile) => {
+      this.emit('file-added', newFile)
+    })
+    this.log(`Added batch of ${newFiles.length} files`)
+
+    this._startIfAutoProceed()
+
+    if (errors.length > 0) {
+      const err = new Error('Multiple errors occured while adding files')
+      err.errors = errors","Hm, if one error occurs after we try to add one file, - we will get a generic `Error: Multiple errors occured while adding files`, with no indication of what happened.
That could work if we were catching and logging `error.errors` everywhere after we use `.addFiles`, but we don't yet do that.

Should we log each error ourselves in `addFiles()` instead? That would also make:
```
    try {
      this.uppy.addFiles(descriptors)
    } catch (err) {
      this.uppy.log(err)
    }
```
tradition unnecessary?

PS. Looks like it's occurrRred (https://en.wiktionary.org/wiki/occured).","I think it would be better to use `this.setState({ files: { ...files, [newFile.id] } })`"
833,"@@ -58,4 +58,19 @@ module.exports = class RequestClient {
       // @todo validate response status before calling json
       .then((res) => res.json())
   }
+
+  delete (path, data) {
+    return fetch(`${this.hostname}/${path}`, {
+      method: 'post',",shouldn't `method` be `'delete'`?,Why do we need this?
834,"@@ -58,7 +58,7 @@ module.exports = function Dashboard (props) {
       className={dashboardClassName}
       data-uppy-theme={props.theme}
       data-uppy-num-acquirers={props.acquirers.length}
-      data-uppy-drag-drop-supported={isDragDropSupported()}
+      data-uppy-drag-drop-supported={!props.disableLocalFiles && isDragDropSupported()}",sane condition? 🤔 ,data-uppy-disable-local-files={disableLocalFiles}
835,"@@ -58,7 +72,21 @@ const log = (msg, tag, level, id, color) => {
   id = id || ''
   const whitespace = tag && id ? ' ' : ''
   color = color || ((message) => message)
+  msg = typeof msg === 'string' ? maskMessage(msg) : msg
   // exclude msg from template string so values such as error objects
   // can be well formatted
   console.log(color(`companion: ${time} [${level}] ${id}${whitespace}${tag}`), color(msg))
 }
+
+/**
+ * Mask the secret content of a message
+ * @param {string} msg the message whose content should be masked
+ * @returns {string}
+ */
+const maskMessage = (msg) => {
+  for (const toBeMasked of valuesToMask) {
+    const toBeReplaced = new RegExp(toBeMasked, 'gi')",maybe this should be passed through [escape-string-regexp](https://www.npmjs.com/package/escape-string-regexp) first? So a a secret that includes a `?` or `+` isn't interpreted as regex syntax,I don't think you need the `typeof` check here.
836,"@@ -588,16 +586,18 @@ class Uppy {
   cancelAll () {
     this.emit('cancel-all')
 
-    // TODO Or should we just call removeFile on all files?
     const { currentUploads } = this.getState()
     const uploadIDs = Object.keys(currentUploads)
-
     uploadIDs.forEach((id) => {
       this._removeUpload(id)
     })","I believe we can <strike>remove</strike>ditch the `_removeUpload` calls here; `removeFile` will remove each upload once all its files were removed.

(remove remove remove)",Why is this removed?
837,"@@ -59,6 +59,13 @@ module.exports = class Plugin {
     if (targetElement) {
       this.core.log(`Installing ${callerPluginName} to a DOM element`)
 
+      // attempt to extract meta from form element
+      if (this.opts.getMetaDataFromForm && targetElement.nodeName === 'FORM') {
+        const formMeta = getFormData(targetElement)
+        this.core.log('Adding metadata from form')
+        this.core.log(formMeta)",missing `setMeta` :),I don't think we need to check for `nodeName === 'FORM'`
838,"@@ -593,6 +593,8 @@ module.exports = class ProviderView {
       )
     }
 
+    const targetViewOptions = Object.assign({}, this.opts, viewOptions)","We can use spread in new code:
```suggestion
    const targetViewOptions = { ...this.opts, ...viewOptions }
```",I think this should be `targetViewOptions = { ...viewOptions }`
839,"@@ -593,6 +593,8 @@ module.exports = class ProviderView {
       )
     }
 
+    const targetViewOptions = Object.assign({}, this.opts, viewOptions)
+    console.log(targetViewOptions)",should get rid of this before merging :),Can we remove this?
840,"@@ -593,6 +593,8 @@ module.exports = class ProviderView {
       )
     }
 
+    const targetViewOptions = { ...this.opts, ...viewOptions }
+    console.log(targetViewOptions)","```suggestion
```",Can we remove this?
841,"@@ -6,43 +6,40 @@
     ""version"": ""3.3.7""
   },
   ""dependencies"": {
-    ""autoprefixer"": ""6.4.0"",
-    ""cssnano"": ""3.7.3"",
-    ""hexo"": ""^3.3.7"",
-    ""hexo-browsersync"": ""0.2.0"",
-    ""hexo-deployer-git"": ""0.2.0"",
+    ""autoprefixer"": ""^7.2.5"",
+    ""cssnano"": ""^3.10.0"",
+    ""hexo"": ""^3.4.4"",
+    ""hexo-browsersync"": ""^0.3.0"",
+    ""hexo-deployer-git"": ""^0.3.1"",
     ""hexo-generator-alias"": ""^0.1.3"",
-    ""hexo-generator-archive"": ""0.1.4"",
-    ""hexo-generator-category"": ""0.1.3"",
-    ""hexo-generator-feed"": ""1.2.0"",
-    ""hexo-generator-index"": ""0.2.0"",
-    ""hexo-generator-tag"": ""0.2.0"",
-    ""hexo-renderer-ejs"": ""0.2.0"",
-    ""hexo-renderer-marked"": ""0.3.0"",
-    ""hexo-renderer-postcss"": ""https://github.com/arturi/hexo-renderer-postcss#afca2bc12f5816067b15a9d24017c70e077b9f0b"",
-    ""hexo-renderer-scss"": ""1.0.2"",
+    ""hexo-generator-archive"": ""^0.1.5"",
+    ""hexo-generator-category"": ""^0.1.3"",
+    ""hexo-generator-feed"": ""^1.2.2"",
+    ""hexo-generator-index"": ""^0.2.1"",
+    ""hexo-generator-tag"": ""^0.2.0"",
+    ""hexo-renderer-ejs"": ""^0.2.0"",
+    ""hexo-renderer-marked"": ""^0.3.2"",
+    ""hexo-renderer-postcss"": ""https://github.com/goto-bus-stop/hexo-renderer-postcss#new-postcss"",",Change this back after https://github.com/arturi/hexo-renderer-postcss/pull/4 is merged,I think this should be `^0.2.1`
842,"@@ -6,7 +6,7 @@ class AddFiles extends Component {
     super(props)
 
     this.triggerFileInputClick = this.triggerFileInputClick.bind(this)
-    this.handleFileInputChange = this.handleFileInputChange.bind(this)
+    this.onHandleFileInputChange = this.onHandleFileInputChange.bind(this)","`handle` and `on` kinda means the same thing in this situation, so i think this should either be `handleFileInputChange` or `onFileInputChange`",Why do we need this change?
843,"@@ -6,7 +6,9 @@ order: 4
 
 ## Uppy Development
 
-First clone and install the project:
+Fork the repository into your own account first. Here's the [link](https://help.github.com/articles/fork-a-repo/) that tells how to fork a repo.  
+
+After you have successfully forked the repo, clone and install the project:
 
 ```bash
 git clone git@github.com:transloadit/uppy.git",This `git clone` command should also be updated to clone the user's own repository URL,I'm not sure this is the best way to phrase this. I think it should be something like: >
844,"@@ -6,8 +6,21 @@ jest.mock('../../src/server/helpers/oauth-state', () => {
   return {
     generateState: () => 'some-cool-nice-encrytpion',
     addToState: () => 'some-cool-nice-encrytpion',
-    getFromState: (state) => {
-      return state === 'state-with-invalid-instance-url' ? 'http://localhost:3452' : 'http://localhost:3020'
+    getFromState: (state, key) => {
+      console.log('mummy', state, key)",Rogue console.log,Can we remove this?
845,"@@ -6,9 +6,11 @@
 const RequestClient = require('./RequestClient')
 const Provider = require('./Provider')
 const Socket = require('./Socket')
+const tokenStorage = require('./token-storage')
 
 module.exports = {
   RequestClient,
   Provider,
-  Socket
+  Socket,
+  tokenStorage",does this need to be exported? all the auth token handling is done internally in companion-client isn't it?,Why do we need to export this?
846,"@@ -60,6 +60,15 @@ module.exports = (props) => {
           title: props.title
         })}
       </div>
+      <button class=""UppyButton--circular UppyButton--blue Browser-doneBtn""
+              type=""button""
+              aria-label=""Done picking files""
+              title=""Done picking files""",can we localise these? not sure if we have easy access to a translator instance from `generic-provider-views`,I think this should be `UppyButton--done`
847,"@@ -60,6 +60,26 @@ export default class Tus10 extends Plugin {
     })
   }
 
+  install () {
+    this.core.emitter.on('next', () => {
+      this.core.log('began uploading!!..')
+      const selectedFiles = this.core.state.selectedFiles","`const { selectedFiles } = this.core.state`
",Why is this needed?
848,"@@ -60,6 +61,7 @@ const uppy = new Uppy({
 })
 .use(GoogleDrive, { target: Dashboard, companionUrl: 'https://companion.uppy.io' })
 .use(Dropbox, { target: Dashboard, companionUrl: 'https://companion.uppy.io' })
+.use(Box, { target: Dashboard, companionUrl: 'https://companion.uppy.io' })","excluding from examples in the meantime
```suggestion
```",".use(Box, { target: Dashboard, companionUrl: 'https://companion.uppy.io' })"
849,"@@ -60,7 +62,7 @@
     ""isomorphic-fetch"": ""2.2.1"",
     ""jest"": ""^20.0.4"",
     ""lint-staged"": ""2.0.2"",
-    ""minifyify"": ""7.3.3"",
+    ""minify-stream"": ""^1.1.0"",","`minify-stream` wraps uglify-js in a stream interface, I'm using it to replace `minifyify` (which is unmaintained)",I think this should be `^1.1.0`
850,"@@ -61,6 +63,7 @@
     GoogleDrive: true,
     Instagram: true,
     Dropbox: true,
+    Box: true,","excluding from examples in the meantime
```suggestion
```",
851,"@@ -614,51 +605,54 @@ describe('src/Core', () => {
           allowedFileTypes: ['image/gif']
         }
       })
-      return core
-        .addFile({
+      try {
+        core.addFile({
           source: 'jest',
           name: 'foo.jpg',
           type: 'image/jpeg',
-          data: utils.dataURItoFile(sampleImageDataURI, {})
-        })
-        .then(() => {
-          throw new Error('File was allowed through')
-        })
-        .catch(e => {
-          expect(e.message).toEqual('You can only upload: image/gif')
+          data: new File([sampleImage], { type: 'image/jpeg' })
         })
+        throw new Error('File was allowed through')
+      } catch (err) {
+        expect(err.message).toEqual('You can only upload: image/gif')
+      }
     })
 
     it('should work with restriction errors that are not Error class instances', () => {
       const core = new Core({
         onBeforeFileAdded () {
-          return Promise.reject('a plain string') // eslint-disable-line prefer-promise-reject-errors
+          throw 'a plain string' // eslint-disable-line no-throw-literal
         }
       })
-      return expect(core.addFile({
-        source: 'jest',
-        name: 'foo.jpg',
-        type: 'image/jpeg',
-        data: null
-      })).rejects.toMatchObject(new Error('a plain string'))
+
+      try {
+        core.addFile({
+          source: 'jest',
+          name: 'foo.jpg',
+          type: 'image/jpeg',
+          data: null
+        })
+        throw new Error('should have thrown')","Should we throw here, if we are throwing in `onBeforeFileAdded ` above?",I'm not sure if this is the best way to test this.
852,"@@ -615,6 +621,7 @@ class Uppy {
 
   reset () {
     this.cancelAll()
+    this.setState({ allowNewUpload: true })","When I press “Cancel” in Dashboard (which calls `cancelAll()`), there’s an “add more files“ screen, but I can’t add more files, since `allowNewUpload` is still `false`.

Same when I remove the file that’s being uploaded. Is this intended?

I think we should probably deprecate `reset()` in favor of `cancelAll()`, since they are basically the same thing?",
853,"@@ -619,11 +626,57 @@ class Uppy {
     }
   }
 
-/**
- * Logs stuff to console, only if `debug` is set to true. Silent in production.
- *
- * @return {String|Object} to log
- */
+  /**
+  * Set info message in `state.info`, so that UI plugins like `Informer`
+  * can display the message
+  *
+  * @param {string} msg Message to be displayed by the informer
+  */
+
+  info (msg, type, duration) {
+    this.setState({
+      info: {
+        isHidden: false,
+        type: type,
+        msg: msg
+      }
+    })
+
+    this.emit('core:info-visible')
+
+    window.clearTimeout(this.info.timeoutID)","Suuuper tiny nit, but `this.info.timeoutID` confused me first (I thought it was supposed to be `this.state.info.timeoutID`). Could this be a separate property like `this.infoTimeoutID` instead?",Why is this needed?
854,"@@ -62,14 +63,6 @@
     color: lighten($color-gray, 10%);
   }
   
-  // .uppy-DragDrop-selectedCount {
-  //   text-align: center;
-  //   font-size: 0.75em;
-  //   text-transform: uppercase;
-  //   letter-spacing: 1px;
-  //   margin-top: 10px;
-  // }",🎉 hehe,Why was this removed?
855,"@@ -62,7 +62,12 @@ export default class Multipart extends Plugin {
           this.core.log(`Download ${file.name} from ${file.uploadURL}`)
           return resolve(file)
         } else {
-          this.core.emitter.emit('core:upload-error', file.id)
+          // OPTION 1: return the full XHR object
+          this.core.emitter.emit('core:upload-error', file.id, xhr);","Please remove semi-colon
",Shouldn't this be `return resolve(xhr)`?
856,"@@ -62,7 +62,12 @@ export default class Multipart extends Plugin {
           this.core.log(`Download ${file.name} from ${file.uploadURL}`)
           return resolve(file)
         } else {
-          this.core.emitter.emit('core:upload-error', file.id)
+          // OPTION 1: return the full XHR object
+          this.core.emitter.emit('core:upload-error', file.id, xhr);
+
+          // OPTION 2: return the payload of the XHR object
+          this.core.emitter.emit('core:upload-error', file.id, xhr.response);","Please remove semi-colon
",Shouldn't this be `xhr.responseJSON`?
857,"@@ -62,7 +66,7 @@ script:
 - 'if [ -n ""${LINT-}"" ]; then npm run lint; fi'
 - 'if [ -n ""${LINT-}"" ]; then npm run test:type; fi'
 - 'if [ -n ""${UNIT-}"" ]; then npm run test:unit; fi'
-- 'if [ -n ""${COMPANION-}"" ]; then npm run test:companion; fi'
+- 'if [ -n ""${COMPANION-}"" ] || [ -n ""${COMPANION_NODE6-}"" ]; then npm run test:companion; fi'","Since `npm install` fails on Node 6, we could instead configure the COMPANION_NODE6 build with `nodejs: stable`, and add a line above this one:
```yaml
- 'if [ -n ""${COMPANION_NODE6-}"" ]; then nvm install 6.0.0 && nvm use 6.0.0; fi'
```

so that the latest nodejs will be used during installation but node 6 will be used during tests.","I'm not sure if this is the right way to do it. I think it should be `-n ""$"
858,"@@ -62,9 +62,13 @@ fr_FR.strings = {
   importFrom: 'Importer de %{name}',
   loading: 'Chargement...',
   logOut: 'Déconnexion',
+  micDisabled: 'Accès au micro refusé par l\'utilisateur',
+  micIsOn: 'Micro actif',
   myDevice: 'Mon Appareil',
+  noDuplicates: 'Impossible d\'ajouter le fichier ""%{fileName}"", il existe déjà',
   noFilesFound: 'Vous n\'avez aucun fichier ou dossier ici',
   noInternetConnection: 'Pas de connexion à Internet',
+  noNewAlreadyUploading: 'Impossible d\'ajouter de nouveaux fichiers: en cours de chargement ',","A space is missing before colon.

```
   noNewAlreadyUploading: 'Impossible d\'ajouter de nouveaux fichiers : en cours de chargement ',
```","I don't think this is a good idea. I think it should be something like ""Imp"
859,"@@ -63,7 +63,7 @@ module.exports.app = (options = {}) => {
   app.use((req, res, next) => {
     res.header(
       'Access-Control-Allow-Headers',
-      [res.get('Access-Control-Allow-Headers'), 'uppy-auth-token'].join(', ')
+      [res.get('Access-Control-Allow-Headers'), 'uppy-auth-token', 'uppy-client'].join(', ')
     )",uppy-versions?,I think this should be `uppy-client-token`
860,"@@ -64,21 +64,21 @@ $ npm install uppy --save
 
 We recommend installing from npm and then using a module bundler such as [Webpack](http://webpack.github.io/), [Browserify](http://browserify.org/) or [Rollup.js](http://rollupjs.org/).
 
-Add CSS [uppy.min.css](https://unpkg.com/uppy/dist/uppy.min.css), either to `<head>` of your HTML page or include in JS, if your bundler of choice supports it — transforms and plugins are available for Browserify and Webpack.
+Add CSS [uppy.min.css](https://transloadit.edgly.net/releases/uppy/v0.22.0/dist/uppy.min.css), either to `<head>` of your HTML page or include in JS, if your bundler of choice supports it — transforms and plugins are available for Browserify and Webpack.
 
-Alternatively, you can also use a pre-built bundle, for example from [unpkg CDN](https://unpkg.com/uppy/). In that case `Uppy` will attach itself to the global `window.Uppy` object.
+Alternatively, you can also use a pre-built bundle, for example from Transloadit's CDN: Edgly. In that case `Uppy` will attach itself to the global `window.Uppy` object.
 
 > ⚠️ The bundle currently consists of most Uppy plugins, so this method is not recommended for production, as your users will have to download all plugins, when you are likely using just a few.
 
 1\. Add a script to the bottom of `<body>`:
 
 ``` html
-<script src=""https://unpkg.com/uppy""></script>
+<script src=""https://transloadit.edgly.net/releases/uppy/v0.22.0/dist/uppy.min.js""></script>
 ```","It was kinda nice that it could point to the latest version automatically, can we achieve that with edgly?",I think this should be `uppy.min.js`
861,"@@ -64,6 +64,7 @@ class Uppy {
         connectedToInternet: 'Connected to the Internet',
         // Strings for remote providers
         noFilesFound: 'You have no files or folders here',
+        loadMore: 'Load more',",do we still need this? 🤔 ,// Strings for remote providers
862,"@@ -64,7 +64,11 @@ uppy.use(Webcam, {
     'picture'
   ],
   mirror: true,
-  facingMode: 'user',
+  videoConstraints: {
+    facingMode: 'user',
+    width: { min: 720, ideal: 1280, max: 1920 },
+    width: { min: 480, ideal: 800, max: 1080 },","via @arturi
```suggestion
    height: { min: 480, ideal: 800, max: 1080 },
```",Why is this necessary?
863,"@@ -64,8 +64,7 @@
   transition: background-color, width .3s ease-out;
 
   &.is-indeterminate {
-    background-color: $color-orange;
-    $stripe-color: darken($color-orange, 10%);","Soo, no orange stripes for encoding then? 🤔",&.is-indeterminate
864,"@@ -643,13 +638,13 @@ class Uppy {
         return
       }
       this.setFileState(file.id, {
-        progress: Object.assign({}, this.getFile(file.id), {
+        progress: {","nice, just noticed this today as well :)",if (!file.progress) {
865,"@@ -647,6 +647,49 @@ describe('src/Core', () => {
       }
     })
 
+    it('should not allow a dupicate file, a file with the same id', () => {
+      const core = new Core()
+      core.addFile({
+        source: 'jest',
+        name: 'foo.jpg',
+        type: 'image/jpeg',
+        data: new File([sampleImage], { type: 'image/jpeg' })
+      })
+      expect(() => {","Parentheses typo, this test is never failing.
Should be:

      expect(() => {
        core.addFile({
          source: 'jest',
          name: 'foo.jpg',
          type: 'image/jpeg',
          data: new File([sampleImage], { type: 'image/jpeg' }),
          meta: {
            notARelativePath: 'folder/a'
          }
        })
      })
        .toThrow('Cannot add the duplicate file \'foo.jpg\', it already exists')

Same on line 707.",I think this should b
866,"@@ -65,10 +65,9 @@ exports.getIsFolder = (item) => {
   return !item.file_type
 }
 
-exports.getItemName = (item) => {
-  const start = moment(item.start_time || item.recording_start)
-    .clone()
-    .format('YYYY-MM-DD, kk:mm')
+exports.getItemName = (item, userResponse) => {
+  const start = moment.tz(item.start_time || item.recording_start, userResponse.timezone || 'UTC')
+    .format('YYYY-MM-DD, HH:mm')","we display datetimes in user's timezone preferably.
Timestamp is also updated to use standard hours, rather than 24 hour time from 1 to 24 (HH instead of kk)",`userResponse.timezon
867,"@@ -65,3 +67,82 @@ describe('File upload with DragDrop + Tus, DragDrop + XHRUpload, i18n translated
   //     })
   // })
 // })
+
+describe.only('XHRUpload with `limit`', () => {",need to remove the `.only` before merge,// describe('XHRUploa
868,"@@ -65,6 +65,7 @@
     ""@uppy/utils"": ""file:packages/@uppy/utils"",
     ""@uppy/webcam"": ""file:packages/@uppy/webcam"",
     ""@uppy/xhr-upload"": ""file:packages/@uppy/xhr-upload"",
+    ""adm-zip"": ""0.4.13"",","In the past we've put build dependencies in `devDependencies` in the root repo, and only put the uppy packages in `dependencies`. it doesn't make a difference functionally but for consistency's sake it would be best to move this to devDependencies too","""adm-zip"": ""0.4.13"","
869,"@@ -65,6 +66,10 @@ module.exports = class Transloadit extends Plugin {
       })
 
       this.core.setState({ files })
+
+      if (this.opts.wait) {
+        return this.beginWaiting()
+      }
     }).catch((err) => {
       this.core.emit('informer', '⚠️ Transloadit: Could not create assembly', 'error', 0)","Would be cool if the error was accessible somehow. Maybe behind a `more details` link for the user. But i realize that goes beyond the scope of this PR, so maybe we can just dump it to the `console.error` for now short of having sth like that?",Why do we need this?
870,"@@ -65,7 +65,11 @@ class AddFiles extends Component {
 
   renderMyDeviceAcquirer = () => {
     return (
-      <div class=""uppy-DashboardTab"" role=""presentation"">
+      <div
+        class=""uppy-DashboardTab""
+        role=""presentation""
+        data-acquirer-id=""Local""",(maybe this should be MyDevice or just removed entirely?),Why do we need this?
871,"@@ -65,7 +65,11 @@ class AddFiles extends Component {
 
   renderMyDeviceAcquirer = () => {
     return (
-      <div class=""uppy-DashboardTab"" role=""presentation"">
+      <div
+        class=""uppy-DashboardTab""
+        role=""presentation""
+        data-acquirer-id=""MyDevice""","
```suggestion
        data-uppy-acquirer-id=""MyDevice""
```",Why do we need this?
872,"@@ -65,7 +65,9 @@ module.exports = class Transloadit extends Plugin {
     this._onRestored = this._onRestored.bind(this)
     this._getPersistentData = this._getPersistentData.bind(this)
 
-    if (this.opts.params) {
+    if (this.opts.params ||
+        // No params _and_ no custom getAssemblyOptions is an early error.
+        this.opts.getAssemblyOptions === defaultOptions.getAssemblyOptions) {
       AssemblyOptions.validateParams(this.opts.params)","I’m a little stuck understanding, how would this result in an error when `this.opts.params` is not set? It will just not do `AssemblyOptions.validateParams(this.opts.params)` 🤔",I don't think we need
873,"@@ -651,13 +652,19 @@ module.exports = class Dashboard extends Plugin {
     }
   }
 
-  handleComplete = ({ failed, uploadID }) => {
+  handleComplete = ({ failed }) => {
     if (this.opts.closeAfterFinish && failed.length === 0) {
       // All uploads are done
       this.requestCloseModal()
     }
   }
 
+  _openFileEditorWhenSingleFileAdded = (file) => {","not totally sure about this behaviour when adding multiple files ... it looks like this would only open the file editor for _one_ of the files?

maybe it should auto open for each file in turn? but then we'd probably need a ""skip all"" button in the UI in case users don't want to tweak metadata for a folder of 1000 photos.",Why do we need this f
874,"@@ -651,7 +645,7 @@ module.exports = class Dashboard extends Plugin {
   superFocusOnEachUpdate = () => {
     const isFocusInUppy = this.el.contains(document.activeElement)
     // When focus is lost on the page (== focus is on body for most browsers, or focus is null for IE11)
-    const isFocusNowhere = document.activeElement === document.querySelector('body') || document.activeElement === null
+    const isFocusNowhere = document.activeElement === document.body || document.activeElement === null","I'm _pretty_ sure this warning is a bug in the compat lint and not actually accurate, but I guess it doesn't matter in this case :)",// When focus is lost
875,"@@ -656,6 +657,52 @@ module.exports = class Dashboard extends Plugin {
     this.superFocusOnEachUpdate()
   }
 
+  startUpload = (ev) => {
+    this.uppy.upload().catch((err) => {
+      // Log error.
+      this.uppy.log(err.stack || err.message || err)
+    })
+  }
+
+  cancelUpload = (fileID) => {
+    this.uppy.removeFile(fileID)
+  }
+
+  saveFileCard = (meta, fileID) => {
+    this.uppy.setFileMeta(fileID, meta)
+    this.toggleFileCard()
+  }
+
+  _attachRenderFunctionToTarget = (target) => {
+    const plugin = this.uppy.getPlugin(target.id)
+    return {
+      ...target,
+      icon: plugin.icon || this.opts.defaultPickerIcon,
+      render: plugin.render
+    }
+  }
+
+  _isTargetSupported = (target) => {
+    const plugin = this.uppy.getPlugin(target.id)
+    // If the plugin does not provide a `supported` check, assume the plugin works everywhere.
+    if (typeof plugin.isSupported !== 'function') {
+      return true
+    }
+    return plugin.isSupported()
+  }
+
+  _getAcquirers = memoize((targets) => {
+    return targets
+      .filter(target => target.type === 'acquirer' && this._isTargetSupported(target))
+      .map(this._attachRenderFunctionToTarget)
+  })
+
+  _getProgressIndicators = memoize((targets) => {
+    return targets
+      .filter(target => target.type === 'progressindicator')
+      .map(this._attachRenderFunctionToTarget)
+  })","Is using `memoize` here basically sort of a hack, because we can’t get access to props, since render is passed the whole `state` in this case?",I don't think you nee
876,"@@ -658,6 +658,18 @@ module.exports = class Dashboard extends Plugin {
     }
   }
 
+  handleRestored = () => {
+    // Hide and show files to trigger re-render, so that
+    // VirtualList mounts FileItems again and they emit `thumbnail:request`
+    // Otherwise thumbnails are broken or missing after Golden Retriever restores files
+    if (this.opts.showSelectedFiles) {
+      this.setOptions({ showSelectedFiles: false })
+      setTimeout(() => {
+        this.setOptions({ showSelectedFiles: true })
+      }, 4)
+    }
+  }
+",@goto-bus-stop is there a more sane way to trigger re-render of VirtualList to get thumnails re-created? 🤔 ,Why do we need this t
877,"@@ -66,8 +66,10 @@ en_US.strings = {
   loading: 'Loading...',
   logOut: 'Log out',
   myDevice: 'My Device',
+  noDuplicates: 'Cannot add the duplicate file %{fileName}, it already exists',",this one should also have quotes i guess :),duplicateFile: 'Canno
878,"@@ -675,7 +675,7 @@ a.uppy-Dashboard-poweredBy {
     float: left;
     margin: 5px $rl-margin;
     width: calc(33.333% - #{$rl-margin} - #{$rl-margin});
-    height: 200px;
+    height: 216px;","```suggestion
    height: 215px;
```
",Why did you change th
879,"@@ -68,10 +69,15 @@ module.exports = class Dashboard extends Plugin {
         saveChanges: 'Save changes',
         cancel: 'Cancel',
         myDevice: 'My Device',
-        dropPaste: 'Drop files here, paste or %{browse}',
-        dropPasteImport: 'Drop files here, paste, %{browse} or import from:',
+        dropPasteFiles: enUS.dropPasteFiles,
+        dropPasteFolders: enUS.dropPasteFolders,
+        dropPasteBoth: enUS.dropPasteBoth,
+        dropPasteImportFiles: enUS.dropPasteImportFiles,
+        dropPasteImportFolders: enUS.dropPasteImportFolders,
+        dropPasteImportBoth: enUS.dropPasteImportBoth,","The `@uppy/locales/en_US` file is generated from the default strings in all the plugins, so they should actually be written out here instead of in `en_US.js`. You can then run `npm run build:locale-pack` to update the en_US file.",I think this should b
880,"@@ -68,6 +73,10 @@ module.exports = function Dashboard (props) {
           }
 
         <div class=""uppy-Dashboard-innerWrap"">
+          <div class=""uppy-Dashboard-drop-files-here-hint"">
+            {props.i18n('dropHint')}",Tiny style nitpick: I’d call it `uppy-Dashboard-dropFilesHereHint`.,"I think this should be `<div class=""uppy-Dashboard-drop-files-here-hint"">`"
881,"@@ -68,7 +68,7 @@ svg.UppyIcon.retry {
 }
 
 
-// Svg styles that depend upon the state of the file.",Seems grammatically there’s no difference? https://english.stackexchange.com/questions/34291/depend-upon-or-depend-on ;),//
882,"@@ -681,6 +681,8 @@ module.exports = class Tus extends Plugin {
     this.uppy.on('reset-progress', this.handleResetProgress)
 
     if (this.opts.autoRetry) {
+      this.uppy.log('[Tus] The `autoRetry` option may be removed in Uppy 2.0. See https://github.com/transloadit/uppy/pull/2347 for alternatives.', 'warning')",maybe not do this because autoretry is the default,this.log('[Tus] The `autoRetry` option may be removed in Uppy 2.0. See htt
883,"@@ -69,13 +70,16 @@ module.exports = class FileInput extends Plugin {
       zIndex: -1
     }
 
+    const restrictions = this.uppy.opts.restrictions
+
     return <div class=""uppy uppy-FileInput-container"">
       <input class=""uppy-FileInput-input""
         style={this.opts.pretty && hiddenInputStyle}
         type=""file""
         name={this.opts.inputName}
         onchange={this.handleInputChange}
-        multiple={this.opts.allowMultipleFiles}
+        multiple={restrictions.maxNumberOfFiles !== 1 || !restrictions.maxNumberOfFiles}",and here,Why do we need this check?
884,"@@ -69,6 +70,14 @@ const photoUploader = Uppy({ id: 'post' })
 
 By default Uppy will wait for an upload button to be pressed in the UI, or an `.upload()` method to be called, before starting an upload. Setting this to `autoProceed: true` will start uploading automatically after the first file is selected.
 
+### `allowMultipleUploads: true`
+
+Whether to allow multiple upload batches. This means multiple calls to `.upload()`, or a user pressing an upload button multiple times, perhaps after adding more files. An upload batch is made up of the files that were added since the previous `.upload()` call.
+","All makes sense when I read twice, but might still be a liiittle confusing, if one doesn’t know about Uppy’s internals, the option could be called `allowAddingMoreFilesAfterUploadStarted`, right? Not suggesting the crazy name, but trying to think how to indicate that this is what it means right away.",I'm not sure if this is the best way to do this. I'm not sure what the bes
885,"@@ -69,6 +70,7 @@ en_US.strings = {
   noFilesFound: 'You have no files or folders here',
   noInternetConnection: 'No Internet connection',
   noNewAlreadyUploading: 'Cannot add new files: already uploading',
+  noRecentFilesFound: 'No files or folders found from the last %{months_retrieved} months',",do we still need these as well? 🤔 ,noRecentFilesFound: 'No files or folders found from the last %{months_retr
886,"@@ -69,7 +69,8 @@ module.exports = class Webcam extends Plugin {
         'picture'
       ],
       mirror: true,
-      facingMode: 'user'
+      facingMode: 'user',
+      preferredMimeType: null","Since this is for video only, should it be called `preferredVideoMimeType`? If we add it for pictures later, it will likely need to be a different option.",Why is this needed?
887,"@@ -699,12 +699,15 @@ class Uppy {
   * @param {string} msg Message to be displayed by the informer
   */
 
-  info (msg, type, duration) {
+  info (message, type, duration) {
+    const isComplexMessage = typeof message === 'object'
+
     this.setState({
       info: {
         isHidden: false,
-        type: type,
-        msg: msg
+        type: type || 'info',
+        message: isComplexMessage ? message.msg : message,",Should the message object also be `message.message` instead of `message.msg`? I like it written out.,Why do we need to check for `message.msg`?
888,"@@ -7,10 +7,13 @@ const mimeToExtensions = {
   'audio/ogg': 'ogg',
   'video/webm': 'webm',
   'audio/webm': 'webm',
+  'video/x-matroska': 'mkv',
   'video/mp4': 'mp4',
   'audio/mp3': 'mp3'
 }
 
 module.exports = function getFileTypeExtension (mimeType) {
+  // Remove the ; bit in 'video/x-matroska;codecs=avc1'
+  mimeType = mimeType.replace(/;.*$/, '')
   return mimeToExtensions[mimeType] || null","Feels like a case-specific solution, but I guess it’s standard to use `;` in this case, so it’ll work for others as well?",I'm not sure if this is the best way to do this.
889,"@@ -7,15 +7,27 @@
  *
  */
 module.exports = function generateFileID (file) {
-  // filter is needed to not join empty values with `-`
-  return [
-    'uppy',
-    file.name ? encodeFilename(file.name.toLowerCase()) : '',
-    file.type,
-    file.meta && file.meta.relativePath ? encodeFilename(file.meta.relativePath.toLowerCase()) : '',
-    file.data.size,
-    file.data.lastModified
-  ].filter(val => val).join('-')
+  let id = 'uppy'
+  if (typeof file.name === 'string') {
+    id += '-' + encodeFilename(file.name.toLowerCase())
+  }
+
+  if (file.type !== undefined) {
+    id += '-' + file.type
+  }
+
+  if (file.meta && typeof file.meta.relativePath === 'string') {
+    id += '-' + encodeFilename(file.meta.relativePath.toLowerCase())
+  }
+
+  if (file.data.size !== undefined) {
+    id += '-' + file.data.size
+  }
+  if (file.data.lastModified !== undefined) {
+    id += '-' + file.data.lastModified
+  }
+
+  return id","Wow, impressive it's faster than the previous solution!
Maybe let's add a comment explaining why we went for this solution? I imagine I'd look at it and try to rewrite it in a more concise way.",Why not just `if (file.name)`?
890,"@@ -7,23 +7,48 @@ const _getName = (id) => {
 }
 
 module.exports = class Provider {
-  constructor (opts) {
+  constructor (core, opts) {
+    this.core = core
     this.opts = opts
     this.provider = opts.provider
     this.id = this.provider
     this.authProvider = opts.authProvider || this.provider
     this.name = this.opts.name || _getName(this.id)
+
+    this.onReceiveResponse = this.onReceiveResponse.bind(this)
+  }
+
+  get hostname () {
+    const uppyServer = this.core.state.uppyServer || {}
+    const host = this.opts.host
+    return uppyServer[host] || host
+  }
+
+  onReceiveResponse (response) {
+    const uppyServer = this.core.state.uppyServer || {}
+    const host = this.opts.host
+    const headers = response.headers
+    // Store the self-identified domain name for the uppy-server we just hit.
+    if (headers.has('i-am') && headers.get('i-am') !== uppyServer[host]) {
+      this.core.setState({
+        uppyServer: Object.assign({}, uppyServer, {
+          [host]: headers.get('i-am')
+        })
+      })","The `uppyServer` state key is an object of `[original_hostname]: new_hostname` pairs, in case someone does something like

```js
uppy.use(GoogleDrive, { host: 'google.my-uppy-server.com' })
uppy.use(Dropbox, { host: 'dropbox.my-uppy-server.com' })
```

It seems unlikely that anyone would use different uppy-servers for different plugins, but it's _possible_, so this supports it.",Why do we need this?
891,"@@ -7,33 +7,32 @@ set -o nounset
 # Set magic variables for current FILE & DIR
 __dir=""$(cd ""$(dirname ""${BASH_SOURCE[0]}"")"" && pwd)""
 __kube=""${__dir}""
+__companion=""$(dirname ""$(dirname ""${__kube}"")"")""
+# Install kubectl
+curl -LO https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl",Shall we pin the currently used kubectl and hence make version bumps opt-in vs organic?,I think this should be `/bin/linux/amd64/kubectl`
892,"@@ -7,33 +7,32 @@ set -o nounset
 # Set magic variables for current FILE & DIR
 __dir=""$(cd ""$(dirname ""${BASH_SOURCE[0]}"")"" && pwd)""
 __kube=""${__dir}""
+__companion=""$(dirname ""$(dirname ""${__kube}"")"")""
+# Install kubectl
+curl -LO https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl
+chmod +x ./kubectl
+mkdir ${HOME}/.local/bin/
+export PATH=""${HOME}/.local/bin/:$PATH""
+mv ./kubectl ${HOME}/.local/bin/
+
 
 # Store the new image in docker hub
-docker build --quiet -t transloadit/companion:latest -t transloadit/companion:$TRAVIS_COMMIT .;
+docker build -t kiloreux/uppy-companion:latest -t kiloreux/uppy-companion:$TRAVIS_COMMIT -f packages/@uppy/companion/Dockerfile packages/@uppy/companion;",Transloadit,Why is this needed?
893,"@@ -7,57 +7,73 @@ class FileCard extends Component {
   constructor (props) {
     super(props)
 
-    this.meta = {}
+    this.state = {}
 
-    this.tempStoreMetaOrSubmit = this.tempStoreMetaOrSubmit.bind(this)
+    this.tempStoreMeta = this.tempStoreMeta.bind(this)
+    this.saveOnEnter = this.saveOnEnter.bind(this)
     this.renderMetaFields = this.renderMetaFields.bind(this)
     this.handleSave = this.handleSave.bind(this)
     this.handleCancel = this.handleCancel.bind(this)
   }
 
-  tempStoreMetaOrSubmit (ev) {
+  componentDidMount () {
     const file = this.props.files[this.props.fileCardFor]
+    const metaFields = this.props.metaFields || []
+
+    const storedMetaData = {}
+    metaFields.forEach((field) => {
+      storedMetaData[field.id] = file.meta[field.id]
+    })
+    this.setState(storedMetaData)
+  }
 
+  saveOnEnter (ev) {
     if (ev.keyCode === 13) {
+      const file = this.props.files[this.props.fileCardFor]
       ev.stopPropagation()
       ev.preventDefault()
-      this.props.saveFileCard(this.meta, file.id)
-      return
+      this.props.saveFileCard(this.state, file.id)
     }
+  }
 
+  tempStoreMeta (ev) {
     const value = ev.target.value
     const name = ev.target.dataset.name
-    this.meta[name] = value
+    this.setState({
+      [name]: value
+    })
+  }
+
+  handleSave (ev) {
+    const fileID = this.props.fileCardFor
+    this.props.saveFileCard(this.state, fileID)
+  }
+
+  handleCancel (ev) {
+    this.setState({})","note this is a noop, it doesn't actually clear state",Why do we need to set the state here?
894,"@@ -7,57 +7,73 @@ class FileCard extends Component {
   constructor (props) {
     super(props)
 
-    this.meta = {}
+    this.state = {}
 
-    this.tempStoreMetaOrSubmit = this.tempStoreMetaOrSubmit.bind(this)
+    this.tempStoreMeta = this.tempStoreMeta.bind(this)
+    this.saveOnEnter = this.saveOnEnter.bind(this)
     this.renderMetaFields = this.renderMetaFields.bind(this)
     this.handleSave = this.handleSave.bind(this)
     this.handleCancel = this.handleCancel.bind(this)
   }
 
-  tempStoreMetaOrSubmit (ev) {
+  componentDidMount () {
     const file = this.props.files[this.props.fileCardFor]
+    const metaFields = this.props.metaFields || []
+
+    const storedMetaData = {}
+    metaFields.forEach((field) => {
+      storedMetaData[field.id] = file.meta[field.id]
+    })
+    this.setState(storedMetaData)
+  }
 
+  saveOnEnter (ev) {
     if (ev.keyCode === 13) {
+      const file = this.props.files[this.props.fileCardFor]
       ev.stopPropagation()
       ev.preventDefault()
-      this.props.saveFileCard(this.meta, file.id)
-      return
+      this.props.saveFileCard(this.state, file.id)
     }
+  }
 
+  tempStoreMeta (ev) {
     const value = ev.target.value
     const name = ev.target.dataset.name
-    this.meta[name] = value
+    this.setState({
+      [name]: value
+    })
+  }
+
+  handleSave (ev) {
+    const fileID = this.props.fileCardFor
+    this.props.saveFileCard(this.state, fileID)
+  }
+
+  handleCancel (ev) {
+    this.setState({})
+    this.props.toggleFileCard()
   }
 
   renderMetaFields (file) {
     const metaFields = this.props.metaFields || []
+
     return metaFields.map((field, i) => {
       return <fieldset class=""uppy-DashboardFileCard-fieldset"">
         <label class=""uppy-DashboardFileCard-label"">{field.name}</label>
         <input class=""uppy-u-reset uppy-c-textInput uppy-DashboardFileCard-input""
           type=""text""
           data-name={field.id}","Maybe let's not use `data-name` attribute, we could instead use `oninput={(event) => this.tempStoreMeta(event, field.id)}`, that looks more react-like?",Why do we need to set the state here?
895,"@@ -7,6 +7,11 @@ module.exports = class Editor extends Component {
       this.imgElement,
       this.props.opts.cropperOptions
     )
+    this.imgElement.addEventListener('crop', (ev) => {
+      this.rotateRange.value = ev.detail.rotate
+      this.rotateRange.parentNode
+        .setAttribute('aria-label', `${ev.detail.rotate}º`)","Would these be feasible to do using react state updates, vs updating the dom directly?",Why do we need the aria-label here?
896,"@@ -7,6 +7,8 @@ function DashboardContentTitle (props) {
 }
 
 function PanelTopBar (props) {
+  const notOverFileLimit = props.maxNumberOfFiles !== props.totalFileCount",`props.totalFileCount < props.maxNumberOfFiles` makes the intent a bit more clear I think. And a check to see if maxNumberOfFiles even exists?,export default function (props) {
897,"@@ -7,7 +7,7 @@ module.exports = (props) => {
       <h1 class=""UppyProvider-authTitle"">
         Please authenticate with <span class=""UppyProvider-authTitleName"">${props.pluginName}</span><br> to select files
       </h1>
-      <a class=""UppyProvider-authBtn"" href=${props.link} target=""_blank"">Authenticate</a>
+      <a class=""UppyProvider-authBtn"" onclick=${props.handleAuth}>Authenticate</a>","🤔 Since this is not a link now, semantically we could turn it into a `<button>`, making sure to include `@include reset-button` in its style declaration in SCSS, which will reset all sorts of browser default button styles.","<a class=""UppyProvider-authBtn"" o"
898,"@@ -7,7 +7,9 @@
     ""sourceMap"": false,
     ""allowJs"": true,
     ""checkJs"": true,
-    ""noEmitOnError"": true
+    ""noEmitOnError"": true,
+    ""resolveJsonModule"": true,
+    ""esModuleInterop"": true","I suspect this could be the issue to failing Travis tests, since Companion’s `lib` folder is now built weirdly locally for me.

Do we have any tests that test the `lib` folder of Companion, how it’s used when installed from `npm`?",Why do we need this?
899,"@@ -700,12 +705,14 @@ module.exports = class Transloadit extends Plugin {
       this.uppy.on('transloadit:complete', onAssemblyFinished)
       this.uppy.on('transloadit:assembly-error', onAssemblyError)
       this.uppy.on('transloadit:import-error', onImportError)
-    }).then(() => {
+    }).then((result) => {","So still returning the result, but not using it?",I'm not sure if this is the best 
900,"@@ -702,13 +702,14 @@ a.uppy-Dashboard-poweredBy {
   height: 50px;
   border-bottom: 0;
   position: relative;
+  flex-shrink: 0;
   display: flex;
   justify-content: center;
   align-items: center;
 
   .uppy-size--md & {
     width: 100%;
-    height: 139px;
+    height: 152px;","```suggestion
    height: 140px;
```
",Why is this necessary?
901,"@@ -707,7 +707,7 @@ a.uppy-Dashboard-poweredBy {
 
   .uppy-size--md & {
     width: 100%;
-    height: 100px;
+    height: 129px;
     border: 0;","`129px` vs `130px`? I’m guessing there’s a reason, that’s why I’m asking, so I can keep that in the back of my head for future refactors.",What's the reason for this change
902,"@@ -71,8 +72,7 @@ const get = (req, res) => {
       res.status(response.status).json(response.body)
     }).catch((err) => {
       logger.error(err, 'controller.url.get.error', req.id)
-      // @todo this should send back error (not err)
-      res.json({ err })
+      return res.status(err.status || 500).json({ message: 'failed to fetch URL metadata' })",is this OK for old clients or do we need to check the uppy version and decide to use the old or new response style?,Shouldn't this be `500`?
903,"@@ -719,36 +719,61 @@ describe('src/Core', () => {
 
   describe('actions', () => {})
 
-  describe('isOnline', () => {
-    xit('should detect if the browser is online or not', () => {})
-
-    xit(
-      'should emit the correct event when the online status is specified',
-      () => {
-        const onlineEventMock = jest.fn()
-        const offlineEventMock = jest.fn()
-        const backOnlineEventMock = jest.fn()
-        const core = new Core()
-        core.on('is-offline', offlineEventMock)
-        core.on('is-online', onlineEventMock)
-        core.on('back-online', backOnlineEventMock)
-
-        core.isOnline(true)
-        expect(onlineEventMock.mock.calls.length).toEqual(1)
-        expect(offlineEventMock.mock.calls.length).toEqual(0)
-        expect(backOnlineEventMock.mock.calls.length).toEqual(0)
-
-        core.isOnline(false)
-        expect(onlineEventMock.mock.calls.length).toEqual(1)
-        expect(offlineEventMock.mock.calls.length).toEqual(1)
-        expect(backOnlineEventMock.mock.calls.length).toEqual(0)
-
-        core.isOnline(true)
-        expect(onlineEventMock.mock.calls.length).toEqual(2)
-        expect(offlineEventMock.mock.calls.length).toEqual(1)
-        expect(backOnlineEventMock.mock.calls.length).toEqual(1)
-      }
-    )
+  describe('updateOnlineStatus', () => {
+    const RealNavigatorOnline = global.window.navigator.onLine
+
+    beforeEach(() => {
+      Object.defineProperty(
+        global.window.navigator,
+        'onLine',
+        (function (_value) {
+          return {
+            get: function _get () {
+              return _value
+            },
+            set: function _set (v) {
+              _value = v
+            }
+          }
+        })(global.window.navigator.onLine)","would this also work without the IIFE, with the `_value` as a simple variable inside `beforeEach()`? i think that would be a bit clearer.",Why do we need this?
904,"@@ -72,11 +72,16 @@ uppy.setFileState(otherFileID, {
 
 ### `getResponseData(xhr)`
 
-When an upload has completed, Uppy will extract response data from the upload endpoint and send it back in the `upload-success` event:
+When an upload has completed, Uppy will extract response data from the upload endpoint. This response data will be available on the file's `.response` property, and be emitted in the `upload-success` event:
 
 ```js
-uppy.on('upload-success', (fileId, resp, uploadURL) => {
-  // do something with resp
+uppy.getFile(fileID).response
+// { status: HTTP status code,
+//   body: extracted response data }
+
+uppy.on('upload-success', (fileID, body) => {
+  // do something with extracted response data","`file` here too, instead of `fileID`?",I don't think you need the `uploa
905,"@@ -726,3 +726,13 @@ uppy.on('restriction-failed', (file, error) => {
   // do some customized logic like showing system notice to users
 })
 ```
+
+### `reset-progress`
+
+Fired when `uppy.resetProgress()` is called, `totalProgress` and each file has its upload progress reset to zero.","I think we can avoid mentioning `totalProgress` which is otherwise undocumented:
```suggestion
Fired when `uppy.resetProgress()` is called and each file has its upload progress reset to zero.
```

(in the future we could add a `uppy.getTotalProgress()` method to provide a more official way to get to that data)",I'm not sure if this is the best 
906,"@@ -73,15 +75,41 @@ exports.loadSearchProviderToken = (req, res, next) => {
   next()
 }
 
-exports.mergeAccessControlAllowMethods = (req, res, next) => {
-  const existingHeader = res.get('Access-Control-Allow-Methods')
-  let existingMethods = []
-  if (existingHeader) {
-    existingMethods = existingHeader.replace(/\s/g, '').split(',').map((method) => method.toUpperCase())
+exports.cors = (options = {}) => (req, res, next) => {
+  const exposedHeaders = [
+    // exposed so it can be accessed for our custom uppy client preflight
+    'Access-Control-Allow-Headers',
+  ]
+  if (options.sendSelfEndpoint) exposedHeaders.push('i-am')
+  if (res.get('Access-Control-Expose-Headers')) exposedHeaders.push(res.get('Access-Control-Expose-Headers'))
+
+  const allowedHeaders = [
+    'uppy-auth-token',
+    'uppy-versions',
+    'uppy-credentials-params',
+  ]
+  if (res.get('Access-Control-Allow-Headers')) allowedHeaders.push(res.get('Access-Control-Allow-Headers'))
+
+  const existingAllowMethodsHeader = res.get('Access-Control-Allow-Methods')
+  let methods = []
+  if (existingAllowMethodsHeader) {
+    methods = existingAllowMethodsHeader.replace(/\s/g, '').split(',').map((method) => method.toUpperCase())
   }
+  methods = uniq([...methods, 'GET', 'POST', 'OPTIONS', 'DELETE'])
 
-  const mergedMethods = uniq([...existingMethods, 'GET', 'POST', 'OPTIONS', 'DELETE'])
+  // if endpoint urls are specified, then we only allow those endpoints
+  // otherwise, we allow any client url to access companion.","```suggestion
  // If endpoint urls are specified, then we only allow those endpoints.
  // Otherwise, we allow any client url to access companion.
```

maybe like this?",I don't think you need the `i-am`
907,"@@ -73,9 +72,12 @@ class Uppy {
     this.addFile = this.addFile.bind(this)
     this.calculateProgress = this.calculateProgress.bind(this)
 
-    this.bus = this.emitter = ee()
-    this.on = this.bus.on.bind(this.bus)
-    this.emit = this.bus.emit.bind(this.bus)
+    // this.bus = this.emitter = ee()
+    this.emitter = ee()
+    this.on = this.emitter.on.bind(this.emitter)
+    this.off = this.emitter.off.bind(this.emitter)
+    this.once = this.emitter.once.bind(this.emitter)
+    this.emit = this.emitter.emit.bind(this.emitter)",👍 🙌 ✅ ✔️ ☑️ ,Why is this needed?
908,"@@ -733,8 +734,12 @@ class Uppy {
 
     this.setState({ files })
 
-    newFiles.forEach((newFile) => {
+    newFiles.forEach((newFile, i) => {
       this.emit('file-added', newFile)
+
+      if (i + 1 === newFiles.length) {
+        this.emit('final-file-added', newFile)
+      }","I think `final-file-added` event looks geared towards a very particular use case, and could be more general. I'd expect it's pretty rare that a developer actually wants to receive only the last file in a particular set that the user added at once. We could instead give them access to the whole list of newly added files. Perhaps like this:

```js
this.emit('files-added', newFiles)
```

This still allows you to do the same thing as final-file-added:
```js
uppy.on('files-added', (list) => {
  const last = list[list.length - 1]
})
```
but also _more_ things.",Why do we need this check?
909,"@@ -743,9 +743,8 @@ module.exports = class Transloadit extends Plugin {
 
   _onTusError (err) {
     if (err && /^tus: /.test(err.message)) {
-      const url = err.originalRequest && err.originalRequest.responseURL
-        ? err.originalRequest.responseURL
-        : null
+      const xhr = err.originalRequest ? err.originalRequest.getUnderlyingObject() : null
+      const url = xhr && xhr.responseURL ? xhr.responseURL : null","tus-js-client v2 introduces a HTTP abstraction layer, so the code to access the URL is a bit different now.",I don't think we need to check fo
910,"@@ -75,6 +75,7 @@ module.exports = class Dashboard extends Plugin {
       defaultTabIcon: defaultTabIcon,
       showProgressDetails: false,
       hideUploadButton: false,
+      hideProgressAfterFinish: false,",The docs should also be updated with the new option.,"showProgressAfterFinish: false,"
911,"@@ -75,6 +76,19 @@ By default Dashboard will be rendered as a modal, which is opened via clicking o
 
 String with a CSS selector for a button that will trigger opening Dashboard modal. Multiple buttons or links can be used, if it’s a class selector (`.uppy-choose`, for example).
 
+### `plugins: []`
+
+List of plugin IDs that should be shown in the Dashboard's top bar. For example, to show the Webcam plugin:
+",Wouldn’t you be able to install StatusBar or similar the same way? So its not just for `acquire` plugins?,I think this should be `plugins: 
912,"@@ -75,9 +80,45 @@ module.exports = class RequestClient {
     return res.json()
   }
 
+  preflight (path) {
+    return new Promise((resolve, reject) => {
+      if (this.preflightDone) {
+        return resolve(this.allowedHeaders.slice())
+      }
+
+      fetch(this._getUrl(path), {
+        method: 'OPTIONS'","I'm actually getting an error on this because `OPTIONS` is not in the CORS whitelist …
![image](https://user-images.githubusercontent.com/1006268/59565599-fba49d00-9055-11e9-934f-bd9171b4d8d5.png)

Request headers:
![image](https://user-images.githubusercontent.com/1006268/59565601-02331480-9056-11e9-9713-74fc66592a27.png)

Response headers:
![image](https://user-images.githubusercontent.com/1006268/59565607-0f500380-9056-11e9-9a3e-4452b6aa25fc.png)

If this is the case we may need a new separate endpoint that we can just GET after all :(","This should be `return new Promise((resolve, reject) => {`"
913,"@@ -75,9 +80,48 @@ module.exports = class RequestClient {
     return res.json()
   }
 
+  preflight (path) {
+    return new Promise((resolve, reject) => {
+      if (this.preflightDone) {
+        return resolve(this.allowedHeaders.slice())
+      }
+
+      fetch(this._getUrl(path), {
+        method: 'OPTIONS'
+      })
+        .then((response) => {
+          if (response.headers.has('access-control-allow-headers')) {
+            const allowedHeaders = response.headers.get('access-control-allow-headers')
+              .split(',').map((headerName) => headerName.trim().toLowerCase())
+            this.allowedHeaders = this.allowedHeaders.concat(allowedHeaders)","Why concat, why not just set the array?",This should be `this.allowedHeaders = this.allowedHeaders.
914,"@@ -75,9 +80,48 @@ module.exports = class RequestClient {
     return res.json()
   }
 
+  preflight (path) {
+    return new Promise((resolve, reject) => {
+      if (this.preflightDone) {
+        return resolve(this.allowedHeaders.slice())
+      }
+
+      fetch(this._getUrl(path), {
+        method: 'OPTIONS'
+      })
+        .then((response) => {
+          if (response.headers.has('access-control-allow-headers')) {
+            const allowedHeaders = response.headers.get('access-control-allow-headers')
+              .split(',').map((headerName) => headerName.trim().toLowerCase())
+            this.allowedHeaders = this.allowedHeaders.concat(allowedHeaders)
+          }
+          this.preflightDone = true
+          resolve(this.allowedHeaders.slice())
+        })
+        .catch(reject)
+    })
+  }
+
+  preflightAndHeaders (path) {
+    return new Promise((resolve, reject) => {
+      this.preflight(path).then((allowedHeaders) => {
+        this.headers().then((headers) => {
+          // filter to keep only allowed Headers
+          Object.keys(headers).forEach((header) => {
+            if (allowedHeaders.indexOf(header.toLowerCase()) === -1) {
+              delete headers[header]",I think a console.log(“refraining from sending header x as cors would reject it”) will save us some head scratching later on,I don't think you need to `.toLowerCase()` here
915,"@@ -75,9 +80,48 @@ module.exports = class RequestClient {
     return res.json()
   }
 
+  preflight (path) {
+    return new Promise((resolve, reject) => {
+      if (this.preflightDone) {
+        return resolve(this.allowedHeaders.slice())
+      }
+
+      fetch(this._getUrl(path), {
+        method: 'OPTIONS'
+      })
+        .then((response) => {
+          if (response.headers.has('access-control-allow-headers')) {
+            this.allowedHeaders = response.headers.get('access-control-allow-headers')
+              .split(',').map((headerName) => headerName.trim().toLowerCase())
+          }
+          this.preflightDone = true
+          resolve(this.allowedHeaders.slice())
+        })
+        .catch(reject)
+    })
+  }
+
+  preflightAndHeaders (path) {
+    return new Promise((resolve, reject) => {","This promise chain would really benefit from being flatter I think…

Right now the `this.headers()` call does not have a catch(reject) handler.

we could have something like:

```js
return Promise.all([
  this.preflight(path),
  this.headers()
]).then(([allowedHeaders, headers]) => {
  // filter to keep only allowed Headers
  Object.keys(headers).forEach((header) => {
    if (allowedHeaders.indexOf(header.toLowerCase()) === -1) {
      this.uppy.log(`[CompanionClient] excluding unallowed header ${header}`)
      delete headers[header]
    }
  })
})
```",I don't think we need this `then` block.
916,"@@ -76,13 +76,19 @@ class Uppy {
       meta: {},
       onBeforeFileAdded: (currentFile, files) => currentFile,
       onBeforeUpload: (files) => files,
-      store: DefaultStore()
+      store: DefaultStore(),
+      logger: nullLogger
     }
 
     // Merge default options with the ones set by user
     this.opts = Object.assign({}, defaultOptions, opts)
     this.opts.restrictions = Object.assign({}, defaultOptions.restrictions, this.opts.restrictions)
 
+    // Support debug: true for backwards-compatability
+    if (this.opts.debug) {","If you already set a custom logger, but also debug:true should we refrain? throw a warning/error?",Why do we need this?
917,"@@ -76,13 +76,22 @@ class Uppy {
       meta: {},
       onBeforeFileAdded: (currentFile, files) => currentFile,
       onBeforeUpload: (files) => files,
-      store: DefaultStore()
+      store: DefaultStore(),
+      logger: nullLogger
     }
 
     // Merge default options with the ones set by user
     this.opts = Object.assign({}, defaultOptions, opts)
     this.opts.restrictions = Object.assign({}, defaultOptions.restrictions, this.opts.restrictions)
 
+    // Support debug: true for backwards-compatability, unless logger is set in opts
+    // opts instead of this.opts to avoid comparing objects — we set logger: nullLogger in defaultOptions
+    if (opts && opts.logger && opts.debug) {
+      this.log('You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.', 'warning')
+    } else if (opts && opts.debug) {
+      this.opts.logger = debugLogger
+    }",@goto-bus-stop does the condition above look on to you? :),I don't think we need to check for `opts && opts.logger` h
918,"@@ -76,48 +76,40 @@ module.exports = class Dropbox extends Plugin {
   }
 
   isFolder (item) {
-    return item.is_dir
+    return item['.tag'] === 'folder'
   }
 
   getItemData (item) {
-    return Object.assign({}, item, {size: item.bytes})
+    return item
   }
 
   getItemIcon (item) {
-    var icon = icons[item.icon]
-
-    if (!icon) {
-      if (item.icon.startsWith('folder')) {
-        icon = icons['folder']
-      } else {
-        icon = icons['page_white']
-      }
-    }
-    return icon()
+    return icons[item['.tag']]()
   }
 
   getItemSubList (item) {
-    return item.contents
+    return item.entries
   }
 
   getItemName (item) {
-    return item.path.length > 1 ? item.path.substring(1) : item.path
+    return item.name || ''",Is this ever empty in the API?,Why not just `return item['.tag']`?
919,"@@ -767,6 +767,22 @@ uppy.on('upload', (data) => {
 })
 ```
 
+### `progress`
+
+Fired each time the total upload progress is updated:
+
+**Parameters**
+- `progress` - An integer representing the total upload progress.","```suggestion
- `progress` - An integer (0-100) representing the total upload progress.
```
Think it'd be best to stress here that this is 0-100 and not 0.0-1.0, because it's a little unusual.",I think this should be called `total_upload_progress`
920,"@@ -767,6 +767,22 @@ uppy.on('upload', (data) => {
 })
 ```
 
+### `progress`
+
+Fired each time the total upload progress is updated:
+
+**Parameters**
+- `progress` - An integer representing the total upload progress.
+
+**Example**
+
+```javascript
+uppy.on('progress', (progress) => {
+  // progress: integer (total progress percentage)
+  console.log(progress)
+})
+```
+
 ### `upload-progress`
 
 Fired each time file upload progress is available:","```suggestion
Fired each time an individual file upload progress is available:
```","This should be `uppy.on('progress', progress => {`"
921,"@@ -77,14 +77,6 @@ jobs:
         script: bin/travis-deploy-companion
         on:
           branch: master
-    - name: 'Run Companion tests (Node.js 6)'
-      node_js: 12
-      services:
-        - docker
-      script:
-        - nvm install 6.0.0
-        - nvm use 6.0.0
-        - npm run test:companion",Can we keep this but run it on `node_js: 10.0.0`?,Why is this removed?
922,"@@ -77,6 +78,10 @@ If both width and height are given, only width is taken into account.
 >
 > See issue [#979](https://github.com/transloadit/uppy/issues/979) and [#1096](https://github.com/transloadit/uppy/pull/1096) for details on this feature.
 
+### `thumbnailtype: 'image/jpeg'`
+
+MIME type of the resulting thumbnail. Default thumbnail MIME type is `image/jpeg`. ","Maybe we should elaborate on why it might be useful to change the MIME type? PNG, transparency.",I don't think we need this line.
923,"@@ -779,7 +778,7 @@ module.exports = class Transloadit extends Plugin {
         // were added to the Assembly, so we can properly complete it. All that state is handled by
         // Golden Retriever. So, Golden Retriever is required to do resumability with the Transloadit plugin,
         // and we disable Tus's default resume implementation to prevent bad behaviours.
-        resume: false,
+        storeFingerprintForResuming: false,",The resume option is removed but you want the storeFingerprintForResuming option here if I understand the comment above correctly.,Why do we need this?
924,"@@ -78,26 +78,26 @@ fi_FI.strings = {
   resume: 'Jatka',
   resumeUpload: 'Jatka lähetystä',
   retry: 'Yritä uudelleen',
-  retryUpload: 'Yritä uudelleen lähetystä',
+  retryUpload: 'Yritä lähetystä uudelleen',
   saveChanges: 'Tallenna muutokset',
   selectAllFilesFromFolderNamed: 'Valitse kaikki tiedostot kansiosta %{name}',
   selectFileNamed: 'Valitse tiedosto %{name}',
   selectX: {
-    '0': 'Valitse %{smart_count}',
-    '1': 'Valitse %{smart_count}',
-    '2': 'Valitse %{smart_count}'
+    '0': 'Valitse %{smart_count} tiedosto',
+    '1': 'Valitse %{smart_count} tiedostoa',
+    '2': 'Valitse %{smart_count} tiedostoa'","I think this is wrong, because we’ve changed the string to specifically say “select X” instead of “select X files”, because there could also be folders, and we don’t want to make the button extra long.",Missing space after colon.
925,"@@ -78,6 +79,12 @@ class TransloaditAssembly extends Emitter {
 
       this.emit('connect')
     })
+
+    socket.on('connect_failed', () => {
+      this._onError(new NetworkError('Transloadit Socket.io connection error'))
+      this.socket = null
+    })
+","Added handling of socket.io’s `connect_failed`, but should the same be done for WebSocket that we use with Companion @ifedapoolarewaju?",Why do we need this?
926,"@@ -783,25 +783,33 @@ class Uppy {
   /**
    * Logs stuff to console, only if `debug` is set to true. Silent in production.
    *
-   * @return {String|Object} to log
+   * @param {String|Object} msg to log
+   * @param {String} type optional `error` or `warning`
    */
   log (msg, type) {
+    let message = `[Uppy] [${Utils.getTimeStamp()}] ${msg}`
+
+    global.uppyLog = global.uppyLog + '\n' + 'DEBUG LOG: ' + msg","This now always happens, even if opts.debug is false. Is that intentional?",I don't think you need the `\n`
927,"@@ -783,6 +813,9 @@ module.exports = class Transloadit extends Plugin {
         // Disable tus-js-client fingerprinting, otherwise uploading the same file at different times
         // will upload to the same assembly.
         resume: false,
+        // Disable Uppy Server's retry optimisation; we need to change the endpoint on retry
+        // so it can't just reuse the same tus.Upload instance server-side.
+        useFastRemoteRetry: false,
         // Only send assembly metadata to the tus endpoint.","wow, this stuff is getting complex with every feature 😱",I don't think we want this to be the default. I think we w
928,"@@ -79,6 +80,47 @@ With this option set to `true`, users can upload some files, and then add _more_
 
 With this option set to `false`, users can upload some files, and you can listen for the ['complete'](/docs/uppy/#complete) event to continue to the next step in your app's upload flow. A typical use case for this is uploading a new profile picture. If you are integrating with an existing HTML form, this option gives the closest behaviour to a bare `<input type=""file"">`.
 
+### `logger`
+
+An object of methods that are called with debug information from [`uppy.log`](/docs/uppy/#uppy-log).
+
+Set `logger: Uppy.debugLogger` to get debug info output to the browser console:
+
+```js
+const Uppy = require('@uppy/core')
+const uppy = Uppy({
+  logger: Uppy.debugLogger
+})
+```
+
+You can also provide your own logger object: it should expose `debug`, `warn` and `error` methods, as shown in the examples below.
+
+By default `logger` is set to `nullLogger`, which does nothing:
+
+```js
+const nullLogger = {
+  debug: (...args) => {},
+  warn: (...args) => {},
+  error: (...args) => {}
+}
+```
+
+`logger: Uppy.debugLogger` looks like this:
+
+```js
+const debugLogger = {
+  debug: (...args) => {
+    // IE 10 doesn’t support console.debug
+    const debug = console.debug || console.log
+    debug.call(console, `[Uppy] [${getTimeStamp()}]`, ...args)
+  },
+  warn: (...args) => console.warn(`[Uppy] [${getTimeStamp()}]`, ...args),
+  error: (...args) => console.error(`[Uppy] [${getTimeStamp()}]`, ...args)
+}
+```
+
+By providing your own `logger`, you can send the debug information to a server, choose to log errors only, etc.
+","another look on the docs would be useful, too, please @goto-bus-stop ",I don't think we need this line.
929,"@@ -8,12 +8,12 @@ export default class Provider {
   constructor (opts) {
     this.opts = opts
     this.provider = opts.provider
-    this.id = this.provider
+    this.id = opts.id || this.provider","in case you want to rename one of the plugins when instantiating, from options?",Why do we need this change?
930,"@@ -8,14 +8,27 @@
  */
 module.exports = function generateFileID (file) {
   // filter is needed to not join empty values with `-`","Filter is not used now, comment not needed?",/* global generateFileID */
931,"@@ -8,6 +8,59 @@
   },
   ""pre-commit"": ""lint:staged"",
   ""license"": ""MIT"",
+  ""dependencies"": {
+    ""@uppy-example/aws-companion"": ""file:examples/aws-companion"",
+    ""@uppy-example/aws-presigned-url"": ""file:examples/aws-presigned-url"",
+    ""@uppy-example/bundled"": ""file:examples/bundled"",
+    ""@uppy-example/cdn-example"": ""file:examples/cdn-example"",
+    ""@uppy-example/custom-provider"": ""file:examples/custom-provider"",
+    ""@uppy-example/dev"": ""file:examples/dev"",
+    ""@uppy-example/digitalocean-spaces"": ""file:examples/digitalocean-spaces"",
+    ""@uppy-example/multiple-instances"": ""file:examples/multiple-instances"",
+    ""@uppy-example/node-xhr"": ""file:examples/node-xhr"",
+    ""@uppy-example/php-xhr"": ""file:examples/php-xhr"",
+    ""@uppy-example/python-xhr"": ""file:examples/python-xhr"",
+    ""@uppy-example/react-example"": ""file:examples/react-example"",
+    ""@uppy-example/react-native-expo"": ""file:examples/react-native-expo"",
+    ""@uppy-example/redux"": ""file:examples/redux"",
+    ""@uppy-example/transloadit"": ""file:examples/transloadit"",
+    ""@uppy-example/transloadit-textarea"": ""file:examples/transloadit-textarea"",
+    ""@uppy-example/uppy-with-companion"": ""file:examples/uppy-with-companion"",
+    ""@uppy-example/xhr-bundle"": ""file:examples/xhr-bundle"",",Are these `@uppy-example`s here so that we don’t have to add them to Lerna config?,I think this should be `@uppy-ex
932,"@@ -8,7 +8,7 @@ const Dropbox = require('@uppy/dropbox')
 const Tus = require('@uppy/tus')
 
 const isOnTravis = !!(process.env.TRAVIS && process.env.CI)
-const companionUrl = isOnTravis ? 'http://companion.test:3030' : 'http://localhost:3030'
+const companionUrl = isOnTravis ? 'http://companion.test:3030' : 'http://localhost:3020'",wdio runs Companion on :3030. can't we use that here?,Why do we need this change?
933,"@@ -8,7 +8,7 @@ const ThumbnailGenerator = require('@uppy/thumbnail-generator')
 const findAllDOMElements = require('@uppy/utils/lib/findAllDOMElements')
 const toArray = require('@uppy/utils/lib/toArray')
 const prettyBytes = require('prettier-bytes')
-const ResizeObserver = require('resize-observer-polyfill')
+const ResizeObserver = require('resize-observer-polyfill').default","I think we need to do: `require('resize-observer-polyfill').default || require('resize-observer-polyfill')`, to support both the transpiled version of its ES module format and its CommonJS format. A bit like we did here (although for a different related reason): 

https://github.com/transloadit/uppy/blob/4684a3e1f3bb43ed59c4ffcda73093cdbe1ddf0d/packages/%40uppy/form/src/index.js#L3-L5",Why do we need this?
934,"@@ -8,9 +8,9 @@ module.exports = function prettyETA (seconds) {
   // Display a leading zero if the there is a preceding unit: 1m 05s, but 5s
   const hoursStr = time.hours ? time.hours + 'h ' : ''
   const minutesVal = time.hours ? ('0' + time.minutes).substr(-2) : time.minutes
-  const minutesStr = minutesVal ? minutesVal + 'm ' : ''
+  const minutesStr = minutesVal ? minutesVal + 'm' : ''
   const secondsVal = minutesVal ? ('0' + time.seconds).substr(-2) : time.seconds
-  const secondsStr = secondsVal + 's'
+  const secondsStr = time.hours ? '' : minutesVal ? ' ' + secondsVal + 's' : secondsVal + 's'","This will be a bit easier to read with parentheses:
```suggestion
  const secondsStr = time.hours ? '' : (minutesVal ? ' ' + secondsVal + 's' : secondsVal + 's')
```",I'm not sure if this is the righ
935,"@@ -80,10 +80,10 @@ de_DE.strings = {
   retry: 'Erneut versuchen',
   retryUpload: 'Upload erneut versuchen',
   saveChanges: 'Änderungen speichern',
-  selectXFiles: {
-    '0': '%{smart_count} Datei auswählen',
-    '1': '%{smart_count} Dateien auswählen',
-    '2': '%{smart_count} Dateien auswählen'
+  selectX: {
+    '0': 'Wählen Sie %{smart_count}',
+    '1': 'Wählen Sie %{smart_count}',
+    '2': 'Wählen Sie %{smart_count}'","@tim-kos could you check this one? `Select 1` or `Select 5`, meaning files or folders.",Shouldn't this be `selectXFiles`
936,"@@ -80,6 +80,11 @@ module.exports = class Instagram extends Plugin {
   }
 
   getItemIcon (item) {
+    if (!item.images) {
+      return <svg viewBox=""0 0 58 58"" opacity=""0.6"">
+        <path d=""M36.537 28.156l-11-7a1.005 1.005 0 0 0-1.02-.033C24.2 21.3 24 21.635 24 22v14a1 1 0 0 0 1.537.844l11-7a1.002 1.002 0 0 0 0-1.688zM26 34.18V23.82L34.137 29 26 34.18z"" /><path d=""M57 6H1a1 1 0 0 0-1 1v44a1 1 0 0 0 1 1h56a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM10 28H2v-9h8v9zm-8 2h8v9H2v-9zm10 10V8h34v42H12V40zm44-12h-8v-9h8v9zm-8 2h8v9h-8v-9zm8-22v9h-8V8h8zM2 8h8v9H2V8zm0 42v-9h8v9H2zm54 0h-8v-9h8v9z"" />
+      </svg>
+    }","this is an unrelated fix. I noticed when an instagram carousel post is mixed with images and videos, the videos don't come with thumbnails, so I am adding a fallback thumbnail for this case. ",I think this should be `if (!ite
937,"@@ -803,6 +810,11 @@ module.exports = class Dashboard extends Plugin {
       theme = this.opts.theme
     }
 
+    if (!['files', 'folders', 'both'].includes(this.opts.browserUploadType)) {","`.includes()` may not be available in IE 10/11, could this use indexOf or just three `===` checks instead?",if (this.opts.browserUploadType)
938,"@@ -807,7 +807,6 @@ module.exports = class Dashboard extends Plugin {
       showLinkToFileUploadResult: this.opts.showLinkToFileUploadResult,
       proudlyDisplayPoweredByUppy: this.opts.proudlyDisplayPoweredByUppy,
       currentWidth: pluginState.containerWidth,
-      isWide: pluginState.containerWidth > 400,",Thanks for removing unused stuff! Good catch.,isWide: pluginState.containerWid
939,"@@ -81,58 +81,56 @@
   },
   ""scripts"": {
     ""bootstrap"": ""lerna bootstrap"",
-    ""build:bundle"": ""node ./bin/build-js.js"",
+    ""build:bundle"": ""node ./bin/build-bundle.js"",
+    ""build:clean"": ""rm -rf packages/*/lib packages/@uppy/*/lib packages/*/dist packages/@uppy/*/dist"",
     ""build:companion"": ""cd ./packages/@uppy/companion && npm run build"",
     ""build:css"": ""node ./bin/build-css.js"",
-    ""build:gzip"": ""node ./bin/gzip.js"",
     ""build:js"": ""npm-run-all build:lib build:bundle"",
     ""build:lib"": ""node ./bin/build-lib.js"",
-    ""build"": ""npm-run-all --parallel build:js build:css build:companion --serial build:gzip size"",
-    ""clean"": ""rm -rf packages/*/lib packages/@uppy/*/lib packages/*/dist packages/@uppy/*/dist"",
-    ""contributors:save"": ""replace-x -m '<!--contributors-->[\\s\\S]+<!--/contributors-->' \""<!--contributors-->\n## Contributors\n\n$(npm run --silent contributors)\n<!--/contributors-->\"" README.md"",
-    ""contributors"": ""githubcontrib --owner transloadit --repo uppy --cols 6 $([ \""${GITHUB_TOKEN:-}\"" == \""\"" ] && echo \""\"" || echo \""--authToken ${GITHUB_TOKEN}\"") --showlogin true --sortOrder desc"",
+    ""build"": ""npm-run-all --parallel build:js build:css build:companion --serial size"",
+    ""contributors:fetch"": ""githubcontrib --owner transloadit --repo uppy --cols 6 $([ \""${GITHUB_TOKEN:-}\"" == \""\"" ] && echo \""\"" || echo \""--authToken ${GITHUB_TOKEN}\"") --showlogin true --sortOrder desc"",
+    ""contributors:save"": ""replace-x -m '<!--contributors-->[\\s\\S]+<!--/contributors-->' \""<!--contributors-->\n## Contributors\n\n$(npm run --silent contributors:fetch)\n<!--/contributors-->\"" README.md"",
     ""dev:browsersync"": ""browser-sync start --no-open --no-ghost-mode false --server examples/dev --port 3452 --serveStatic packages/uppy/dist --files \""examples/dev/bundle.js, packages/uppy/dist/uppy.min.css, packages/uppy/lib/**/*\"""",
-    ""dev:js"": ""cd examples/dev && npm run watch"",
-    ""dev:no-companion"": ""npm-run-all --parallel dev:js watch:css watch:js:lib dev:browsersync"",
-    ""dev"": ""npm-run-all --parallel start:companion dev:js watch:css watch:js:lib dev:browsersync"",
+    ""dev:watch-sandbox"": ""cd examples/dev && npm run watch:sandbox"",
+    ""dev:with-companion"": ""npm-run-all --parallel start:companion dev:watch-sandbox watch dev:browsersync"",
+    ""dev"": ""npm-run-all --parallel dev:watch-sandbox watch dev:browsersync"",
     ""lint:fix"": ""npm run lint -- --fix"",
     ""lint:staged"": ""lint-staged"",
     ""lint"": ""eslint . --cache"",
     ""release"": ""./bin/release"",
     ""size"": ""echo 'JS Bundle mingz:' && cat ./packages/uppy/dist/uppy.min.js | gzip | wc -c && echo 'CSS Bundle mingz:' && cat ./packages/uppy/dist/uppy.min.css | gzip | wc -c"",
-    ""start:companion"": ""sh ./bin/companion"",
-    ""start"": ""npm-run-all --parallel watch start:companion web:preview"",
-    ""test:acceptance:local"": ""npm run test:build && wdio test/endtoend/wdio.local.conf.js"",
-    ""test:acceptance"": ""npm run test:prepare-ci && wdio test/endtoend/wdio.remote.conf.js"",
-    ""test:build-ci"": ""./bin/endtoend-build-ci"",
-    ""test:build"": ""./bin/endtoend-build"",
+    ""start:companion"": ""./bin/companion"",
+    ""start"": ""npm-run-all --parallel watch start:companion web:start"",","What if I want to work on the website without companion? AJ working on a post doesn’t need Companion, probably. `web:start` for that?",I don't think we want to remove 
940,"@@ -81,6 +81,10 @@
   height: 100%;
 }
 
+.uppy-StatusBar-contentPadding {
+  margin-right: 0.3em;","I would use `1ch` in this case since it's horizontal text relative sizing (`ch` is relative to the character width, `em` to the character height).",.uppy-StatusBar {
941,"@@ -827,11 +848,22 @@ class Uppy {
 
       this.setState({ error: error.message })
 
-      let message = this.i18n('failedToUpload', { file: file.name })
       if (typeof error === 'object' && error.message) {
-        message = { message: message, details: error.message }
+        const newError = new Error(error.message)
+        newError.details = error.message
+        if (error.details) {
+          newError.details += ' ' + error.details
+        }
+        newError.message = this.i18n('failedToUpload', { file: file.name })
+        this._showOrLogErrorAndThrow(newError, {
+          throwErr: false
+        })
+      } else {
+        this._showOrLogErrorAndThrow(error, {
+          throwErr: false
+        })
       }
-      this.info(message, 'error', 5000)
+      // this.info(message, 'error', 5000)",lets just get rid of this line!,Can we remove this?
942,"@@ -83,10 +84,11 @@
     ""build"": ""npm-run-all --parallel build:js build:css --serial build:gzip size"",
     ""clean"": ""rm -rf packages/*/lib packages/@uppy/*/lib && rm -rf packages/uppy/dist"",
     ""lint:fix"": ""npm run lint -- --fix"",
+    ""lint:companion"": ""eslint --ignore-path packages/@uppy/companion/.eslintignore -c packages/@uppy/companion/.eslintrc.json packages/@uppy/companion/."",",shouldn't eslint use the `.eslintrc.json` in that directory when we run it on the entire project? :thinking: ,"""lint:companion"": ""eslint --igno"
943,"@@ -83,10 +84,11 @@
     ""build"": ""npm-run-all --parallel build:js build:css --serial build:gzip size"",
     ""clean"": ""rm -rf packages/*/lib packages/@uppy/*/lib && rm -rf packages/uppy/dist"",
     ""lint:fix"": ""npm run lint -- --fix"",
+    ""lint:companion"": ""eslint --ignore-path packages/@uppy/companion/.eslintignore -c packages/@uppy/companion/.eslintrc.json packages/@uppy/companion/."",
     ""lint"": ""eslint . --cache"",
     ""lint-staged"": ""lint-staged"",
     ""release"": ""./bin/release"",
-    ""start:server"": ""node bin/start-server"",
+    ""start:companion"": ""sh ./bin/companion"",
     ""start"": ""npm-run-all --parallel watch start:server web:preview"",",`start:server` → `start:companion` in the `start` script,I think this should be `./bin/no
944,"@@ -85,32 +116,10 @@ module.exports = (props) => {
 }
 
 const ProgressBarProcessing = (props) => {
-  // Collect pre or postprocessing progress states.
-  const progresses = []
-  Object.keys(props.files).forEach((fileID) => {
-    const { progress } = props.files[fileID]
-    if (progress.preprocess) {
-      progresses.push(progress.preprocess)
-    }
-    if (progress.postprocess) {
-      progresses.push(progress.postprocess)
-    }
-  })
-
-  // In the future we should probably do this differently. For now we'll take the
-  // mode and message from the first file…
-  const { mode, message } = progresses[0]
-  const value = progresses.filter(isDeterminate).reduce((total, progress, all) => {
-    return total + progress.value / all.length
-  }, 0)
-  function isDeterminate (progress) {
-    return progress.mode === 'determinate'
-  }
-
   return html`
     <div class=""UppyStatusBar-content"">
-      ${mode === 'determinate' ? `${value * 100}%・` : ''}
-      ${message}
+      ${props.mode === 'determinate' ? `${Math.round(props.value * 100)}%・` : ''}",Lil fix for displaying the progress value.,Why do we need to round here?
945,"@@ -85,36 +103,35 @@ module.exports = class Tus10 extends Plugin {
 
     // Create a new tus upload
     return new Promise((resolve, reject) => {
-      const upload = new tus.Upload(file.data, {
+      var optsTus = Object.assign({}, tusDefaultOptions, this.opts)",Nit: can you change this to `const`?,Why do we need this change?
946,"@@ -85,36 +103,35 @@ module.exports = class Tus10 extends Plugin {
 
     // Create a new tus upload
     return new Promise((resolve, reject) => {
-      const upload = new tus.Upload(file.data, {
+      var optsTus = Object.assign({}, tusDefaultOptions, this.opts)
 
-        // TODO merge this.opts or this.opts.tus here
-        metadata: file.meta,
-        resume: this.opts.resume,
-        endpoint: this.opts.endpoint,
+      optsTus.onError = (err) => {
+        this.core.log(err)
+        this.core.emitter.emit('core:upload-error', file.id, err)
+        reject('Failed because: ' + err)
+      }
 
-        onError: (err) => {
-          this.core.log(err)
-          this.core.emitter.emit('core:upload-error', file.id, err)
-          reject('Failed because: ' + err)
-        },
-        onProgress: (bytesUploaded, bytesTotal) => {
-          this.core.emitter.emit('core:upload-progress', {
-            uploader: this,
-            id: file.id,
-            bytesUploaded: bytesUploaded,
-            bytesTotal: bytesTotal
-          })
-        },
-        onSuccess: () => {
-          this.core.emitter.emit('core:upload-success', file.id, upload, upload.url)
+      optsTus.onProgress = (bytesUploaded, bytesTotal) => {
+        this.core.emitter.emit('core:upload-progress', {
+          uploader: this,
+          id: file.id,
+          bytesUploaded: bytesUploaded,
+          bytesTotal: bytesTotal
+        })
+      }
 
-          if (upload.url) {
-            this.core.log(`Download ${upload.file.name} from ${upload.url}`)
-          }
+      optsTus.onSuccess = () => {
+        this.core.emitter.emit('core:upload-success', file.id, upload, upload.url)
 
-          resolve(upload)
+        if (upload.url) {
+          this.core.log('Download ' + upload.file.name + ' from ' + upload.url)
         }
-      })
+
+        resolve(upload)
+      }
+      optsTus.metadata = file.meta","Maybe we can throw an error if the user specified a `metadata` option too, since it would get overridden here? The error message could tell the user to use the `MetaData` plugin instead.",I don't think you need to ass
947,"@@ -86,14 +92,19 @@ fr_FR.strings = {
   saveChanges: 'Sauvegarder les modifications',
   selectAllFilesFromFolderNamed: 'Sélectionner tous les fichiers du dossier %{name}',
   selectFileNamed: 'Sélectionner le fichier %{name}',
+  selectSourceDescription: 'Afin de réaliser une vidéo de votre écran, veuillez autoriser l\'accès à ce site.',
+  selectSourceTitle: 'Veuillez autoriser l\'accès à votre écran',
   selectX: {
     '0': 'Sélectionner %{smart_count}',
     '1': 'Sélectionner %{smart_count}',
     '2': 'Sélectionner %{smart_count}'
   },
-  smile: 'Souris!',
+  smile: 'Souriez !',",Space before exclamationmark intended?,Prefer double-quoted strings 
948,"@@ -86,24 +99,36 @@ class AddFiles extends Component {
     )
   }
 
-  renderDropPasteBrowseTagline = () => {
+  renderBrowseButton = (text, onClickFn) => {
     const numberOfAcquirers = this.props.acquirers.length
-    const browse =
+    return (
       <button
         type=""button""
         class=""uppy-u-reset uppy-Dashboard-browse""
-        onclick={this.triggerFileInputClick}
+        onclick={onClickFn}
         data-uppy-super-focusable={numberOfAcquirers === 0}
       >
-        {this.props.i18n('browse')}
+        {text}
       </button>
+    )
+  }
+
+  renderDropPasteBrowseTagline = () => {
+    const numberOfAcquirers = this.props.acquirers.length
+    const browseFiles = this.renderBrowseButton(this.props.i18n('browseFiles'), this.triggerFileInputClick)
+    const browseFolders = this.renderBrowseButton(this.props.i18n('browseFolders'), this.triggerFolderInputClick)
+
+    // in order to keep the i18n CamelCase and options lower (as are defaults) we will want to transform a lower
+    // to Camel
+    const lowerBrowseType = this.props.browserUploadType
+    const camelBrowseType = lowerBrowseType.charAt(0).toUpperCase() + lowerBrowseType.slice(1)
 
     return (
       <div class=""uppy-Dashboard-AddFiles-title"">
         {
           numberOfAcquirers > 0
-            ? this.props.i18nArray('dropPasteImport', { browse })
-            : this.props.i18nArray('dropPaste', { browse })
+            ? this.props.i18nArray(`dropPasteImport${camelBrowseType}`, { browseFiles, browseFolders })
+            : this.props.i18nArray(`dropPaste${camelBrowseType}`, { browseFiles, browseFolders })","This is a breaking change, as users with custom strings are still using `%{browse}` and it would no longer be replaced correctly.
I think using `browseFiles` and `browseFolders` as names is the correct approach, but we can maintain backwards compatibility by also providing a value for `browse`:
```suggestion
            ? this.props.i18nArray(`dropPasteImport${camelBrowseType}`, { browseFiles, browseFolders, browse: browseFiles })
            : this.props.i18nArray(`dropPaste${camelBrowseType}`, { browseFiles, browseFolders, browse: browseFiles })
```",I'm not sure if this is the b
949,"@@ -86,6 +86,11 @@ class FileCard extends Component {
   render () {
     const file = this.props.files[this.props.fileCardFor]
 
+    let showEditButton
+    this.props.editors.forEach((target) => {
+      showEditButton = this.props.getPlugin(target.id).сanEditFile(file)",❓Questionable way of looping through editors and calling `сanEditFile` to show the edit button. Is there a better way?,const { fileCardFor } = this.
950,"@@ -86,6 +86,11 @@ class FileCard extends Component {
   render () {
     const file = this.props.files[this.props.fileCardFor]
 
+    let showEditButton
+    this.props.editors.forEach((target) => {
+      showEditButton = this.props.getPlugin(target.id).сanEditFile(file)
+    })","I think the looping stuff is probably the only way, but it could use `.some()` instead of `.forEach()`, so it will also stop looping as soon as it finds a match:
```suggestion
    const showEditButton = this.props.editors.some((target) => {
      const plugin = this.props.getPlugin(target.id)
      plugin.сanEditFile(file)
    })
```

(Also this is a minor thing, but I would probably put this entire code in the Dashboard plugin class itself and pass it in as a prop, so you can do `this.props.canEditFile(file)` instead of writing the loop in the render code. Then it doesn't depend directly on other plugins. If we ever end up doing testing for the components it will be easier that way)",You can use `this.props.getPl
951,"@@ -867,6 +867,7 @@ class Uppy {
 
   info (message, type, duration) {
     const isComplexMessage = typeof message === 'object'
+    duration = typeof duration === 'undefined' ? 3000 : duration",how about a default parameter instead?,const isComplexMessage = type
952,"@@ -87,11 +87,25 @@ module.exports = class Transloadit extends Plugin {
 
   getAssemblyOptions (fileIDs) {
     const options = this.opts
+
+    const normalizeAssemblyOptions = (assemblyOptions) => {
+      const globalMeta = this.uppy.getState().meta
+      // Include global metadata as fields. Works great together with the Form plugin :)
+      if (assemblyOptions.fields === true) {
+        assemblyOptions.fields = Object.assign({}, globalMeta)
+      }
+      if (!assemblyOptions.fields) {
+        assemblyOptions.fields = {}
+      }
+      return assemblyOptions
+    }
+
     return Promise.all(
       fileIDs.map((fileID) => {
         const file = this.uppy.getFile(fileID)
         const promise = Promise.resolve()
           .then(() => options.getAssemblyOptions(file, options))
+          .then(normalizeAssemblyOptions)",Nitpicking here: is `normalizeAssemblyOptions` a good name when it mostly adds `fields` to an assembly?,I don't think you need to che
953,"@@ -87,15 +87,7 @@
     ""lint:fix"": ""npm run lint -- --fix"",
     ""lint"": ""eslint . --cache"",
     ""lint-staged"": ""lint-staged"",
-    ""release:major"": ""env SEMANTIC=major npm run release"",
-    ""release:minor"": ""env SEMANTIC=minor npm run release"",
-    ""release:patch"": ""env SEMANTIC=patch npm run release"",
-    ""replace:versions"": ""replace-x -r 'uppy/v\\d+\\.\\d+\\.\\d+/dist' \""uppy/v$npm_package_version/dist\"" ./examples/ README.md bin/upload-to-cdn.sh website/src/examples/ website/src/docs/ website/themes/uppy/layout/ --exclude=node_modules"",
-    ""replace:versions:commit"": ""git commit -m \""Change Uppy version references to v$npm_package_version\"" ./examples/ README.md bin/upload-to-cdn.sh website/src/examples/ website/src/docs/ website/themes/uppy/layout/"",
-    ""release:tag"": ""npm version ${SEMANTIC:-patch} -m \""Release %s\"""",
-    ""release:build"": ""npm-run-all clean build release:copy-uppy-readme"",
-    ""release:copy-uppy-readme"": ""cp README.md packages/uppy/README.md"",
-    ""release"": ""npm-run-all release:tag release:build replace:versions replace:versions:commit && git push && git push --tags && npm publish"",
+    ""release"": ""./bin/release"",
     ""start:server"": ""node bin/start-server"",","Soooo, how do we release a patch or minor now? :)",Why is this needed?
954,"@@ -87,6 +88,9 @@ module.exports = () => {
     .use(ScreenCapture, { target: Dashboard })
     .use(Form, { target: '#upload-form' })
     .use(ImageEditor, { target: Dashboard })
+    .use(DomTarget, {","```suggestion
    .use(DropTarget, {
```",".use(DomTarget, { target: Das"
955,"@@ -87,7 +87,6 @@ class Uppy {
     this.upload = this.upload.bind(this)
 
     this.emitter = ee()
-    this.on = this.emitter.on.bind(this.emitter)","`on` likely still needs a bind, similar to `this.resetProgress = this.resetProgress.bind(this)` correct?",Why was this removed?
956,"@@ -87,9 +87,9 @@ module.exports = class Plugin {
       this.el = plugin.render(this.core.state)
       targetElement.appendChild(this.el)
 
-      this.target = targetElement
+      this.target = this.el","I'm not sure what the effects of this change would be. if we do this we could remove `this.target` entirely and use `this.el` everywhere instead.

It seems like these two lines could stay the same. Or is there a reason to change this here that I'm missing?",Why is this change needed?
957,"@@ -88,12 +88,11 @@ class TransloaditAssembly extends Emitter {
 
     socket.on('assembly_upload_finished', (file) => {
       this.emit('upload', file)
-      this._fetchStatus({ diff: false })
+      this.status.uploads.push(file)
     })
 
     socket.on('assembly_uploading_finished', () => {
       this.emit('executing')
-      this._fetchStatus({ diff: false })","uploading_finished and upload_meta_data_extracted can fire very quickly after another, and there is not much difference in the Assembly status that's useful to us. I kept only the Assembly fetch after metadata is extracted, which ensures that we'll have all the correct `uploads.*.meta` properties on the client side.",I think this should be `this.
958,"@@ -88,5 +94,8 @@ module.exports = class RequestClient {
       .then(this.onReceiveResponse)
       // @todo validate response status before calling json
       .then((res) => res.json())
+      .catch((err) => {
+        throw new Error(`Could not detele ${this._getUrl(path)}. ${err}`)",s/detele/delete,I think this should be `throw
959,"@@ -88,7 +88,7 @@ class Uploader {
         this._paused = true
         if (this.tus) {
           const shouldTerminate = !!this.tus.url
-          this.tus.abort(shouldTerminate)
+          this.tus.abort(shouldTerminate).catch(() => {})","The `abort` function now returns a Promise. And if `shouldTerminate` is true, this Promise can be rejected. So, to avoid a unhandled promise rejection, I added a dummy handler. Since a possible error also wasn't handled before, I think it's OK to not handle it in this case as well.",Why do we need this?
960,"@@ -88,7 +88,7 @@ module.exports.app = (options = {}) => {
   app.get('/:providerName/logout', middlewares.hasSessionAndProvider, middlewares.gentleVerifyToken, controllers.logout)
   app.get('/:providerName/authorized', middlewares.hasSessionAndProvider, middlewares.gentleVerifyToken, controllers.authorized)
   app.get('/:providerName/list/:id?', middlewares.hasSessionAndProvider, middlewares.verifyToken, controllers.list)
-  app.post('/:providerName/get/:id', middlewares.hasSessionAndProvider, middlewares.verifyToken, controllers.get)
+  app.post('/:providerName/get/:id', middlewares.hasSessionAndProvider, middlewares.gentleVerifyToken, controllers.get)",do you mind sharing what is the reason for this change?,"app.get('/:providerName/get/:id', middlewares.hasSessionAndProvider, middlewares.verifyToken, controllers.get)"
961,"@@ -886,16 +886,22 @@ class Uppy {
    * @param {object} instance The plugin instance to remove.
    */
   removePlugin (instance) {
-    const list = this.plugins[instance.type]
+    this.emit('plugin-removed', instance)","the event name suggests it's already been done, but actually the plugin is _about_ to be removed. It does need to be emitted at this time but maybe we can name it differently (`remove-plugin`, `plugin-remove`, idk)","I think this should be `plugin-removed`, not `plugin-removed`."
962,"@@ -89,10 +89,19 @@ Here are some highlights on what we’ve managed to delived in the Uppy Month:
 - Works great on mobile
 - Works great with Transloadit. Works great without
 
-- knows about encoding
+We also left two features ""behind"":
+
+> Offering sugared shortcuts for novice users (presets) 
+
+We felt Uppy is straightforward enough to use, presets could end up making this less clear. Robodog does offer less boilerplatey integrations, but this was done as a wrapper instead of a preset.
+
+> Themable UI with a beautiful default 
+
+Instead of going for `{ theme: 'dark' }`, we only offer theming via CSS. It is of course very feasible to create a `dark.css` file, and maybe we can come up with a section on the site for easily sharing and distributing such files, but we let go of this desire for 1.0.
+
+It's not :100:, but for a 3 year gameplan, we are very happy with this result!
 ","Not sure if we even need this section, we could then as well say we don’t have Box and Google Photos support. Yeah, I know those things were on the list on the website, but.",I don't think this is the right way to do this.
963,"@@ -89,10 +89,19 @@ Here are some highlights on what we’ve managed to delived in the Uppy Month:
 - Works great on mobile
 - Works great with Transloadit. Works great without
 
-- knows about encoding
+We also left two features ""behind"":
+
+> Offering sugared shortcuts for novice users (presets) 
+
+We felt Uppy is straightforward enough to use, presets could end up making this less clear. Robodog does offer less boilerplatey integrations, but this was done as a wrapper instead of a preset.
+
+> Themable UI with a beautiful default 
+
+Instead of going for `{ theme: 'dark' }`, we only offer theming via CSS. It is of course very feasible to create a `dark.css` file, and maybe we can come up with a section on the site for easily sharing and distributing such files, but we let go of this desire for 1.0.
+
+It's not :100:, but for a 3 year gameplan, we are very happy with this result!
 
 ## What’s next for Uppy?
 
-We are releasing 1.0 as Uppy has matured into a full-featured capable file uploader. The work, however, is never done — there are suggestions coming in from the community and the team every day. And we are already [planning some features and bug fixes for 1.1](https://github.com/transloadit/uppy/blob/master/CHANGELOG.md#11).
+Does this mean Uppy is perfect? Nope! There are [issues](https://github.com/transloadit/uppy/issues), items in our backlog, and we are already [planning Uppy 1.1](https://github.com/transloadit/uppy/blob/master/CHANGELOG.md#11). We want to release a WordPress plugin, add image cropping, and more, but we are releasing 1.0 today because it contains the features that we set out to implement. They are all documented and we don't expect their APIs to change. Uppy has seen serious usage by a seriously large community and by various serious enterprises, and with 1.0 we're also signaling to you: Hey, we take it serious and we won't be swapping things from underneath your app just like that. And if you don't have Uppy powering your file uploads yet, now is the best time to give it a shot.
 ","> we don't expect their APIs to change
 
🤔 ",I don't think this is true anymore.
964,"@@ -89,6 +89,18 @@ module.exports = class Plugin {
     }
   }
 
+  setMetaFromTargetForm () {
+    const el = findDOMElement(this.opts.target)
+    const formMetaData = getMetaFromForm(el)
+    if (formMetaData) {
+      this.core.log('Adding metadata from form:')
+      this.core.log(formMetaData)
+      this.core.setMeta(formMetaData)
+    } else {
+      this.core.log('Couldn’t extract metadata from form')
+    }
+  }","I'm not sure about putting `setMetaFromTargetForm` on the Plugin class, since it's not for use by every plugin…Maybe the plugins could manually do

```js
this.core.setMeta(getMetaFromForm(this.target))
```

in their `install()` methods? that's not a _lot_ of code to duplicate.",Shouldn't this be `this.core.log`?
965,"@@ -89,6 +90,6 @@
     ""test:watch"": ""npm test -- --watch""
   },
   ""engines"": {
-    ""node"": "">=6.0.0""
+    ""node"": "">=10.0.0""",i would do this in a separate PR because it also needs a travis.yml update (and maybe docs?),This should be `>=10.0.0`
966,"@@ -9,10 +9,20 @@
     ""window"": true,
     ""hexo"": true
   },
-  ""plugins"": [""jest"", ""compat""],
+  ""plugins"": [""jest"", ""compat"", ""jsdoc""],
   ""rules"": {
     ""jsx-quotes"": [""error"", ""prefer-double""],
-    ""compat/compat"": [""error""]
+    ""compat/compat"": [""error""],
+
+    ""jsdoc/check-alignment"": [""error""],
+    ""jsdoc/check-examples"": [""error""],
+    ""jsdoc/check-indentation"": [""error""],
+    ""jsdoc/check-param-names"": [""error""],
+    ""jsdoc/check-syntax"": [""error""],
+    ""jsdoc/check-tag-names"": [""error""],
+    ""jsdoc/check-types"": [""error""],
+    ""jsdoc/newline-after-description"": [""error""],
+    ""jsdoc/valid-types"": [""error""]
   },",Cool! I wonder if this will result in many errors in other files that use JSDoc?,I don't think we need to add `jsdoc` here.
967,"@@ -9,11 +9,29 @@ const instagram = require('./instagram')
 const instagramGraph = require('./instagram/graph')
 const facebook = require('./facebook')
 const onedrive = require('./onedrive')
+const zoom = require('./zoom')
 const { getURLBuilder } = require('../helpers/utils')
 const logger = require('../logger')
 // eslint-disable-next-line
 const Provider = require('./Provider')
 
+// leave here for now until Purest Providers gets updated with Zoom provider",I opened a pr here https://github.com/simov/purest-providers/pull/1 but it doesn't look like Purest providers has been updated in a few years. this was required to get the auth flow working,I don't think we need this anymore.
968,"@@ -9,13 +9,12 @@
 			""titleBar.activeForeground"": ""#ffffff"",
 			""titleBar.activeBackground"": ""#ff009d"",
 		},
-		""files.exclude"": {
+		""search.exclude"": {
 			""website/public/"": true,","sorry, I meant to commit this to master",Why did you change this?
969,"@@ -9,14 +9,40 @@ module.exports = (props) => {
     { 'uppy-Dashboard-files--noFiles': noFiles }
   )
 
+  const fileProps = {
+    // FIXME This is confusing, it's actually the Dashboard's plugin ID
+    id: props.id,
+    error: props.error,
+    // TODO move this to context
+    i18n: props.i18n,
+    log: props.log,
+    info: props.info,
+    // features
+    acquirers: props.acquirers,
+    resumableUploads: props.resumableUploads,
+    individualCancellation: props.individualCancellation,
+    // visual options
+    hideRetryButton: props.hideRetryButton,
+    hidePauseResumeCancelButtons: props.hidePauseResumeCancelButtons,
+    showLinkToFileUploadResult: props.showLinkToFileUploadResult,
+    isWide: props.isWide,
+    metaFields: props.metaFields,
+    // callbacks
+    retryUpload: props.retryUpload,
+    pauseUpload: props.pauseUpload,
+    cancelUpload: props.cancelUpload,
+    toggleFileCard: props.toggleFileCard,
+    removeFile: props.removeFile
+  }
+","Are you picking these specific props, so that only the ones really used in the component are passed, and `shallowEqual` works better?",I'm not sure if this is the right place to put this. I think it would be better to put it in the `fileProps` o
970,"@@ -9,40 +9,40 @@ The Transloadit plugin can be used to upload files to [Transloadit](https://tran
 
 [Try it live](/examples/transloadit/)
 
-The Transloadit plugin uses the [Tus plugin](/docs/tus) for the uploading itself.
-To upload files to Transloadit directly, both the Tus and Transloadit plugins must be used:
-
 ```js
-// The `resume: false` option _must_ be provided to the Tus plugin.
-uppy.use(Tus, {
-  resume: false
-})
 uppy.use(Transloadit, {
-  // Transloadit plugin options
+  service: 'https://api2.transloadit.com',
+  waitForEncoding: false,
+  waitForMetadata: false,
+  importFromUploadURLs: false,
+  alwaysRunAssembly: false,
+  params: null,
+  signature: null,
+  fields: {}
 })
 ```
 
-NB: It is not required to use the `Tus` plugin if [importFromUploadURLs](#importFromUploadURLs) is enabled.
+As of Uppy 0.24 the Transloadit plugin includes the [Tus](/docs/tus) plugin to handle the uploading, so you no longer have to add it manually.","Writing the version number here because this PR will probably be merged before we release the change, and it would be confusing otherwise … versioned docs would be rad, but probably a lot of work!",I don't think we need to specify `alwaysRunAssembly`.
971,"@@ -9,7 +13,10 @@ module.exports = (props) => {
            type=""file"" 
            name=""files[]"" 
            multiple=""true""
-           onchange=${props.handleInputChange} />`
+           onchange=${props.handleInputChange} 
+           ref=${(input) => {
+             inputEl = input
+           }} />`","this `<input>` element was made a separate element so that we could store a reference to it in the `input` variable, but that is not necessary when we have `ref`. it could be inlined in the `${input}` line below.",Why is this needed?
972,"@@ -90,6 +90,12 @@
   margin-right: 12px;
 }
 
+.uppy-Webcam-recordingLength {
+  position: absolute;
+  right: 20px;
+  color: $gray-600;","```suggestion
color: $gray-600;
font-family: SFMono-Regular, Menlo, Monaco, Consolas, ""Liberation Mono"", ""Courier New"", monospace;
```

How about using a mono-spaced font, so the numbers don’t jump when they change? They jump slightly for me in Firefox on MacOS.",I don't think we need this.
973,"@@ -90,6 +91,19 @@ module.exports = class XHRUpload extends Plugin {
       formPost.append(item, file.meta[item])
     })
 
+    let data = opts.data
+    if (typeof opts.data === 'function') {
+      data = opts.data(file)
+    }
+
+    if (data != null) {
+      (typeof data === 'object')
+        ? Object.keys(data).forEach((key) => {
+          formPost.append(key, data[key])
+        })","What's wrong with a if here? Also, `Object.entries` is more appropriate if you need both the key and the value.
```js
Object.entries(data).forEach(entry => formPost.append(...entry))
```
You will probably want to deal with nested objects somehow (probably worth throwing since it's really an invalid behavior and will result in `""[object Object]""` being sent)",Why not just `if (data)`?
974,"@@ -90,6 +91,19 @@ module.exports = class XHRUpload extends Plugin {
       formPost.append(item, file.meta[item])
     })
 
+    let data = opts.data
+    if (typeof opts.data === 'function') {
+      data = opts.data(file)
+    }
+
+    if (data != null) {
+      (typeof data === 'object')
+        ? Object.keys(data).forEach((key) => {
+          formPost.append(key, data[key])
+        })
+        : formPost.append('data', data)","I think we should just require that `data` is an object, and not allow single values.",Why not just `if (data)`?
975,"@@ -90,7 +96,13 @@ module.exports = class XHRUpload extends Plugin {
        * @param {XMLHttpRequest | respObj} response the response object (XHR or similar)
        */
       getResponseError (responseText, response) {
-        return new Error('Upload error')
+        let error = new Error('Upload error')
+
+        if (isNetworkError(response)) {
+          error = new NetworkError(error)",should we be passing the `xhr` object to the `NetworkError` here as well?,Why do we need this?
976,"@@ -909,6 +911,8 @@ class Uppy {
       throw new Error(msg)
     }
 
+    this.log(`Using ${pluginId} v${Plugin.VERSION}`)","might want to check if it exists, most userland plugins won't have it for example",} catch (e) {
977,"@@ -91,7 +91,7 @@ Alternatively, you can also use a pre-built bundle from Transloadit's CDN: Edgly
 
 - [Uppy](https://uppy.io/docs/uppy/) — full list of options, methods, and events.
 - [Plugins](https://uppy.io/docs/plugins/) — list of Uppy plugins and their options.
-- [Companion](https://uppy.io/docs/companion/) — setting up and running an Uppy Companion instance, which adds support for Instagram, Dropbox, Google Drive and remote urls.
+- [Companion](https://uppy.io/docs/companion/) — setting up and running an Companion instance, which adds support for Instagram, Dropbox, Google Drive and remote urls.",`s/an Companion/a Companion/`,I don't think
978,"@@ -923,7 +933,9 @@ module.exports = class Dashboard extends Plugin {
       this.uppy.use(ThumbnailGenerator, {
         id: `${this.id}:ThumbnailGenerator`,
         thumbnailWidth: this.opts.thumbnailWidth,
-        waitForThumbnailsBeforeUpload: this.opts.waitForThumbnailsBeforeUpload
+        waitForThumbnailsBeforeUpload: this.opts.waitForThumbnailsBeforeUpload,
+        // If we don't block on thumbnails, we can lazily generate them
+        lazy: !this.opts.waitForThumbnailsBeforeUpload","Should we add a warning to the ThumbnailGenerator that if `{ waitForThumbnailsBeforeUpload: true, lazy: true }`, - then thumbnails will never get generated?

Otherwise I'd probably remove the .lazy option altogether. Cause:
`lazy: !this.opts.waitForThumbnailsBeforeUpload` is the most common use case,
`{ waitForThumbnailsBeforeUpload: true, lazy: true }` won't work, and
`{ waitForThumbnailsBeforeUpload: false, lazy: false }` - is valid, but I can't see the use case.",I don't think
979,"@@ -93,20 +93,58 @@ module.exports.getURLBuilder = (options) => {
 }
 
 /**
+ * Ensure that a user-provided `secret` is 32 bytes long (the length required
+ * for an AES256 key) by hashing it with SHA256.
  *
- * @param {*} input
- * @param {string} secret
+ * @param {string|Buffer} secret
+ */
+function createSecret (secret) {
+  const hash = crypto.createHash('sha256')
+  hash.update(secret)
+  return hash.digest()
+}
+
+/**
+ * Create an initialization vector for AES256.
+ *
+ * @return {Buffer}
+ */
+function createIv () {
+  return crypto.randomBytes(16)
+}
+
+/**
+ * Encrypt a buffer or string with AES256 and a random iv.
+ *
+ * @param {string} input
+ * @param {string|Buffer} secret
+ * @return {string} Ciphertext as a hex string, prefixed with 32 hex characters containing the iv.
  */
 module.exports.encrypt = (input, secret) => {
-  const cipher = crypto.createCipher('aes256', secret)
-  let encrypted = cipher.update(input, 'utf8', 'hex')
+  const iv = createIv()
+  const cipher = crypto.createCipheriv('aes256', createSecret(secret), iv)
+  let encrypted = iv.toString('hex')
+  encrypted += cipher.update(input, 'utf8', 'hex')
   encrypted += cipher.final('hex')
   return encrypted
 }
 
+/**
+ * Decrypt an iv-prefixed or string with AES256. The iv should be in the first 32 hex characters.
+ *
+ * @param {string} encrypted
+ * @param {string|Buffer} secret
+ * @return {string} Decrypted value.
+ */
 module.exports.decrypt = (encrypted, secret) => {
-  var decipher = crypto.createDecipher('aes256', secret)
-  var decrypted = decipher.update(encrypted, 'hex', 'utf8')
+  // Need at least 32 chars for the iv
+  if (encrypted.length < 32) {
+    throw new Error('Invalid encrypted value. Maybe it was generated with an old Companion version?')
+  }
+
+  const iv = Buffer.from(encrypted.slice(0, 32), 'hex')
+  const decipher = crypto.createDecipheriv('aes256', createSecret(secret), iv)
+  let decrypted = decipher.update(encrypted.slice(32), 'hex', 'utf8')",shouldn't it be `encrypted.slice(16)`? Since it's `<16 random bytes> + encryption`?,This should b
980,"@@ -93,8 +106,72 @@ class CompanionService {
   }
 }
 
+const express = require('express')
+class StaticServerService {
+  constructor ({ folders, staticServerPort = 4567 }) {
+    this.folders = folders
+    this.port = staticServerPort
+  }
+
+  async onPrepare () {
+    if (!this.folders) return
+
+    this.app = express()
+
+    for (const desc of this.folders) {
+      this.app.use(desc.mount, express.static(desc.path))
+    }
+
+    const listen = promisify(this.app.listen.bind(this.app))
+
+    this.server = await listen(this.port)
+  }
+
+  async onComplete () {
+    if (this.server) {
+      const close = promisify(this.server.close.bind(this.server))
+      await close()
+    }
+    this.app = null
+  }
+}
+
+const tus = require('tus-node-server')","`master.tus.io` is `tusd` and that is the golden up-to-date tus integration, so we are loosing a bit of that here. `tus-node-server` is outdated, according to Marius. But I see the benefit of not relying on `master.tus.io` of course.",Why do we nee
981,"@@ -934,7 +942,15 @@ class Uppy {
    *
    * @return {Promise}
    */
-  upload (forceUpload) {
+  upload () {
+    if (!this.plugins.uploader) {
+      this.log('No uploader type plugins are used', 'warning')
+    }
+
+    if (Object.keys(this.state.files).length === 0) {
+      this.log('No files have been added', 'warning')
+    }","We could do this for now, but this is not always a mistake (eg. transloadit plugin w/ an assembly that imports from somewhere). ",Why do we nee
982,"@@ -94,32 +94,32 @@ exports.getMimeType = (item) => {
 }
 
 exports.getId = (item) => {
-  if (item.file_type && item.file_type === 'TIMELINE') {
-    return `${encodeURIComponent(item.meeting_id)}__TIMELINE`
+  if (item.file_type && item.file_type === 'CC') {
+    return `${encodeURIComponent(item.meeting_id)}__CC__${encodeURIComponent(item.recording_start)}`",we do this to differentiate between the multiple cc files for when the recording is stopped / restarted multiple times within a single meeting ,This should b
983,"@@ -95,6 +103,10 @@ module.exports = class Plugin {
     }
   }
 
+  focus () {
+    return
+  }",Do we need `focus` for something after all?,
984,"@@ -95,7 +95,7 @@ class Uppy {
       meta: Object.assign({}, this.opts.meta),
       info: {
         isHidden: true,
-        type: '',
+        type: 'info',
         msg: ''",This property name was changed to `message` further down but not here,Why did you c
985,"@@ -96,5 +103,41 @@ module.exports = class Client {
   getAssemblyStatus (url) {
     return fetch(url)
       .then((response) => response.json())
+      .catch((err) => this._reportError(err, { url }))
+  }
+
+  submitError (err, { endpoint, instance, assembly }) {
+    return fetch('https://status.transloadit.com/client_error', {
+      method: 'post',
+      body: JSON.stringify({
+        endpoint,
+        instance,
+        assembly_id: assembly,
+        ip: null, // can't this just be done by statuspage?
+        agent: typeof navigator !== 'undefined' ? navigator.userAgent : '',",can we send the Transloadit-Client along with this?,I don't think
986,"@@ -96,5 +103,41 @@ module.exports = class Client {
   getAssemblyStatus (url) {
     return fetch(url)
       .then((response) => response.json())
+      .catch((err) => this._reportError(err, { url }))
+  }
+
+  submitError (err, { endpoint, instance, assembly }) {
+    return fetch('https://status.transloadit.com/client_error', {
+      method: 'post',
+      body: JSON.stringify({
+        endpoint,
+        instance,
+        assembly_id: assembly,
+        ip: null, // can't this just be done by statuspage?
+        agent: typeof navigator !== 'undefined' ? navigator.userAgent : '',
+        error: err.message","do we only have a string error, no type or constant or other payload that we can use to more easily identify them?",I don't think
987,"@@ -96,6 +100,10 @@ const resultPromise = transloadit.upload(files, {
     template_id: ''
   }
 })
+resultPromise.then((bundle) => {
+  bundle.transloadit // Array of Assembly statuses
+  bundle.results // Array of all Assembly results
+})
 ```
 ",👍 ,This should b
988,"@@ -96,6 +97,16 @@ module.exports = class Tus10 extends Plugin {
           updatedFiles[file] = updatedFile
         })
         this.core.setState({files: updatedFiles})
+        return
+      case 'retryAll':
+        inProgressUpdatedFiles.forEach((file) => {
+          const updatedFile = Object.assign({}, updatedFiles[file], {
+            isPaused: false,
+            error: null
+          })
+          updatedFiles[file] = updatedFile
+        })
+        this.core.setState({files: updatedFiles})","Ye, this only touches core. I think all of these `case`s would make more sense to do in core, controlled by events. (`core:pause-all`, `core:resume-all`, `core:retry-all`) Same for `case 'toggle':`, which seems to respond to `core:upload-pause`.",Why do we nee
989,"@@ -96,7 +96,7 @@ const uppy = Uppy({
 
 You can also provide your own logger object: it should expose `debug`, `warn` and `error` methods, as shown in the examples below.
 
-By default `logger` is set to `nullLogger`, which does nothing:
+Here’s an example of `logger` that does nothing:","```suggestion
Here’s an example of a `logger` that does nothing:
```",I don't think
990,"@@ -96,9 +96,18 @@ module.exports = class AwsS3Multipart extends Plugin {
   createMultipartUpload (file) {
     this.assertHost()
 
+    let metadata = {}
+
+    Object.keys(file.meta).map(key => {
+      if (file.meta[key] !== null) {","I think it'd be best if we also ignored `undefined` here, else the toString() line will crash:
```suggestion
      if (file.meta[key] != null) {
```",This should b
991,"@@ -979,6 +979,13 @@ class Uppy {
       }
     })
 
+    // If file is a google doc uploaded by companion
+    // file.size is null
+    if (data.bytesTotal === data.bytesUploaded && !file.size) {","some nitpicks 😇 
you've actually addressed a broader issue here, as photos from instagram and facebook also don't have a size. so we can be a bit more accurate in the comment by mentioning remote providers in general:

```suggestion
    // Remote providers sometimes don't tell us the file size,
    // but we can know how many bytes we uploaded once the upload is complete.
    if (data.bytesTotal === data.bytesUploaded && file.size == null) {
```

i'd also change the `!file.size` to `file.size == null`: we care about unknown file sizes here, not 0-sized files, best to be explicit about it.",I don't think
992,"@@ -98,6 +99,10 @@ module.exports = class Instagram extends Plugin {
   }
 
   getItemName (item) {
+    if (item && item['created_time']) {
+      let date = new Date(item['created_time'] * 1000).toUTCString()
+      return `Instagram ${date}`
+    }","yes, it's nice. I'm not sure why I didn't add it earlier. @arturi ",Why not just `return item['name']`?
993,"@@ -98,7 +98,7 @@ This takes your `server` instance and your Uppy [Options](#Options) as parameter
 
 ### Running as a standalone server
 
-> Please ensure that the required environment variables are set before running/using Companion as a standalone server. See [Configure Standalone](#Configure-Standalone) for the variables required.
+> Please ensure that the required environment variables are set before running/using Companion as a standalone server. See [Configure Standalone](#configuring-a-standalone-server) for the variables required.
 ","```suggestion
> Please ensure that the required environment variables are set before running/using Companion as a standalone server. See [Configure Standalone](#Configuring-a-standalone-server) for the variables required.
```",I don't think we should change this
994,"@@ -98,8 +98,8 @@ This takes your `server` instance and your Uppy [Options](#Options) as parameter
 
 ### Running as a standalone server
 
-> Please ensure that the required environment variables are set before running/using Companion as a standalone server. See [Configure Standalone](#Configure-Standalone) for the variables required.
-
+> Please ensure that the required environment variables are set before running/using Companion as a standalone server. See [Configure Standalone](#configuring-a-standalone-server) for the variables required.","```suggestion
> Please ensure that the required environment variables are set before running/using Companion as a standalone server. See [Configure Standalone](#Configuring-a-standalone-server) for the variables required.
```",I don't think we should change this
995,"@@ -98,8 +98,8 @@ This takes your `server` instance and your Uppy [Options](#Options) as parameter
 
 ### Running as a standalone server
 
-> Please ensure that the required environment variables are set before running/using Companion as a standalone server. See [Configure Standalone](#Configure-Standalone) for the variables required.
-
+> Please ensure that the required environment variables are set before running/using Companion as a standalone server. See [Configure Standalone](#configuring-a-standalone-server) for the variables required.
+> Please ensure that the required environment variables are set before running/using Companion as a standalone server. See [Configure Standalone](#Configuring-a-standalone-server) for the variables required.","```suggestion
```",I don't think this is correct.
996,"@@ -987,7 +956,7 @@ class Uppy {
   createUpload (fileIDs) {",i think `createUpload` and `removeUpload` should also be private,void
997,"@@ -99,6 +99,7 @@
     ""webdriverio"": ""^4.10.1""
   },
   ""dependencies"": {
+    ""@xkeshi/image-compressor"": ""^0.5.3"",","the latest is `1.0.0`, not `0.5.3` 😉 ","""@xkeshi/image-compressor"": ""^0.5.3"
998,"@@ -99,7 +99,7 @@ module.exports = function fileItem (props) {
         }
       </h4>
       <div class=""UppyDashboardItem-status"">
-        ${file.data.size && html`<div class=""UppyDashboardItem-statusSize"">${prettyBytes(file.data.size)}</div>`}
+        ${isNaN(file.data.size) ? '' : html`<div class=""UppyDashboardItem-statusSize"">${prettyBytes(file.data.size)}</div>`}","We are trying to support IE 10-11, so we’ll need a polyfill for this one, I think.",I'm not sure if this is the best wa
999,"@@ -99,9 +99,9 @@ module.exports = class Tus extends Plugin {
    *
    * @param {string} fileID
    */
-  resetUploaderReferences (fileID) {
+  resetUploaderReferences (fileID, shouldTerminate) {","In the S3 plugin I used an options object `{ abort: true }` for this:

https://github.com/transloadit/uppy/blob/84c3eda830bb4cd07e6ae8da2f9f53ffcc07ff3b/packages/%40uppy/aws-s3-multipart/src/index.js#L56-L60

might be good to do the same here for consistency reasons?",`shouldTerminate` -> `terminate`
